[{"categories":["Soul Dance"],"content":"ğŸš‡ ä¸Šï¼ŒğŸƒğŸ» â€æ—¶ï¼Œæ¬ ğŸ§± ä¸­â€¦â€¦æˆ´èµ·è€³æœºï¼Œå°±æ˜¯ä½ ä¸€ä¸ªäººçš„èˆå°ï¼åœ¨è¿™é‡Œï¼Œå¸Œæœ›ä½ èƒ½æ‰¾åˆ°ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ ç‹¬ä¸€æ— äºŒçš„å†…å¿ƒæˆï¼ â€œæˆ‘ä»¬ä¸å–œæ¬¢åšé‡å¤çš„äº‹ã€‚ä½†æ— è®ºæˆ´ç€å¤´ç›”æˆ–åˆ›é€ ä¸€ä¸ªæ–°è§’è‰²éƒ½æŠŠè™šæ„ä¸çœŸå®ç»“åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬æ‰€åšçš„éå‡¡çš„äº‹å……æ»¡äº†æ¬¢ä¹ã€‚æˆ‘ä»¬å¾ˆé«˜å…´èƒ½å›é¦ˆç»™ç¾¤ä¼—ã€‚â€ ğŸ¤ª æ¬¢è¿æ¥åˆ°ç–¯å­çš„ä¸–ç•Œ~ï¼ŒæŒç»­æ›´æ–°ä¸­â€¦ ","date":"2023-02-15","objectID":"/souldance/:0:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Daft Punk - Harder, Better, Faster, Stronger ğŸ“Œ ","date":"2023-02-15","objectID":"/souldance/:1:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Daft Punk - Giorgio by Moroder ğŸ“Œ ","date":"2023-02-15","objectID":"/souldance/:2:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Michael Jackson - Heal The World ğŸ“Œ ","date":"2023-02-15","objectID":"/souldance/:3:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Jovan - That Kind Of Love ","date":"2023-02-15","objectID":"/souldance/:4:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"PREP - As It Was ","date":"2023-02-15","objectID":"/souldance/:5:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Blxst - Chosen ","date":"2023-02-15","objectID":"/souldance/:6:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Lazer Boomerang - Time To Pretend ","date":"2023-02-15","objectID":"/souldance/:7:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Jessfield Park - The Shanghai Restoration Project ","date":"2023-02-15","objectID":"/souldance/:8:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Claire Ridgely - Busy boy ","date":"2023-02-15","objectID":"/souldance/:9:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Emotional Oranges - West Coast Love ","date":"2023-02-15","objectID":"/souldance/:10:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Dabeull - Glitter Fonk ","date":"2023-02-15","objectID":"/souldance/:11:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"ç”˜è‰ç‰‡r - Free Loop ","date":"2023-02-15","objectID":"/souldance/:12:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Austin Mahone - Better With You ","date":"2023-02-15","objectID":"/souldance/:13:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"í€ì¹˜(Punch) - Another Day ","date":"2023-02-15","objectID":"/souldance/:14:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Parcels ~ Overnight ","date":"2023-02-15","objectID":"/souldance/:15:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"DeJ Loaf - No Fear ","date":"2023-02-15","objectID":"/souldance/:16:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"HONNE - no song without you ","date":"2023-02-15","objectID":"/souldance/:17:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"JORDANN - CafÃ© Speed ","date":"2023-02-15","objectID":"/souldance/:18:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Jewelz Feat. Stine Bee â€“ Last Night ","date":"2023-02-15","objectID":"/souldance/:19:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Lucky Luke - Cooler Than Me ","date":"2023-02-15","objectID":"/souldance/:20:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Next Level Lyrics-A$ton Wyld ","date":"2023-02-15","objectID":"/souldance/:21:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Fat Joe, Remy Ma - All The Way Up ","date":"2023-02-15","objectID":"/souldance/:22:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Chago Williams Â· Wilson Ramos - Im Going ","date":"2023-02-15","objectID":"/souldance/:23:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"SAFIA - Bye Bye ","date":"2023-02-15","objectID":"/souldance/:24:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"DJ Pablo - One B-Boy ","date":"2023-02-15","objectID":"/souldance/:25:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Lady Gaga - Bloody Mary ","date":"2023-02-15","objectID":"/souldance/:26:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"DGTO - Some People Donâ€™t Fall ","date":"2023-02-15","objectID":"/souldance/:27:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Thelma Houston - If You Feel It ","date":"2023-02-15","objectID":"/souldance/:28:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Dan + Shay, Justin Bieber - 10,000 Hours ","date":"2023-02-15","objectID":"/souldance/:29:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Odyssey - Together 2014 Version ","date":"2023-02-15","objectID":"/souldance/:30:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"Tamia - Officially Missing You ","date":"2023-02-15","objectID":"/souldance/:31:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"YOASOBI - ç¾¤é’ ","date":"2023-02-15","objectID":"/souldance/:32:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"è«‹å¤ (CHUNG HA) - åœ¨é‚£å°½å¤´çš„ä½  ","date":"2023-02-15","objectID":"/souldance/:33:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"èµµé›· - æˆ‘è®°å¾— ","date":"2023-02-15","objectID":"/souldance/:34:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"å¶æ–¯æ·³ - æˆ‘æ›¾é‡åˆ°ä¸€æŸå…‰ ","date":"2023-02-15","objectID":"/souldance/:35:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"éƒ­é¡¶ - æ°´æ˜Ÿè®° ","date":"2023-02-15","objectID":"/souldance/:36:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"å‘Šäº”äºº - å¥½ä¸å®¹æ˜“ ","date":"2023-02-15","objectID":"/souldance/:37:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["Soul Dance"],"content":"DryJo - å‡±è¿ªæ‹‰å…‹æ•ç¯·é›»å‹•è»Š ","date":"2023-02-15","objectID":"/souldance/:38:0","tags":["Soul Dance"],"title":"ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ","uri":"/souldance/"},{"categories":["ç¢ç¢å¿µ"],"content":"2023 ","date":"2023-02-15","objectID":"/month/:1:0","tags":["ç¢ç¢å¿µ"],"title":"è ¢ Q ç¢ç¢å¿µ","uri":"/month/"},{"categories":["ç¢ç¢å¿µ"],"content":"2023-02 02-01 02-02 Damn cool!!! 02-03 node.js è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚ 02-04 ğŸ˜  æ— çŸ¥å’Œè¿‡åº¦çš„å•†ä¸šå®£ä¼ å½¢æˆäº†å¥åº·é—®é¢˜å¿…ç„¶å±æœºç”Ÿå‘½çš„å¤§ä¼—è®¤çŸ¥ï¼Œä»ç»´æŒç”Ÿå‘½çš„äººæ€§åº•å±‚ä¸Šæ»‹ç”Ÿäº†å¿ƒç†å±‚é¢çš„ææ…Œï¼Œé©±åŠ¨äº†ç›²ç›®çš„å°±åŒ»è¡ŒåŠ¨ã€‚ 02-05 ğŸ˜œ è½»æ–­é£Ÿå‰çš„æœ€åä¸€é¡¿å¤§é¤ã€‚ 02-06 He deserved it. 02-07 ğŸ‰ğŸ‰ğŸ‰!!! æ–°æŠ€èƒ½ âˆšï¼Œå®Œæˆäº† Electron + Vue3 çš„ç›¸å…³å­¦ä¹ ã€‚ Github Profile æ¢äº†æ–°çš„æ ·å­ã€‚ ğŸ¤” æç‚¹ä»€ä¹ˆå¥–åŠ±ä¸‹è‡ªå·±å‘¢ï¼Ÿ 02-08 ä»€ä¹ˆæ˜¯å¼€ä¼šï¼Ÿ ä¸€ç§æˆå¹´äººä»¥åˆæ³•é¢†å–å·¥èµ„ä¸ºç›®çš„ï¼Œæ—¢èƒ½å ç”¨å·¥æ—¶åˆèƒ½é™ä½åŠ³åŠ¨å¼ºåº¦çš„é›†ä½“æ´»åŠ¨ã€‚ â€” Mr é«˜æº 02-09 02-10 Nacosï¼Ÿ ğŸ¤” 02-11 å¤§åŠå¹´æ²¡åšé¥­ï¼Œå¿ƒè¡€æ¥æ½®æƒ³æ•´ä¸ªå°ç‚’è‚‰ï¼Œå’¸å“­äº†ğŸ˜­ã€‚ã€‚ã€‚ã€‚ 02-12 â€œWhen you have children, you always have family. They will always be your priority, your responsibility. And a man, a man provides. And he does it even when heâ€™s not appreciated or respected or even loved. He simply bears up and he does it. Because heâ€™s a man.â€ ğŸ¤¯ 02-13 ğŸ¤£ 02-14 ps1: ä¸Šåˆå¼€å¼€å¿ƒå¿ƒåœ° coding ä¸­ï¼Œè¢« call äº†å¥½å‡ æ¬¡çš„è¯ˆéª—ç”µè¯ï¼ŒæŒ‚æ–­å°±æ‰“ï¼ŒæŒ‚æ–­å°±æ‰“ï¼ŒğŸ¤·ğŸ»â€â™€ï¸æ¥å¬äº†ï¼Œç†Ÿæ‚‰çš„å£°éŸ³ï¼Œè¿˜æ˜¯é‚£ä¸ªäººï¼Œâ€œä½ æ˜¯ xx æ˜¯å§ï¼Œæˆ‘æ˜¯å»ŠåŠå…¬å®‰å±€çš„ï¼Œxxxx åœ°å€ï¼Œæ‹¿ä¸Šä½ çš„èº«ä»½è¯æ¥å…¬å®‰å±€ä¸€è¶Ÿâ€ã€‚ æˆ‘ï¼šâ€œå“¥ï¼Œå»å¹´æˆ‘å°±æ¥åˆ°è¿‡ä½ çš„ç”µè¯äº†ï¼ŒçœŸçš„æŒºæ— èŠçš„ï¼Œå¹²ç‚¹æ­£å…«ç»çš„äº‹æƒ…å§ï¼Œåˆ«å†éª—äººäº†â€ã€‚ æŒ‚æ–­äº†ï¼Œæ²¡æœ‰å†æ‰“æ¥ï¼Œå‘¨å›´åŒäº‹çˆ†ç¬‘ ğŸ˜³ã€‚ ps2: æœ‰é‚£ä¹ˆä¸€ç§äººçœŸçš„æ˜¯æŒºæ— è¯­çš„ï¼Œå°±æ´»è¯¥æ‰¾ä¸åˆ°å·¥ä½œï¼Œè‡ªå·±çš„äº‹è‡ªå·±éƒ½ä¸ä¸Šå¿ƒï¼Œç®€å†å†™çš„ç¨€çƒ‚ï¼Œä½ ä¸æƒ³æ‰¾å·¥ä½œå°±ä¸è¦å»éº»çƒ¦åˆ«äººç»™ä½ å†…æ¨ï¼Œç»™ä½ æ¨äº†ï¼Œåˆå¼€å§‹å«Œå¼ƒè¿™å«Œå¼ƒé‚£ï¼Œå«Œå¼ƒå…¬å¸ï¼Œå«Œå¼ƒå·¥èµ„é«˜ä¸é«˜ï¼Œå«Œå¼ƒåŠ ä¸åŠ ç­ï¼Œå¯¹è‡ªå·±å½“ä¸‹æ‰€åœ¨çš„å…¬å¸åˆæ€¨å£°æ€¨æ°”ï¼ŒçœŸçš„æ˜¯ ğŸ¤¡ã€‚ä½ è¿™ä¹ˆ ğŸ‚ï¼Œè‡ªå·±å»æ‰¾å§ï¼Œå¤§å®¶éƒ½æŒºå¿™çš„ï¼Œå¤šç®¡ä¸€åˆ†é’Ÿéƒ½æ˜¯æµªè´¹ç”Ÿå‘½ ğŸ¤¨ (ï¼šğŸ˜  ä¹Ÿéª‚ç»™æˆ‘è‡ªå·±å¬ï¼Œè°¨è®°ï¼ã€‚ æ€»ç»“ï¼šä»Šå¤©çœŸæ˜¯ emo çš„ä¸€å¤© ğŸ¤¦ğŸ»â€â™€ï¸ã€‚ 02-15 ğŸ¥² æœ‰æ²¡æœ‰å¯Œå©†æ„¿æ„æ”¶å…»è¿™ä¸ªé€†å­çš„ ","date":"2023-02-15","objectID":"/month/:1:1","tags":["ç¢ç¢å¿µ"],"title":"è ¢ Q ç¢ç¢å¿µ","uri":"/month/"},{"categories":["ç¢ç¢å¿µ"],"content":"2023-01 01-01 å»æˆéƒ½SKPé€›ä¸€åœˆï¼Œæ‰èƒ½çŸ¥é“è‡ªå·±æœ‰å¤šç©·ğŸ˜­ 01-02 ä¹”å¦¹çš„æ¼”æŠ€è¿˜æ˜¯å¯ä»¥ï¼Œä¸€å£æ°”è¿½å®Œäº†ï¼ŒæœŸå¾…ç¬¬äºŒå­£ğŸ˜„ 01-03 01-04 è¯»æ–‡å­¦ç»å…¸ä»¥æ¥æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼šæ…¢æ…¢çœ‹æ·¡ç”Ÿä¸æ­»ã€‚ 01-05 åšå‰ç«¯æ­»è·¯ä¸€æ¡ï¼Œåç«¯ä¹Ÿæ˜¯ã€‚ 01-06 æˆ–è®¸æ›¾ç»æˆ‘ä»¬éƒ½æƒ³è‡ªå·±æ˜¯é½å¤©å¤§åœ£ï¼Œå¯é•¿å¤§åæ‰å‘ç°ï¼Œå…¶å®æˆ‘ä»¬éƒ½åªæ˜¯ä¸€åªåŠªåŠ›ç”Ÿå­˜çš„å°çŒªå¦–ã€‚ 01-07 ä¸å¥½å¥½çœ‹æ–‡æ¡£ç³»åˆ—ğŸ˜­ã€‚ã€‚åŒ…å­éƒ½åƒå®Œäº†ï¼Œæ‰çœ‹åˆ°è¦æŒ‰ç…§é¡ºåºåƒï¼Œå¯æƒœè‚šå­åƒä¸ä¸‹äº†ï¼Œä¸ç„¶å†æ¥ä¸€ç¬¼ã€‚ å¥½æƒ³çŸ¥é“å¦‚æœè¿™æ ·åƒï¼Œä¼šä¸ä¼šè®©çµé­‚å¾—åˆ°å‡åğŸ¤”ã€‚ 01-08 åœ¨é£æœºä¸Šçœ‹äº†ã€Šä¸€æ¡ç‹—çš„ä½¿å‘½2ã€‹ï¼Œå“­å¾—ç¨€é‡Œå“—å•¦çš„ğŸ˜­ã€‚ å¤šå¸Œæœ›é¥¼å¹²ğŸ±ä¹Ÿå¯ä»¥ä¸€ç›´å†ç»ç”Ÿæ­»è½®å›æ‰¾åˆ°æˆ‘å¹¶é™ªä¼´ç€æˆ‘ï¼Œç›´åˆ°æˆ‘èµ°åˆ°ç”Ÿå‘½çš„ç»ˆç‚¹ã€‚ 01-09 çŠ¹è±«äº†å¾ˆä¹…å¾ˆä¹…ï¼Œç»ˆäºä¸‹å®šå†³å¿ƒå…¥æ‰‹ AJ æ‰£ç¢ç¯®æ¿ğŸ˜ã€‚ é’±ä¸èŠ±å°±æ˜¯ä¸€å¼ çº¸ï¼ŒèŠ±äº†æ‰æ˜¯é’±ğŸ˜³ã€‚ 01-10 å…¬å¸äº§å“æ€»ç›‘ä¸ºäº†æ‹è€æ¿ğŸ´å±ï¼Œä¸œè¥¿è¿˜æ²¡åšå®Œå°±ç€æ€¥ç»™è€æ¿ğŸ‘ï¼Œç„¶åç™½å±äº†ï¼ŒğŸ¦·éƒ½ç¬‘æ‰äº†ã€‚ 01-11 é—ºèœœå¤±æ‹äº†ï¼Œè¢«è¿«å¬äº†3ä¸ªå°æ—¶çš„å¥¹å’Œå¥¹å‰ç”·å‹çš„çˆ±æƒ…æ•…äº‹ğŸ¤•ã€‚ 01-12 åŸæ¥å¦ˆå¦ˆä¹Ÿå–œæ¬¢å¬ä½ ç»™å¥¹è®²åœ¨å¤–é¢é‡åˆ°çš„æ–°é²œäº‹å„¿ğŸ˜Šã€‚ 01-13 å¡”å‹’å¸ƒè¯´è¿‡ï¼šâ€œ21ä¸–çºªæœ‰ä¸‰å¤§æ¯’å“ï¼šæµ·æ´›å› ã€ç¢³æ°´åŒ–åˆç‰©ã€æ¯æœˆå‘ä¸€æ¬¡çš„å·¥èµ„ã€‚â€ 01-14 ç›´å‘å›æ¥çš„é‚£ä¸€åˆ»ï¼Œå¦‚é‡Šé‡è´ŸğŸ˜Šã€‚ 01-15 ğŸ˜´ğŸ˜´ğŸ˜´ 01-16 æ‰“æ‰«å«ç”Ÿã€‚ 01-17 ä¸–ç•Œä¸Šæ€ä¹ˆä¼šæœ‰IUè¿™ä¹ˆå¯çˆ±çš„ğŸ‘§ğŸ»ã€‚ 01-18 é‡æ¸©ã€Šå¾·é²çº³é…’åº—ã€‹ï¼Œæ¯ä¸ªäººçœ‹ä¼¼ç†æ™ºåˆå†·é™ï¼Œä½†å…¶å®å†…å¿ƒä¹Ÿæœ‰ç€æœ€è„†å¼±çš„ä¸€é¢ï¼Œæ²¡æœ‰äº†ä¾é æ—¶ï¼Œåªèƒ½ç”¨åšå¼ºæ¥æ©ç›–è‡ªå·±çš„è„†å¼±ã€‚ 01-19 å½©å¦†çš„å°½å¤´æ˜¯è£¸å¦† çƒ«å‘çš„å°½å¤´æ˜¯é»‘é•¿ç›´ ç¾ç”²çš„å°½å¤´æ˜¯è‚‰ç²‰è‰² åŒ»ç¾çš„å°½å¤´æ˜¯å…»ç”Ÿ æ¶ˆè´¹ä¸»ä¹‰çš„å°½å¤´æ˜¯æ–­èˆç¦» é“ç†çš„å°½å¤´æ˜¯å¤§é“è‡³ç®€ ä¸‡äº‹çš„å°½å¤´æ˜¯å°½äººäº‹å¬å¤©å‘½ äººç”Ÿçš„å°½å¤´æ˜¯ä¸€ä¸ªäººé¢å¯¹å­¤ç‹¬ 01-20 ğŸ¤”å‘ç°ä¸€ä¸ªæŒºæœ‰æ„æ€çš„äº‹æƒ…ï¼Œå› ä¸ºè¦å›è€å®¶è¿‡å¹´ï¼Œç»™ğŸ±å‡†å¤‡äº†ä¸¤ä¸ªçŒ«ç ‚ç›†ï¼Œè¿™å®¶ä¼™ç«Ÿç„¶è‡ªå·±ä¸»åŠ¨åˆ†ç±»äº†ï¼Œä¸€ä¸ªä¸“é—¨ç”¨æ¥ğŸ’§ï¼Œä¸€ä¸ªä¸“é—¨ç”¨æ¥ğŸ’©ã€‚ 01-21 æ–°å¹´å¿«ä¹é¸­ğŸ†ã€‚ 01-22 ğŸ¥°çš„ä¸€å¤©ï¼Œè€å¼Ÿç»™ä¹°äº†çƒ¤é¸¡å’ŒğŸ§‹ï¼Œé™ªçˆ¸çˆ¸å¦ˆå¦ˆä¸€èµ·çœ‹ğŸ“ºã€‚ 01-23 é£æ‰¬çš„ğŸ‘–ã€‚ 01-24 4ä¸ªäººä¸€èµ·å–ğŸºï¼Œåäº†1ä¸ªï¼Œæ™•äº†2ä¸ªã€‚ 01-25 01-26 I am sorry MJâ€¦ itâ€™s 2023 and the world is still cruel. 01-27 åœ¨ğŸš„ä¸Šè¯»ã€Šè§£å¿§æ‚è´§åº—ã€‹ï¼Œè¦æ˜¯ä¸–ç•Œä¸ŠçœŸçš„æœ‰ä¸€å®¶è¿™æ ·çš„åº—å°±å¥½äº†ã€‚ 01-28 ä¸Šç­ç¬¬ä¸€å¤©ï¼ŒğŸ˜´ã€‚ 01-29 ğŸ˜ ã€‚ 01-30 ä¸€æœ¬ä¹¦ï¼Œå¯ä»¥æŠ˜å°„ä¸€ä¸ªå°ä¸–ç•Œï¼Œä¹Ÿå¯ä»¥æˆä¸ºä¸€éƒ¨åˆ†äººçš„æœ‹å‹ã€‚ 01-31 è¢«å…¬å¸çš„ UI æŠ˜ç£¨æƒ¨äº†ğŸ˜­ã€‚ ","date":"2023-02-15","objectID":"/month/:1:2","tags":["ç¢ç¢å¿µ"],"title":"è ¢ Q ç¢ç¢å¿µ","uri":"/month/"},{"categories":["ç¢ç¢å¿µ"],"content":"2022 ","date":"2023-02-15","objectID":"/month/:2:0","tags":["ç¢ç¢å¿µ"],"title":"è ¢ Q ç¢ç¢å¿µ","uri":"/month/"},{"categories":["ç¢ç¢å¿µ"],"content":"2022-12 12-01 é’±éƒ½èµ·åºŠäº†ï¼Œä½ è¿˜ä¸èµ·ã€‚ 12-02 åšæŒæ¯å‘¨ä¸­å¼ºåº¦è¿åŠ¨150åˆ†é’Ÿ/é«˜å¼ºåº¦è¿åŠ¨70åˆ†é’Ÿï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªæ¼‚äº®çš„å¤§æµ·é©¬ä½“ã€‚ 12-03 äººå¯ä»¥å¹³åº¸ï¼Œä½†ä¸èƒ½è¸©ç€äººå¾€ä¸Šï¼Œä¹Ÿä¸èƒ½é€šè¿‡è´¬ä½å’Œå¦å®šä»–äººï¼Œæ¥å®ç°è‡ªå·±çš„ä»·å€¼ã€‚ 12-04 è¢«æ¬²æœ›è’™è”½åŒçœ¼çš„äººï¼Œå¾€å¾€åˆ†ä¸æ¸…çœ¼å‰çš„æ˜¯é£Ÿç‰©è¿˜æ˜¯è¯±é¥µã€‚ 12-05 è¿™æ”¯çƒé˜Ÿå°±åƒä¸€ä¸ªå¹³å‡¡åŠªåŠ›çš„æ™®é€šäººçš„ä¸€ç”Ÿã€‚ä»–ä¸æ˜¯æœ€å¼ºæœ€å‡ºå½©çš„ï¼Œä½†ä½ æƒ³èµ¢ä»–ä¹Ÿä¸å®¹æ˜“ï¼Œå› ä¸ºä»–æœ‰å¼ºå¤§çš„å®šåŠ›å’Œæ‹¼åŠ²ï¼Œæ‰“ä¸å€’å‹ä¸å®ï¼Œè¿˜èƒ½ç»å¤„é€¢ç”Ÿã€‚ 12-06 ä¸åˆ°æœ€åä¸€åˆ»ï¼Œéƒ½ä¸ç®—çœŸæ­£ç»“æŸã€‚ 12-07 ä½ çŸ¥é“å…»åŠ³å·¥ä¸ºä»€ä¹ˆä¸èƒ½è®©ä»–ä»¬ä¸æ„åƒç©¿å—ï¼Ÿå› ä¸ºä»–ä»¬ä¼šä»¥ä¸ºè‡ªå·±æ‰æ˜¯ä¸»äººã€‚ 12-08 å…¬å¸æœ‰äººğŸ‘äº†ã€‚ã€‚ã€‚ 12-09 ç¥ğŸ±å‹ä¸­äº†ğŸ‡­ğŸ‡· 12-10 å…¬å¸åç«¯å†™çš„çƒ‚æ¥å£ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½ç”¨ï¼Œå°±æ··å§ 12-11 ã€Šçº¸æˆ¿å­Â·ç¬¬äºŒå­£ã€‹ â€œçº¸æˆ¿å­æ˜¯äººæ°‘çš„ï¼â€ å°çº¢çŒªé‡Œè£‚å¼€çš„éƒ½æ˜¯ğŸ’°å•Šã€‚ã€‚ 12-12 ğŸ¥¶ğŸ¥¶ğŸ¥¶ 12-13 å—“å­å†’çƒŸäº†ã€‚ 12-14 ğŸ‘äº†ã€‚ 12-15 å‘çƒ§ä¸­ã€‚ 12-16 å‘çƒ§ä¸­ã€‚ 12-17 å‘çƒ§ä¸­ã€‚ 12-18 å’Œé¥¼å¹²ä¸€èµ·æ™’â˜€ï¸ï¼Œåœ°ä¸Šé“ºä¸Šæ–°æ¯¯å­ï¼ŒğŸ±åœ¨åœ°ä¸Šè¶´ç€å°±ä¸ä¼šğŸ¥¶äº†ã€‚ 12-19 ğŸ”¥ã€‚ 12-20 12-21 åˆ†äº«æœ€è¿‘å¾ˆç«çš„ä¸€æ®µåƒµå°¸èˆï¼Œæ¥è‡ªã€Šæ˜ŸæœŸä¸‰ã€‹ 12-22 æ„Ÿè°¢ç‘å¹¸å’–å•¡å’ŒåŒäº‹çš„è‰è“ç³–ï¼Œå‘³è§‰å’Œå—…è§‰å›æ¥äº†ğŸ˜„ 12-23 ç†¬å¤œçœ‹å®Œäº†ã€Šæ˜ŸæœŸä¸‰ã€‹ï¼Œå–œæ¬¢è¿™ç§æš—é»‘ğŸ‘§ğŸ»ã€‚ 12-24 ğŸ 12-25 Merry ChristmasğŸ„ 12-26 è¿™æœ¬ä¹¦å¾ˆæœ‰æ„æ€ã€‚ 12-27 IoTSharpå®˜ç½‘æ–°é²œå‡ºç‚‰ã€‚ 12-28 å°‘å¹´å»æ¸¸è¡ï¼Œä¸­å¹´æƒ³æ˜è—ï¼Œè€å¹´åšå’Œå°šã€‚ 12-29 çƒ¤æ— åŒï¼Œå¾ˆå¥½åƒå‘¦ğŸ˜„ 12-30 å’Œå®¶é‡Œäººä¿æŒè”ç³»ï¼Œä»–ä»¬æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šæœ€çˆ±ä½ çš„äººã€‚ 12-31 2022 å¹´çš„æœ€åä¸€å¤©ï¼Œè¿™ä¸€å¹´ï¼Œæµ‘æµ‘å™©å™©ï¼ŒåŸºæœ¬ä»€ä¹ˆéƒ½æ²¡æœ‰å¹²æˆã€‚å¸Œæœ›æ˜å¹´å¯ä»¥å¤šåšäº›æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚ 2023 å¹´çš„ç›®æ ‡ï¼š å‡é‡åˆ° 47 å…¬æ–¤å·¦å³ æå‡ç¬¬ä¸€æŠ€èƒ½ï¼Œreactã€vue3ã€typescript ç­‰ å¼€å§‹ç¬¬äºŒæŠ€èƒ½ï¼ŒSTEAM32ã€Cã€C++ ç­‰ å­¦ä¸€é—¨ä¹å™¨ï¼Œä¾‹å¦‚å°¤å…‹é‡Œé‡Œ ä¿è¯å‚ä¸å¼€æºé¡¹ç›®ï¼Œgithubäº‰å–æ¯å¤©éƒ½æœ‰è´¡çŒ® æ¯å¤©å­¦è‹±è¯­ å¾®ä¿¡è¯»ä¹¦è¯»å®Œ 50 æœ¬ä¹¦ç± ä¹°ä¸€å¥—å±äºè‡ªå·±çš„æˆ¿å­ è€ƒ MBA æŠ¤è‚¤ã€æ·¡å¦†ã€å¥åº·ã€æé’± å¤šå›å®¶çœ‹çœ‹ã€å¤šçˆ±æƒœè‡ªå·± ","date":"2023-02-15","objectID":"/month/:2:1","tags":["ç¢ç¢å¿µ"],"title":"è ¢ Q ç¢ç¢å¿µ","uri":"/month/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"é¡¹ç›®åœ°å€ï¼š SSR ","date":"2023-02-15","objectID":"/ssr/:0:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ­å»º Client é¡¹ç›® ","date":"2023-02-15","objectID":"/ssr/:1:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"é¡¹ç›®åˆå§‹åŒ– å…ˆå¯¹é¡¹ç›®è¿›è¡Œåˆå§‹åŒ–ï¼ŒNextjs æä¾›äº†è„šæ‰‹æ¶æ¥å¸®åŠ©åˆå§‹åŒ–é¡¹ç›®ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š npx create-next-app@latest --typescript next.config.js æ˜¯æ„å»ºé…ç½®ï¼Œåº•å±‚æ˜¯åŸºäº Webpack å»æ‰“åŒ…çš„ï¼Œåœ¨é»˜è®¤çš„é…ç½®ä¸ŠåŠ ä¸Šä¸‹é¢çš„é…ç½®æ¥æä¾›åˆ«åçš„èƒ½åŠ›ï¼š /** @type {import('next').NextConfig} */ const path = require(\"path\"); const nextConfig = { reactStrictMode: true, swcMinify: true, webpack: (config) =\u003e { config.resolve.alias = { ...config.resolve.alias, '@': path.resolve(__dirname), }; return config; }, }; module.exports = nextConfig tsconfig.json ä¸­éœ€è¦åŠ ä¸€ä¸‹å¯¹åº”çš„åˆ«åè§£æè¯†åˆ«ï¼ˆbaseurl , pathsï¼‰ã€‚ { \"compilerOptions\": { \"target\": \"es5\", \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"], \"allowJs\": true, \"skipLibCheck\": true, \"strict\": true, \"forceConsistentCasingInFileNames\": true, \"noEmit\": true, \"esModuleInterop\": true, \"module\": \"esnext\", \"moduleResolution\": \"node\", \"resolveJsonModule\": true, \"isolatedModules\": true, \"jsx\": \"preserve\", \"incremental\": true, \"baseUrl\": \"./\", \"paths\": { \"@/*\": [\"./*\"] } }, \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\"], \"exclude\": [\"node_modules\"] } æ‰§è¡Œ npm run dev æ³¨ï¼šå¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œè¯·å°†ä½ çš„ node ç‰ˆæœ¬å‡çº§åˆ° 18+ã€‚ æ‰“å¼€ http://localhost:3000 å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé»˜è®¤æœåŠ¡å™¨ç«¯æ¸²æŸ“é¡µé¢: ","date":"2023-02-15","objectID":"/ssr/:1:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä»£ç  Lint Nextjs å†…ç½®äº†å¼€ç®±çš„ eslint èƒ½åŠ›ï¼Œä¸éœ€è¦è‡ªå·±è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„è„šæœ¬æ¥è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ lintã€‚ npm run lint ","date":"2023-02-15","objectID":"/ssr/:1:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ¨¡å—åŒ–ä»£ç æç¤º ä½¿ç”¨ sass ç­‰è¶…ç±»æ¥æ›¿ä»£ cssï¼Œç›¸æ¯” cssï¼Œsass ç­‰è¶…ç±»æä¾›äº†å˜é‡å®šä¹‰å’Œå‡½æ•°çš„èƒ½åŠ›ï¼Œå¯ä»¥é¿å…ä¸€äº›é‡å¤çš„ css ä»£ç ï¼Œä½¿æ ·å¼çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§æ›´é«˜ã€‚ Nextjs å·²ç»æä¾›äº†å¯¹ css å’Œ sass çš„æ”¯æŒï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸‹ sass çš„ä¾èµ–å³å¯: npm install sass --save-dev é’ˆå¯¹ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œéœ€è¦å®šä¹‰å¤šçº§åµŒå¥—çš„ç»„ä»¶æ¥æé«˜é¡µé¢å¤ç”¨æ€§ï¼Œç»„ä»¶ä¹‹é—´çš„æ ·å¼å‘½åå¾ˆå®¹æ˜“é‡å¤ï¼Œé’ˆå¯¹éç»„ä»¶åº“çš„ä¸šåŠ¡ä»£ç ï¼Œé€šå¸¸ä¼šä½¿ç”¨ css æ¨¡å—åŒ–æ¥è¿›è¡Œç›¸å…³çš„æ ·å¼å®šä¹‰ã€‚ æ¨¡å—åŒ–ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å°†æ ·å¼çš„ç±»ååŠ ä¸Šå¯¹åº”å”¯ä¸€çš„å“ˆå¸Œå€¼æ¥è¿›è¡ŒåŒºåˆ†ï¼Œä»è€Œè§£å†³æ ·å¼ç±»åé‡å¤çš„é—®é¢˜ã€‚ Nextjs å·²ç»å†…ç½®äº†è¿™éƒ¨åˆ†èƒ½åŠ›ï¼Œåªéœ€è¦å°†ç±»åå®šä¹‰ä¸º [name].module.scssã€‚ import { FC } from 'react'; import styles from \"./index.module.scss\"; interface IProps {} export const Demo: FC\u003cIProps\u003e = ({}) =\u003e { return ( \u003cdiv className={styles.demo}\u003e \u003ch1 className={styles.title}\u003edemo\u003c/h1\u003e \u003c/div\u003e ) } ","date":"2023-02-15","objectID":"/ssr/:1:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æœåŠ¡ç«¯è°ƒè¯•èƒ½åŠ› æœåŠ¡å™¨æ¸²æŸ“ä¸€ä¸ªé™æ€é¡µé¢ï¼Œè¯·æ±‚ä¼šåœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œå°†æ•°æ®æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œæ„å‘³ç€è¿™éƒ¨åˆ†é€»è¾‘å¹¶ä¸åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æœåŠ¡ç«¯æ‰§è¡Œæ—¶ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ç”¨ Chrome çš„ network æ¥è°ƒè¯•ï¼Œå®ƒåªèƒ½è°ƒè¯•ç›´æ¥åœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„è„šæœ¬ã€‚ Nextjs ä¹Ÿæœ‰å†…ç½®ç›¸å…³çš„è°ƒè¯•èƒ½åŠ›æ¥å¸®åŠ©è¿›è¡Œè°ƒè¯•ï¼Œåªéœ€è¦ä¸º dev å‘½ä»¤åŠ ä¸€ä¸ª â€“inspect çš„ node option å°±è¡Œã€‚ é¦–å…ˆæ¥å®‰è£… cross-env çš„ä¾èµ–æ¥æ”¯æŒè·¨å¹³å°çš„ç¯å¢ƒå˜é‡æ·»åŠ ï¼š npm install cross-env --save-dev ç„¶ååœ¨ package.json ä¸­ï¼ŒåŠ ä¸€æ¡ debugger çš„å‘½ä»¤ï¼š { \"scripts\": { \"dev\": \"next dev\", \"debugger\": \"cross-env NODE_OPTIONS='--inspect' next dev\" } } æ‰§è¡Œ npm run debugger é‡æ–°æ‰“å¼€ http://localhost:3000ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„ nodejs çš„å°å›¾æ ‡ï¼Œç‚¹å¼€ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ networkï¼Œè¿™ä¸ªå°±æ˜¯æœåŠ¡å™¨ç«¯ server çš„ networkï¼ŒæœåŠ¡å™¨ç«¯æ‰§è¡Œçš„ç›¸å…³ä»£ç æ–­ç‚¹å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œè°ƒè¯•ã€‚ ","date":"2023-02-15","objectID":"/ssr/:1:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å®ç°é¡µé¢é“¾è·¯ ä¸»ä½“ä¸Šåˆ†ä¸ºæ¨¡æ¿é¡µé¢æ¸²æŸ“ã€è·¯ç”±åŒ¹é…å’Œ header ä¿®æ”¹ä¸‰ä¸ªæ¨¡å—ï¼Œæ¨¡æ¿é¡µé¢æ¸²æŸ“æ˜¯é¡µé¢æ¸²æŸ“çš„ä¸»è¦éƒ¨åˆ†ï¼ŒåŒ…å«äº†é™æ€æ¨¡æ¿çš„ç”Ÿæˆå’Œé¡µé¢æ•°æ®çš„æ³¨å…¥ï¼Œæœ€åå½¢æˆæœåŠ¡ç«¯è¿”å›çš„ HTML æ–‡æœ¬ã€‚ ","date":"2023-02-15","objectID":"/ssr/:2:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ¨¡æ¿é¡µé¢æ¸²æŸ“ é€šç”¨ layout web åº”ç”¨çš„è·¯ç”±é¡µé¢ä¹‹é—´é€šå¸¸ä¼šæœ‰å…±åŒçš„é¡µé¢å…ƒç´ ï¼Œå¦‚é¡µé¦–ã€é¡µå°¾ã€‚ å¯¹äºè¿™ç§é¡µé¢ï¼Œé€šå¸¸ä¼šå®šä¹‰å¯¹åº”çš„ç»„ä»¶åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œè¿™æ ·æ‰€æœ‰çš„é¡µé¢å°±éƒ½å¯ä»¥æœ‰ç›¸åŒçš„é¡µé¢ç»„ä»¶äº†ï¼Œä¸åœ¨éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­å»å•ç‹¬è°ƒç”¨ã€‚ åœ¨å†™é¡µé¢ä¹‹å‰ï¼Œå…ˆå®‰è£…ç±»ååº“ classnamesï¼Œå®ƒå¯ä»¥ç”¨å‡½æ•°å¼çš„æ–¹å¼æ¥å¤„ç†ä¸€äº›ç›¸å¯¹å¤æ‚çš„ç±»åœºæ™¯ï¼Œåç»­ä¼šæœ‰å¤§é‡åº”ç”¨ã€‚ npm install classnames --save é¡µé¦–ç»„ä»¶ client/components/navbar/index.tsx import { FC } from 'react'; import styles from './index.module.scss'; import Image from 'next/image'; import LogoLight from '@/public/logo_light.png'; export interface INavBarProps {} const NavBar: FC\u003cINavBarProps\u003e = ({}) =\u003e { return ( \u003cdiv className={styles.navBar}\u003e \u003ca href=\"http://localhost:3000/\"\u003e \u003cImage src={LogoLight} alt=\"\" width={70} height={20} /\u003e \u003c/a\u003e \u003c/div\u003e ) } export default NavBar; client/components/navbar/index.module.scss .navBar { display: flex; align-items: center; justify-content: space-between; background-color: hsla(0,0%,100%,.5); backdrop-filter: blur(8px); width: 100%; height: 64px; position: sticky; top: 0; left: 0; padding: 20px 32px; z-index: 100; } next/image å†…ç½®çš„ Image æ ‡ç­¾ï¼Œç›¸æ¯”å¹³å¸¸çš„ img æ ‡ç­¾ï¼Œä¼šæ ¹æ®å¯¼å…¥çš„å›¾åƒæ¥ç¡®è®¤å®½é«˜ï¼Œä»è€Œè§„é¿ç´¯ç§¯å¸ƒå±€ç§»ä½ (CLS) çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨å¸ƒå±€é˜¶æ®µæå‰è¿›è¡Œç›¸å…³åŒºåŸŸé¢„ç•™ä½ç½®ï¼Œè€Œä¸æ˜¯åŠ è½½ä¸­å†è¿›è¡Œç§»ä½ã€‚ é¡µå°¾ç»„ä»¶ client/components/footer/index.tsx import { FC } from 'react'; import Image from 'next/image'; import PublicLogo from '@/public/public_logo.png'; import styles from './index.module.scss'; import classNames from 'classnames'; interface ILink { label: string; link?: string; } interface ILinkList { title: string; list: ILink[]; } interface IQRCode { image: string; text: string; } export interface IFooterProps { title: string; linkList: ILinkList[]; qrCode: IQRCode; copyRight: string; siteNumber: string; publicNumber: string; } const Footer: FC\u003cIFooterProps\u003e = ({ title, linkList, qrCode, copyRight, siteNumber, publicNumber, }) =\u003e { return ( \u003cdiv className={styles.footer}\u003e \u003cdiv className={styles.topArea}\u003e \u003ch1 className={styles.footerTitle}\u003e{title}\u003c/h1\u003e \u003cdiv className={styles.linkListArea}\u003e { linkList?.map((item, index) =\u003e { return ( \u003cdiv className={styles.linkArea} key={index}\u003e \u003cspan className={styles.title}\u003e{item?.title}\u003c/span\u003e \u003cdiv className={styles.links}\u003e { item?.list?.map((_item, _index) =\u003e { return ( \u003cdiv className={classNames({ [styles.link]: _item?.link, [styles.disabled]: !_item?.link, })} key={_index} onClick={(): void =\u003e { _item?.link \u0026\u0026 window.open( _item?.link, \"blank\", \"noopener=yes,noreferrer=yes\" ); }}\u003e {_item?.label} \u003c/div\u003e ) }) } \u003c/div\u003e \u003c/div\u003e ) }) } \u003c/div\u003e \u003c/div\u003e \u003cdiv className={styles.bottomArea}\u003e \u003cdiv className={styles.codeArea}\u003e \u003cdiv\u003e \u003cImage src={qrCode?.image} alt={qrCode?.text} width={56} height={56} /\u003e \u003c/div\u003e \u003cdiv className={styles.text}\u003e{qrCode?.text}\u003c/div\u003e \u003c/div\u003e \u003cdiv className={styles.numArea}\u003e \u003cspan\u003e{copyRight}\u003c/span\u003e \u003cspan\u003e{siteNumber}\u003c/span\u003e \u003cdiv className={styles.publicLogo}\u003e \u003cdiv className={styles.logo}\u003e \u003cImage src={PublicLogo} alt={publicNumber} width={20} height={20} /\u003e \u003c/div\u003e \u003cspan\u003e{publicNumber}\u003c/span\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e ) } export default Footer; client/components/footer/index.module.scss .footer { padding: 70px 145px; background-color: #f4f5f5; .topArea { display: flex; justify-content: space-between; .footerTitle { font-weight: 500; font-size: 36px; line-height: 36px; color: #333333; margin: 0; } .linkListArea { display: flex; .linkArea { display: flex; flex-direction: column; margin-left: 160px; .title { font-weight: 500; font-size: 14px; line-height: 20px; color: #333333; margin-bottom: 40px; } .links { display: flex; flex-direction: column; font-weight: 400; font-size: 14px; line-height: 20px; .link { color: #333333; cursor: pointer; margin-bottom: 24px; } .disabled { color: #666; cursor: not-allowed; margin-bottom: 24px; } } } } } .bottomArea { display: flex; justify-content: space-between; .codeArea { display: flex; flex-direction: column; .text { color: #666; } } .numArea { color: #666; display: flex; flex-direction: column; align-items: flex-end; font-weight: 400; font-size: 14px; line-height: 20px; span { margin-bottom: 12px; } .publicLogo { display: flex; .logo { margin-right: 4px; } } } } } layout ç»„ä»¶ client/components/layout/index.tsx import { FC } from 'reac","date":"2023-02-15","objectID":"/ssr/:2:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ•°æ®æ³¨å…¥ åœ¨ Nextjs ä¸­å®ç°æ•°æ®æ³¨å…¥çš„æ–¹å¼åˆ†åˆ«æ˜¯ getStaticPropsã€getServerSideProps å’Œ getInitialPropsã€‚ getStaticPropsï¼šå¤šç”¨äºé™æ€é¡µé¢çš„æ¸²æŸ“ï¼Œåªä¼šåœ¨ç”Ÿäº§ä¸­æ‰§è¡Œï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶å†æ¬¡è°ƒç”¨ï¼Œæ„å‘³ç€å®ƒåªèƒ½ç”¨äºä¸å¸¸ç¼–è¾‘çš„éƒ¨åˆ†ï¼Œæ¯æ¬¡è°ƒæ•´éƒ½éœ€è¦é‡æ–°æ„å»ºéƒ¨ç½²ï¼Œå®˜ç½‘ä¿¡æ¯çš„æ—¶æ•ˆæ€§æ¯”è¾ƒæ•æ„Ÿï¼Œåªä¼šæœ‰å°‘éƒ¨åˆ†åº”ç”¨åˆ° getStaticPropsï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ²¡ç”¨ï¼Œåœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹ä¼šæœ‰å¥‡æ•ˆã€‚ getServerSidePropsï¼šåªä¼šæ‰§è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸ä¼šåœ¨å®¢æˆ·ç«¯æ‰§è¡Œã€‚å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯çš„è„šæœ¬æ‰“åŒ…ä¼šè¾ƒå°ï¼Œç›¸å…³æ•°æ®ä¸ä¼šæœ‰åœ¨å®¢æˆ·ç«¯æš´éœ²çš„é—®é¢˜ï¼Œç›¸å¯¹æ›´éšè”½å®‰å…¨ï¼Œä¸è¿‡é€»è¾‘é›†ä¸­åœ¨æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œä¼šåŠ é‡æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼ŒæœåŠ¡å™¨æˆæœ¬ä¹Ÿä¼šæ›´é«˜ã€‚ getInitialProps(æ¨è)ï¼šåˆå§‹åŒ–æ—¶ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨ç«¯è·¯ç”±ï¼Œæ•°æ®çš„æ³¨å…¥ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œå¯¹ SEO å‹å¥½ï¼Œåœ¨å®é™…çš„é¡µé¢æ“ä½œä¸­ï¼Œç›¸å…³çš„é€»è¾‘ä¼šåœ¨å®¢æˆ·ç«¯ æ‰§è¡Œï¼Œä»è€Œå‡è½»äº†æœåŠ¡å™¨ç«¯çš„è´Ÿæ‹…ã€‚ æ•°æ®çš„æ³¨å…¥éƒ½æ˜¯é’ˆå¯¹é¡µé¢çš„ï¼Œä¹Ÿå°±æ˜¯ pages ç›®å½•ä¸‹ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæ•°æ®æ³¨å…¥æ˜¯ä¸æ”¯æŒçš„ï¼Œæ‰€ä»¥åº”åœ¨é¡µé¢ä¸­æ³¨å…¥å¯¹åº”æ•°æ®åå†é€ä¼ ç»™é¡µé¢ç»„ä»¶ã€‚ _app.tsx æ˜¯æ‰€æœ‰é¡µé¢çš„å…¥å£é¡µé¢ï¼Œæ‰€ä»¥å…¶å®ƒé¡µé¢çš„å‚æ•°ä¹Ÿéœ€è¦é€ä¼ ä¸‹æ¥ï¼Œå¯ä»¥ç”¨å†…ç½®çš„ App å¯¹è±¡æ¥è·å–å¯¹åº”ç»„ä»¶æœ¬èº«çš„ pagePropsï¼Œä¸è¦ç›´æ¥è¦†ç›–ï¼Œå¯¹äºéå…¥å£é¡µé¢çš„æ™®é€šé¡µé¢ï¼Œç›´æ¥åŠ ä¸Šä¸šåŠ¡é€»è¾‘å°±å¯ä»¥ï¼š import '@/styles/globals.css' import type { AppProps, AppContext } from 'next/app'; import App from 'next/app'; import type { ILayoutProps } from '@/components/layout'; import Layout from '@/components/layout'; import Code from '@/public/code.png'; const MyApp = (data: AppProps \u0026 ILayoutProps) =\u003e { const { Component, pageProps, navbarData, footerData } = data; return ( \u003cdiv\u003e \u003cLayout navbarData={navbarData} footerData={footerData}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Layout\u003e \u003c/div\u003e ) } MyApp.getInitialProps = async (context: AppContext) =\u003e { const pageProps = await App.getInitialProps(context); return { ...pageProps, navbarData: {}, footerData: { title: \"Demo\", linkList: [ { title: \"æŠ€æœ¯æ ˆ\", list: [ { label: \"react\", }, { label: \"typescript\", }, { label: \"ssr\", }, { label: \"nodejs\", }, ], }, { title: \"äº†è§£æ›´å¤š\", list: [ { label: \"æ˜é‡‘\", link: \"https://juejin.cn\", }, { label: \"çŸ¥ä¹\", link: \"https://www.zhihu.com\", }, { label: \"csdn\", }, ], }, { title: \"è”ç³»æˆ‘\", list: [{ label: \"å¾®ä¿¡\" }, { label: \"QQ\" }], }, ], qrCode: { image: Code, text: \"ç‹å°ç™½å­¦å‰ç«¯\", }, copyRight: \"Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©\", siteNumber: \"å†€ICPå¤‡XXXXXXXXå·-X\", publicNumber: \"å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·\", } } } export default MyApp; ","date":"2023-02-15","objectID":"/ssr/:2:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è·¯ç”±åŒ¹é… Nextjs çš„è·¯ç”±ä¸åŒäºä¸€èˆ¬ä½¿ç”¨çš„è·¯ç”±ï¼Œå®ƒæ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶å»é…ç½®å¯¹åº”çš„è·¯ç”±ï¼Œä¼šæ ¹æ®ç›¸å¯¹ pages çš„ç›®å½•è·¯å¾„æ¥ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ï¼Œå¦‚ï¼š // ./pages/home/index.tsx =\u003e /home // ./pages/demo/[id].tsx =\u003e /demo/:id åˆ›å»ºä¸€ä¸ª article ç›®å½•æ¥è¯•éªŒä¸€ä¸‹å¯¹åº”çš„æ–‡ä»¶è·¯ç”±ï¼Œé’ˆå¯¹æ–‡ç« è·¯ç”±ï¼Œç»™å®ƒåŠ ä¸€ä¸ª articleId å‚æ•°æ¥åŒºåˆ†ä¸åŒæ–‡ç« ï¼š pages/article/[articleId].tsx import type { NextPage } from 'next'; interface IArticleProps { articleId: number; } const Article: NextPage\u003cIArticleProps\u003e = ({ articleId }) =\u003e { return ( \u003cdiv\u003e \u003ch1\u003eæ–‡ç« {articleId}\u003c/h1\u003e \u003c/div\u003e ) } Article.getInitialProps = (context) =\u003e { const { articleId } = context.query; return { articleId: Number(articleId), } } export default Article; æŠŠé¦–é¡µé»˜è®¤çš„ index.tsx è¿›è¡Œæ”¹é€ ä¸€ä¸‹ï¼ŒæŠŠé“¾æ¥æŒ‡åˆ°å®šä¹‰çš„æ–‡ç« è·¯ç”±: pages/index.tsx import type { NextPage } from 'next'; import styles from '@/styles/Home.module.scss'; interface IHomeProps { title: string; description: string; list: { label: string; info: string; link: string; }[]; } const Home: NextPage\u003cIHomeProps\u003e = ({ title, description, list }) =\u003e { return ( \u003cdiv className={styles.container}\u003e \u003cmain className={styles.main}\u003e \u003ch1 className={styles.title}\u003e{title}\u003c/h1\u003e \u003cp className={styles.description}\u003e{description}\u003c/p\u003e \u003cdiv className={styles.grid}\u003e { list?.map((item, index) =\u003e { return ( \u003cdiv key={index} className={styles.card} onClick={(): void =\u003e { window.open( item?.link, \"blank\", \"noopener=yes,noreferrer=yes\" ); }}\u003e \u003ch2\u003e{item?.label}\u003c/h2\u003e \u003cp\u003e{item?.info}\u003c/p\u003e \u003c/div\u003e ) }) } \u003c/div\u003e \u003c/main\u003e \u003c/div\u003e ) } Home.getInitialProps = (context) =\u003e { return { title: \"Hello SSR!\", description: \"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\", list: [ { label: \"æ–‡ç« 1\", info: \"A test for article1\", link: \"http://localhost:3000/article/1\", }, { label: \"æ–‡ç« 2\", info: \"A test for article2\", link: \"http://localhost:3000/article/2\", }, { label: \"æ–‡ç« 3\", info: \"A test for article3\", link: \"http://localhost:3000/article/3\", }, { label: \"æ–‡ç« 4\", info: \"A test for article4\", link: \"http://localhost:3000/article/4\", }, { label: \"æ–‡ç« 5\", info: \"A test for article5\", link: \"http://localhost:3000/article/5\", }, { label: \"æ–‡ç« 6\", info: \"A test for article6\", link: \"http://localhost:3000/article/6\", }, ], }; } export default Home; styles/Home.module.scss // ./pages/index.module.scss .container { padding: 0 2rem; } .main { min-height: 100vh; padding: 4rem 0; flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; } .footer { display: flex; flex: 1; padding: 2rem 0; border-top: 1px solid #eaeaea; justify-content: center; align-items: center; } .footer a { display: flex; justify-content: center; align-items: center; flex-grow: 1; } .title a { color: #0070f3; text-decoration: none; } .title a:hover, .title a:focus, .title a:active { text-decoration: underline; } .title { margin: 0; line-height: 1.15; font-size: 4rem; } .title, .description { text-align: center; } .description { margin: 4rem 0; line-height: 1.5; font-size: 1.5rem; } .code { background: #fafafa; border-radius: 5px; padding: 0.75rem; font-size: 1.1rem; font-family: Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace; } .grid { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; max-width: 800px; } .card { margin: 1rem; padding: 1.5rem; text-align: left; color: inherit; text-decoration: none; border: 1px solid #eaeaea; border-radius: 10px; transition: color 0.15s ease, border-color 0.15s ease; max-width: 300px; cursor: pointer; } .card:hover, .card:focus, .card:active { color: #0070f3; border-color: #0070f3; } .card h2 { margin: 0 0 1rem 0; font-size: 1.5rem; } .card p { margin: 0; font-size: 1.25rem; line-height: 1.5; } .logo { height: 1em; margin-left: 0.5rem; } ä½¿ç”¨ window.open æ‰“å¼€æ–°é¡µé¢æ¥æŒ‡å‘ä¸Šæ–‡åˆ›å»ºçš„æ–‡ç« é¡µï¼Œnoopener=yes,noreferrer=yes æ˜¯ä¸ºäº†è·³è½¬çš„å®‰å…¨æ€§ï¼Œè¿™ä¸ªå¯ä»¥éšè—è·³è½¬çš„ window.opener ä¸ Document.referrerï¼Œåœ¨è·¨ç«™ç‚¹è·³è½¬ä¸­ï¼Œé€šå¸¸åŠ è¿™ä¸ªå‚æ•°æ¥ä¿è¯è·³è½¬ä¿¡æ¯çš„ä¸æ³„éœ²ã€‚ è®¿é—® http://localhost:3000/: ","date":"2023-02-15","objectID":"/ssr/:2:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"header ä¿®æ”¹ Nextjs æä¾›äº†ç”¨ next/head æš´éœ²å‡ºæ¥çš„æ ‡ç­¾æ¥ä¿®æ”¹ headerï¼Œåœ¨ _app.tsx åŠ ä¸€ä¸ªé»˜è®¤çš„ titleã€‚ import '@/styles/globals.css' import type { AppProps, AppContext } from 'next/app'; import App from 'next/app'; import Head from 'next/head'; import type { ILayoutProps } from '@/components/layout'; import Layout from '@/components/layout'; import Code from '@/public/code.png'; const MyApp = (data: AppProps \u0026 ILayoutProps) =\u003e { const { Component, pageProps, navbarData, footerData } = data; return ( \u003cdiv\u003e \u003cHead\u003e \u003ctitle\u003eA Demo for å®˜ç½‘å¼€å‘å®æˆ˜\u003c/title\u003e \u003cmeta name=\"description\" content=\"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\" /\u003e \u003clink rel=\"icon\" href=\"/favicon.ico\" /\u003e \u003c/Head\u003e \u003cLayout navbarData={navbarData} footerData={footerData}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Layout\u003e \u003c/div\u003e ) } MyApp.getInitialProps = async (context: AppContext) =\u003e { const pageProps = await App.getInitialProps(context); return { ...pageProps, navbarData: {}, footerData: { title: \"Demo\", linkList: [ { title: \"æŠ€æœ¯æ ˆ\", list: [ { label: \"react\", }, { label: \"typescript\", }, { label: \"ssr\", }, { label: \"nodejs\", }, ], }, { title: \"äº†è§£æ›´å¤š\", list: [ { label: \"æ˜é‡‘\", link: \"https://juejin.cn\", }, { label: \"çŸ¥ä¹\", link: \"https://www.zhihu.com\", }, { label: \"csdn\", }, ], }, { title: \"è”ç³»æˆ‘\", list: [{ label: \"å¾®ä¿¡\" }, { label: \"QQ\" }], }, ], qrCode: { image: Code, text: \"ç‹å°ç™½å­¦å‰ç«¯\", }, copyRight: \"Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©\", siteNumber: \"å†€ICPå¤‡XXXXXXXXå·-X\", publicNumber: \"å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·\", } } } export default MyApp; ","date":"2023-02-15","objectID":"/ssr/:2:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ­å»º server é¡¹ç›® è¿™é‡Œæ¨èä½¿ç”¨ Strapiï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºæ— å¤´çš„ CMS é…ç½® Apiã€‚åŸºäº Strapi ï¼Œå¯ä»¥å¿«é€Ÿé’ˆå¯¹ä¸šåŠ¡åœºæ™¯æ­å»ºä¸€å¥—å¯¹åº”çš„ CMSï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥å’Œè”è¡¨ç­‰è¾ƒå¤æ‚åœºæ™¯ï¼Œéƒ½å¯ä»¥é€šè¿‡å¯è§†åŒ–çš„é…ç½®å®ç°ã€‚ å¯¹äºè‡ªå®šä¹‰è¾ƒé«˜çš„åœºæ™¯ï¼Œå®ƒä¹Ÿæš´éœ²äº†ç›¸å…³çš„å‚æ•°è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¯ä»¥ä½¿ç”¨è¾ƒå°‘çš„å¼€å‘é‡å»å®ç°ç‰¹æ®Šåœºæ™¯ã€‚ ","date":"2023-02-15","objectID":"/ssr/:3:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"é¡¹ç›®åˆå§‹åŒ– æ‰§è¡Œ Strapi æä¾›çš„è„šæ‰‹æ¶å‘½ä»¤æ¥åˆå§‹åŒ–é¡¹ç›®: npx create-strapi-app server --quickstart å®ƒä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆåä¸º server çš„é¡¹ç›®ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨è¿è¡Œå¹¶æ‰“å¼€ä¸€ä¸ªç™»å½•é¡µï¼ŒæŒ‰ç…§æŒ‡ç¤ºé…ç½®ä¸€ä¸‹è´¦å·å¯†ç ï¼Œç„¶åç™»å½•ã€‚ ","date":"2023-02-15","objectID":"/ssr/:3:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ•°æ®å¯è§†åŒ–é…ç½® ç»“æ„ä½“å®šä¹‰ å®Œæˆç™»å½•åï¼Œè¿›å…¥åˆ° Strapi çš„ç®¡ç†é¡µé¢ã€‚ content manager æ˜¯ Api çš„æ•°æ® content-type builder æ˜¯ Api çš„ç»“æ„ä½“ ä»¥ä¸Šä¸€ç« èŠ‚ layout ä¸‹çš„é™æ€æ•°æ®ä¸¾ä¾‹ï¼š footerData: { title: \"Demo\", linkList: [ { title: \"æŠ€æœ¯æ ˆ\", list: [ { label: \"react\", }, { label: \"typescript\", }, { label: \"ssr\", }, { label: \"nodejs\", }, ], }, { title: \"äº†è§£æ›´å¤š\", list: [ { label: \"æ˜é‡‘\", link: \"https://juejin.cn\", }, { label: \"çŸ¥ä¹\", link: \"https://www.zhihu.com\", }, { label: \"csdn\", }, ], }, { title: \"è”ç³»æˆ‘\", list: [{ label: \"å¾®ä¿¡\" }, { label: \"QQ\" }], }, ], qrCode: { image: Code, text: \"ç‹å°ç™½å­¦å‰ç«¯\", }, copyRight: \"Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©\", siteNumber: \"å†€ICPå¤‡XXXXXXXXå·-X\", publicNumber: \"å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·\", } é’ˆå¯¹è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œåº”è¯¥å¦‚ä½•å»å®šä¹‰ Api å‘¢ï¼Ÿ åˆ‡åˆ° content-type builderï¼Œç‚¹å‡» create new collection typeï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç»“æ„ä½“ï¼š å¡«å®Œ display name åï¼Œå¯¹åº”çš„å•æ•°å’Œå¤æ•° id ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå°±æ˜¯å³è¾¹çš„ä¸¤é¡¹ï¼Œname å¡«éœ€è¦çš„ç»“æ„ä½“å°±å¯ä»¥ã€‚ ç„¶åä¸ºç»“æ„ä½“åˆ›å»ºä¸€äº›å­—æ®µï¼Œå¸¸è§çš„ç±»å‹åŒ…æ‹¬æ–‡æœ¬ã€boolean å€¼ã€å¯Œæ–‡æœ¬ï¼Œè¿™äº›è¿™é‡Œéƒ½æœ‰ï¼Œä»¥ title ä¸¾ä¾‹ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç‚¹ textã€‚ ç›´æ¥ç”¨çŸ­æ–‡æœ¬å°±å¥½ï¼Œç„¶åé«˜çº§é…ç½®é€‰å¿…å¡«å’Œå”¯ä¸€ã€‚ å¯¹åº”çš„å­—æ®µå°±åŠ å¥½äº†ï¼Œå¯¹äºåˆ«çš„éƒ¨åˆ†ï¼Œç”¨ç›¸åŒçš„æ–¹å¼åŠ è¿›æ¥å°±å¯ä»¥ã€‚ ç¨å¾®ç‰¹æ®Šä¸€äº›çš„å­—æ®µæ˜¯ linkListï¼Œå¯ä»¥çœ‹åˆ°å®ƒå…¶å®æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå…ˆæŠŠ footData çš„å…³ç³»æŒ‰ç…§æ€ç»´å¯¼å›¾æ¢³ç†ä¸€ä¸‹ã€‚ æŒ‰ç…§æ•°æ®ç»“æ„å‘ç°ï¼ŒfooterData å’Œ linkList æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè€Œ linklist ä¸­åˆåŒ…å«å¤šä¸ª linkï¼Œä¹Ÿæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ æ‰€ä»¥è¦æè¿°è¿™éƒ¨åˆ†å­—æ®µï¼Œåªæœ‰ layout ä¸€ä¸ªç»“æ„ä½“æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦åˆ›å»º linkList å’Œ linkï¼Œç„¶åç»™å®ƒä»¬ä¹‹é—´æ¥å»ºç«‹å¯¹åº”çš„å…³ç³»ã€‚ ç¡®å®šäº†æ€è·¯ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ¥åˆ›å»º linklist å’Œ link çš„ç»“æ„ä½“ã€‚ linklist å’Œ link çš„å…³ç³»åº”è¯¥æ€ä¹ˆå»ºç«‹å‘¢ï¼Ÿåœ¨ linklist ç»“æ„ä½“ä¸­ï¼Œç‚¹æ–°å»ºå­—æ®µã€‚ ç‚¹å‡» relation å±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥è”ç«‹ç»“æ„ä½“ä¹‹é—´çš„æ•°æ®åº“å…³ç³»ã€‚ ç‚¹å®Œæˆï¼Œå¯ä»¥å‘ç°åŠ ä¸Šäº†ã€‚ æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§ä¸Šé¢çš„åŸç†é…ç½®å®Œæ‰€æœ‰çš„ç»“æ„ä½“å³å¯ã€‚ ç»“æ„ä½“æ•°æ®å†™å…¥ å®šä¹‰å®Œç»“æ„ä½“åï¼Œéœ€è¦ä¸ºç»“æ„ä½“åŠ å…¥ä¸€äº›æ•°æ®ï¼Œé€šå¸¸åœ¨å¼€å‘å®Œåï¼Œè¿è¥ç›¸å…³çš„åŒå­¦é…ç½®ï¼Œå°±åªè¦è¿›è¡Œè¿™ä¸€æ­¥å°±å¯ä»¥äº†ï¼Œåˆ«çš„éƒ¨åˆ†å°±ä¸éœ€è¦å†è°ƒæ•´äº†ï¼Œç‚¹å‡» content managerã€‚ æ•°æ®çš„é…ç½®éœ€è¦æŒ‰ç…§ä»å­åˆ°çˆ¶çš„åŸåˆ™ï¼Œå› ä¸º layout æœ‰ç›¸å…³çš„å­—æ®µä¾èµ–äº linklistï¼Œlinklist åˆä¾èµ–äº linkï¼Œæ‰€ä»¥åªæœ‰ link é…ç½®å®Œä»¥åï¼Œæ‰å¯ä»¥è¿›è¡Œ linklist å’Œ layout çš„é…ç½®ï¼Œè¿™é‡Œä»¥ link å’Œ linklist ä¸¾ä¾‹ã€‚ åˆ‡åˆ° link çš„éƒ¨åˆ†ï¼Œç‚¹å‡» create new entryï¼Œå¯ä»¥è¿›åˆ°ä¸‹é¢çš„é¡µé¢ï¼Œè¾“å…¥å®Œå†…å®¹ä»¥åï¼Œè¿›è¡Œä¿å­˜ï¼Œè¿™é‡Œä¿å­˜æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæ˜¯ saveï¼Œä¸€ä¸ªæ˜¯ publishï¼Œå¦‚æœç‚¹å‡» publish ä¼šç”Ÿæ•ˆåˆ°å®é™… cdnï¼Œè¿™é‡Œå…ˆç‚¹å‡» publishï¼Œå®é™…åœºæ™¯ä¸‹è¿è¥é…ç½®çš„æ—¶å€™å¯ä»¥ç‚¹ saveï¼Œåœ¨ review æ²¡é—®é¢˜åå†å‘å¸ƒå³å¯ã€‚ é…ç½®å®Œå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š ç„¶åé…ç½® linklist çš„éƒ¨åˆ†ï¼ŒåŒæ ·æ˜¯ç‚¹ create new entryã€‚ é™¤äº†åŸºæœ¬çš„å­—æ®µï¼Œå³ä¾§è¿˜ä¼šæœ‰å¯¹åº”å…³è”çš„å­—æ®µï¼Œå‹¾é€‰éœ€è¦çš„å°±å¯ä»¥å…³è”ä¸Šäº†ã€‚ æœ€åé…ç½® layout çš„éƒ¨åˆ†ã€‚ æƒé™é…ç½®åŠä¸Šçº¿ ç‚¹å‡» settings -\u003e Rolesï¼Œè¿™é‡Œæ˜¯æƒé™é…ç½®çš„éƒ¨åˆ†ï¼ŒåŒ…å«ä½œè€…æƒé™å’Œå…¬å…±æƒé™ï¼Œå› ä¸ºéœ€è¦æ‰€æœ‰çš„äººå¯ä»¥çœ‹åˆ°æ¥å£ï¼Œæ‰€ä»¥ç‚¹ public å³ä¾§çš„ ğŸ–Šï¼ˆå¦‚æœæœ‰ç‰¹åˆ«éœ€æ±‚çš„åŒå­¦ï¼Œå¯ä»¥ç‚¹å‡» add new role æ–°å¢æƒé™è§’è‰²ï¼Œå†è¿›è¡Œåç»­çš„æ­¥éª¤ã€‚ å¯ä»¥çœ‹åˆ°ä¹‹å‰å®šä¹‰çš„ç»“æ„ä½“ï¼Œå·¦ä¾§å¯¹åº”ç»“æ„ä½“æ”¯æŒçš„ç±»å‹ï¼Œå³ä¾§å¯¹åº”ç»“æ„ä½“æ¥å£çš„æŒ‡å‘ Api è·¯ç”±ã€‚å› ä¸ºè¦ç»™å¯¹åº”çš„æ¥å£é…ç½®å…¨æŸ¥å’Œå•æŸ¥çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å‹¾é€‰ä¸Š find å’Œ findOneã€‚ layout ä¾èµ–äº link å’Œ link-listï¼Œæ‰€ä»¥ link å’Œ link-list çš„ç»“æ„ä½“ä¹Ÿéœ€å‹¾é€‰ä¸Š find å’Œ findOneã€‚ è®¿é—® http://localhost:1337/api/layoutsï¼š ä½ ä¼šå‘ç°å¥½åƒåªæœ‰åŸºç¡€å­—æ®µï¼Œè”è¡¨çš„ linklist å’Œ link å»å“ªé‡Œäº†ï¼Ÿ è¿™æ˜¯å› ä¸º Strapi é»˜è®¤æ˜¯ä¸ä¼šå¡«å……è”è¡¨å…³ç³»çš„ï¼Œå¯ä»¥åœ¨è·¯ç”±ååŠ  populate=*ï¼Œè¿™ä¸ªå…¥å‚çš„æ„ä¹‰æ˜¯ä¸ºæ‰€æœ‰çš„å…³ç³»å¡«å……ä¸€çº§å…³ç³»ã€‚ æ¨èä½¿ç”¨ strapi-plugin-populate-deepï¼Œè¿™æ˜¯åŸºäº Strapi çš„ä¸€ä¸ªæ·±åº¦æ’ä»¶ï¼Œåˆ‡åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ç»ˆç«¯å®‰è£…ä¸€ä¸‹ã€‚ npm install strapi-plugin-populate-deep --save é‡å¯ï¼Œè®¿é—® http://localhost:1337/api/layouts?populate=deepã€‚ deep å‚æ•°çš„å«ä¹‰ä¸ºä½¿ç”¨é»˜è®¤çš„æœ€å¤§æ·±åº¦å¡«å……è¯·æ±‚ï¼Œå³ 5 å±‚ï¼Œå¦‚æœ 5 å±‚ä¸æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦æ›´å¤šï¼Œå…¥å‚çš„è°ƒæ•´ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚é’ˆå¯¹ 10 å±‚çš„åœºæ™¯ï¼Œåªéœ€è¦ä¼ é€’å…¥å‚ populate=deep,10å°±å¯ä»¥ã€‚ ","date":"2023-02-15","objectID":"/ssr/:3:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"BFF æ•°æ®æµè½¬ é€šè¿‡è®¿é—® http://localhost:1337/api/layouts?populate=deep å¯ä»¥æ‹¿åˆ°éœ€è¦çš„æ•°æ®ã€‚ ä¸è¿‡è¿™æ ·çš„æ•°æ®æ˜¯æœ‰ä¸€äº›ä¹±çš„ï¼Œæœ‰å‡ ä¸ªå¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼š è¯·æ±‚å‚æ•° populate=deep æ˜¯æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å¸¦ä¸Šçš„ï¼Œå› ä¸ºéœ€è¦æ‰€æœ‰æ·±åº¦çš„æ•°æ®ã€‚ æœ€ç»ˆéœ€è¦çš„æ˜¯ data ä¸­çš„æ•°æ®ï¼Œlayout åªæœ‰ä¸€ä¸ªï¼Œä¸éœ€è¦åˆ†é¡µç›¸å…³çš„éƒ¨åˆ†ï¼ˆmetaï¼‰ã€‚ é’ˆå¯¹æ¯ä¸ªç»“æ„ä½“ï¼ŒStrapi ä¸ºå®ƒä»¬å¥—ä¸Šäº† attributes å’Œ idï¼Œè¿™ä¸ªæ˜¯ä¸åˆ©äºè°ƒç”¨çš„ï¼Œå› ä¸ºæ²¡æœ‰è¦†ç›–å¯¹åº” ts ç±»å‹ï¼Œä¼šå¢åŠ å¾ˆå¤šä¸å¿…è¦çš„è°ƒè¯•æˆæœ¬ã€‚ æ¯ä¸ªç»“æ„ä½“éƒ½åŠ ä¸Šäº† createdAtã€ publishedAtã€updatedAt ä¸‰ä¸ªå­—æ®µï¼Œå®é™…ä¸Šæ˜¯ä¸éœ€è¦è¿™äº›å­—æ®µçš„ï¼Œéšç€æ¥å£å±‚çº§çš„å¢åŠ ï¼Œè¿‡å¤šä¸è¢«ä½¿ç”¨çš„å­—æ®µä¼šå¢åŠ æ¥å£çš„å¤æ‚åº¦å’Œå¯ç»´æŠ¤æ€§ã€‚ ","date":"2023-02-15","objectID":"/ssr/:4:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"CMS æ¥å£ä¼˜åŒ– è‡ªå®šä¹‰è¿”å› åœ¨ src/api/* çš„ç›®å½•ä¸‹ï¼Œå­˜æ”¾ç€ç»“æ„ä½“æ¥å£çš„å®šä¹‰ï¼Œå…¶ä¸­ controllers å­˜æ”¾ç€æ¥å£çš„æ§åˆ¶å™¨ï¼Œæ¯å½“å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±æ—¶ï¼Œæ“ä½œéƒ½ä¼šæ‰§è¡Œä¸šåŠ¡é€»è¾‘ä»£ç å¹¶å‘å›å“åº”ï¼Œå¯ä»¥åœ¨å…¶ä¸­é‡å†™ api çš„ç›¸å…³æ–¹æ³•ï¼ˆfindã€findOneã€ update ç­‰ï¼‰ã€‚ ä»¥ layout ä¸ºä¾‹ï¼Œé¦–å…ˆä¸º layout æ¥å£åŠ ä¸Šé»˜è®¤çš„ populate=deep å‚æ•°ï¼Œè¿™æ ·æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™å°±ä¸ç”¨å†åŠ äº†ã€‚ src/api/layout/controllers/layout.js const { createCoreController } = require(\"@strapi/strapi\").factories; module.exports = createCoreController(\"api::layout.layout\", ({ strapi }) =\u003e ({ async find(ctx) { ctx.query = { ...ctx.query, populate: \"deep\", }; const { data } = await super.find(ctx); return data; }, })); è®¿é—® http://localhost:1337/api/layoutsï¼Œå¯ä»¥çœ‹åˆ°ä¸éœ€è¦åŠ  populate å‚æ•°å°±å¯ä»¥æ‹¿åˆ°è”è¡¨çš„æ•°æ®äº†ã€‚ ç„¶åé’ˆå¯¹ä¸Šé¢æåˆ°çš„ attributesã€id å’Œæ—¶é—´ç›¸å…³çš„å­—æ®µå®šä¹‰ä¸¤ä¸ªæ·±åº¦éå†çš„å‡½æ•°æ¥å¯¹åº”å»é™¤ã€‚ æ–°å»º src/utils/index.js /** * ç§»é™¤å¯¹è±¡ä¸­è‡ªåŠ¨åˆ›å»ºçš„æ—¶é—´å­—æ®µ * @param obj * @returns */ const removeTime = (obj) =\u003e { const { createdAt, publishedAt, updatedAt, ...params } = obj || {}; Object.getOwnPropertyNames(params).forEach((item) =\u003e { if (typeof params[item] === \"object\") { if (Array.isArray(params[item])) { params[item] = params[item].map((item) =\u003e { return removeTime(item); }); } else { params[item] = removeTime(params[item]); } } }); return params; }; /** * ç§»é™¤å±æ€§å’Œid * @param {*} obj * @returns */ const removeAttrsAndId = (obj) =\u003e { const { attributes, id, ...params } = obj || {}; const newObj = { ...attributes, ...params }; Object.getOwnPropertyNames(newObj).forEach((item) =\u003e { if (typeof newObj[item] === \"object\") { if (Array.isArray(newObj[item])) { newObj[item] = newObj[item].map((item) =\u003e { return removeAttrsAndId(item); }); } else { newObj[item] = removeAttrsAndId(newObj[item]); } } }); return newObj; }; module.exports = { removeTime, removeAttrsAndId, }; ç„¶åå¯¹ layout çš„ find å‡½æ•°è¿”å›çš„æ•°æ®è°ƒç”¨è¿›è¡Œå¤„ç†ã€‚ 'use strict'; /** * layout controller */ const { removeTime, removeAttrsAndId } = require('../../../utils/index'); const { createCoreController } = require('@strapi/strapi').factories; module.exports = createCoreController('api::layout.layout', ({ strapi }) =\u003e ({ async find(ctx) { ctx.query = { ...ctx.query, populate: 'deep', }; const { data } = await super.find(ctx); return removeAttrsAndId(removeTime(data[0])); } })); å†è®¿é—® http://localhost:1337/api/layoutsï¼Œå¯ä»¥åªåŒ…å«äº†éœ€è¦çš„æ•°æ®ã€‚ å¢åŠ è·¨åŸŸé™åˆ¶ Strapi çš„æ¥å£é»˜è®¤ä¸åšè·¨åŸŸé™åˆ¶ï¼Œè¿™æ ·æ‰€æœ‰çš„åŸŸåéƒ½å¯ä»¥è°ƒç”¨ï¼Œå®‰å…¨æ€§æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚ åœ¨ config/middlewares.js ä¸­åŠ ä¸Šè·¨åŸŸçš„é™åˆ¶ã€‚ module.exports = [ 'strapi::errors', 'strapi::security', { name: 'strapi::cors', config: { enabled: true, headers: '*', origin: ['http://localhost:3000', 'http://localhost:1337'], }, }, 'strapi::poweredBy', 'strapi::logger', 'strapi::query', 'strapi::body', 'strapi::session', 'strapi::favicon', 'strapi::public', ]; ","date":"2023-02-15","objectID":"/ssr/:4:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"BFF æ¥å£å®šä¹‰ æ¥å£é…ç½®å¥½ä»¥åè¿˜ä¸èƒ½ç›´æ¥åœ¨é¡µé¢ä¸­è°ƒç”¨ï¼Œéœ€è¦é…ç½®ä¸€å±‚ BFF å±‚ï¼Œå³æœåŠ¡äºå‰ç«¯çš„æ•°æ®å±‚ã€‚ å› ä¸ºé€šå¸¸é…ç½®çš„æ•°æ®æ˜¯ç«™åœ¨ç»“æ„ä½“çš„è§’åº¦çš„ï¼Œå¹¶ä¸ä¸€å®šå¯ä»¥ç”±å‰ç«¯è°ƒç”¨ï¼Œå¾€å¾€è¿˜éœ€è¦å¤æ‚çš„æ•°æ®å¤„ç†ã€‚ ä¸ºäº†æé«˜æ•°æ®å±‚çš„å¤ç”¨ç¨‹åº¦ï¼Œå¢åŠ  BFF å±‚ï¼Œå°†æ¥å£åŒ…ä¸€å±‚ï¼Œè¿›è¡Œç›¸å…³å¤„ç†åï¼Œå‰ç«¯é¡µé¢åªè°ƒç”¨å®šä¹‰çš„ BFF å±‚æ¥å£ï¼Œä¸ç›´æ¥ä¸é…ç½®çš„æ¥å£äº§ç”Ÿäº¤äº’ã€‚ åœ¨å®šä¹‰æ¥å£å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ Nextjs æ¥å£çš„è·¯ç”±æ˜¯æ€ä¹ˆé…ç½®çš„? ä¸é™æ€é¡µé¢ç±»ä¼¼ï¼ŒNextjs æ¥å£ä¹Ÿé‡‡ç”¨æ–‡ä»¶çº¦å®šå¼è·¯ç”±çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œå¯ä»¥åˆ†ä¸ºé¢„å®šä¹‰è·¯ç”±ã€åŠ¨æ€è·¯ç”±å’Œå…¨æ•è·è·¯ç”±ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š // ./pages/api/home/test.js =\u003e api/home/test é¢„å®šä¹‰è·¯ç”± // ./pages/api/home/[testId].js =\u003e api/home/test, api/home/1, api/home/23 åŠ¨æ€è·¯ç”± // ./pages/api/home/[...testId].js =\u003e api/home/test, api/home/test/12 å…¨æ•è·è·¯ç”± å¦‚æœä¸€ä¸ªç›¸åŒçš„è·¯ç”±ï¼Œæ¯”å¦‚ api/home/testï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ¥åŒ¹é…ä¸‰è€…ï¼Œä¼šæŒ‰ç…§é¢„å®šä¹‰è·¯ç”± \u003e åŠ¨æ€è·¯ç”± \u003e å…¨æ•è·è·¯ç”±çš„é¡ºåºæ¥åŒ¹é…ã€‚ é¢„å®šä¹‰è·¯ç”±æ˜¯ç²¾å‡†åŒ¹é…ï¼Œåä¸¤è€…åªæ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œè™½ç„¶ä¹Ÿæ»¡è¶³åŒ¹é…åœºæ™¯ï¼Œä½†æ˜¯åªæ˜¯ä½œä¸ºå…œåº•ï¼Œä¼˜å…ˆä¼šä»¥é¢„å®šä¹‰è·¯ç”±ä¸ºå‡†ã€‚ ä¸‹é¢æ¥å¼€å‘ BFF å±‚ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£å±‚ pages/api/layout.tsã€‚ å› ä¸ºä¼šç»å¸¸ç”¨åˆ°æœ¬åœ°åŸŸå å’Œ CMS åŸŸåï¼Œæ‰€ä»¥æ‹¿ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å®ƒä»¬ï¼Œåç»­æ ¹æ®ç¯å¢ƒåŒºåˆ†ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ utils/index.ts export const LOCALDOMAIN = 'http://127.0.0.1:3000'; export const CMSDOMAIN = 'http://127.0.0.1:1337'; å®‰è£… axios å’Œ lodashã€‚ npm i axios npm i lodash npm i --save-dev @types/lodash ä½¿ç”¨è¿‡ Express çš„äººåº”è¯¥çŸ¥é“ä¸­é—´ä»¶çš„æ¦‚å¿µï¼ŒExpress æ˜¯åŸºäºè·¯ç”±å’Œä¸­é—´ä»¶çš„æ¡†æ¶ï¼Œé€šè¿‡é“¾å¼è°ƒç”¨çš„æ–¹å¼æ¥å¯¹æ¥å£è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„å¤„ç†ã€‚ å¼€æºç¤¾åŒºæœ‰å¼€å‘æä¾›äº† next-connect çš„ä¾èµ–æ¥è¡¥å…¨è¿™éƒ¨åˆ†çš„èƒ½åŠ›ï¼Œå…ˆæ¥å®‰è£…ä¸€ä¸‹ä¾èµ–ã€‚ npm install next-connect pages/api/layout.ts import axios from 'axios'; import nextConnect from 'next-connect'; import type { NextApiRequest, NextApiResponse } from 'next'; import { ILayoutProps } from '@/components/layout'; import { CMSDOMAIN } from '@/utils'; import { isEmpty } from 'lodash'; const getLayoutData = nextConnect() // .use(any middleware) .get((req: NextApiRequest, res: NextApiResponse\u003cILayoutProps\u003e) =\u003e { axios.get(`${CMSDOMAIN}/api/layouts`).then(result =\u003e { const { copy_right, link_lists, public_number, qr_code, qr_code_image, site_number, title, } = result?.data || {}; res?.status(200).json({ navbarData: {}, footerData: { title, linkList: link_lists?.data?.map((item: any) =\u003e { return { title: item.title, list: item?.links?.data?.map((_item: any) =\u003e { return { label: _item.label, link: isEmpty(_item.link) ? '' : _item.link, }; }), }; }), qrCode: { image: `${CMSDOMAIN}${qr_code_image.data.url}`, text: qr_code, }, copyRight: copy_right, siteNumber: site_number, publicNumber: public_number, }, }) }) }) export default getLayoutData; NextApiResponse ç±»å‹æ˜¯ Nextjs æä¾›çš„ response ç±»å‹ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ³›å‹ï¼Œæ¥ä½œä¸ºæ•´ä¸ªæ¥å£å’Œåç»­è¯·æ±‚çš„è¿”å›ï¼Œå¯ä»¥æŠŠéœ€è¦çš„æ•°æ®ç±»å‹ä½œä¸ºæ³›å‹ä¼ è¿›å»ï¼Œä¿è¯æ•´ä½“ä»£ç æœ‰ ts çš„ lintã€‚ è¿”å›æ•°æ®ç”¨çš„æ˜¯ jsonï¼Œé’ˆå¯¹æ•°æ®çš„å“åº”ï¼ŒNextjs æä¾›ä¸‹é¢çš„å“åº” Apiï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰ç”¨ä¸åŒçš„å“åº” Apiã€‚ res.status(code) - è®¾ç½®çŠ¶æ€ç çš„åŠŸèƒ½ã€‚code å¿…é¡»æ˜¯æœ‰æ•ˆçš„ HTTP çŠ¶æ€ç ã€‚ res.json(body) - å‘é€ JSON å“åº”ã€‚body å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ res.send(body) - å‘é€ HTTP å“åº”ã€‚body å¯ä»¥æ˜¯ a stringï¼Œan object æˆ– a Bufferã€‚ res.redirect([status,] path) - é‡å®šå‘åˆ°æŒ‡å®šçš„è·¯å¾„æˆ– URLã€‚status å¿…é¡»æ˜¯æœ‰æ•ˆçš„ HTTP çŠ¶æ€ç ã€‚å¦‚æœæœªæŒ‡å®šï¼Œstatus é»˜è®¤ä¸º â€œ307â€ â€œä¸´æ—¶é‡å®šå‘â€ã€‚ res.revalidate(urlPath) - ä½¿ç”¨ . æŒ‰éœ€é‡æ–°éªŒè¯é¡µé¢ getStaticPropsã€‚urlPath å¿…é¡»æ˜¯ä¸€ä¸ª stringã€‚ æ”¹é€  layout éƒ¨åˆ†çš„æ•°æ®æ³¨å…¥ï¼Œæ¢ç”¨æ¥å£æ•°æ®ã€‚ import type { AppProps, AppContext } from 'next/app'; import App from 'next/app'; import Head from 'next/head'; import axios from 'axios'; import { LOCALDOMAIN } from '@/utils'; import type { ILayoutProps } from '@/components/layout'; import Layout from '@/components/layout'; import '@/styles/globals.css' const MyApp = (data: AppProps \u0026 ILayoutProps) =\u003e { const { Component, pageProps, navbarData, footerData } = data; return ( \u003cdiv\u003e \u003cHead\u003e \u003ctitle\u003eA Demo for å®˜ç½‘å¼€å‘å®æˆ˜\u003c/title\u003e \u003cmeta name=\"description\" content=\"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\" /\u003e \u003clink rel=\"icon\" href=\"/favicon.ico\" /\u003e \u003c/Head\u003e \u003cLayout navbarData={navbarData} footerData={footerData}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Layout\u003e \u003c/div\u003e ) } MyApp.getInitialProps = async (context: AppContext) =\u003e { const pageProps = await App.getInitialProps(context); const { data = {} } = await axios.get(`${LOCALDOMAIN}/api/layout`) return { ...pageProps, ...data, } } export default MyApp; è®¿é—® http://localhost:3000ã€‚ ","date":"2023-02-15","objectID":"/ssr/:4:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸»é¢˜åŒ–å®ç°æ–¹æ¡ˆ ä»¥ æŠ–éŸ³å‰ç«¯æŠ€æœ¯å®˜ç½‘ ä¸ºä¾‹ï¼Œå®ƒçš„å®˜ç½‘æœ‰åŒ…å«é»˜è®¤çš„æ ·å¼ï¼š ä¹Ÿæœ‰æš—é»‘è‰²è°ƒçš„å±•ç¤ºï¼š ","date":"2023-02-15","objectID":"/ssr/:5:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åŸºç¡€è‰²è°ƒå˜é‡æŠ½ç¦» ä¸»é¢˜åŒ–åŠŸèƒ½å¯¹ DOM çš„ç»“æ„å˜åŒ–ä¸å¤§ï¼ŒåŸºæœ¬æ˜¯é’ˆå¯¹è‰²è°ƒè¿›è¡Œåˆ‡æ¢ã€‚ é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œå¦‚æœå®šä¹‰ä¸¤å¥—å˜é‡ï¼Œæ˜¯ä¸æ˜¯å°±å®Œæˆäº†å¯¹ä¸¤å¥—ä¸»é¢˜çš„é…ç½®ï¼Ÿæ ¹æ®ä¸åŒçš„ä¸»é¢˜ï¼Œåœ¨ html æ ‡ç­¾ä¸Šæ¥å›ºå®šä¸¤ä¸ªå±æ€§æ¥åŒºåˆ†ï¼Œæ–¹æ¡ˆå°±ç¡®å®šäº†ã€‚ åœ¨å…¨å±€æ ·å¼ä¸­å®šä¹‰ä¸¤å¥—ä¹‹å‰ä½¿ç”¨åˆ°çš„è‰²è°ƒï¼ŒåŒ…æ‹¬å­—ä½“å’ŒèƒŒæ™¯ç­‰é¢œè‰²ï¼ŒæŠŠä¹‹å‰å®šä¹‰çš„ç»„ä»¶æ ·å¼æŠ½å‡ºæ¥æ”¾åœ¨è¿™é‡Œå°±å¯ä»¥ï¼Œä¿è¯æ‰€æœ‰çš„è‰²è°ƒéƒ½é€šè¿‡å˜é‡çš„æ–¹å¼æ¥å¼•ç”¨ã€‚ styles/global.css html[data-theme=\"dark\"] { --primary-color: #ffffff; --primary-background-color: rgba(14, 14, 14, 1); --footer-background-color: rgba(36, 36, 36, 1); --navbar-background-color: rgba(0, 0, 0, 0.5); --secondary-color: rgba(255, 255, 255, 0.5); --link-color: #34a8eb; } html[data-theme=\"light\"] { --primary-color: #333333; --primary-background-color: rgba(255, 255, 255, 1); --footer-background-color: #f4f5f5; --navbar-background-color: rgba(255, 255, 255, 0.5); --secondary-color: #666666; --link-color: #0070f3; } æ¥ä¸‹æ¥å°±æ˜¯æŠŠè¿™äº›å®šä¹‰çš„å˜é‡å»æ›¿æ¢åŸæ¥æ ·å¼ä¸­ç»™çš„å›ºå®šè‰²å€¼ã€‚ components/footer/index.module.scss .footer { padding: 70px 145px; background-color: var(--footer-background-color); .topArea { display: flex; justify-content: space-between; .footerTitle { font-weight: 500; font-size: 36px; line-height: 36px; color: var(--primary-color); margin: 0; } .linkListArea { display: flex; .linkArea { display: flex; flex-direction: column; margin-left: 160px; .title { font-weight: 500; font-size: 14px; line-height: 20px; color: var(--primary-color); margin-bottom: 40px; } .links { display: flex; flex-direction: column; font-weight: 400; font-size: 14px; line-height: 20px; .link { color: var(--primary-color); cursor: pointer; margin-bottom: 24px; } .disabled { color: var(--secondary-color); cursor: not-allowed; margin-bottom: 24px; } } } } } .bottomArea { display: flex; justify-content: space-between; .codeArea { display: flex; flex-direction: column; .text { color: var(--secondary-color); } } .numArea { color: var(--secondary-color); display: flex; flex-direction: column; align-items: flex-end; font-weight: 400; font-size: 14px; line-height: 20px; span { margin-bottom: 12px; } .publicLogo { display: flex; .logo { margin-right: 4px; } } } } } components/layout/index.module.scss .layout { background-color: var(--primary-background-color); .main { min-height: calc(100vh - 560px); } } components/navbar/index.module.scss .navBar { display: flex; align-items: center; justify-content: space-between; background-color: var(--navbar-background-color); backdrop-filter: blur(8px); width: 100%; height: 64px; position: sticky; top: 0; left: 0; padding: 20px 32px; z-index: 100; .logoIcon { width: 4.375rem; height: 1.25rem; background-image: var(--navbar-icon); background-size: 4.375rem 1.25rem; background-repeat: no-repeat; } .themeIcon { width: 1.25rem; height: 1.25rem; background-image: var(--theme-icon); background-size: 1.25rem 1.25rem; background-repeat: no-repeat; cursor: pointer; } } ","date":"2023-02-15","objectID":"/ssr/:5:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å›¾ç‰‡ä¸»é¢˜åŒ–é…ç½® å¯¹äºå›¾ç‰‡çš„ä¸»é¢˜åŒ–ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é’ˆå¯¹ä¸€èˆ¬å›ºå®šä¸å˜çš„å›¾ç‰‡ï¼Œé‡‡ç”¨åŒæ ·å®šä¹‰çš„æ–¹å¼ã€‚ styles/global.css html[data-theme=\"dark\"] { --primary-color: #ffffff; --primary-background-color: rgba(14, 14, 14, 1); --footer-background-color: rgba(36, 36, 36, 1); --navbar-background-color: rgba(0, 0, 0, 0.5); --secondary-color: rgba(255, 255, 255, 0.5); --link-color: #34a8eb; --navbar-icon: url('../public/logo_dark.png'); --theme-icon: url('../public/theme_dark.png'); } html[data-theme=\"light\"] { --primary-color: #333333; --primary-background-color: rgba(255, 255, 255, 1); --footer-background-color: #f4f5f5; --navbar-background-color: rgba(255, 255, 255, 0.5); --secondary-color: #666666; --link-color: #0070f3; --navbar-icon: url('../public/logo_light.png'); --theme-icon: url('../public/theme_light.png'); } å¦ä¸€ç§æ˜¯é…ç½®çš„å›¾ç‰‡ï¼Œå¯èƒ½ä¼šé¢‘ç¹å˜åŒ–ï¼Œè¿™ç§åªéœ€è¦åœ¨ Strapi ä¸­å†åŠ ä¸€ä¸ªå­—æ®µå­˜ä¸åŒä¸»é¢˜çš„å›¾ç‰‡ï¼Œç„¶ååœ¨é¡µé¢é€»è¾‘ä¸­æ ¹æ®ä¸åŒçš„ä¸»é¢˜å»åˆ‡æ¢å°±å¯ä»¥ã€‚ ","date":"2023-02-15","objectID":"/ssr/:5:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸»é¢˜æ•°æ®æ³¨å…¥ é’ˆå¯¹å½“å‰çš„ä¸»é¢˜ï¼Œè‚¯å®šæœ‰ä¸ªåœ°æ–¹éœ€è¦è¿›è¡Œç¼“å­˜ï¼Œåº”è¯¥ä½¿ç”¨å“ªç§å®¢æˆ·ç«¯ç¼“å­˜æœºåˆ¶å‘¢ï¼Ÿ ä¸»é¢˜åŒ–åŠŸèƒ½å¾€å¾€æ˜¯å› ä¸ºç”¨æˆ·æ›´å–œæ¬¢è¿™ç§è‰²è°ƒï¼Œç”¨ localStorage è¦æ›´åˆé€‚ï¼Œå› ä¸ºç›¸æ¯” sessionStorage åªèƒ½ä¿å­˜å½“å‰ä¼šè¯çš„ç‰¹ç‚¹ï¼ŒlocalStorage å¯ä»¥é•¿æœŸä¿ç•™ï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨æ¸…é™¤ï¼Œä¿è¯ä¸‹ä¸€æ¬¡è®¿é—®æ—¶ä¹Ÿå¯ä»¥ä¿è¯æ˜¯ä¹‹å‰çš„ä¸»é¢˜ã€‚ é‚£ä¹ˆåº”è¯¥æ€ä¹ˆå»æ³¨å…¥è¿™ä¸ªç¼“å­˜å‘¢ï¼Œå¦‚æœéšå¿ƒæ‰€æ¬²åœ°å»è¿›è¡Œç¼“å­˜æ³¨å…¥æ“ä½œï¼Œé‚£é¡µé¢ä¸­å¯èƒ½ä¼šåˆ†æ•£å„ç§ç¼“å­˜çš„é€»è¾‘ï¼Œä¸ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œä¹Ÿä¸åˆ©äºç»Ÿä¸€çš„ç»´æŠ¤å’Œç›¸å…³äº‹ä»¶çš„ç»‘å®šï¼Œæ‰€ä»¥éœ€è¦åœ¨ä¸€å¤„åœ°æ–¹èšé›†ä¸»é¢˜ç›¸å…³çš„é€»è¾‘ï¼Œç„¶åå†åˆ†åˆ«æ³¨å…¥ç»™æ¯ä¸ªé¡µé¢å¯¹åº”çš„ç¼–è¾‘æ–¹æ³•ã€‚ è¿™é‡Œéœ€è¦ç”¨åˆ° React çš„ useContextï¼Œå®ƒå…·æœ‰æ¥å—ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†ä¸Šä¸‹æ–‡è¿›è¡Œæ³¨å…¥çš„èƒ½åŠ›ã€‚ æ–°å»º constants/enum export enum Themes { light = 'light', dark = 'dark', } æ–°å»º stores/theme.tsx import {createContext, FC, useEffect, useState} from 'react'; import {Themes} from '@/constants/enum'; interface IThemeContextProps { theme: Themes; setTheme: (theme: Themes) =\u003e void; } interface IThemeContextProviderProps { children: JSX.Element; } export const ThemeContext = createContext\u003cIThemeContextProps\u003e({} as IThemeContextProps); const ThemeContextProvider: FC\u003cIThemeContextProviderProps\u003e = ({children}) =\u003e { const [theme, setTheme] = useState\u003cThemes\u003e(Themes.light); useEffect(() =\u003e { const item = localStorage.getItem('theme') as Themes || Themes.light; setTheme(item); document.getElementsByTagName('html')[0].dataset.theme = item; }, []); return ( \u003cThemeContext.Provider value={{ theme, setTheme: (currentTheme) =\u003e { setTheme(currentTheme); localStorage.setItem('theme', currentTheme); document.getElementsByTagName('html')[0].dataset.theme = currentTheme; } }}\u003e {children} \u003c/ThemeContext.Provider\u003e ) } export default ThemeContextProvider; ThemeContext æ˜¯æš´éœ²å‡ºçš„å˜é‡ï¼Œåœ¨å…¨å±€æ³¨å…¥åï¼Œæ¯ä¸ªè·¯ç”±é¡µé¢éƒ½å¯ä»¥é€šè¿‡å®ƒæ¥è·å–å®šä¹‰çš„ theme å’Œ setTheme è¿›è¡Œç›¸å…³çš„ä¸šåŠ¡æ“ä½œã€‚ ThemeContextProvider åˆ™æ˜¯æ³¨å…¥å™¨ï¼Œç”¨äºç»™éœ€è¦çš„ DOM è¿›è¡Œä¸Šä¸‹æ–‡çš„æ³¨å…¥ã€‚ åœ¨å…¨å±€é¡µé¢æ³¨å…¥ contextã€‚ pages/_app.tsx import type { AppProps, AppContext } from 'next/app'; import App from 'next/app'; import Head from 'next/head'; import axios from 'axios'; import ThemeContextProvider from '@/stores/theme'; import { LOCALDOMAIN } from '@/utils'; import type { ILayoutProps } from '@/components/layout'; import Layout from '@/components/layout'; import '@/styles/globals.css' const MyApp = (data: AppProps \u0026 ILayoutProps) =\u003e { const { Component, pageProps, navbarData, footerData } = data; return ( \u003cdiv\u003e \u003cHead\u003e \u003ctitle\u003eA Demo for å®˜ç½‘å¼€å‘å®æˆ˜\u003c/title\u003e \u003cmeta name=\"description\" content=\"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\" /\u003e \u003clink rel=\"icon\" href=\"/favicon.ico\" /\u003e \u003c/Head\u003e \u003cThemeContextProvider\u003e \u003cLayout navbarData={navbarData} footerData={footerData}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Layout\u003e \u003c/ThemeContextProvider\u003e \u003c/div\u003e ) } MyApp.getInitialProps = async (context: AppContext) =\u003e { const pageProps = await App.getInitialProps(context); const { data = {} } = await axios.get(`${LOCALDOMAIN}/api/layout`) return { ...pageProps, ...data, } } export default MyApp; åœ¨ navbar åŠ ä¸€ä¸ªä¸»é¢˜åŒ–åˆ‡æ¢çš„å…¥å£ã€‚ components/navbar/index.tsx import {FC, useContext} from 'react'; import {ThemeContext} from '@/stores/theme'; import {Themes} from '@/constants/enum'; import styles from './index.module.scss'; export interface INavBarProps {} const NavBar: FC\u003cINavBarProps\u003e = ({}) =\u003e { const { setTheme } = useContext(ThemeContext); return ( \u003cdiv className={styles.navBar}\u003e \u003ca href=\"http://localhost:3000/\"\u003e \u003cdiv className={styles.logoIcon} /\u003e \u003c/a\u003e \u003cdiv className={styles.themeIcon} onClick={(): void =\u003e { setTheme(localStorage.getItem('theme') === Themes.light ? Themes.dark : Themes.light); }}/\u003e \u003c/div\u003e ) } export default NavBar; components/navbar/index.module.scss .navBar { display: flex; align-items: center; justify-content: space-between; background-color: var(--navbar-background-color); backdrop-filter: blur(8px); width: 100%; height: 64px; position: sticky; top: 0; left: 0; padding: 20px 32px; z-index: 100; .logoIcon { width: 4.375rem; height: 1.25rem; background-image: var(--navbar-icon); background-size: 4.375rem 1.25rem; background-repeat: no-repeat; } .themeIcon { width: 1.25rem; height: 1.25rem; background-image: var(--theme-icon); background-size: 1.25rem 1.25rem; background-repeat: no-repeat; cursor: pointer; } } å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¯ä»¥å®ç°ä¸»é¢˜åŒ–çš„åŠŸèƒ½äº†ã€‚ ","date":"2023-02-15","objectID":"/ssr/:5:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¤šè¿›ç¨‹åœºæ™¯ä¸‹ä¸»é¢˜åŒæ­¥ æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼Œæ¯ä¸ªå¼€å¯çš„é¡µé¢éƒ½å¯¹åº”åˆ°ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°é¿å…é¡µé¢ä¹‹é—´çš„æ•°æ®å…±äº«åŠä¸€ä¸ªæŠ¥é”™é¡µé¢å¸¦å´©æ‰€æœ‰é¡µé¢çš„æƒ…å†µã€‚ å¦‚æœç”¨æˆ·å¼€äº†å¤šä¸ªé¡µé¢æ¥è®¿é—®ç«™ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªé¡µé¢çš„ä¸»é¢˜åˆ‡æ¢ï¼Œå¦ä¸€ä¸ªé¡µé¢æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œè¿™æ ·ä¸€ä¸ªæµè§ˆå™¨ä¸‹ä¼šæœ‰å¤šä¸ªä¸»é¢˜çš„é¡µé¢ï¼Œå¯¹ç”¨æˆ·ä½“éªŒä¸Šæ¥è¯´æ˜¯ä¸å¤ªå¥½çš„ã€‚ å‡ºäºè¿½æ±‚æè‡´è€ƒè™‘ï¼Œä¼˜åŒ–ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ç›‘å¬æµè§ˆå™¨çš„ç¼“å­˜ä¿®æ”¹äº‹ä»¶ï¼Œç„¶åå†æ¬¡æ‰§è¡Œåˆå§‹åŒ–çš„æ“ä½œå°±å¥½äº†ã€‚ stores/theme.tsx import {createContext, FC, useEffect, useState} from 'react'; import {Themes} from '@/constants/enum'; interface IThemeContextProps { theme: Themes; setTheme: (theme: Themes) =\u003e void; } interface IThemeContextProviderProps { children: JSX.Element; } export const ThemeContext = createContext\u003cIThemeContextProps\u003e({} as IThemeContextProps); const ThemeContextProvider: FC\u003cIThemeContextProviderProps\u003e = ({children}) =\u003e { const [theme, setTheme] = useState\u003cThemes\u003e(Themes.light); useEffect(() =\u003e { debugger const checkTheme = () =\u003e { const item = localStorage.getItem('theme') as Themes || Themes.light; setTheme(item); document.getElementsByTagName('html')[0].dataset.theme = item; } // åˆå§‹åŒ–å…ˆæ‰§è¡Œä¸€é checkTheme(); // ç›‘å¬æµè§ˆå™¨ç¼“å­˜äº‹ä»¶ window.addEventListener('storage', checkTheme); return (): void =\u003e { // è§£ç»‘ window.removeEventListener('storage', checkTheme); } }, []); return ( \u003cThemeContext.Provider value={{ theme, setTheme: (currentTheme) =\u003e { setTheme(currentTheme); localStorage.setItem('theme', currentTheme); document.getElementsByTagName('html')[0].dataset.theme = currentTheme; } }}\u003e {children} \u003c/ThemeContext.Provider\u003e ) } export default ThemeContextProvider; ç°åœ¨å°è¯•æ‰“å¼€ä¸¤ä¸ªé¡µé¢ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªï¼Œå‘ç°å¦ä¸€ä¸ªä¹Ÿä¼šåŒæ­¥æ›´æ–°ä¸ºä¸€æ ·çš„ä¸»é¢˜äº†ã€‚ ","date":"2023-02-15","objectID":"/ssr/:5:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"é—ªçƒåœºæ™¯ä¼˜åŒ– è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå› ä¸ºåœ¨æœåŠ¡å™¨ç«¯æ˜¯è·å–ä¸åˆ°å½“å‰çš„ä¸»é¢˜çš„ï¼Œé€šè¿‡ useEffect é’©å­æ¥è·å–ä¸»é¢˜è¿›è¡Œæ ·å¼çš„æ¸²æŸ“ï¼Œè¿™æ ·å…¶å®ä¼šæœ‰ä¸€ä¸ªä¸»é¢˜åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œåœ¨ä½ç½‘é€Ÿæˆ–æ˜¯å¿«é€Ÿåˆ‡æ¢åœºæ™¯ä¸‹ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„é—ªçƒï¼Œå¯ä»¥åœ¨é’©å­å¤„è®¾ç½®æ–­ç‚¹æŸ¥çœ‹ï¼ˆå½“å‰ç¼“å­˜æ˜¯é»‘è‰²ä¸»é¢˜ï¼‰ã€‚ å¯ä»¥çœ‹åˆ°èµ°åˆ°é’©å­çš„æ—¶å€™ï¼Œæ˜¯è¿˜æ²¡åŠæ³•è¿›è¡Œå¯¹åº”ä¸»é¢˜æ ·å¼æ¸²æŸ“çš„ï¼Œåº”è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ åªéœ€è¦åœ¨ HTML ä¸­å¼•å…¥å¯¹åº”çš„ scriptï¼Œç¡®ä¿å¯ä»¥åœ¨äº¤äº’ä¹‹å‰è¿›è¡Œä¸»é¢˜çš„åˆå§‹åŒ–å°±è¡Œäº†ã€‚ Nextjs æœ‰æä¾›è¿™ä¸ªèƒ½åŠ›ï¼Œä¿®æ”¹ _document.tsxï¼Œç„¶åå¼•å…¥å¯¹åº”çš„å†…éƒ¨è„šæœ¬ã€‚ import { Html, Head, Main, NextScript } from 'next/document' import Script from 'next/script'; export default function Document() { return ( \u003cHtml lang=\"en\"\u003e \u003cHead /\u003e \u003cbody\u003e \u003cMain /\u003e \u003cNextScript /\u003e \u003cScript id=\"theme-script\" strategy=\"beforeInteractive\"\u003e { `const item = localStorage.getItem('theme') || 'light'; localStorage.setItem('theme', item); document.getElementsByTagName('html')[0].dataset.theme = item; ` } \u003c/Script\u003e \u003c/body\u003e \u003c/Html\u003e ) } id æ˜¯ç”¨äº Nextjs æ£€ç´¢ï¼ŒbeforeInteractive è¡¨æ˜è¿™ä¸ªè„šæœ¬çš„æ‰§è¡Œç­–ç•¥æ˜¯åœ¨äº¤äº’ä¹‹å‰ï¼Œä¼šè¢«é»˜è®¤æ”¾åˆ° head ä¸­ã€‚ ç°åœ¨å†æ¥è¯•è¯•æ•ˆæœï¼Œå‘ç°èµ°åˆ°é’©å­çš„æ—¶å€™å·²ç»å¯ä»¥æ­£å¸¸å»åˆå§‹åŒ–äº†ã€‚ ","date":"2023-02-15","objectID":"/ssr/:5:5","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¸§åŠ¨ç”»å®ç°æ–¹æ¡ˆ ä»¥ æŠ–éŸ³å‰ç«¯æŠ€æœ¯å®˜ç½‘ çš„é¦–é¡µåŠ è½½åŠ¨ç”»ä¸ºä¾‹ï¼Œçœ‹çœ‹è¿™ä¸ªåŠ¨ç”»ä¸‹ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ é¦–å…ˆæ‰“å¼€æ§åˆ¶å°çš„ networkï¼Œä½¿ç”¨ performance æ¥å½•åˆ¶é¦–é¡µåŠ è½½çš„è¿‡ç¨‹ï¼Œä¸ºäº†èƒ½æ›´æ¸…æ™°æŸ¥çœ‹ï¼Œé€‚å½“é™ä½ CPU çš„æ€§èƒ½ï¼Œè°ƒæ•´ä¸º 4 x slowdownã€‚ ç‚¹å‡»æ§åˆ¶å°å·¦ä¸Šè§’çš„ âšªï¼Œç„¶ååˆ·æ–°é¡µé¢ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„é€å¸§åˆ—è¡¨ï¼š ä»ä¸‹é¢çš„åŠ è½½å›¾ä¸­å¯ä»¥åˆ¤æ–­å‡ºï¼Œè¿™ä¸ªåŠ¨ç”»æ€»çš„æ‰§è¡Œæ—¶é•¿ä¸º 1.36 sï¼Œç„¶åä¸Šé¢çš„åˆ—è¡¨ä¸­æœ‰å…·ä½“é¡µé¢åŠ è½½è¿‡ç¨‹çš„å¸§åŠ¨ç”»å˜åŒ–å›¾ï¼Œé€šè¿‡æŒ‰å¸§æŸ¥çœ‹ï¼Œå¯ä»¥å¤§æ¦‚çœ‹å‡ºè¿™ä¸ªåŠ¨ç”»çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ã€‚ æŒ‰ç…§ä»å°åºåˆ—åˆ°å¤§åºåˆ—çš„é¡ºåºï¼Œæ¯ä¸ªå…ƒç´ åˆ†åˆ«æ‰§è¡Œäº†ä»ä¸‹å¾€ä¸Šçš„å¹³ç§»æ“ä½œï¼Œä»¥åŠä¸€ä¸ªé€æ˜åº¦ä» 0 åˆ° 1 çš„è¿‡ç¨‹ï¼ŒåŠ ä¸Šä¸Šé¢çœ‹åˆ°æ¯ä¸ªåŠ¨ç”»çš„æ—¶é•¿åˆ†æéƒ½æ˜¯ 1.3sï¼Œæ‰€ä»¥åªæ˜¯å¯¹æ¯ä¸ªå…ƒç´ æ¨è¿Ÿäº†ä¸åŒçš„åŠ¨ç”»å¹³ç§»æ—¶é—´ï¼Œä½†æ˜¯å®ƒä»¬äº«æœ‰ç›¸åŒçš„åŠ¨ç”»æ—¶é•¿ï¼Œé’ˆå¯¹è¿™ä¸ªåœºæ™¯åº”è¯¥æ€ä¹ˆå»å®ç°å‘¢ï¼Ÿ é’ˆå¯¹ç°åœ¨çš„é¦–é¡µï¼ŒæŠŠ dom å…ƒç´ ç®€å•æ‹†åˆ†ä¸º 8 ä¸ªåŒºåŸŸï¼Œæ€»åŠ¨ç”»æ—¶é•¿å®šæˆ 1sï¼Œå…¶ä¸­ 1s çš„æ—¶é—´å¯ä»¥åˆ†ä¸º 9 ä¸ªæ—¶é—´å¸§ï¼Œæ¯ä¸ªåŒºåŸŸä»å¯¹åº”åºåˆ—çš„æ—¶é—´å¸§å¼€å§‹æ‰§è¡Œç›¸åŒçš„åŠ¨ç”»æ•ˆæœï¼Œæœ€åæŠŠæ‰€æœ‰çš„å¸§è¿èµ·æ¥å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¸§åŠ¨ç”»ã€‚ å®šä¹‰å¯¹åº”çš„æ ·å¼è¿›è¡Œç»‘å®šï¼Œä»¥ fadeInDown1 ä¸¾ä¾‹ï¼Œ@keyframes æŒ‡å‘åŠ¨ç”»çš„é€å¸§çŠ¶æ€ï¼Œå…¶ä¸­ 0% å’Œ 11 % éƒ½æ˜¯ä¸€æ ·çš„å†…å®¹ï¼Œè¿™æ—¶å€™åŒºåŸŸå¤„äº y è½´ 40px çš„ä½ç½®ï¼Œç„¶åæœ«å°¾çŠ¶æ€æ˜¯æ— åŒºåŸŸçŠ¶æ€å’Œ 1 é€æ˜åº¦ï¼Œè¿™ä¸ªåŠ¨ç”»çš„æ•ˆæœä¼šä½¿å¾—åŠ¨ç”»ä»æ•´ä½“æ—¶é—´çš„ 11% å¼€å§‹æ‰§è¡Œï¼Œåˆ° 100 % å®Œæˆæœ€ç»ˆçš„å˜åŒ–ã€‚ è¿™ä¸ª 11% æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿä¸Šé¢æåˆ°ä¸ºæ¯ä¸ªåŠ¨ç”»å»¶è¿Ÿä¸€ä¸ªå¸§é¢‘ç‡æ‰§è¡Œï¼Œ8 ä¸ªåŒºåŸŸï¼Œå…± 9 å¸§ï¼Œæ‰€ä»¥ 1 å¸§çš„å æ¯”ä¸º 11% çš„æ€»åŠ¨ç”»æ—¶é•¿ï¼Œæ¯ä¸ªåŠ¨ç”»çš„èµ·å§‹æ—¶é—´ï¼ˆç¬¬äºŒä¸ªçŠ¶æ€å€¼ï¼‰éƒ½æ¯”ä¸Šä¸€ä¸ªé«˜å‡º 1 å¸§çš„æ¯”ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥å°†æ•´ä½“å¸§åŠ¨ç”»ä¸²è”èµ·æ¥äº†ã€‚ styles/Home.module.scss .withAnimation { .title { animation: fadeInDown1 1s; } .description { animation: fadeInDown2 1s; } .card:nth-of-type(1) { animation: fadeInDown3 1s; } .card:nth-of-type(2) { animation: fadeInDown4 1s; } .card:nth-of-type(3) { animation: fadeInDown5 1s; } .card:nth-of-type(4) { animation: fadeInDown6 1s; } .card:nth-of-type(5) { animation: fadeInDown7 1s; } .card:nth-of-type(6) { animation: fadeInDown8 1s; } } @keyframes fadeInDown1 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 11% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown2 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 22% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown3 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 33% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown4 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 44% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown5 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 55% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown6 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 66% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown7 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 77% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } @keyframes fadeInDown8 { 0% { transform: translate3d(0, 40px, 0); opacity: 0; } 88% { transform: translate3d(0, 40px, 0); opacity: 0; } 100% { -webkit-transform: none; transform: none; opacity: 1; } } æ”¹é€ é¦–é¡µ (index.tsx) Dom ç±»ï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ªåŠ¨ç”»ç±»æ¥å­˜æ”¾åŠ¨ç”»ç›¸å…³çš„æ ·å¼ï¼Œé¿å…å¯¹åŸºç¡€æ ·å¼é€ æˆæ±¡æŸ“ã€‚ import {useRef} from 'react'; import type { NextPage } from 'next'; import classNames from 'classnames'; import styles from '@/styles/Home.module.scss'; interface IHomeProps { title: string; description: string; list: { label: string; info: string; link: string; }[]; } const Home: NextPage\u003cIHomeProps\u003e = ({ title, description, list }) =\u003e { const mainRef = useRef\u003cHTMLDivElement\u003e(null); return ( \u003cdiv className={styles.container}\u003e \u003cmain className={classNames([styles.main, styles.withAnimation])} ref={mainRef}\u003e \u003ch1 className={styles.title}\u003e{title}\u003c/h1\u003e \u003cp className={styles.description}\u003e{description}\u003c/p\u003e \u003cdiv className={styles.grid}\u003e { list?.map((item, index) =\u003e { return ( \u003cdiv key={index} className={styles.card} onClick={(): void =\u003e { window.open( item?.link, \"blank\", \"noopener=yes,noreferrer=yes\" ); }}\u003e \u003ch2\u003e{item?.label}\u003c/h2\u003e \u003cp\u003e{item?.info}\u003c/p\u003e \u003c/div\u003e ) }) } \u003c/div\u003e \u003c/main\u003e \u003c/div\u003e ) } Home.getInitialProps = (context) =\u003e { return { title: \"Hello SSR!\", description: \"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\", list: [ { label: \"æ–‡ç« 1\", info: \"A test for article1\", link: \"http://localhost:3000/article/1\", }, { label: \"æ–‡ç« 2\", info: \"A test for article2\", link: ","date":"2023-02-15","objectID":"/ssr/:6:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸»åŠ¨è§¦å‘åŠ¨ç”»é‡æ–°æ’­æ”¾ åœ¨åˆ‡æ¢ä¸»é¢˜æ—¶ï¼Œå¸Œæœ›èƒ½å†æ‰§è¡Œä¸€æ¬¡åŠ è½½åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡ requestAnimationFrame æ¥å®ç°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå›è°ƒï¼Œå¼ºåˆ¶æµè§ˆå™¨åœ¨é‡ç»˜å‰è°ƒç”¨æŒ‡å®šçš„å‡½æ•°æ¥è¿›è¡ŒåŠ¨ç”»çš„æ›´æ–°ã€‚ ä½¿ç”¨è¿™ä¸ªæ¥æ”¹é€ ä¸€ä¸‹é¦–é¡µï¼ŒåŠ ä¸€ä¸ª useEffect çš„é’©å­ã€‚ import {useRef, useContext, useEffect} from 'react'; import type { NextPage } from 'next'; import classNames from 'classnames'; import { ThemeContext } from '@/stores/theme'; import styles from '@/styles/Home.module.scss'; interface IHomeProps { title: string; description: string; list: { label: string; info: string; link: string; }[]; } const Home: NextPage\u003cIHomeProps\u003e = ({ title, description, list }) =\u003e { const mainRef = useRef\u003cHTMLDivElement\u003e(null); const { theme } = useContext(ThemeContext); useEffect(() =\u003e { mainRef.current?.classList.remove(styles.withAnimation); window.requestAnimationFrame(() =\u003e { mainRef.current?.classList.add(styles.withAnimation); }); }, [theme]); return ( \u003cdiv className={styles.container}\u003e \u003cmain className={classNames([styles.main, styles.withAnimation])} ref={mainRef}\u003e \u003ch1 className={styles.title}\u003e{title}\u003c/h1\u003e \u003cp className={styles.description}\u003e{description}\u003c/p\u003e \u003cdiv className={styles.grid}\u003e { list?.map((item, index) =\u003e { return ( \u003cdiv key={index} className={styles.card} onClick={(): void =\u003e { window.open( item?.link, \"blank\", \"noopener=yes,noreferrer=yes\" ); }}\u003e \u003ch2\u003e{item?.label}\u003c/h2\u003e \u003cp\u003e{item?.info}\u003c/p\u003e \u003c/div\u003e ) }) } \u003c/div\u003e \u003c/main\u003e \u003c/div\u003e ) } Home.getInitialProps = (context) =\u003e { return { title: \"Hello SSR!\", description: \"A Demo for å®˜ç½‘å¼€å‘å®æˆ˜\", list: [ { label: \"æ–‡ç« 1\", info: \"A test for article1\", link: \"http://localhost:3000/article/1\", }, { label: \"æ–‡ç« 2\", info: \"A test for article2\", link: \"http://localhost:3000/article/2\", }, { label: \"æ–‡ç« 3\", info: \"A test for article3\", link: \"http://localhost:3000/article/3\", }, { label: \"æ–‡ç« 4\", info: \"A test for article4\", link: \"http://localhost:3000/article/4\", }, { label: \"æ–‡ç« 5\", info: \"A test for article5\", link: \"http://localhost:3000/article/5\", }, { label: \"æ–‡ç« 6\", info: \"A test for article6\", link: \"http://localhost:3000/article/6\", }, ], }; } export default Home; åœ¨æ¯æ¬¡ theme å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¸»åŠ¨ç§»é™¤å¯¹åº”çš„åŠ¨ç”»ç±»ï¼Œå†é€šè¿‡ requestAnimationFrame å¯¹åŠ¨ç”»ç±»è¿›é‡æ–°ç»‘å®šï¼Œè¾¾åˆ°ä¸»åŠ¨è§¦å‘åŠ¨ç”»åˆ·æ–°çš„æ•ˆæœï¼Œç°åœ¨æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆæˆå“ã€‚ ","date":"2023-02-15","objectID":"/ssr/:6:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¤šåª’ä½“é€‚é…æ–¹æ¡ˆ ä¹‹å‰çš„é¡µé¢åªç»˜åˆ¶äº† pc ç«¯çš„æ ·å¼ï¼Œé€šå¸¸å®˜ç½‘éœ€è¦æ”¯æŒ pcã€ ipadã€ ç§»åŠ¨ç«¯ç­‰å¤šç§è®¾å¤‡çš„è®¿é—®ï¼Œç°åœ¨éœ€è¦å¯¹å¤šåª’ä½“è®¾å¤‡çš„æ ·å¼è¿›è¡Œå…¼å®¹é€‚é…ã€‚ ","date":"2023-02-15","objectID":"/ssr/:7:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"Px è½¬ Rem åœ¨é€‚é…ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ rem å’Œ pxï¼Œpx æ˜¯ç›¸å¯¹å±å¹•åˆ†è¾¨ç‡çš„åƒç´ å•ä½ï¼Œ rem æ˜¯ç›¸å¯¹ HTML æ ¹å…ƒç´ å­—ä½“å¤§å°è€Œç¡®å®šçš„ç›¸å¯¹å•ä½ï¼Œå¯¹äºå¤šåª’ä½“çš„é€‚é…ï¼Œå¸¸ç”¨ rem è¿›è¡Œå¼€å‘ã€‚ æ‰€ä»¥éœ€è¦å¯¹ä¹‹å‰çš„æ ·å¼è¿›è¡Œä¸€ä¸‹æ›¿æ¢ï¼Œå°† px å•ä½æ›¿æ¢ä¸º remï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡ webstorm çš„ px2rwd-intellij-plugin æ’ä»¶æ¥ååŠ©å®Œæˆï¼Œå¯ä»¥å‚ç…§ä¸‹å›¾å®‰è£…ï¼Œé»˜è®¤çš„çš„æ ¹å­—ä½“ä¸º 16pxï¼Œæ ¹æ®ç›¸å…³è¯´æ˜æ‰©å±•é…ç½®è°ƒæ•´å³å¯ã€‚ å®‰è£…å®Œæˆåï¼Œç§»æ­¥åˆ°æ ·å¼é—®é¢˜ï¼Œè¾“å…¥ 16 pxï¼Œå¯ä»¥çœ‹åˆ°ä¼šæœ‰å¯¹åº” rem æç¤ºï¼Œå°†æ‰€æœ‰çš„ px å•ä½æ›¿æ¢å³å¯ã€‚ ","date":"2023-02-15","objectID":"/ssr/:7:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"CSS å¤šåª’ä½“è®¾å¤‡é€‚é… é€šè¿‡ç¼–å†™ä¸åŒçš„åª’ä½“è®¾å¤‡æ ·å¼æ¥è¿›è¡Œé€‚é…ï¼Œè¿™ç§å¸¸ç”¨äº dom ç»“æ„å˜åŒ–ä¸å¤§ï¼Œå¯ä»¥å¤ç”¨ dom çš„åŸºç¡€ä¸Šï¼Œè°ƒæ•´æ ·å¼å°±èƒ½é€‚é…çš„åœºæ™¯ã€‚ä¸ºåŠ å¼ºå¤ç”¨ï¼Œå¯ä»¥å®šä¹‰å‡ ä¸ªå¸¸ç”¨çš„è®¾å¤‡åœºæ™¯ã€‚ pages/media.scss // æå°åˆ†è¾¨ç‡ç§»åŠ¨ç«¯è®¾å¤‡ @mixin media-mini-mobile { @media screen and (max-width: 25.875rem) { @content; } } // ä»‹äºæå°åˆ†è¾¨ç‡å’Œæ­£å¸¸åˆ†è¾¨ç‡ä¹‹é—´çš„ç§»åŠ¨ç«¯è®¾å¤‡ @mixin media-between-mini-and-normal-mobile { @media screen and (min-width: 25.876rem) and (max-width: 47.9375rem) { @content; } } // ç§»åŠ¨ç«¯è®¾å¤‡ @mixin media-mobile { @media screen and (max-width: 47.9375rem) { @content; } } // ipad @mixin media-ipad { @media screen and (min-width: 47.9375rem) and (max-width: 75rem) { @content; } } åœ¨å¤§éƒ¨åˆ†åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥å¼•å…¥è¿™äº›å®šä¹‰è¿›è¡Œé€‚é…ã€‚ @include media-ipad { // ... } ä»¥ footer ç»„ä»¶ä¸¾ä¾‹ï¼Œæ”¹é€ ä¸€ä¸‹å®ƒä¹‹å‰çš„æ ·å¼ã€‚ components/footer/index.module.scss @import \"./pages/media.scss\"; .footer { font-size: 1rem; padding: 4.375rem 9.0625rem; background-color: var(--footer-background-color); .topArea { display: flex; justify-content: space-between; flex-wrap: wrap; .footerTitle { font-weight: 500; font-size: 2.25rem; line-height: 2.25rem; color: var(--primary-color); margin: 0; } .linkListArea { display: flex; .linkArea { display: flex; flex-direction: column; margin-left: 10rem; .title { font-weight: 500; font-size: 0.875rem; line-height: 1.25rem; color: var(--primary-color); margin-bottom: 2.5rem; word-break: keep-all; } .links { display: flex; flex-direction: column; font-weight: 400; font-size: 0.875rem; line-height: 1.25rem; word-break: keep-all; .link { color: var(--primary-color); cursor: pointer; margin-bottom: 1.5rem; } .disabled { color: var(--secondary-color); cursor: not-allowed; margin-bottom: 1.5rem; } } } .linkArea:first-of-type { margin-left: 0; } } } .bottomArea { display: flex; justify-content: space-between; .codeArea { display: flex; flex-direction: column; .text { color: var(--secondary-color); } } .numArea { color: var(--secondary-color); display: flex; flex-direction: column; align-items: flex-end; font-weight: 400; font-size: 0.875rem; line-height: 1.25rem; span { margin-bottom: 0.75rem; } .publicLogo { display: flex; .logo { margin-right: 0.25rem; } } } } } @media screen and (min-width: 48.6875rem) and (max-width: 54.125rem) { .footer { .topArea { .footerTitle { margin-bottom: 1.25rem; } } } } @media screen and (max-width: 48.6875rem) { .footer { .topArea { display: flex; flex-direction: column; align-items: center; .footerTitle { margin-bottom: 2.5rem; } .linkListArea { display: flex; flex-direction: column; text-align: center; .linkArea { margin-left: 0; } } } .bottomArea { display: flex; flex-direction: column; align-items: center; .codeArea { display: flex; flex-direction: column; align-items: center; .text { text-align: center; margin: 1.25rem 0; } } .numArea { align-items: center; text-align: center; } } } } // @include media-ipad { // } å®ç°æ•ˆæœï¼š ","date":"2023-02-15","objectID":"/ssr/:7:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"Context æ³¨å…¥è®¾å¤‡ä¿¡æ¯ å¯¹äºé¡µé¢çš„æ ·å¼é€‚é…ï¼ŒCSS media å·²ç»å¯ä»¥è¦†ç›–ç»å¤§éƒ¨åˆ†çš„åœºæ™¯ï¼Œä½†å°éƒ¨åˆ†çš„åœºæ™¯ä»ç„¶æ— æ³•è¦†ç›–ï¼Œæ¯”å¦‚åœ¨ä¸€äº›åª’ä½“è®¾å¤‡ä¸‹ï¼Œä¸å†é‡‡ç”¨åŸæœ¬çš„ dom ç»“æ„ï¼Œæ¢ç”¨åˆ«çš„äº¤äº’å½¢å¼ï¼Œå°±æ²¡åŠæ³•ç›´æ¥ç”¨æ ·å¼è¦†ç›–äº†ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡åœ¨å®¢æˆ·ç«¯åˆ¤æ–­å½“å‰çš„è®¾å¤‡ï¼Œé€‰ç”¨ä¸åŒçš„äº¤äº’ã€‚ åº”è¯¥æ€ä¹ˆåœ¨å®¢æˆ·ç«¯åˆ¤æ–­å½“å‰çš„è®¾å¤‡å‘¢ï¼Ÿ å¯ä»¥å®šä¹‰ä¸€ä¸ª contextï¼Œç”¨äºåˆ¤æ–­å½“å‰çš„è®¾å¤‡ï¼Œç„¶åæ³¨å…¥ç»™æ¯ä¸ªé¡µé¢ã€‚åˆ¤æ–­è®¾å¤‡çš„æ–¹å¼å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡é¡µå®½æ¥åˆ¤æ–­å°±å¯ã€‚ constants/enum.ts export enum Environment { pc = 'pc', ipad = 'ipad', mobile = 'mobile', none = 'none', } stores/userAgent.tsx import React, {createContext, FC, useEffect, useState} from 'react'; import {Environment} from '@/constants/enum'; interface IUserAgentContextProps { userAgent: Environment; } interface IUserAgentProps { children: JSX.Element; } export const UserAgentContext = createContext\u003cIUserAgentContextProps\u003e({} as IUserAgentContextProps); const UserAgentProvider: FC\u003cIUserAgentProps\u003e = ({ children }) =\u003e { const [userAgent, setUserAgent] = useState\u003cEnvironment\u003e(Environment.none); // ç›‘å¬æœ¬åœ°ç¼“å­˜æ¥åŒæ­¥ä¸åŒé¡µé¢é—´çš„ä¸»é¢˜ï¼ˆå½“å‰é¡µé¢æ— æ³•ç›‘å¬åˆ°ï¼Œç›´æ¥åœ¨é¡¶éƒ¨æ è¿›è¡Œäº†ç±»çš„åˆ‡æ¢) useEffect(() =\u003e { const checkUserAgent = (): void =\u003e { const width = document.body.offsetWidth; switch (true) { case width \u003c 768: setUserAgent(Environment.mobile); break; case width \u003e= 768 \u0026\u0026 width \u003c 1200: setUserAgent(Environment.ipad); break; case width \u003e= 1200: setUserAgent(Environment.pc); break; default: setUserAgent(Environment.none); break; } } checkUserAgent(); window.addEventListener('resize', checkUserAgent); return (): void =\u003e { window.removeEventListener('resize', checkUserAgent); } }, [typeof document !== 'undefined' \u0026\u0026 document.body.offsetWidth]); return ( \u003cUserAgentContext.Provider value={{ userAgent }}\u003e {children} \u003c/UserAgentContext.Provider\u003e ) } export default UserAgentProvider; Environment.noneï¼šè®¾ç½®ä¸€ä¸ªç©ºæ€ï¼Œä¸ºäº†é¿å…æœªå–åˆ°é¡µå®½æ—¶ï¼Œé”™è¯¯èµ‹å€¼éå½“å‰é¡µé¢çš„è®¾å¤‡åˆ†è¾¨ç‡çš„å€¼ï¼Œå¯¼è‡´å¯èƒ½ä¼šå‡ºç°åˆ†è¾¨ç‡æ ·å¼çš„çŸ­æš‚åˆ‡æ¢é€ æˆçš„è§†è§‰å†²çªã€‚ typeof document !== â€œundefinedâ€ \u0026\u0026 document.body.offsetWidthï¼š é™¤é’©å­æ–¹æ³•é‡Œï¼ˆæ¯”å¦‚ useEffectï¼‰ä»¥å¤–çš„é€»è¾‘ï¼Œéƒ½æ˜¯ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„ï¼Œåœ¨æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰ BOM çš„æ³¨å…¥çš„ï¼Œæ‰€ä»¥éœ€è¦å¯¹ BOM çš„è°ƒç”¨è¿›è¡Œåˆ¤ç©ºã€‚ æŠŠè¿™ä¸ª context åŒæ ·æ³¨å…¥åˆ°å…¥å£æ–‡ä»¶ã€‚ pages/_app.tsx \u003cThemeContextProvider\u003e \u003cUserAgentProvider\u003e \u003cLayout navbarData={navbarData} footerData={footerData}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Layout\u003e \u003c/UserAgentProvider\u003e \u003c/ThemeContextProvider\u003e åœ¨ navbar ç»„ä»¶ç®€å•è°ƒç”¨è¯•è¯•ã€‚ components/navbar/index.tsx import { FC, useContext } from \"react\"; import styles from \"./index.module.scss\"; import { ThemeContext } from \"@/stores/theme\"; import { UserAgentContext } from \"@/stores/userAgent\"; import { Themes, Environment } from \"@/constants/enum\"; export interface INavBarProps {} const NavBar: FC\u003cINavBarProps\u003e = ({}) =\u003e { const { setTheme } = useContext(ThemeContext); const { userAgent } = useContext(UserAgentContext); return ( \u003cdiv className={styles.navBar}\u003e \u003ca href=\"http://localhost:3000/\"\u003e \u003cdiv className={styles.logoIcon}\u003e\u003c/div\u003e \u003c/a\u003e \u003cdiv className={styles.themeArea}\u003e {userAgent === Environment.pc \u0026\u0026 ( \u003cspan className={styles.text}\u003eå½“å‰æ˜¯pcç«¯æ ·å¼\u003c/span\u003e )} {userAgent === Environment.ipad \u0026\u0026 ( \u003cspan className={styles.text}\u003eå½“å‰æ˜¯Ipadç«¯æ ·å¼\u003c/span\u003e )} {userAgent === Environment.mobile \u0026\u0026 ( \u003cspan className={styles.text}\u003eå½“å‰æ˜¯ç§»åŠ¨ç«¯æ ·å¼\u003c/span\u003e )} \u003cdiv className={styles.themeIcon} onClick={(): void =\u003e { if (localStorage.getItem(\"theme\") === Themes.light) { setTheme(Themes.dark); } else { setTheme(Themes.light); } }} \u003e\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e ); }; export default NavBar; å®ç°æ•ˆæœï¼š ","date":"2023-02-15","objectID":"/ssr/:7:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æœåŠ¡ç«¯åˆ¤å®šè®¾å¤‡ä¿¡æ¯ å®¢æˆ·ç«¯åˆ¤å®šè®¾å¤‡å­˜åœ¨ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œå› ä¸º HTML æ–‡æœ¬çš„ç”Ÿæˆæ˜¯åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯åˆ¤æ–­è®¾å¤‡ä¿¡æ¯ä¼šå­˜åœ¨ä¸€ä¸ªåˆå§‹æ€åˆ°å®é™…è®¾å¤‡æ•°æ®çŸ­æš‚åˆ‡æ¢çš„é—®é¢˜ï¼Œè€Œä¸”å¦‚æœä¸åŒè®¾å¤‡å±•ç¤ºçš„å†…å®¹ä¸åŒï¼Œè¿˜æœ‰å¯èƒ½ä¼šå½±å“åˆ°å®é™…çš„ SEO ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯åˆ¤æ–­å½“å‰çš„è®¿é—®è®¾å¤‡å‘¢ï¼Ÿ è™½ç„¶æœåŠ¡å™¨ç«¯æ‹¿ä¸åˆ°å½“å‰è®¿é—®çš„å®¢æˆ·ç«¯é¡µå®½ç­‰æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯åœ¨æœåŠ¡å™¨ç«¯è¯·æ±‚çš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­æœ‰ä¸€ä¸ª user-agent è¯·æ±‚å¤´ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­å½“å‰çš„è®¾å¤‡æ˜¯ pc ç«¯è¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œé€šè¿‡è¿™ä¸ªæ¥åˆ¤æ–­ï¼Œå°±å¯ä»¥åœ¨ HTML æ–‡æœ¬è¿”å›å‰ï¼Œå°±æ‹¿åˆ°å®é™…çš„è®¾å¤‡ DOMã€‚ å…ˆæ¥å®šä¹‰ä¸€ä¸‹åˆ¤æ–­è®¾å¤‡çš„é€šç”¨æ–¹æ³•ã€‚ utils/index.ts export const getIsMobile = (context: AppContext) =\u003e { const { headers = {} } = context.ctx.req || {}; return /mobile|android|iphone|ipad|phone/i.test( (headers['user-agent'] || '').toLowerCase() ); } ç„¶ååœ¨å…¥å£æ–‡ä»¶çš„æ³¨å…¥å‡½æ•°é‡Œï¼Œé¢å¤–æ³¨å…¥ä¸€ä¸ªè®¾å¤‡ä¿¡æ¯ï¼Œå¦‚æœæ˜¯ç§»åŠ¨ç«¯ï¼Œå°±ç»™æ ‡é¢˜åŠ ä¸€ä¸ªâ€œï¼ˆç§»åŠ¨ç«¯ï¼‰â€ï¼Œ å¦‚æœæ˜¯ pc ç«¯ï¼Œå°±åŠ ä¸€ä¸ª â€œï¼ˆpc ç«¯ï¼‰â€ã€‚ pages/_app.tsx ","date":"2023-02-15","objectID":"/ssr/:7:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸šåŠ¡åŠŸèƒ½å®ç° ","date":"2023-02-15","objectID":"/ssr/:8:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å›½é™…åŒ–åŠŸèƒ½æ–¹æ¡ˆ ","date":"2023-02-15","objectID":"/ssr/:9:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜","uri":"/ssr/"},{"categories":["ç”»ç”»"],"content":"2023å¹´ ","date":"2023-02-12","objectID":"/draw/:1:0","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"ä¸€ä¸ªäººæ·‹ ğŸŒ§ å­£å¦‚æ¢¦ï¼Œäººç”Ÿå¦‚æ¢¦ï¼Œæ²¡æœ‰ä¸€åˆ»æƒ³æ¸…é†’ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:1","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"ä»°æœ› ğŸŒƒ æˆ‘ä»¬ä»°æœ›ç€åŒä¸€ç‰‡æ˜Ÿç©ºï¼Œä½ å¯èƒ½åœ¨å¤±ç¥ï¼Œè€Œæˆ‘åŠªåŠ›åœ¨æ˜Ÿç©ºä¸­å¯»æ‰¾ä½ çš„æ¨¡æ ·ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:2","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"çª—å°ä¸Šçš„ ğŸ± ä¸‹è¾ˆå­åšä¸€åªçŒ«ï¼Œç¿˜ç€å°¾å·´äº‘æ¸¸å¤©ä¸‹ï¼Œè·Ÿç‹—æ‰“æ¶ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:3","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"ğŸ³ ä¸ â˜ï¸ çƒ­çˆ±æ¼«æ— è¾¹é™…ï¼Œç”Ÿæ´»è‡ªæœ‰åˆ†å¯¸ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:4","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"éœ²è¥ â›ºï¸ ä¸€èµ·å»éœ²è¥å§ï¼Œæ½æ˜Ÿæ²³å…¥æ€€ï¼Œæ‹¥å±±é‡è€Œçœ ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:5","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["ç”»ç”»"],"content":"ç¦ ğŸ° è´ºæ˜¥ æ–°å¹´å¿«ä¹ã€‚ ","date":"2023-02-12","objectID":"/draw/:1:6","tags":["ç”»ç”»"],"title":"ä¸€ä¸ªäººçš„ç»˜ç”»é¦†ï¼šè ¢ Q çš„æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…","uri":"/draw/"},{"categories":["è¯»ä¹¦"],"content":"æè¯è„±å£ç§€å·¥ä½œæ‰‹å†Œ 2023 å¹´è¯»å®Œçš„ç¬¬å››æœ¬ä¹¦ï¼Œå¾ˆè–„ï¼Œ2 ä¸ªå°æ—¶ä¸åˆ°å°±çœ‹å®Œäº†ï¼Œä»¥ä¸‹æ˜¯æˆ‘æœ‰æ”¶è·çš„åœ°æ–¹ï¼š å·¥ä½œçš„æœ¬è´¨æ˜¯äº¤æ˜“ï¼Œæˆ‘ä»¬åœ¨ç”¨è‡ªå·±çš„æ—¶é—´å’Œæ‰èƒ½ï¼Œé€šè¿‡ä¸€å®¶å…¬å¸ï¼Œä¸å¸‚åœºäº¤æ¢é‡‘é’±ã€‚ï¼ˆï¼šğŸ¤” è¢«åŠ¨æ”¶å…¥ \u003e å·¥èµ„æ—¶ï¼Œå°±å¯ä»¥ç¦»å¼€å…¬å¸äº†ã€‚ æ ¹æ®è¯ºè´å°”ç»æµå­¦å¥–å¾—ä¸»ç§‘æ–¯çš„è‘—åç†è®ºï¼Œå…¬å¸ä¼šäº§ç”Ÿçš„åŸå› ï¼Œå°±æ˜¯äººä»¬è‡ªå·±ç›´æ¥ä¸å¸‚åœºäº¤æ˜“æˆæœ¬å¤ªé«˜ï¼Œå…¬å¸ä¼šç»™å¤§å®¶çœç‚¹åŠ²ã€‚é‚£ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ è·Ÿå…¬å¸äº¤æ˜“ï¼Œæ¯”ä½ ç›´æ¥è·Ÿå¸‚åœºäº¤æ˜“è¿˜è´¹åŠ²æ—¶ï¼Œä½ å°±å¯ä»¥ç¦»å¼€è¿™å®¶å…¬å¸è¿‡æ›´å¥½çš„ç”Ÿæ´»äº†ã€‚ è¿™æ˜¯ä¸€ä»½å·¥ä½œï¼Œæ‹¿äº†é’±å°±å…ˆåŠäº‹ï¼ŒåŠå¥½äº‹å†è¯´åˆ«çš„ï¼Œä¸æƒ³å†åŠäº‹ï¼Œä¹Ÿè¦æƒ³å¥½ï¼Œå»å“ªå¯ä»¥ç»§ç»­æ‹¿é’±ï¼Œæ‹¿æ›´å¤šé’±ã€‚ é€‰æ‹©äº†è¿™ä¸ªè¡Œä¸šï¼Œæƒ³è¦åšå¾—å¥½ï¼Œè¯·å°½æ—©æ”¾å¼ƒåˆ†å¼€å·¥ä½œå’Œç”Ÿæ´»è¿™ç§æœ‰å®³çš„æƒ³æ³•ï¼Œè¯·å°½æ—©å­¦ä¼šåœ¨å·¥ä½œä¸­äº«å—ç”Ÿæ´»ï¼Œåœ¨äº«å—ç”Ÿæ´»ä¸­å·¥ä½œçš„åŠæ³•ã€‚ å¥½çš„å·¥ä½œèŠ‚å¥ï¼Œå°±åŒ…å«äº†å­¦ä¹ ï¼ŒåŒ…å«äº†å…»åˆ†ã€‚ä¸èƒ½å®è·µï¼Œå°±ç­‰äºæ²¡æœ‰å­¦ã€‚æœ€å¥½çš„å­¦ä¹ ï¼Œä¹Ÿæ˜¯åœ¨å®è·µä¸­å­¦ã€‚ å¤§å®¶éƒ½å¾ˆæ‡’ï¼Œåªèƒ½é å¤–éƒ¨å‹åŠ›çš„è¯ï¼Œé‚£å°±æ²¡äº‹å¤šç»™è‡ªå·±æ‰¾ä¸€äº› Deadlineã€‚Deadline æ°¸è¿œæ˜¯åˆ›ä½œåšå¥½çš„æœ‹å‹ã€‚ æ— è®ºå¦‚ä½•ï¼Œå…ˆè¡ŒåŠ¨èµ·æ¥ï¼Œå†™èµ·æ¥ï¼Œå†™ä¸å¥½ä½ è¿˜å†™ä¸åå—ï¼Ÿæœ‰äº†åçš„ï¼Œæ‰èƒ½æœ‰å¥½çš„ã€‚ï¼ˆï¼šç‹ ç‹ åœ° ğŸ‘ğŸ» äº†ã€‚ æˆ‘ä»¬å¿…é¡»ä¹ æƒ¯ç”¨å‘å±•çš„çœ¼å…‰çœ‹é—®é¢˜ï¼Œäººç”Ÿä¸æ˜¯å‡ æŠŠç‰Œï¼Œèµ¢äº†å°±èµ¢äº†ï¼Œäººç”Ÿæ˜¯ä¸ªæ£‹å±€ï¼Œæƒ³æ•£éƒ½æ•£ä¸äº†çš„é‚£ç§ï¼Œè¾“èµ¢ä¸åœ¨ä¸€æŠŠä¸¤æŠŠã€‚ æ¯å¤©ç¡è§‰å‰å”¯ä¸€è¦è€ƒå¯Ÿçš„åªæœ‰ä¸€ä»¶äº‹ï¼šä½ æœ‰æ²¡æœ‰æŒç»­åœ°å˜å¥½ï¼Ÿä»Šå¤©æ˜¯å¦è·å¾—äº†ä¸€ç‚¹æ˜¨å¤©æ²¡æœ‰çš„ä¸œè¥¿ï¼Ÿè¿™æ˜¯æŸ¥ç†Â·èŠ’æ ¼çš„å»ºè®®ã€‚ åšä¸€ä¸ªçœŸè¯šçš„äººï¼Œå°½å¯èƒ½å–„è‰¯ï¼Œä¸æ©è—ç—›è‹¦ï¼Œä¹Ÿä¸ç¾æ¶©äºå¿«ä¹ï¼Œæ”¾å¿ƒåœ°æŠŠè‡ªå·±äº¤ç»™èˆå°ï¼Œäº¤ç»™åŒä¼´ï¼Œäº¤ç»™ä¸–ç•Œã€‚ æˆ‘ä»¬ç»ä¸æä¸€å›¢å’Œæ°”ï¼Œä¸å¥½å°±æ˜¯ä¸å¥½ï¼Œä½†å¦å®šä»–çš„åŒæ—¶ï¼Œä¹Ÿè¯·ä¼¸æ‰‹æ•‘æ•‘ä»–ã€‚ ä¿æŒä¸“ä¸šï¼Œæ—¶æ—¶åˆ»åˆ»éƒ½åšåˆ°ä¸“ä¸šï¼Œè¿™æ ·è·Ÿä½ æ¥è§¦çš„äººæ‰ä¸ä¼šè½»çœ‹ä½ ï¼Œæ‰æ„¿æ„ä¿¡ä»»ä½ ã€‚ ç¦å°”æ‘©æ–¯è¯´ï¼Œçœ‹å’Œè§‚å¯Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚è¶Šæ—©ä¸§å¤±çœ‹å‰§çš„ä¹è¶£ï¼Œè¶Šæ—©å‘ç°è§‚å¯Ÿå‰§çš„ä¹è¶£ï¼Œè¶Šæ—©æˆä¸ºä¸€ä¸ªåˆæ ¼çš„ä»¥åˆ›ä½œä¸ºç”Ÿçš„äººã€‚ å–æ³•å…¶ä¸Šå¾—å…¶ä¸­ã€‚(: ğŸ¤” å¦‚æœä½ å¯¹è‡ªå·±çš„è¦æ±‚æ˜¯ä¸­ï¼Œé‚£å¯èƒ½å¾—åˆ°çš„æ˜¯ä¸‹ã€‚ å¿ƒçµé¸¡æ±¤å¾ˆå¤šè¯´çš„éƒ½æ˜¯å¯¹çš„ï¼Œå®ƒæ˜¯é¸¡æ±¤çš„åŸå› æ˜¯å¾ˆå°‘æœ‰äººå»å®è·µã€‚(: ğŸ¤” å¥½åƒæœ‰é‚£ä¹ˆç‚¹é“ç†ã€‚ é¢å¯¹ä¸€ä¸ªå¤§è„‘ï¼Œæƒ³è¦å½±å“å®ƒï¼Œæœ€å¥½æ˜¯ä»æƒ…ç»ªè¿›å…¥ï¼Œå†å»è¯´æœç†æ€§ã€‚åœ¨æå‡ºä¸€ä¸ªçœ‹æ³•ä¹‹å‰ï¼Œå…ˆè®²ä¸€ä¸ªæ•…äº‹ï¼Œå…ˆåœ¨æƒ…ç»ªä¸Šæ‹‰è¿‘å½¼æ­¤ï¼Œå”¤é†’ä½ å¯¹æŸäº›å›°å¢ƒçš„æƒ…ç»ªè®°å¿†ï¼Œå†å°å¿ƒç¿¼ç¿¼åœ°è¯´å‡ºæˆ‘çš„è§‚ç‚¹ï¼Œè§†å›¾æŠŠå®ƒæ”¾è¿›ä½ é‚£æ­¦è£…å®Œæ•´çš„æ–°çš®å±‚ã€‚(: ğŸ¤” N + 1 å¾ªåºæ¸è¿›ã€‚ äº§å“ç»ç†ä¿å†›å…³äºç”¨æˆ·çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥å¥½å¥½å€Ÿé‰´ï¼šç”¨æˆ·ä¸æ˜¯è‡ªç„¶äººï¼Œè€Œæ˜¯éœ€æ±‚çš„é›†åˆã€‚æ¯”å¦‚ï¼šå‡è®¾ä½¿ç”¨å¾®ä¿¡çš„è‡ªç„¶äººæœ‰ 11 äº¿ï¼Œå…¶ä¸­é€šä¿¡éœ€æ±‚ 11 äº¿ï¼Œæœ‹å‹åœˆéœ€æ±‚ 9 äº¿ï¼Œæ”¶ä»˜æ¬¾éœ€æ±‚ 5 äº¿ï¼Œé‚£ä¹ˆå¾®ä¿¡çš„ç”¨æˆ·å®é™…ä¸Šæ˜¯ 25äº¿ã€‚(: ğŸ˜® å­¦åˆ°äº†ã€‚ ","date":"2023-02-12","objectID":"/books/:1:0","tags":["è¯»ä¹¦"],"title":"åœ¨ä¹¦çš„å­—ç¼é‡Œï¼Œæ€»æœ‰æ¢¦çš„å‘ç”Ÿ","uri":"/books/"},{"categories":["è¯»ä¹¦"],"content":"é•¿æœŸä¸»ä¹‰ ","date":"2023-02-12","objectID":"/books/:2:0","tags":["è¯»ä¹¦"],"title":"åœ¨ä¹¦çš„å­—ç¼é‡Œï¼Œæ€»æœ‰æ¢¦çš„å‘ç”Ÿ","uri":"/books/"},{"categories":["è¯»ä¹¦"],"content":"è§£å¿§æ‚è´§åº— ","date":"2023-02-12","objectID":"/books/:3:0","tags":["è¯»ä¹¦"],"title":"åœ¨ä¹¦çš„å­—ç¼é‡Œï¼Œæ€»æœ‰æ¢¦çš„å‘ç”Ÿ","uri":"/books/"},{"categories":["è¯»ä¹¦"],"content":"ç”Ÿæ´»è’™å¤ªå¥‡ ","date":"2023-02-12","objectID":"/books/:4:0","tags":["è¯»ä¹¦"],"title":"åœ¨ä¹¦çš„å­—ç¼é‡Œï¼Œæ€»æœ‰æ¢¦çš„å‘ç”Ÿ","uri":"/books/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"é¡¹ç›®åœ°å€ï¼š ElectronVue3 ","date":"2023-02-07","objectID":"/electron/:0:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ„å»ºå¼€å‘ç¯å¢ƒ æŒ‰å¦‚ä¸‹æ­¥éª¤æ­å»ºå¼€å‘ç¯å¢ƒï¼š ","date":"2023-02-07","objectID":"/electron/:1:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åˆ›å»ºé¡¹ç›® é¦–å…ˆé€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ª Vue é¡¹ç›®ï¼š npm create vite@latest electron -- --template vue-ts å®‰è£… electron ä¾èµ–ï¼š npm i electron -D è°ƒæ•´ package.json æ–‡ä»¶ï¼š { \"name\": \"electron\", \"private\": true, \"version\": \"0.0.0\", \"scripts\": { \"dev\": \"vite\", \"build\": \"vue-tsc --noEmit \u0026\u0026 vite build\", \"preview\": \"vite preview\" }, \"dependencies\": {}, \"devDependencies\": { \"@vitejs/plugin-vue\": \"^4.0.0\", \"electron\": \"^22.0.3\", \"typescript\": \"^4.9.3\", \"vite\": \"^4.0.0\", \"vue-tsc\": \"^1.0.11\", \"vue\": \"^3.2.45\" } } å°† vue ä» dependencies ç§»åˆ° devDependenciesã€‚ åœ¨ Vite ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™ï¼ŒVue åº“ä¼šè¢«ç¼–è¯‘åˆ°è¾“å‡ºç›®å½•ä¸‹ï¼Œè¾“å‡ºç›®å½•ä¸‹çš„å†…å®¹æ˜¯å®Œæ•´çš„ï¼Œæ²¡å¿…è¦æŠŠ Vue æ ‡è®°ä¸ºç”Ÿäº§ä¾èµ–ï¼›è€Œä¸”åœ¨æˆ‘ä»¬å°†æ¥åˆ¶ä½œå®‰è£…åŒ…çš„æ—¶å€™ï¼Œè¿˜è¦ç”¨åˆ°è¿™ä¸ª package.json æ–‡ä»¶ï¼Œå®ƒçš„ç”Ÿäº§ä¾èµ–é‡Œä¸åº”è¯¥æœ‰æ²¡ç”¨çš„ä¸œè¥¿ã€‚ å»æ‰ type: module é…ç½®é¡¹ã€‚ package.json é‡Œçš„ type å®šä¹‰äº†è¿™ä¸ªé¡¹ç›®æ‰€æœ‰ .js æ–‡ä»¶çš„å¤„ç†æ–¹å¼ã€‚ å¦‚æœ type çš„å€¼ä¸º moduleï¼Œé‚£ä¹ˆæ‰€æœ‰ .js æ–‡ä»¶å°†è¢«å½“åš ES Modules å¯¹å¾…ã€‚å¦‚æœ type çš„å€¼ä¸º commonjsï¼Œé‚£ä¹ˆæ‰€æœ‰ .js æ–‡ä»¶å°†è¢«å½“åš CommonJS æ¨¡å—å¯¹å¾…ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® typeï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼ä¸º commonjsã€‚ ","date":"2023-02-07","objectID":"/electron/:1:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åˆ›å»ºä¸»è¿›ç¨‹ä»£ç  æ–°å»ºä¸»è¿›ç¨‹å…¥å£æ–‡ä»¶ï¼šsrc/main/mainEntry.ts import { app, BrowserWindow } from \"electron\"; let mainWindow: BrowserWindow; app.whenReady().then(() =\u003e { mainWindow = new BrowserWindow({}); mainWindow.loadURL(process.argv[2]); }); app æ˜¯ Electron çš„å…¨å±€å¯¹è±¡ï¼Œç”¨äºæ§åˆ¶æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸã€‚ Electron åˆå§‹åŒ–å®Œæˆåï¼Œapp å¯¹è±¡çš„ ready äº‹ä»¶è¢«è§¦å‘ã€‚ app ready ååˆ›å»ºä¸€ä¸ª BrowserWindow å¯¹è±¡ï¼ŒmainWindow è¢«è®¾ç½®ä¸ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé¿å…è¢« JS åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚ çª—å£åŠ è½½äº†ä¸€ä¸ª Url è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ä»¥å‘½ä»¤è¡Œå‚æ•°ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰çš„æ–¹å¼ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚ app å’Œ BrowserWindow éƒ½æ˜¯ Electron çš„å†…ç½®æ¨¡å—ï¼Œè¿™äº›å†…ç½®æ¨¡å—æ˜¯é€šè¿‡ ES Module çš„å½¢å¼å¯¼å…¥è¿›æ¥çš„ã€‚ ","date":"2023-02-07","objectID":"/electron/:1:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¼€å‘ç¯å¢ƒ Vite æ’ä»¶ ä¸»è¿›ç¨‹çš„ä»£ç å†™å¥½åï¼Œéœ€è¦ç¼–è¯‘è¿‡ä¹‹åæ‰èƒ½è¢« Electron åŠ è½½ï¼Œé€šè¿‡ Vite æ’ä»¶çš„å½¢å¼æ¥å®Œæˆç¼–è¯‘å’ŒåŠ è½½å·¥ä½œã€‚ import { ViteDevServer } from 'vite'; interface IAddressInfo { address: string; port: string; } export let devPlugin = () =\u003e { return { name: 'dev-plugin', configureServer(server: ViteDevServer) { require('esbuild').buildSync({ entryPoints: ['./src/main/mainEntry.ts'], bundle: true, platform: 'node', outfile: './dist/mainEntry.js', external: ['electron'], }); server?.httpServer?.once('listening', () =\u003e { let { spawn } = require('child_process'); let addressInfo: IAddressInfo = server?.httpServer?.address() as unknown as IAddressInfo; let httpAddress = `http://${addressInfo?.address}:${addressInfo?.port}`; let electronProcess = spawn(require('electron').toString(), ['./dist/mainEntry.js', httpAddress], { cwd: process.cwd(), stdio: 'inherit', }); electronProcess.on('close', () =\u003e { server.close(); process.exit(); }); }); }, }; }; æ³¨å†Œäº†ä¸€ä¸ªåä¸º configureServer çš„é’©å­ï¼Œå½“ Vite å¯åŠ¨ Http æœåŠ¡æ—¶ï¼ŒconfigureServer ä¼šæ‰§è¡Œã€‚ å…¥å‚ä¸ºç±»å‹ä¸º ViteDevServer çš„å¯¹è±¡ serverï¼Œserver æŒæœ‰ä¸€ä¸ª http.Server ç±»å‹çš„å±æ€§ httpServerï¼Œè¿™ä¸ªå±æ€§ä»£è¡¨è°ƒè¯• Vue é¡µé¢çš„ http æœåŠ¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åœ°å€ä¸ºï¼šhttp://127.0.0.1:5173/ã€‚ é€šè¿‡ç›‘å¬ server.httpServer çš„ listening äº‹ä»¶æ¥åˆ¤æ–­ httpServer æ˜¯å¦å·²ç»æˆåŠŸå¯åŠ¨ã€‚å¦‚æœå·²ç»æˆåŠŸå¯åŠ¨ï¼Œå°±å¯åŠ¨ Electron åº”ç”¨ï¼Œå¹¶ç»™å®ƒä¼ é€’ä¸¤ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸»è¿›ç¨‹ä»£ç ç¼–è¯‘åçš„æ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ Vue é¡µé¢çš„ http åœ°å€ã€‚ é€šè¿‡ Node.js child_process æ¨¡å—çš„ spawn æ–¹æ³•å¯åŠ¨ electron å­è¿›ç¨‹ï¼Œé™¤äº†ä¸¤ä¸ªå‘½ä»¤è¡Œå‚æ•°å¤–ï¼Œè¿˜ä¼ é€’äº†ä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚ è¿™ä¸ªå¯¹è±¡çš„ cwd å±æ€§ç”¨äºè®¾ç½®å½“å‰çš„å·¥ä½œç›®å½•ï¼Œprocess.cwd() è¿”å›çš„å€¼å°±æ˜¯å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ã€‚ stdio ç”¨äºè®¾ç½® electron è¿›ç¨‹çš„æ§åˆ¶å°è¾“å‡ºï¼Œè¿™é‡Œè®¾ç½® inherit å¯ä»¥è®© electron å­è¿›ç¨‹çš„æ§åˆ¶å°è¾“å‡ºæ•°æ®åŒæ­¥åˆ°ä¸»è¿›ç¨‹çš„æ§åˆ¶å°ã€‚ åœ¨ä¸»è¿›ç¨‹ä¸­ console.log çš„å†…å®¹å°±å¯ä»¥åœ¨ VSCode çš„æ§åˆ¶å°ä¸Šçœ‹åˆ°äº†ã€‚ å½“ electron å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œè¦å…³é—­ Vite çš„ http æœåŠ¡ï¼Œå¹¶ä¸”æ§åˆ¶çˆ¶è¿›ç¨‹é€€å‡ºï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡å¯åŠ¨ã€‚ http æœåŠ¡å¯åŠ¨ä¹‹å‰ï¼Œä½¿ç”¨ esbuild æ¨¡å—å®Œæˆäº†ä¸»è¿›ç¨‹ TypeScript ä»£ç çš„ç¼–è¯‘å·¥ä½œï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ Vite è‡ªå¸¦çš„ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ ä¸»è¿›ç¨‹çš„å…¥å£æ–‡ä»¶æ˜¯é€šè¿‡ entryPoints é…ç½®å±æ€§è®¾ç½®çš„ï¼Œç¼–è¯‘å®Œæˆåçš„è¾“å‡ºæ–‡ä»¶æ˜¯é€šè¿‡ outfile å±æ€§é…ç½®çš„ã€‚ ç¼–è¯‘å¹³å° platform è®¾ç½®ä¸º nodeï¼Œæ’é™¤çš„æ¨¡å— external è®¾ç½®ä¸º electronï¼Œè¿™ä¸¤ä¸ªè®¾ç½®ä½¿åœ¨ä¸»è¿›ç¨‹ä»£ç ä¸­å¯ä»¥é€šè¿‡ import çš„æ–¹å¼å¯¼å…¥ electron å†…ç½®çš„æ¨¡å—ï¼Œéä½†å¦‚æ­¤ï¼ŒNode çš„å†…ç½®æ¨¡å—ä¹Ÿå¯ä»¥é€šè¿‡ import çš„æ–¹å¼å¼•å…¥ã€‚ åœ¨ vite.config.ts æ–‡ä»¶ä¸­å¼•å…¥ï¼š import { defineConfig } from 'vite'; import vue from '@vitejs/plugin-vue'; import { devPlugin } from './plugins/devPlugin'; // https://vitejs.dev/config/ export default defineConfig({ plugins: [devPlugin(), vue()], }) åœ¨ tsconfig.node.json ä¸­é…ç½® plugins è·¯å¾„ï¼š { \"compilerOptions\": { \"composite\": true, \"module\": \"ESNext\", \"moduleResolution\": \"Node\", \"allowSyntheticDefaultImports\": true }, \"include\": [\"vite.config.ts\", \"./plugins/*.*\"] } æ‰§è¡Œå‘½ä»¤ npm run dev: ","date":"2023-02-07","objectID":"/electron/:1:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ¸²æŸ“è¿›ç¨‹é›†æˆå†…ç½®æ¨¡å— ç°åœ¨ä¸»è¿›ç¨‹å†…å¯ä»¥è‡ªç”±çš„ä½¿ç”¨ Electron å’Œ Node.js çš„å†…ç½®æ¨¡å—äº†ï¼Œä½†æ¸²æŸ“è¿›ç¨‹è¿˜ä¸è¡Œã€‚ ä¿®æ”¹ä¸»è¿›ç¨‹ä»£ç ï¼Œæ‰“å¼€æ¸²æŸ“è¿›ç¨‹çš„ä¸€äº›å¼€å…³ï¼Œå…è®¸æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨ Node.js çš„å†…ç½®æ¨¡å—: import { app, BrowserWindow } from 'electron'; process.env.ELECTRON_DISABLE_SECURITY_WARNINGS = 'true'; let mainWindow: BrowserWindow; app.whenReady().then(() =\u003e { let config = { webPreferences: { nodeIntegration: true, webSecurity: false, allowRunningInsecureContent: true, contextIsolation: false, webviewTag: true, spellcheck: false, disableHtmlFullscreenWindowResize: true, }, }; mainWindow = new BrowserWindow(config); mainWindow.webContents.openDevTools({ mode: 'undocked' }); mainWindow.loadURL(process.argv[2]); }); ELECTRON_DISABLE_SECURITY_WARNINGS ç”¨äºè®¾ç½®æ¸²æŸ“è¿›ç¨‹å¼€å‘è€…è°ƒè¯•å·¥å…·çš„è­¦å‘Šï¼Œè¿™é‡Œè®¾ç½®ä¸º true å°±ä¸ä¼šå†æ˜¾ç¤ºä»»ä½•è­¦å‘Šäº†ã€‚ nodeIntegrationé…ç½®é¡¹çš„ä½œç”¨æ˜¯æŠŠ Node.js ç¯å¢ƒé›†æˆåˆ°æ¸²æŸ“è¿›ç¨‹ä¸­ã€‚ contextIsolationé…ç½®é¡¹çš„ä½œç”¨æ˜¯åœ¨åŒä¸€ä¸ª JavaScript ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ Electron APIã€‚ webContentsçš„openDevToolsæ–¹æ³•ç”¨äºæ‰“å¼€å¼€å‘è€…è°ƒè¯•å·¥å…·ã€‚ ç°åœ¨å¯ä»¥åœ¨å¼€å‘è€…è°ƒè¯•å·¥å…·ä¸­è®¿é—® Node.js å’Œ Electron çš„å†…ç½®æ¨¡å—äº†ã€‚ ","date":"2023-02-07","objectID":"/electron/:1:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è®¾ç½®æ¨¡å—åˆ«åä¸è§£æé’©å­ è™½ç„¶å¯ä»¥åœ¨å¼€å‘è€…è°ƒè¯•å·¥å…·ä¸­ä½¿ç”¨ Node.js å’Œ Electron çš„å†…ç½®æ¨¡å—ï¼Œä½†ç°åœ¨è¿˜ä¸èƒ½åœ¨ Vue çš„é¡µé¢å†…ä½¿ç”¨è¿™äº›æ¨¡å—ã€‚ å› ä¸º Vite ä¸»åŠ¨å±è”½äº†è¿™äº›å†…ç½®çš„æ¨¡å—ï¼Œå¦‚æœå¼€å‘è€…å¼ºè¡Œå¼•å…¥å®ƒä»¬ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡ä¼šå¾—åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š Module \"xxxx\" has been externalized for browser compatibility and cannot be accessed in client code. å®‰è£… vite-plugin-optimizerï¼š npm i vite-plugin-optimizer -D ä¿®æ”¹ vite.config.ts çš„ä»£ç ï¼Œè®© Vite åŠ è½½è¿™ä¸ªæ’ä»¶ï¼š import { defineConfig } from 'vite'; import vue from '@vitejs/plugin-vue'; import { devPlugin, getReplacer } from './plugins/devPlugin'; import optimizer from 'vite-plugin-optimizer'; // https://vitejs.dev/config/ export default defineConfig({ plugins: [optimizer(getReplacer()), devPlugin(), vue()], }) vite-plugin-optimizer æ’ä»¶ä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼šnode_modules.vite-plugin-optimizerã€‚ ç„¶åæŠŠç±»ä¼¼ const fs = require(â€˜fsâ€™); export { fs as default } è¿™æ ·çš„ä»£ç å†™å…¥è¿™ä¸ªç›®å½•ä¸‹çš„ fs.js æ–‡ä»¶ä¸­ã€‚ æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œåˆ°ï¼šimport fs from â€œfsâ€ æ—¶ï¼Œå°±ä¼šè¯·æ±‚è¿™ä¸ªç›®å½•ä¸‹çš„ fs.js æ–‡ä»¶ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­å¼•å…¥ Node å†…ç½®æ¨¡å—çš„ç›®çš„ã€‚ getReplacer æ–¹æ³•æ˜¯ä¸º vite-plugin-optimizer æ’ä»¶æä¾›çš„å†…ç½®æ¨¡å—åˆ—è¡¨: export let getReplacer = () =\u003e { let externalModels = ['os', 'fs', 'path', 'events', 'child_process', 'crypto', 'http', 'buffer', 'url', 'better-sqlite3', 'knex']; let result = {}; for (let item of externalModels) { result[item] = () =\u003e ({ find: new RegExp(`^${item}$`), code: `const ${item} = require('${item}'); export { ${item} as default }`, }); } result['electron'] = () =\u003e { let electronModules = ['clipboard', 'ipcRenderer', 'nativeImage', 'shell', 'webFrame'].join(','); return { find: new RegExp(`^electron$`), code: `const {${electronModules}} = require('electron'); export { ${electronModules} }`, } } return result; } åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æŠŠä¸€äº›å¸¸ç”¨çš„ Node æ¨¡å—å’Œ electron çš„å†…ç½®æ¨¡å—æä¾›ç»™äº† vite-plugin-optimizer æ’ä»¶ï¼Œä»¥åæƒ³è¦å¢åŠ æ–°çš„å†…ç½®æ¨¡å—åªè¦ä¿®æ”¹è¿™ä¸ªæ–¹æ³•å³å¯ã€‚ vite-plugin-optimizer æ’ä»¶ä¸ä»…ç”¨äºå¼€å‘ç¯å¢ƒï¼Œç¼–è¯‘ Vue é¡¹ç›®æ—¶ï¼Œå®ƒä¹Ÿä¼šå‚ä¸å·¥ä½œã€‚ é€šè¿‡å¦‚ä¸‹ä»£ç åœ¨ Vue ç»„ä»¶ä¸­åšæµ‹è¯•ï¼š // src\\App.vue import fs from \"fs\"; import { ipcRenderer } from \"electron\"; import { onMounted } from \"vue\"; onMounted(() =\u003e { console.log(fs.writeFileSync); console.log(ipcRenderer); }); å¼€å‘è€…è°ƒè¯•å·¥å…·å°†ä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š ","date":"2023-02-07","objectID":"/electron/:1:5","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ„å»ºç”Ÿäº§ç¯å¢ƒ åˆ¶ä½œä¸€ä¸ª Vite æ’ä»¶ã€‚é€šè¿‡è¿™ä¸ªæ–°çš„æ’ä»¶ç”Ÿæˆå®‰è£…åŒ…ï¼Œæœ‰äº†å®‰è£…åŒ…å°±å¯ä»¥æŠŠåº”ç”¨åˆ†å‘ç»™ç”¨æˆ·äº†ã€‚ ","date":"2023-02-07","objectID":"/electron/:2:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ç¼–è¯‘ç»“æŸé’©å­å‡½æ•° vite.config.ts å¢åŠ ä¸€ä¸ªæ–°çš„é…ç½®ï¼š import { defineConfig } from 'vite'; import vue from '@vitejs/plugin-vue'; import { devPlugin, getReplacer } from './plugins/devPlugin'; import { buildPlugin } from './plugins/buildPlugin'; import optimizer from 'vite-plugin-optimizer'; // https://vitejs.dev/config/ export default defineConfig({ build: { rollupOptions: { plugins: [buildPlugin()], }, }, plugins: [optimizer(getReplacer()), devPlugin(), vue()], }) ","date":"2023-02-07","objectID":"/electron/:2:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åˆ¶ä½œåº”ç”¨å®‰è£…åŒ… vite ç¼–è¯‘å®Œæˆä¹‹åï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ npm run build æŒ‡ä»¤ï¼Œå°†åœ¨é¡¹ç›®distç›®å½•å†…ä¼šç”Ÿæˆä¸€ç³»åˆ—çš„æ–‡ä»¶ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œæ­¤æ—¶ closeBundle é’©å­è¢«è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªé’©å­ä¸­æŠŠä¸Šè¿°ç”Ÿæˆçš„æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªåº”ç”¨ç¨‹åºå®‰è£…åŒ…ã€‚ import path from 'path'; import fs from 'fs'; class BuildObj { // ç¼–è¯‘ä¸»è¿›ç¨‹ä»£ç  buildMain() { require('esbuild').buildSync({ entryPoints: ['./src/main/mainEntry.ts'], bundle: true, platform: 'node', minify: true, outfile: './dist/mainEntry.js', external: ['electron'], }); } // ä¸ºç”Ÿäº§ç¯å¢ƒå‡†å¤‡package.json preparePackageJson() { let pkgJsonPath = path.join(process.cwd(), 'package.json'); let localPkgJson = JSON.parse(fs.readFileSync(pkgJsonPath, 'utf-8')); let electronConfig = localPkgJson.devDependencies.electron.replace('^', ''); localPkgJson.main = 'mainEntry.js'; delete localPkgJson['scripts']; delete localPkgJson['devDependencies']; localPkgJson.devDependencies = { electron: electronConfig, }; let tarJsonPath = path.join(process.cwd(), 'dist', 'package.json'); fs.writeFileSync(tarJsonPath, JSON.stringify(localPkgJson)); fs.mkdirSync(path.join(process.cwd(), 'dist/node_modules')); } // ä½¿ç”¨electron-builderåˆ¶æˆå®‰è£…åŒ… buildInstaller() { let options = { config: { directories: { output: path.join(process.cwd(), 'release'), app: path.join(process.cwd(), 'dist'), }, files: ['**'], extends: null, productName: 'Electron', appId: 'com.xxx.desktop', asar: true, nsis: { oneClick: true, perMachine: true, allowToChangeInstallationDirectory: false, createDesktopShortcut: true, createStartMenuShortcut: true, shortcutName: 'ElectronDesktop', }, publish: [{ provider: 'generic', url: 'http://localhost:5500/', }], }, project: process.cwd(), }; return require('electron-builder').build(options); } } export let buildPlugin = () =\u003e { return { name: 'build-plugin', closeBundle: () =\u003e { let buildObj = new BuildObj(); buildObj?.buildMain(); buildObj?.preparePackageJson(); buildObj?.buildInstaller(); } } } è¿™ä¸ªå¯¹è±¡é€šè¿‡ä¸‰ä¸ªæ–¹æ³•æä¾›äº†ä¸‰ä¸ªåŠŸèƒ½ï¼š buildMainã€‚ç”±äº ite åœ¨ç¼–è¯‘ä¹‹å‰ä¼šæ¸…ç©º dist ç›®å½•ï¼Œæ‰€ä»¥åœ¨ä¹‹å‰ç”Ÿæˆçš„ mainEntry.js æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤äº†ï¼Œæ­¤å¤„é€šè¿‡ buildMain æ–¹æ³•å†æ¬¡ç¼–è¯‘ä¸»è¿›ç¨‹ä»£ç ã€‚ä¸è¿‡ç”±äºæ­¤å¤„æ˜¯åœ¨ä¸ºç”Ÿäº§ç¯å¢ƒç¼–è¯‘ä»£ç ï¼Œæ‰€ä»¥å¢åŠ äº†minify: true é…ç½®ï¼Œç”Ÿæˆå‹ç¼©åçš„ä»£ç ã€‚ preparePackageJsonã€‚ç”¨æˆ·å®‰è£…äº§å“åï¼Œåœ¨å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ Electron å¯åŠ¨ä¸€ä¸ª Node.js çš„é¡¹ç›®ï¼Œæ‰€ä»¥è¦ä¸ºè¿™ä¸ªé¡¹ç›®å‡†å¤‡ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä»¥å½“å‰é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸ºè“æœ¬åˆ¶ä½œè€Œæˆçš„ã€‚é‡Œé¢æ³¨æ˜äº†ä¸»è¿›ç¨‹çš„å…¥å£æ–‡ä»¶ï¼Œç§»é™¤äº†ä¸€äº›å¯¹æœ€ç»ˆç”¨æˆ·æ²¡ç”¨çš„é…ç½®èŠ‚ã€‚ buildInstallerã€‚è¿™ä¸ªæ–¹æ³•è´Ÿè´£è°ƒç”¨ electron-builderï¼ˆnpm install electron-builder -D å®‰è£… electron-builder åº“ï¼‰ æä¾›çš„ API ä»¥ç”Ÿæˆå®‰è£…åŒ…ã€‚æœ€ç»ˆç”Ÿæˆçš„å®‰è£…åŒ…è¢«æ”¾ç½®åœ¨ release ç›®å½•ä¸‹ï¼Œè¿™æ˜¯é€šè¿‡ config.directories.output æŒ‡å®šçš„ã€‚é™æ€æ–‡ä»¶æ‰€åœ¨ç›®å½•æ˜¯é€šè¿‡ config.directories.app é…ç½®é¡¹æŒ‡å®šã€‚å…¶ä»–é…ç½®é¡¹ï¼Œè¯·è‡ªè¡ŒæŸ¥é˜…å®˜ç½‘æ–‡æ¡£ã€‚ ç”Ÿæˆ package.json æ–‡ä»¶ä¹‹åï¼Œè¿˜åˆ›å»ºäº†ä¸€ä¸ª node_modules ç›®å½•ã€‚æ­¤ä¸¾æ˜¯ä¸ºäº†é˜»æ­¢ electron-builder çš„ä¸€äº›é»˜è®¤è¡Œä¸ºï¼ˆç›®å‰æ¥è¯´å®ƒä¼šé˜»æ­¢ electron-builder åˆ›å»ºä¸€äº›æ²¡ç”¨çš„ç›®å½•æˆ–æ–‡ä»¶ï¼‰ã€‚ è¿™æ®µè„šæœ¬è¿˜æ˜ç¡®æŒ‡å®šäº† Electron çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœ Electron çš„ç‰ˆæœ¬å·å‰é¢æœ‰\"^â€œç¬¦å·çš„è¯ï¼Œéœ€æŠŠå®ƒåˆ æ‰ã€‚è¿™æ˜¯ electron-builder çš„ä¸€ä¸ª Bugï¼Œè¿™ä¸ª bug å¯¼è‡´ electron-builder æ— æ³•è¯†åˆ«å¸¦ ^ æˆ– ~ ç¬¦å·çš„ç‰ˆæœ¬å·ã€‚ åšå¥½è¿™äº›é…ç½®ä¹‹åï¼Œæ‰§è¡Œ npm run build å°±å¯ä»¥åˆ¶ä½œå®‰è£…åŒ…äº†ï¼Œæœ€ç»ˆç”Ÿæˆçš„å®‰è£…æ–‡ä»¶ä¼šè¢«æ”¾ç½®åˆ° release ç›®å½•ä¸‹ã€‚ ","date":"2023-02-07","objectID":"/electron/:2:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸»è¿›ç¨‹ç”Ÿäº§ç¯å¢ƒåŠ è½½æœ¬åœ°æ–‡ä»¶ è™½ç„¶æˆåŠŸåˆ¶ä½œäº†å®‰è£…åŒ…ï¼Œè€Œä¸”è¿™ä¸ªå®‰è£…åŒ…å¯ä»¥æ­£ç¡®å®‰è£…åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯è¿™ä¸ªåº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œè¿™æ˜¯å› ä¸ºåº”ç”¨ç¨‹åºçš„ä¸»è¿›ç¨‹è¿˜åœ¨é€šè¿‡ process.argv[2] åŠ è½½é¦–é¡µã€‚æ˜¾ç„¶ç”¨æˆ·é€šè¿‡å®‰è£…åŒ…å®‰è£…çš„åº”ç”¨ç¨‹åºæ²¡æœ‰è¿™ä¸ªå‚æ•°ã€‚ æ¥ä¸‹æ¥å°±è¦è®©åº”ç”¨ç¨‹åºåœ¨æ²¡æœ‰è¿™ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿèƒ½åŠ è½½é™æ€é¡µé¢ã€‚ æ–°å»º src\\main\\CustomScheme.tsï¼š import { protocol } from 'electron'; import path from 'path'; import fs from 'fs'; // ä¸ºè‡ªå®šä¹‰appåè®®æä¾›ç‰¹æƒ let schemeConfig = { standard: true, supportFetchAPI: true, bypassCSP: true, corsEnabled: true, stream: true, }; protocol.registerSchemesAsPrivileged([{ scheme: 'app', privileges: schemeConfig, }]); export class CustomScheme { // æ ¹æ®æ–‡ä»¶æ‰©å±•åè·å–mime-type private static getMimeType(extension: string) { let mineType = ''; switch (extension) { case '.js': mineType = 'text/javascript'; break; case '.html': mineType = 'text/html'; break; case '.css': mineType = 'text/css'; break; case '.svg': mineType = 'image/svg+xml'; break; case '.json': mineType = 'application/json'; break; } return mineType; }; // æ³¨å†Œè‡ªå®šä¹‰appåè®® static registerScheme() { protocol.registerStreamProtocol('app', (request, callback) =\u003e { let pathName = new URL(request.url).pathname; let extension = path.extname(pathName).toLowerCase(); if (extension === '') { pathName = 'index.html'; extension = '.html'; } let tarFile = path.join(__dirname, pathName); callback({ statusCode: 200, headers: { 'content-type': this.getMimeType(extension), }, data: fs.createReadStream(tarFile), }) }); }; } åœ¨ä¸»è¿›ç¨‹ app ready å‰ï¼Œé€šè¿‡ protocol å¯¹è±¡çš„ registerSchemesAsPrivileged æ–¹æ³•ä¸ºåä¸º app çš„ scheme æ³¨å†Œäº†ç‰¹æƒï¼ˆå¯ä»¥ä½¿ç”¨ FetchAPIã€ç»•è¿‡å†…å®¹å®‰å…¨ç­–ç•¥ç­‰ï¼‰ã€‚ åœ¨ app ready ä¹‹åï¼Œé€šè¿‡ protocol å¯¹è±¡çš„ registerStreamProtocol æ–¹æ³•ä¸ºåä¸º app çš„ scheme æ³¨å†Œäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å½“åŠ è½½ç±»ä¼¼ app://index.html è¿™æ ·çš„è·¯å¾„æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°†è¢«æ‰§è¡Œã€‚ è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªä¼ å…¥å‚æ•° request å’Œ callbackï¼Œé€šè¿‡ request.url è·å–åˆ°è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œé€šè¿‡ callback åšå‡ºå“åº”ã€‚ ç»™å‡ºå“åº”æ—¶ï¼Œè¦æŒ‡å®šå“åº”çš„ statusCode å’Œ content-typeï¼Œè¿™ä¸ª content-type æ˜¯é€šè¿‡æ–‡ä»¶çš„æ‰©å±•åå¾—åˆ°çš„ã€‚è¿™é‡Œé€šè¿‡ getMimeType æ–¹æ³•ç¡®å®šäº†æ–‡ä»¶çš„ content-typeã€‚ å“åº”çš„ data å±æ€§ä¸ºç›®æ ‡æ–‡ä»¶çš„å¯è¯»æ•°æ®æµï¼Œå½“ä½ çš„é™æ€æ–‡ä»¶æ¯”è¾ƒå¤§æ—¶ï¼Œä¸å¿…è¯»å‡ºæ•´ä¸ªæ–‡ä»¶å†ç»™å‡ºå“åº”ã€‚ æ¥ä¸‹æ¥åœ¨ src\\main\\mainEntry.ts ä¸­ä½¿ç”¨è¿™æ®µä»£ç ï¼š import {CustomScheme} from './customScheme'; if (process.argv[2]) { mainWindow.loadURL(process.argv[2]); } else { CustomScheme.registerScheme(); mainWindow.loadURL('app\"//index.html'); } è¿™æ ·å½“å­˜åœ¨æŒ‡å®šçš„å‘½ä»¤è¡Œå‚æ•°æ—¶ï¼Œå°±è®¤ä¸ºæ˜¯å¼€å‘ç¯å¢ƒï¼Œä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°åŠ è½½é¡µé¢ï¼Œå½“ä¸å­˜åœ¨å‘½ä»¤è¡Œå‚æ•°æ—¶ï¼Œå°±è®¤ä¸ºæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œé€šè¿‡ app:// scheme åŠ è½½é¡µé¢ã€‚ ","date":"2023-02-07","objectID":"/electron/:2:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è®¾è®¡å·¥ç¨‹é¡¹ç›®ç»“æ„ åœ¨ç»§ç»­å¼•å…¥æ–°çš„æ¨¡å—æˆ–ç»„ä»¶ä¹‹å‰ï¼Œå…ˆè°ƒæ•´ä¸€ä¸‹å·¥ç¨‹çš„ç»“æ„ï¼š dist ç›®å½•æ˜¯æ‰“åŒ…è¿‡ç¨‹çš„ä¸´æ—¶äº§ç‰©æ”¾ç½®ç›®å½•ã€‚ plugins ç›®å½•æ”¾ç½®å¼€å‘ç¯å¢ƒ vite æ’ä»¶å’Œæ‰“åŒ… vite æ’ä»¶ã€‚ release ç›®å½•æ”¾ç½®æœ€ç»ˆç”Ÿæˆçš„å®‰è£…åŒ…ã€‚ resource ç›®å½•æ”¾ç½®ä¸€äº›å¤–éƒ¨èµ„æºï¼Œæ¯”å¦‚åº”ç”¨ç¨‹åºå›¾æ ‡ã€ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚ src/common ç›®å½•æ”¾ç½®ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éƒ½ä¼šç”¨åˆ°çš„å…¬å…±ä»£ç ï¼Œæ¯”å¦‚æ—¥æœŸæ ¼å¼åŒ–çš„å·¥å…·ç±»ã€æ•°æ®åº“è®¿é—®å·¥å…·ç±»ç­‰ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„ä»£ç éƒ½æœ‰å¯èƒ½ä½¿ç”¨è¿™äº›ç±»ã€‚ src/main ç›®å½•æ”¾ç½®ä¸»è¿›ç¨‹çš„ä»£ç ã€‚ src/model ç›®å½•æ”¾ç½®åº”ç”¨ç¨‹åºçš„æ¨¡å‹æ–‡ä»¶ï¼Œæ¯”å¦‚æ¶ˆæ¯ç±»ã€ä¼šè¯ç±»ã€ç”¨æˆ·è®¾ç½®ç±»ç­‰ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„ä»£ç éƒ½æœ‰å¯èƒ½ä½¿ç”¨è¿™äº›ç±»ã€‚ src/renderer ç›®å½•æ”¾ç½®æ¸²æŸ“è¿›ç¨‹çš„ä»£ç ã€‚ src/renderer/assets æ”¾ç½®å­—ä½“å›¾æ ‡ã€å…¬å…±æ ·å¼ã€å›¾ç‰‡ç­‰æ–‡ä»¶ã€‚ src/renderer/components æ”¾ç½®å…¬å…±ç»„ä»¶ï¼Œæ¯”å¦‚æ ‡é¢˜æ ç»„ä»¶ã€èœå•ç»„ä»¶ç­‰ã€‚ src/renderer/store ç›®å½•å­˜æ”¾ Vue é¡¹ç›®çš„æ•°æ®çŠ¶æ€ç»„ä»¶ï¼Œç”¨äºåœ¨ä¸åŒçš„ Vue ç»„ä»¶ä¸­å…±äº«æ•°æ®ã€‚ src/renderer/router ç›®å½•å­˜æ”¾ Vue é¡¹ç›®çš„è·¯ç”±é…ç½®ä¿¡æ¯ã€‚ src/renderer/indow ç›®å½•å­˜æ”¾ä¸åŒçª—å£çš„å…¥å£ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯é€šè¿‡ vue-router å¯¼èˆªçš„ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„å­ç›®å½•å­˜æ”¾å¯¹åº”çª—å£çš„å­ç»„ä»¶ã€‚ src/renderer/App.vue æ˜¯æ¸²æŸ“è¿›ç¨‹çš„å…¥å£ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å†…åªæœ‰ä¸€ä¸ªç”¨äºå¯¼èˆªåˆ°ä¸åŒçš„çª—å£ã€‚ src/renderer/main.ts æ˜¯æ¸²æŸ“è¿›ç¨‹çš„å…¥å£è„šæœ¬ã€‚ index.html æ˜¯æ¸²æŸ“è¿›ç¨‹çš„å…¥å£é¡µé¢ã€‚ vite.config.ts æ˜¯ vite çš„é…ç½®æ–‡ä»¶ã€‚ è°ƒæ•´å¥½å·¥ç¨‹ç»“æ„åï¼Œè¦ä¿®æ”¹ä¸€ä¸‹ index.html çš„ä»£ç æ‰èƒ½è®©è¿™äº›è°ƒæ•´ç”Ÿæ•ˆã€‚å®é™…ä¸Šå°±æ˜¯ä¿®æ”¹ä¸€ä¸‹æ¸²æŸ“è¿›ç¨‹å…¥å£è„šæœ¬çš„å¼•å…¥è·¯å¾„: \u003cscript type=\"module\" src=\"/src/renderer/main.ts\"\u003e\u003c/script\u003e ","date":"2023-02-07","objectID":"/electron/:3:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¼•å…¥ vue-router å®‰è£… vue-router æ¨¡å—ï¼š npm install vue-router@4 -D å®‰è£…å®Œæˆåï¼Œä¸º src/renderer/router/index.ts æ·»åŠ å¦‚ä¸‹ä»£ç é€»è¾‘ï¼š import * as VueRouter from 'vue-router'; // è·¯ç”±è§„åˆ™æ•°ç»„ const routes = [{ path: '/', redirect: '/WindowMain/Chat', }, { path: '/WindowMain', component: () =\u003e import('../window/WindowMain.vue'), children: [{ path: 'Chat', component: () =\u003e import('../window/WindowMain/Chat.vue'), }, { path: 'Contact', component: () =\u003e import('../window/WindowMain/Contact.vue'), }, { path: 'Collection', component: () =\u003e import('../window/WindowMain/Collection.vue'), },] }, { path: '/WindowSetting', component: () =\u003e import('../window/WindowSetting.vue'), children: [ { path: 'AccountSetting', component: () =\u003e import('../window/WindowSetting/AccountSetting.vue'), } ] }, { path: '/WindowUserInfo', component: () =\u003e import('../window/WindowUserInfo.vue'), }] export let router = VueRouter.createRouter({ history: VueRouter.createWebHistory(), routes, }); è¿™æ®µä»£ç å¯¼å‡ºäº†ä¸€ä¸ª router å¯¹è±¡ï¼Œè¿™ä¸ª router å¯¹è±¡æ˜¯åŸºäº WebHistory æ¨¡å¼åˆ›å»ºè·¯ç”±çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é¡µé¢è·¯å¾„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼šhttp://127.0.0.1:5173/WindowMain/PageChatï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼Œapp://index.html/WindowMain/PageChatï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ã€‚ ä¸Šè¿°ä»£ç ä¸­ routes æ•°ç»„é‡Œçš„å†…å®¹å°±æ˜¯å¯¼èˆªçš„å…·ä½“é…ç½®ï¼Œåœ¨è¿™äº›é…ç½®ä¸­ä½¿ç”¨ import æ–¹æ³•åŠ¨æ€å¼•å…¥ Vue ç»„ä»¶ï¼Œvite åœ¨å¤„ç†è¿™ç§åŠ¨æ€å¼•å…¥çš„ç»„ä»¶æ—¶ï¼Œä¼šæŠŠå¯¹åº”çš„ç»„ä»¶ç¼–è¯‘åˆ°ç‹¬ç«‹çš„æºç æ–‡ä»¶ä¸­ï¼Œç±»ä¼¼ WindowUserInfo.689249b8.js å’Œ WindowSetting.6354f6d6.jsï¼Œè¿™ç§ç¼–è¯‘ç­–ç•¥å¯ä»¥å¸®åŠ©æ§åˆ¶æœ€ç»ˆç¼–è¯‘äº§ç‰©çš„å¤§å°ï¼Œé¿å…åº”ç”¨å¯åŠ¨æ—¶å°±åŠ è½½ä¸€ä¸ªåºå¤§çš„ JavaScript æ–‡ä»¶ã€‚ åœ¨åº”ç”¨å¯åŠ¨æ—¶è¯·æ±‚çš„è·¯å¾„æ˜¯ï¼šâ€/\"ï¼Œè¿™ä¸ªè·¯å¾„è¢«é‡å®šå‘åˆ°\"/WindowMain/Chat\"ï¼Œä¹Ÿå°±æ˜¯è¯´ WindowMain ç»„ä»¶å’Œ Chat ç»„ä»¶æ˜¯é¦–é¡µç»„ä»¶ï¼ˆè¿™æ˜¯åœ¨ç¬¬ä¸€ä¸ªå¯¼èˆªé…ç½®å¯¹è±¡ä¸­è®¾ç½®çš„ï¼‰ã€‚ ä¸Šè¿°ä»£ç å®Œæˆåï¼Œéœ€è¦åœ¨ main.ts ä¸­ä½¿ç”¨å®ƒï¼Œä»£ç å¦‚ä¸‹ï¼š import { createApp } from 'vue'; import './style.css'; import { router } from './router'; import App from './App.vue'; createApp(App).use(router).mount('#app'); æ¥ä¸‹æ¥æŠŠ App.vue çš„ä»£ç ä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ï¼š \u003ctemplate\u003e \u003crouter-view /\u003e \u003c/template\u003e åº”ç”¨å¯åŠ¨æ—¶ï¼Œç¬¬ä¸€ä¸ªçª—å£ï¼ˆä¸»çª—å£ï¼‰å°±ä¼šåŠ è½½ src\\renderer\\window\\WindowMain.vue ç»„ä»¶çš„ä»£ç ã€‚ å½“åœ¨ä¸»çª—å£å†…æ‰“å¼€åˆ«çš„å­çª—å£æ—¶ï¼ˆå¼¹å‡ºä¸€ä¸ªå­çª—å£ï¼‰ï¼Œåªè¦åŠ è½½ç±»ä¼¼è¿™æ ·çš„è·¯å¾„/WindowUserInfoï¼Œå°±å¯ä»¥è®©å­çª—å£åŠ è½½ src\\renderer\\Window\\WindowUserInfo.vue è¿™ä¸ªç»„ä»¶ã€‚ ","date":"2023-02-07","objectID":"/electron/:4:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"èœå•ç»„ä»¶åŠè·³è½¬ åœ¨ src\\renderer\\components ç›®å½•ä¸‹æ–°å»º BarLeft.vue çš„ç»„ä»¶ï¼Œè¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„ä¾§è¾¹æ ç»„ä»¶ï¼Œé‡Œé¢æ”¾ç½®åº”ç”¨ç¨‹åºçš„èœå•ï¼š \u003ctemplate\u003e \u003cdiv class=\"BarLeft\"\u003e \u003cdiv class=\"userIcon\"\u003e \u003cimg src=\"../assets/avatar.jpg\" alt=\"\"\u003e \u003c/div\u003e \u003cdiv class=\"menu\"\u003e \u003crouter-link v-for=\"item in mainWindowRoutes\" :to=\"item.path\" :class=\"['menuItem', {'selected': item.isSelected}]\"\u003e \u003ci :class=\"['icon', item.isSelected ? item.iconSelected : item.icon]\"\u003e\u003c/i\u003e \u003c/router-link\u003e \u003c/div\u003e \u003cdiv class=\"setting\"\u003e \u003cdiv class=\"menuItem\"\u003e \u003ci class=\"icon icon-setting\" /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import { ref, watch } from 'vue'; import { useRoute } from 'vue-router'; let mainWindowRoutes = ref([ { path: '/WindowMain/Chat', isSelected: true, icon: 'icon-chat', iconSelected: 'icon-chat' }, { path: '/WindowMain/Contact', isSelected: false, icon: 'icon-tongxunlu1', iconSelected: 'icon-tongxunlu' }, { path: '/WindowMain/Collection', isSelected: false, icon: 'icon-shoucang1', iconSelected: 'icon-shoucang' }, ]) let route = useRoute(); watch( () =\u003e route, () =\u003e mainWindowRoutes.value.forEach(v =\u003e v.isSelected = v.path === route.fullPath), { immediate: true, deep: true, }) \u003c/script\u003e \u003cstyle scoped lang=\"scss\"\u003e .BarLeft { width: 54px; height: 100%; display: flex; flex-direction: column; background: rgb(46, 46, 46); -webkit-app-region: drag; } .userIcon { height: 84px; padding-top: 36px; box-sizing: border-box; img { width: 34px; height: 34px; margin-left: 10px; } } .menu { flex: 1; } .menuItem { height: 44px; line-height: 44px; text-align: center; padding-left: 12px; padding-right: 12px; display: block; text-decoration: none; color: rgb(126, 126, 126); cursor: pointer; -webkit-app-region: no-drag; i { font-size: 22px; } \u0026:hover { color: rgb(141, 141, 141); } } .selected { color: rgb(7, 193, 96); \u0026:hover { color: rgb(7, 193, 96); } } .setting { margin-bottom: 5px; } \u003c/style\u003e æ ·å¼ä¸º menu çš„ div ç”¨äºå­˜æ”¾ä¸»çª—å£çš„èœå•ï¼Œé€šè¿‡ mainWindowRoutes æ•°ç»„é‡Œçš„æ•°æ®æ¥æ¸²æŸ“èœå•ã€‚ router-link ç»„ä»¶ä¼šè¢«æ¸²æŸ“æˆ a æ ‡ç­¾ï¼Œå½“ç”¨æˆ·ç‚¹å‡»èœå•æ—¶ï¼Œä¸»çª—å£çš„äºŒçº§è·¯ç”±å‘ç”Ÿè·³è½¬ï¼ˆsrc\\renderer\\window\\WindowMain.vueï¼‰ã€‚ é€šè¿‡ watch æ–¹æ³•ç›‘æ§è·¯ç”±è·³è½¬çš„è¡Œä¸ºï¼Œå½“è·¯ç”±è·³è½¬åï¼Œéå† mainWindowRoutes æ•°ç»„å†…çš„å¯¹è±¡ï¼Œå–æ¶ˆä»¥å‰é€‰ä¸­çš„èœå•ï¼Œé€‰ä¸­æ–°çš„èœå•ã€‚ ç”±äº mainWindowRoutes æ˜¯ä¸€ä¸ª Ref å¯¹è±¡ï¼Œæ‰€ä»¥èœå•è¢«é€‰ä¸­æˆ–å–æ¶ˆé€‰ä¸­ä¹‹åï¼Œç›¸åº”çš„èœå•æ ·å¼ï¼ˆå’Œèœå•å†…çš„å­—ä½“å›¾æ ‡ï¼‰ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚ åœ¨ WindowMain.vue ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š \u003cscript setup lang=\"ts\"\u003e import { ipcRenderer } from \"electron\"; import { onMounted } from \"vue\"; import BarLeft from \"../components/BarLeft.vue\"; onMounted(() =\u003e { ipcRenderer.invoke(\"showWindow\"); }); \u003c/script\u003e \u003ctemplate\u003e \u003cBarLeft /\u003e \u003cdiv class=\"pageBox\"\u003e \u003crouter-view /\u003e \u003c/div\u003e \u003c/template\u003e \u003cstyle scoped lang=\"scss\"\u003e .pageBox { flex: 1; height: 100%; border-top: 1px solid #e6e6e6; box-sizing: border-box; display: flex; margin-top: -1px; } \u003c/style\u003e ","date":"2023-02-07","objectID":"/electron/:5:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¼•å…¥å­—ä½“å›¾æ ‡ åœ¨ www.iconfont.cn/ è·å¾—å­—ä½“å›¾æ ‡ï¼ŒElectron ä½¿ç”¨ Chromium æ ¸å¿ƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªä½¿ç”¨ iconfont.css å’Œ iconfont.ttf è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åˆ° src/renderer/assets/icon ä¸‹ï¼Œåœ¨ main.ts å¯¼å…¥ä¸€ä¸‹ iconfont.css å°±å¯ä»¥å…¨å±€ä½¿ç”¨å­—ä½“å›¾æ ‡äº†ã€‚ import { createApp } from 'vue'; import './style.css'; import \"./assets/icon/iconfont.css\"; import { router } from './router'; import App from './App.vue'; createApp(App).use(router).mount('#app'); \u003ci class=\"icon icon-chat\"\u003e\u003c/i\u003e å¦‚æœ iconfont.ttf è¶³å¤Ÿå°ï¼Œé‚£ä¹ˆ vite ä¼šæŠŠå®ƒè½¬ä¹‰æˆ base64 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œç›´æ¥åµŒå…¥åˆ°æ ·å¼æ–‡ä»¶ä¸­æ¥è¾¾åˆ°å°‘è¯·æ±‚æ•°é‡çš„ç›®çš„ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡åœ¨ vite.config.ts ä¸­å¢åŠ  build.assetsInlineLimit é…ç½®ï¼ˆå€¼è®¾ç½®ä¸º 0 å³å¯ï¼‰æ¥å…³é—­ vite çš„è¿™ä¸ªè¡Œä¸ºã€‚ è¿è¡Œé¡¹ç›®ï¼š ","date":"2023-02-07","objectID":"/electron/:6:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ç®¡æ§åº”ç”¨çª—å£ å¦‚ä½•ç®¡æ§åº”ç”¨å†…çš„çª—å£ï¼Œæ¯”å¦‚ï¼šä»€ä¹ˆæ—¶å€™æ˜¾ç¤ºçª—å£ã€å¦‚ä½•é€šè¿‡è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ æ¥ç®¡æ§å•ä¸ªçª—å£ç­‰å†…å®¹ã€‚ ","date":"2023-02-07","objectID":"/electron/:7:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸»çª—å£æ˜¾ç¤ºæ—¶æœº åœ¨ç¬¬ä¸€ä¸ªçª—å£åˆå§‹åŒ–çš„ç¬é—´ï¼Œä¼šæœ‰ä¸€ä¸ªé»‘çª—å£é—ªç°ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æŒ‰ç…§ Electron å®˜ç½‘çš„å»ºè®®ï¼Œçª—å£ä¸€å¼€å§‹åº”è¯¥æ˜¯éšè—çš„ï¼Œåœ¨ ready-to-show äº‹ä»¶è§¦å‘åå†æ˜¾ç¤ºçª—å£ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š const { BrowserWindow } = require(\"electron\"); const win = new BrowserWindow({ show: false }); win.once(\"ready-to-show\", () =\u003e { win.show(); }); ä½†è¿™ä¸ªäº‹ä»¶çš„è§¦å‘å¤ªæ—©äº†ï¼Œå› ä¸º Vue é¡¹ç›®çš„ HTML åŠ è½½ä¹‹åï¼ŒJavaScript è„šæœ¬è¿˜éœ€è¦åšå¾ˆå¤šäº‹æƒ…æ‰èƒ½æŠŠç»„ä»¶æ¸²æŸ“å‡ºæ¥ã€‚å†µä¸”å¼€å‘è€…å¯èƒ½è¿˜ä¼šåœ¨ Vue ç»„ä»¶åˆå§‹åŒ–çš„æ—©æœŸåšå¾ˆå¤šé¢å¤–çš„å·¥ä½œï¼Œæ‰€ä»¥æ˜¾ç¤ºçª—å£ä¸èƒ½ä¾èµ– ready-to-show äº‹ä»¶ï¼Œå¿…é¡»æ‰‹åŠ¨æ§åˆ¶ã€‚ ä¸»çª—å£å¯¹è±¡ mainWindow åˆå§‹åŒ–æ—¶ï¼ŒæŠŠé…ç½®å±æ€§ show è®¾ç½®ä¸º falseï¼Œå°±å¯ä»¥è®©ä¸»çª—å£åˆå§‹åŒ–æˆåŠŸåå¤„äºéšè—çŠ¶æ€ã€‚ æ¥ä¸‹æ¥å†åœ¨åˆé€‚çš„æ—¶æœºè®©æ¸²æŸ“è¿›ç¨‹æ§åˆ¶ä¸»çª—å£æ˜¾ç¤ºå‡ºæ¥å³å¯ã€‚è¿™é‡Œåœ¨ WindowMain.vue ç»„ä»¶æ¸²æŸ“å®Œæˆä¹‹åæ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š import { ipcRenderer } from \"electron\"; import { onMounted } from \"vue\"; onMounted(() =\u003e { ipcRenderer.invoke(\"showWindow\"); }); ","date":"2023-02-07","objectID":"/electron/:7:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è‡ªå®šä¹‰çª—å£æ ‡é¢˜æ  åœ¨ src/renderer/components ä¸‹æ–°å»º BarTop.vueï¼Œè¿™æ˜¯çª—å£æ ‡é¢˜æ ç»„ä»¶ï¼š \u003ctemplate\u003e \u003cdiv class=\"topBar\"\u003e \u003cdiv class=\"winTitle\"\u003e{{ title }}}\u003c/div\u003e \u003cdiv class=\"winTool\"\u003e \u003cdiv @click=\"minimizeMainWindow\"\u003e \u003ci class=\"icon icon-minimize\"/\u003e \u003c/div\u003e \u003cdiv v-if=\"isMaximized\" @click=\"unmaximizeMainWindow\"\u003e \u003ci class=\"icon icon-restore\"/\u003e \u003c/div\u003e \u003cdiv v-else @click=\"maxmizeMainWin\"\u003e \u003ci class=\"icon icon-maximize\"/\u003e \u003c/div\u003e \u003cdiv @click=\"closeWindow\"\u003e \u003ci class=\"icon icon-close\"/\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript lang=\"ts\" setup\u003e \u003c/script\u003e \u003cstyle lang=\"scss\" scoped\u003e .topBar { display: flex; height: 25px; line-height: 25px; -webkit-app-region: drag; /* å¯æ‹–æ‹½åŒºåŸŸ */ width: 100%; } .winTitle { flex: 1; padding-left: 12px; font-size: 14px; color: #888; } .winTool { height: 100%; display: flex; -webkit-app-region: no-drag; /* å¯æ‹–æ‹½åŒºåŸŸå†…çš„ä¸å¯æ‹–æ‹½åŒºåŸŸ */ } .winTool div { height: 100%; width: 34px; text-align: center; color: #999; cursor: pointer; line-height: 25px; } .winTool .icon { font-size: 10px; color: #666666; font-weight: bold; } .winTool div:hover { background: #efefef; } .winTool div:last-child:hover { background: #ff7875; } .winTool div:last-child:hover i { color: #fff !important; } \u003c/style\u003e è¦è‡ªå®šä¹‰ä¸€ä¸ªçª—å£çš„æ ‡é¢˜æ å¿…é¡»æŠŠçª—å£é»˜è®¤çš„æ ‡é¢˜æ å–æ¶ˆæ‰æ‰è¡Œã€‚åªéœ€è¦åœ¨åˆå§‹åŒ– mainWindow å¯¹è±¡æ—¶ï¼ˆä¸»è¿›ç¨‹é‡Œçš„é€»è¾‘ï¼‰ï¼ŒæŠŠçª—å£é…ç½®å¯¹è±¡çš„ frame å±æ€§è®¾ç½®ä¸º false å°±å¯ä»¥ä½¿è¿™ä¸ªçª—å£æˆä¸ºæ— è¾¹æ¡†çª—å£äº†ã€‚ çª—å£æ ‡é¢˜æ˜¯é€šè¿‡ props æ•°æ®ä¼ é€’ç»™æ ‡é¢˜æ ç»„ä»¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ ‡é¢˜æ çš„æ ‡é¢˜æ˜¯ç”±å…¶çˆ¶ç»„ä»¶æ¥ç¡®å®šçš„ã€‚ æ ‡é¢˜æ ä¸­å¯æ‹–æ‹½åŒºåŸŸæ˜¯é€šè¿‡æ ·å¼ -webkit-app-region: drag å®šä¹‰çš„ï¼Œé¼ æ ‡åœ¨è¿™ä¸ªæ ·å¼å®šä¹‰çš„ç»„ä»¶ä¸Šæ‹–æ‹½å¯ä»¥ç§»åŠ¨çª—å£ï¼ŒåŒå‡»å¯ä»¥æ”¾å¤§æˆ–è€…è¿˜åŸçª—å£ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶å†…æœ‰å­ç»„ä»¶ä¸å¸Œæœ›æ‹¥æœ‰è¯¥èƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡ -webkit-app-region: no-drag; æ¥å–æ¶ˆæ­¤èƒ½åŠ›ã€‚ æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€è¿˜åŸã€å…³é—­çª—å£ç­‰æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œéƒ½æ˜¯é€šè¿‡ ipcRenderer.invoke æ–¹æ³•æ¥è°ƒç”¨ä¸»è¿›ç¨‹ CommonWindowEvent ç±»æä¾›çš„æ¶ˆæ¯ç®¡é“æ¥å®ç°å¯¹åº”çš„åŠŸèƒ½çš„ã€‚ ç”±äºçª—å£æœ€å¤§åŒ–ï¼ˆæˆ–è¿˜åŸï¼‰ä¸ä¸€å®šæ˜¯é€šè¿‡ç‚¹å‡»æœ€å¤§åŒ–æŒ‰é’®ï¼ˆæˆ–è¿˜åŸæŒ‰é’®ï¼‰è§¦å‘çš„ï¼Œæœ‰å¯èƒ½æ˜¯é€šè¿‡åŒå‡»æ ‡é¢˜æ å¯æ‹–æ‹½åŒºåŸŸè§¦å‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½é€šè¿‡ ipcRenderer.on æ¥ç›‘å¬çª—å£çš„æœ€å¤§åŒ–æˆ–è¿˜åŸäº‹ä»¶ï¼Œä»¥æ­¤æ¥æ”¹å˜å¯¹åº”çš„æœ€å¤§åŒ–æˆ–è¿˜åŸæŒ‰é’®çš„æ˜¾éšçŠ¶æ€ã€‚ä¸èƒ½åœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚windowMaximized æ¶ˆæ¯å’Œ windowUnmaximized æ¶ˆæ¯ä¹Ÿæ˜¯ç”±ä¸»è¿›ç¨‹çš„ CommonWindowEvent ç±»å‘æ¥çš„ã€‚ ç”±äºå¤šä¸ªäºŒçº§è·¯ç”±é¡µé¢ä¼šå¼•ç”¨ BarTop.vueï¼Œä¸ºäº†é¿å…åœ¨åˆ‡æ¢è·¯ç”±çš„æ—¶å€™ï¼Œåå¤é€šè¿‡ ipcRenderer.on æ³¨å†Œæ¶ˆæ¯ç›‘å¬å™¨ï¼Œæ‰€ä»¥åœ¨ç»„ä»¶çš„ onUnmounted äº‹ä»¶å†…æ³¨é”€äº†æ¶ˆæ¯ç›‘å¬å™¨ï¼Œé¿å…äº‹ä»¶æ³„æ¼ã€‚ src/main/CommonWindowEvent.ts çš„ä»£ç å¦‚ä¸‹ï¼š import { BrowserWindow, ipcMain, app } from 'electron'; // ä¸»è¿›ç¨‹å…¬å…±æ¶ˆæ¯å¤„ç†é€»è¾‘ export class CommonWindowEvent { private static getWin(event: any) { return BrowserWindow.fromWebContents(event.sender); } public static listen() { ipcMain.handle('minimizeWindow', e =\u003e { this.getWin(e)?.minimize(); }); ipcMain.handle('maxmizeWindow', e =\u003e { this.getWin(e)?.maximize(); }); ipcMain.handle('unmaximizeWindow', e =\u003e { this.getWin(e)?.unmaximize(); }); ipcMain.handle('hideWindow', e =\u003e { this.getWin(e)?.hide(); }); ipcMain.handle('showWindow', e =\u003e { this.getWin(e)?.show(); }); ipcMain.handle('closeWindow', e =\u003e { this.getWin(e)?.close(); }); ipcMain.handle('resizable', e =\u003e this.getWin(e)?.isResizable()); ipcMain.handle('getPath', (e, name) =\u003e app.getPath(name)); } // ä¸»è¿›ç¨‹å…¬å…±äº‹ä»¶å¤„ç†é€»è¾‘ public static regWinEvent(win: BrowserWindow) { win.on('maximize', () =\u003e { win.webContents.send('windowMaximized'); }); win.on('unmaximize', () =\u003e { win.webContents.send('windowUnmaximized'); }) } } åœ¨ listen æ–¹æ³•å†…éƒ¨æ³¨å†Œäº†ä¸€ç³»åˆ—æ¶ˆæ¯ç®¡é“ï¼Œæ–¹ä¾¿æ¸²æŸ“è¿›ç¨‹æ§åˆ¶ä¸»è¿›ç¨‹çš„ä¸€äº›è¡Œä¸ºï¼Œæ ‡é¢˜æ ç»„ä»¶çš„çª—å£çš„æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€è¿˜åŸç­‰åŠŸèƒ½éƒ½æ˜¯åœ¨è¿™é‡Œå®ç°çš„ã€‚åœ¨ app ready ä¹‹åè°ƒç”¨ CommonWindowEvent.listen(); è¿™ä¸ªæ–¹æ³•å³å¯æ³¨å†Œè¿™äº›æ¶ˆæ¯ç®¡é“ã€‚ regWinEvent æ–¹æ³•è´Ÿè´£ä¸ºçª—å£å¯¹è±¡æ³¨å†Œäº‹ä»¶ï¼Œå½“çª—å£æœ€å¤§åŒ–æˆ–è¿˜åŸåï¼Œè¿™äº›äº‹ä»¶çš„å¤„ç†å‡½æ•°è´Ÿè´£æŠŠæ¶ˆæ¯å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ ‡é¢˜æ çš„å¯¹åº”æŒ‰é’®çš„å›¾æ ‡ä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼ŒåŒæ ·ä¹Ÿæ˜¯åœ¨ app ready ä¹‹åè°ƒç”¨ CommonWindowEvent.regWinEvent(mainWindow); è¿™ä¸ªæ–¹æ³•å³å¯ã€‚ åœ¨ src/main/mainEntry.ts ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š import {app, BrowserWindow} from 'electron'; import {CustomScheme} from \"./customScheme\"; import { CommonWindowEvent } from \"./CommonWindowEvent\"; process.env.ELECTRON_DISABLE_SECURITY_WARNINGS = 'true'; let mainWindow: BrowserWindow; // è°ƒç”¨ CommonWindowEvent.regWinEvent(win); app.on(\"browser-window-created\", (e, win) =\u003e { CommonWindowEvent.regWinEvent(win); }); app.whenReady().then(() =\u003e { let config = { webPreferences: { nodeIntegration: true, webSecurity: false, allowRunningInsecureContent: true, contextIsolation: false, webviewTag: true, spellcheck: false, disableHtmlFullscreenWindowResize: true, }, }; mainWindow = new BrowserWindow(config); mainWindow.webContents.openDevTools({mode: 'undocked'}); if (process.argv[2]) { mainWindow.loadURL(process.argv[2]); } else { CustomScheme.regi","date":"2023-02-07","objectID":"/electron/:7:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"çª—å£åŠ è½½è¿‡æ…¢è§£å†³æ–¹æ¡ˆ Electron åˆ›å»ºä¸€ä¸ª BrowserWindow å¯¹è±¡ï¼Œå¹¶è®©å®ƒæˆåŠŸæ¸²æŸ“ä¸€ä¸ªé¡µé¢æ˜¯éå¸¸è€—æ—¶çš„ï¼Œåœ¨ä¸€ä¸ªæ™®é€šé…ç½®çš„ç”µè„‘ä¸Šï¼Œè¿™å¤§æ¦‚éœ€è¦ 2~5 ç§’å·¦å³çš„æ—¶é—´ï¼ˆå°‘é‡ç”¨æˆ·åé¦ˆæ²¡è¿™ä¸ªé—®é¢˜ï¼‰ã€‚ çª—å£æ± è§£å†³æ–¹æ¡ˆ æå‰å‡†å¤‡ 1 ä¸ªæˆ–å¤šä¸ªéšè—çš„çª—å£ï¼Œè®©å®ƒä»¬åŠ è½½ä¸€ä¸ªéª¨æ¶å±é¡µé¢ï¼Œæ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦æ‰“å¼€ä¸€ä¸ªæ–°çª—å£æ—¶ï¼Œå°±ä»è¿™ä¸ªæ•°ç»„é‡Œå–å‡ºä¸€ä¸ªçª—å£ï¼Œæ‰§è¡Œé¡µå†…è·³è½¬ï¼Œä»éª¨æ¶å±é¡µé¢è·³è½¬åˆ°ä¸šåŠ¡é¡µé¢ï¼Œç„¶åå†æŠŠè¿™ä¸ªçª—å£æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™å°±æ¶ˆè´¹æ‰äº†ä¸€ä¸ªçª—å£ã€‚ å½“åº”ç”¨ç¨‹åºæ¶ˆè´¹æ‰ä¸€ä¸ªçª—å£ä¹‹åï¼Œé©¬ä¸Šå†åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ è½½äº†éª¨æ¶å±é¡µé¢çš„çª—å£æ”¾å…¥æ•°ç»„ï¼Œä¿è¯æœ‰è¶³å¤Ÿçš„å¾…å‘½éšè—çª—å£ã€‚ å½“ç”¨æˆ·å…³é—­æŸä¸ªåŠ è½½äº†ä¸šåŠ¡é¡µé¢çš„çª—å£æ—¶ï¼Œå°±æŠŠå®ƒä»æ•°ç»„ä¸­åˆ é™¤æ‰ã€‚é¿å…æ•°ç»„é‡Œå­˜åœ¨æ— ç”¨çš„çª—å£ã€‚ è¿™ä¸ªæ–¹æ¡ˆä¹‹æ‰€ä»¥è¡Œä¹‹æœ‰æ•ˆæ˜¯å› ä¸ºåœ¨æ²¡æœ‰ä½¿ç”¨çª—å£æ—¶å°±æå‰å‡†å¤‡å¥½äº†çª—å£ï¼Œç­‰çœŸæ­£éœ€è¦ä½¿ç”¨çª—å£æ—¶ï¼Œä»…ä»…æ˜¯å®Œæˆäº†ä¸€æ¬¡é¡µé¢è·³è½¬çš„å·¥ä½œï¼Œè¿™ä¸ªè·³è½¬å·¥ä½œå¯ä»¥åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å°±å®Œæˆã€‚æ‰€ä»¥ç»™ç”¨æˆ·çš„æ„ŸçŸ¥å°±æ˜¯æ‰“å¼€å­çª—å£ç‰¹åˆ«å¿«ã€‚ webview å’Œ BrowserView åˆ›å»ºæ…¢çš„é—®é¢˜ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„æ–¹æ¡ˆè§£å†³ã€‚ ç„¶è€Œè¿™ä¸ªæ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¸‰ä¸ªç¼ºç‚¹ã€‚ æ— æ³•ä¼˜åŒ–æ•´ä¸ªåº”ç”¨çš„ç¬¬ä¸€ä¸ªçª—å£ã€‚ ç³»ç»Ÿå†…éƒ¨å§‹ç»ˆä¼šæœ‰ 1 åˆ° 2 ä¸ªéšè—çª—å£å¤„äºå¾…å‘½çŠ¶æ€ï¼Œè¿™æ— å½¢ä¸­å¢åŠ äº†ç”¨æˆ·çš„å†…å­˜æ¶ˆè€—ã€‚ è™½ç„¶è¿™ä¸ªæ–¹æ¡ˆçœ‹ä¸Šå»é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œä½†è¦æ§åˆ¶å¥½æ‰€æœ‰çš„ç»†èŠ‚ï¼ˆæ¯”å¦‚ï¼Œçª—å£é—´çš„é€šä¿¡ã€ç•Œé¢ä»£ç å¦‚ä½•æ§åˆ¶çª—å£çš„å¤–è§‚ã€å¦‚ä½•å®ç°æ¨¡æ€å­çª—å£ç­‰ï¼‰è¿˜æ˜¯éå¸¸ç¹ççš„ã€‚ window.open è§£å†³æ–¹æ¡ˆ Electron å…è®¸ä½¿ç”¨ window.open çš„æ–¹å¼æ‰“å¼€ä¸€ä¸ªå­çª—å£ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ‰“å¼€çš„å­çª—å£ä¸ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹ï¼Œæ•ˆç‡éå¸¸é«˜ï¼Œå¯ä»¥åœ¨å‡ ç™¾æ¯«ç§’å†…å°±ä¸ºç”¨æˆ·å‘ˆç°çª—å£å†…å®¹ã€‚ ä½†å¯¹äºä¸€äº›å¤æ‚çš„éœ€æ±‚å´éœ€è¦é¢å¤–çš„å¤„ç†æ‰èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šç³»ç»Ÿè®¾ç½®å­çª—å£ï¼Œå½“ç”¨æˆ·å®ŒæˆæŸä¸€é¡¹è®¾ç½®ä¹‹åï¼Œè¦é€šçŸ¥çˆ¶çª—å£åšå‡ºç›¸åº”çš„æ”¹å˜ã€‚è¿™æ˜¯å¸¸è§çš„çˆ¶å­çª—å£é€šä¿¡çš„éœ€æ±‚ã€‚ é¦–å…ˆéœ€è¦ä¸ºä¸»çª—å£çš„ webContents æ³¨å†Œ setWindowOpenHandler æ–¹æ³•ã€‚ åœ¨ src/main/CommonWindowEvent.ts ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š mainWindow.webContents.setWindowOpenHandler((param) =\u003e { return { action: \"allow\", overrideBrowserWindowOptions: yourWindowConfig }; }); ä½¿ç”¨ setWindowOpenHandler æ–¹æ³•çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­ action: â€œallowâ€ ä»£è¡¨å…è®¸çª—å£æ‰“å¼€ï¼Œå¦‚æœä½ æƒ³é˜»æ­¢çª—å£æ‰“å¼€ï¼Œé‚£ä¹ˆåªè¦è¿”å› {action: â€œdenyâ€} å³å¯ã€‚ è¿”å›å¯¹è±¡çš„ overrideBrowserWindowOptions å±æ€§çš„å€¼æ˜¯è¢«æ‰“å¼€çš„æ–°çª—å£çš„é…ç½®å¯¹è±¡ã€‚ åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­æ‰“å¼€å­çª—å£çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º: window.open(`/WindowSetting/AccountSetting`); window.open æ‰“å¼€æ–°çª—å£ä¹‹æ‰€ä»¥é€Ÿåº¦éå¸¸å¿«ï¼Œæ˜¯å› ä¸ºç”¨è¿™ç§æ–¹å¼åˆ›å»ºçš„æ–°çª—å£ä¸ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªçª—å£å´©æºƒä¼šæ‹–ç´¯å…¶ä»–çª—å£è·Ÿç€å´©æºƒï¼ˆä¸»çª—å£ä¸å—å½±å“ï¼‰ã€‚ ä½¿ç”¨ window.open æ‰“å¼€çš„æ–°çª—å£è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ç±»çª—å£åœ¨å…³é—­ä¹‹åè™½ç„¶ä¼šé‡Šæ”¾æ‰å¤§éƒ¨åˆ†å†…å­˜ï¼Œä½†æœ‰ä¸€å°éƒ¨åˆ†å†…å­˜æ— æ³•é‡Šæ”¾ï¼ˆæ— è®ºä½ æ‰“å¼€å¤šå°‘ä¸ªå­çª—å£ï¼Œå…¨éƒ¨å…³é—­ä¹‹åæ€»ä¼šæœ‰é‚£ä¹ˆå›ºå®šçš„ä¸€å°å—å†…å­˜æ— æ³•é‡Šæ”¾ï¼‰ï¼Œè¿™ä¸çª—å£æ± æ–¹æ¡ˆçš„å†…å­˜æŸè€—ç›¸å½“ã€‚ æ¥ä¸‹æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆæ§åˆ¶å­çª—å£ã€‚ å­çª—å£çš„æ ‡é¢˜æ æ¶ˆæ¯ è‡ªå®šä¹‰ä¸»çª—å£çš„æ ‡é¢˜æ  BarTop.vueï¼Œæ ‡é¢˜æ ç»„ä»¶éœ€è¦ç›‘å¬ä¸»è¿›ç¨‹å‘æ¥çš„ windowMaximized æ¶ˆæ¯å’Œ windowUnmaximized æ¶ˆæ¯ï¼Œå­çª—å£å½“ç„¶ä¹Ÿå¸Œæœ›å¤ç”¨è¿™ä¸ªç»„ä»¶ï¼Œç„¶è€Œå­çª—å£çš„çª—å£å¯¹è±¡æ˜¯åœ¨ Electron å†…éƒ¨åˆ›å»ºçš„ï¼Œä¸æ˜¯å¼€å‘è€…åˆ›å»ºçš„ï¼Œæ²¡æœ‰å­çª—å£çš„çª—å£å¯¹è±¡ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨ regWinEvent æ–¹æ³•ä¸ºå­çª—å£æ³¨å†Œæœ€å¤§åŒ–å’Œè¿˜åŸäº‹ä»¶å‘¢ï¼Ÿ è¿™å°±éœ€è¦ç”¨åˆ° app å¯¹è±¡çš„ browser-window-created äº‹ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š // src/main/mainEntry.ts app.on(\"browser-window-created\", (e, win) =\u003e { CommonWindowEvent.regWinEvent(win); }); æ¯å½“æœ‰ä¸€ä¸ªçª—å£è¢«åˆ›å»ºæˆåŠŸåï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¼šè¢«è§¦å‘ï¼Œä¸»çª—å£å’Œä½¿ç”¨ window.open åˆ›å»ºçš„å­çª—å£éƒ½ä¸€æ ·ï¼Œè¿™ä¸ªäº‹ä»¶çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯çª—å£å¯¹è±¡ã€‚ åŠ¨æ€è®¾ç½®å­çª—å£çš„é…ç½® è™½ç„¶å¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ç”¨ window.open æ–¹æ³•æ‰“å¼€ä¸€ä¸ªå­çª—å£ï¼Œä½†è¿™ä¸ªå­çª—å£çš„é…ç½®ä¿¡æ¯ç›®å‰è¿˜æ˜¯åœ¨ä¸»è¿›ç¨‹ä¸­è®¾ç½®çš„ï¼ˆoverrideBrowserWindowOptionsï¼‰ï¼Œå¤§éƒ¨åˆ†æ—¶å€™è¦æ ¹æ®æ¸²æŸ“è¿›ç¨‹çš„è¦æ±‚æ¥æ”¹å˜å­çª—å£çš„é…ç½®ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯ç”±æ¸²æŸ“è¿›ç¨‹æ¥è®¾ç½®è¿™äº›é…ç½®ä¿¡æ¯ã€‚ åœ¨ CommonWindowEvent ç±»çš„ regWinEvent æ–¹æ³•å¢åŠ ä¸€æ®µé€»è¾‘ï¼Œä»£ç å¦‚ä¸‹ï¼š // æ³¨å†Œæ‰“å¼€å­çª—å£çš„å›è°ƒå‡½æ•° // @ts-ignore win.webContents.setWindowOpenHandler((param) =\u003e { // åŸºç¡€çª—å£é…ç½®å¯¹è±¡ let config = { frame: false, show: true, parent: null, webPreferences: { nodeIntegration: true, webSecurity: false, allowRunningInsecureContent: true, contextIsolation: false, webviewTag: true, spellcheck: false, disableHtmlFullscreenWindowResize: true, nativeWindowOpen: true, }, }; // å¼€å‘è€…è‡ªå®šä¹‰çª—å£é…ç½®å¯¹è±¡ let features = JSON.parse(param.features); for (let p in features) { if (p === \"webPreferences\") { for (let p2 in features.webPreferences) { //@ts-ignore config.webPreferences[p2] = features.webPreferences[p2]; } } else { //@ts-ignore config[p] = features[p]; } } // @ts-ignore if (config[\"modal\"] === true) config.parent = win; // å…è®¸æ‰“å¼€çª—å£ï¼Œå¹¶ä¼ é€’çª—å£é…ç½®å¯¹è±¡ return {action: \"allow\", overrideBrowserWindowOptions: config}; }); config å¯¹è±¡å’Œä¸»çª—å£çš„ config å¯¹è±¡åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ€å¥½æŠŠå®ƒæŠ½è±¡å‡ºæ¥ã€‚ param å‚æ•°çš„ features å±æ€§æ˜¯ç”±æ¸²æŸ“è¿›ç¨‹ä¼ è¿‡æ¥çš„ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™é‡ŒæŠŠå®ƒå½“ä½œä¸€ä¸ª JSON å­—ç¬¦ä¸²ä½¿ç”¨ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²é‡ŒåŒ…å«ç€æ¸²æŸ“è¿›ç¨‹æä¾›çš„çª—å£é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹ä¸ config å¯¹è±¡æä¾›çš„åŸºç¡€é…ç½®é¡¹ç»“åˆï¼Œæœ€ç»ˆå½¢æˆäº†å­çª—å£çš„é…ç½®é¡¹ã€‚ å¦‚æœé…ç½®é¡¹ä¸­ modal å±æ€§çš„å€¼ä¸º true çš„è¯ï¼Œè¯´æ˜æ¸²æŸ“è¿›ç¨‹å¸Œæœ›å­çª—å£ä¸ºä¸€ä¸ªæ¨¡æ€çª—å£ï¼Œè¿™æ—¶è¦ä¸ºå­çª—å£æä¾›çˆ¶çª—å£é…ç½®é¡¹ï¼šparentï¼Œè¿™ä¸ªé…ç½®é¡¹çš„å€¼å°±æ˜¯å½“å‰çª—å£ã€‚ ä¹‹æ‰€ä»¥æŠŠè¿™æ®µé€»è¾‘æ”¾ç½®åœ¨ CommonWindowEvent ç±»çš„ regWinEvent æ–¹æ³•ä¸­ï¼Œå°±æ˜¯å¸Œæœ›æ›´æ–¹ä¾¿åœ°ä¸ºåº”ç”¨å†…çš„æ‰€æœ‰çª—å£æä¾›è¿™é¡¹èƒ½åŠ›ï¼Œå¦‚æœä¸å¸Œæœ›è¿™ä¹ˆåšï¼Œä¹Ÿå¯ä»¥æŠŠè¿™æ®µé€»è¾‘æ”¾ç½®åœ¨ä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ä¸­ã€‚ åœ¨ src/renderer/components/BarLeft.vue ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š const openSettingWindow = () =\u003e { const config = { modal: true, width: 2002, webPreferences: { webviewTag: false } }; window.open(`/WindowSetting/AccountSetting`, \"_blank\", JSON.stringify(config)); }; window.open æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°å®˜æ–¹å®šä¹‰ä¸ºä¸€ä¸ªé€—å·åˆ†å‰²çš„ key-value åˆ—è¡¨ï¼Œä½†è¿™é‡ŒæŠŠå®ƒå˜æˆäº†ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œè¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿åœ°æ§åˆ¶å­çª—å£çš„é…ç½®å¯¹è±¡ã€‚ ä½¿ç”¨ window.open æ‰“å¼€æ–°çª—å£é€Ÿåº¦éå¸¸å¿«ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥è®©æ–°çª—å£æ˜¾ç¤ºå‡ºæ¥äº† config.show = trueã€‚å¦‚æœä½ éœ€è¦åœ¨æ–°çª—å£åˆå§‹åŒ–æ—¶å®Œæˆå¤æ‚è€—æ—¶çš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆä½ ä¹Ÿåº”è¯¥æ‰‹åŠ¨æ§åˆ¶æ–°çª—å£çš„æ˜¾ç¤ºæ—¶æœºã€‚ å°è£…å­çª—å£åŠ è½½æˆåŠŸçš„äº‹ä»¶ ç°åœ¨é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šä¸çŸ¥é“å­çª—å£ä½•æ—¶åŠ è½½æˆåŠŸäº†ï¼Œæ³¨æ„è¿™é‡Œä¸èƒ½å•çº¯åœ°ä½¿ç”¨ window å¯¹è±¡çš„ onload äº‹ä»¶æˆ–è€… document å¯¹è±¡çš„ DOMContentLoaded äº‹ä»¶æ¥åˆ¤æ–­å­çª—å£æ˜¯å¦åŠ è½½æˆåŠŸäº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™ä½ çš„ä¸šåŠ¡ä»£ç ï¼ˆæ¯”å¦‚ä»æ•°æ®åº“å¼‚æ­¥è¯»å–æ•°æ®çš„é€»è¾‘ï¼‰å¯èƒ½å°šæœªæ‰§è¡Œå®Œæˆã€‚ æ‰€ä»¥ï¼Œè¦è‡ªå·±å°è£…ä¸€ä¸ªäº‹ä»¶ï¼Œåœ¨ä¸šåŠ¡ä»£ç çœŸæ­£æ‰§è¡Œå®Œæˆæ—¶ï¼Œæ‰‹åŠ¨å‘å°„è¿™ä¸ªäº‹ä»¶ï¼Œå‘ŠçŸ¥ä¸»çª—å£ï¼šâ€œç°åœ¨å­çª—å£å·²ç»åŠ è½½æˆåŠŸå•¦ï¼Œä½ å¯ä»¥ç»™æˆ‘å‘é€æ¶ˆæ¯äº†ï¼â€ åœ¨å°è£…è¿™ä¸ªäº‹ä»¶å‰ï¼Œå…ˆæ¥æŠŠ window.open æ‰“å¼€å­çª—å£çš„é€»è¾‘å°è£…åˆ°ä¸€ä¸ª Promise å¯¹è±¡ä¸­ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š src/renderer/common/Dialog.ts ex","date":"2023-02-07","objectID":"/electron/:7:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"Pinia ç®¡ç†åº”ç”¨çŠ¶æ€ ç›¸æ¯” Vuexï¼ŒPinia çš„ä¼˜åŠ¿ä¸»è¦æ˜¯ï¼š æ²¡æœ‰ mutationsï¼Œç›¸åº”çš„å·¥ä½œéƒ½åœ¨ actions ä¸­å®Œæˆï¼Œactions ç›´æ¥æ”¯æŒå¼‚æ­¥å‡½æ•°ã€‚ å®Œç¾æ”¯æŒ TypeScriptï¼ŒVuex åœ¨è¿™æ–¹é¢åšå¾—ä¸æ˜¯å¾ˆå¥½ã€‚ å¯¹å¼€å‘å·¥å…·æ”¯æŒå‹å¥½ï¼Œï¼ŒPinia å¯¹è°ƒè¯•å·¥å…·ï¼ˆvue-devtoolsï¼‰ä¹Ÿæ”¯æŒå‹å¥½ã€‚ ä¸éœ€è¦å†ä½¿ç”¨åç§°ç©ºé—´æ¥æ§åˆ¶ storeï¼Œä¹Ÿä¸éœ€è¦å†è€ƒè™‘ store çš„åµŒå¥—é—®é¢˜ã€‚ æ€§èƒ½ä¼˜äº Vuexã€‚ ","date":"2023-02-07","objectID":"/electron/:8:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å®‰è£… Pinia npm i pinia -D ä¿®æ”¹æ¸²æŸ“è¿›ç¨‹å…¥å£æ–‡ä»¶ï¼ŒåŠ è½½ Pinia æ’ä»¶ï¼š src/renderer/main.ts import {createApp} from 'vue'; import {router} from './router'; import { createPinia } from \"pinia\"; import App from './App.vue'; import './style.css'; import \"./assets/icon/iconfont.css\"; createApp(App).use(createPinia()).use(router).mount('#app'); ","date":"2023-02-07","objectID":"/electron/:8:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åˆ›å»º Store åœ¨ src/renderer/store ç›®å½•ä¸‹æ–°å»º index.tsï¼Œåˆ›å»ºç¬¬ä¸€ä¸ª Store ç¨‹åºï¼Œä»£ç å¦‚ä¸‹ï¼š import { defineStore } from 'pinia'; import { Ref, ref } from 'vue'; import { ModelChat } from '../../model/ModelChat'; // mock data const prepareData = () =\u003e { let result = []; for (let i = 0; i \u003c 10; i++) { let model = new ModelChat(); model.fromName = 'èŠå¤©å¯¹è±¡' + i; model.sendTime = 'æ˜¨å¤©'; model.lastMsg = 'è¿™æ˜¯æ­¤ä¼šè¯çš„æœ€åä¸€æ¡æ¶ˆæ¯' + i; model.avatar = 'https://pic3.zhimg.com/v2-306cd8f07a20cba46873209739c6395d_im.jpg?source=32738c0c'; result.push(model); } return result; }; export const useChatStore = defineStore('chat', () =\u003e { let data: Ref\u003cModelChat[]\u003e = ref(prepareData()); const selectItem = (item: ModelChat) =\u003e { if (item.isSelected) return; data.value.forEach((v) =\u003e (v.isSelected = false)); item.isSelected = true; }; return { data, selectItem }; }); é€šè¿‡ export æš´éœ² useChatStore æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é€šè¿‡ Pinia çš„ defineStore æ–¹æ³•åˆ›å»ºï¼Œåœ¨ Vue ä¸šåŠ¡ç»„ä»¶ä¸­æ‰§è¡Œè¿™ä¸ªå‡½æ•°å®ä¾‹æ‰ä¼šå¾—åˆ°çœŸæ­£çš„ Storeã€‚ ä½¿ç”¨ defineStore(name, callback) çš„å½¢å¼åˆ›å»º Storeï¼Œè¿™ç§å½¢å¼çš„ Store å«ä½œ Setup Storesã€‚Pinia è¿˜æä¾›äº†å¦ä¸€ç§å½¢å¼çš„ Store ï¼šOption Storesï¼Œå…·ä½“å¯ä»¥å‚é˜… Pinia çš„å®˜æ–¹æ–‡æ¡£ã€‚ è¿™ä¸ª Store çš„çŠ¶æ€æ•°æ®å­˜å‚¨åœ¨ï¼šdata å±æ€§ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªè¢« Ref å¯¹è±¡åŒ…è£¹ç€çš„æ•°ç»„ï¼Œæ•°ç»„é‡Œçš„å†…å®¹æ˜¯é€šè¿‡ prepareData æ–¹æ³•æ¨¡æ‹Ÿçš„ï¼ˆæ¨¡æ‹Ÿäº†åä¸ªèŠå¤©ä¼šè¯å¯¹è±¡ï¼‰ã€‚ è¿™ä¸ª Store è¿˜æä¾›äº†ä¸€ä¸ª actions æ–¹æ³•ï¼šselectItemï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºé€‰ä¸­æŸä¸ªå…·ä½“çš„èŠå¤©ä¼šè¯ã€‚ ","date":"2023-02-07","objectID":"/electron/:8:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ•°æ®æ¨¡å‹ Model èŠå¤©ä¼šè¯çš„æ•°æ®æ¨¡å‹æ˜¯åœ¨ src/model ç›®å½•ä¸‹å®šä¹‰çš„ï¼Œå› ä¸ºåº”ç”¨çš„ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éƒ½å¯èƒ½ä¼šç”¨åˆ°æ•°æ®æ¨¡å‹ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾ç½®åœ¨ renderer å’Œ main çš„åŒçº§ç›®å½•ä¸‹ã€‚ æ–°å»º src/model/ModelChat.tsï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š import { ModalBase } from './ModalBase'; export class ModelChat extends ModalBase { fromName?: string; sendTime?: string | number; isSelected = false; lastMsg?: string; avatar?: string; // 0 å•èŠï¼Œ1 ç¾¤èŠï¼Œ2 å…¬ä¼—å·ï¼Œ3 æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ chatType?: number; } æ¨¡å‹ä¸»è¦ç”¨äºæè¿°å¯¹è±¡æºå¸¦çš„ä¿¡æ¯ï¼Œç”±äºæ‰€æœ‰çš„æ¨¡å‹éƒ½ä¼šæ‹¥æœ‰ä¸€äº›å…±åŒçš„å­—æ®µï¼Œæ‰€ä»¥æŠŠè¿™äº›å­—æ®µæ”¾ç½®åœ¨æ¨¡å‹çš„åŸºç±» ModelBase ä¸­ã€‚ æ–°å»º src/model/ModelBase.tsï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š import crypto from 'crypto'; export class ModalBase { id: string; constructor() { this.id = crypto.randomUUID(); } } æš‚æ—¶åªæä¾›äº†ä¸€ä¸ªå…¬å…±å­—æ®µï¼šidï¼Œå‡¡ç»§æ‰¿äº ModelBase çš„å­ç±»éƒ½å°†æ‹¥æœ‰è¿™ä¸ªå­—æ®µï¼Œè€Œä¸”è¿™ä¸ªå­—æ®µæ˜¯éšæ¨¡å‹å®ä¾‹åŒ–çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºçš„ã€‚ åªæœ‰ new ModelXXXX æ—¶æ‰ä¼šåˆ›å»ºè¿™ä¸ªå­—æ®µï¼Œlet model = obj as ModelXXXX æ—¶ä¸ä¼šåˆ›å»ºè¿™ä¸ªå­—æ®µã€‚ ä½¿ç”¨ Node.js crypto æ¨¡å—çš„ randomUUID æ–¹æ³•æ¥ç”Ÿæˆæ¯ä¸ªèŠå¤©ä¼šè¯çš„ IDã€‚ ","date":"2023-02-07","objectID":"/electron/:8:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä½¿ç”¨ Store é¦–å…ˆæŠŠæ¨¡å‹ä¸­æ¨¡æ‹Ÿçš„ 10 ä¸ªèŠå¤©ä¼šè¯æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/window/WindowMain/chat/components/ChatBoard.vue \u003ctemplate\u003e \u003cdiv class=\"ChatList\"\u003e \u003cChatSearch /\u003e \u003cdiv class=\"ListBox\"\u003e \u003cChatItem :data=\"item\" v-for=\"item in store.data\" :key=\"item.id\" /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import ChatItem from './ChatItem.vue'; import ChatSearch from './ChatSearch.vue'; import { onMounted } from 'vue'; import { useChatStore } from '../../../../store/useChatStore'; const store = useChatStore(); onMounted(() =\u003e { store.selectItem(store.data[6]); }); \u003c/script\u003e \u003cstyle scoped lang=\"scss\"\u003e .ChatList { width: 250px; display: flex; flex-direction: column; height: 100%; box-sizing: border-box; } .ListBox { background: rgb(230, 229, 229); background-image: linear-gradient(to bottom right, rgb(235, 234, 233), rgb(240, 240, 240)); flex: 1; overflow-y: auto; box-sizing: border-box; border-right: 1px solid rgb(214, 214, 214); } \u003c/style\u003e é€šè¿‡ Vue çš„ v-for æŒ‡ä»¤æ¸²æŸ“äº†ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶åˆ—è¡¨ï¼ˆChatItemï¼‰ã€‚ store å¯¹è±¡æ˜¯é€šè¿‡ useChatStore æ–¹æ³•è·å–çš„ï¼ŒuseChatStore æ–¹æ³•å°±æ˜¯å‰é¢ä»‹ç»çš„ useChatStore.ts å¯¼å‡ºçš„æ–¹æ³•ã€‚å¾—åˆ° store å¯¹è±¡ä¹‹åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ store.data è·å– Store å¯¹è±¡é‡Œçš„æ•°æ®ã€‚ åœ¨å½“å‰ç»„ä»¶ ChatBoard æ¸²æŸ“å®Œæˆåï¼Œè°ƒç”¨äº† store å¯¹è±¡çš„ selectItem æ–¹æ³•ï¼Œé€‰ä¸­äº†ç¬¬ 7 ä¸ªä¼šè¯ã€‚ å…·ä½“æ¯ä¸€ä¸ªèŠå¤©ä¼šè¯å¯¹è±¡æ˜¯é€šè¿‡è‡ªå®šä¹‰ç»„ä»¶çš„ data å±æ€§ä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨çš„ã€‚ ChatItem è‡ªå®šä¹‰ç»„ä»¶çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/window/WindowMain/chat/components/ChatItem.vue \u003ctemplate\u003e \u003cdiv @click=\"itemClick(data)\" :class=\"['ChatItem', { 'ChatItemSelected': data.isSelected}]\"\u003e \u003cdiv class=\"avatar\"\u003e \u003cimg :src=\"data.avatar\" alt=\"\" /\u003e \u003c/div\u003e \u003cdiv class=\"ChatInfo\"\u003e \u003cdiv class=\"row\"\u003e \u003cdiv class=\"FromName\"\u003e{{ data.fromName }}\u003c/div\u003e \u003cdiv class=\"TimeName\"\u003e{{ data.sendTime }}\u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"row\"\u003e \u003cdiv class=\"LastMsg\"\u003e{{ data.lastMsg }}\u003c/div\u003e \u003cdiv class=\"subscribe\" /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript lang=\"ts\" setup\u003e import { ModelChat } from '../../../../../model/ModelChat'; import { useChatStore } from '../../../../store/useChatStore'; defineProps\u003c{data: ModelChat}\u003e(); const store = useChatStore(); const itemClick = (item: ModelChat) =\u003e { store.selectItem(item); }; \u003c/script\u003e \u003cstyle scoped lang=\"scss\"\u003e .ChatItem { display: flex; height: 66px; box-sizing: border-box; cursor: pointer; \u0026:hover { background: rgb(221, 219, 218); } } .ChatItemSelected { background: rgb(196, 196, 196); \u0026:hover { background: rgb(196, 196, 196); } } .avatar { width: 66px; display: flex; align-items: center; justify-content: center; img { width: 46px; height: 46px; } } .ChatInfo { flex: 1; height: 66px; display: flex; flex-direction: column; justify-content: center; } .row { box-sizing: border-box; height: 28px; line-height: 28px; display: flex; } .FromName { flex: 1; } .TimeName { color: rgb(153, 153, 153); padding-right: 12px; font-size: 12px; } .LastMsg { color: rgb(153, 153, 153); flex: 1; font-size: 12px; } \u003c/style\u003e ä½¿ç”¨ defineProps æ–¹æ³•æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®ã€‚ èŠå¤©ä¼šè¯å¯¹è±¡é‡Œçš„æ•°æ®åœ¨è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶ä¸­è¢«å±•å¼€ï¼Œæ¸²æŸ“ç»™ç”¨æˆ·ã€‚ å½“ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„æ—¶å€™ï¼Œç¨‹åºæ‰§è¡Œäº† Store å¯¹è±¡çš„ selectItem æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è´Ÿè´£é€‰ä¸­ç”¨æˆ·ç‚¹å‡»çš„ç»„ä»¶ï¼Œæ”¹å˜äº†ç”¨æˆ·ç‚¹å‡»ç»„ä»¶çš„æ ·å¼ï¼ŒåŒæ—¶è¿˜å–æ¶ˆäº†åŸæ¥é€‰ä¸­çš„ç»„ä»¶ã€‚ ","date":"2023-02-07","objectID":"/electron/:8:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è®¢é˜… Store æ— è®ºæ˜¯ç”¨æˆ·ç‚¹å‡» ChatItem ç»„ä»¶é€‰ä¸­ä¸€ä¸ªèŠå¤©ä¼šè¯ï¼Œè¿˜æ˜¯ ChatBoard æ¸²æŸ“å®Œæˆåé€‰ä¸­ä¸€ä¸ªèŠå¤©ä¼šè¯ï¼Œéƒ½åº”è¯¥é€šçŸ¥å…¶ä»–ç»„ä»¶ï¼Œé€‰ä¸­çš„èŠå¤©ä¼šè¯å˜æ›´äº†ã€‚ åœ¨ MessageBoard ç»„ä»¶ä¸­æ¼”ç¤ºè¿™ä¸ªåŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/window/WindowMain/chat/components/MessageBoard.vue \u003ctemplate\u003e \u003cdiv class=\"MessageBord\"\u003e \u003cBarTop /\u003e \u003cdiv class=\"MessageList\"\u003e{{ logInfo }}\u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript lang=\"ts\" setup\u003e import { ref } from 'vue'; import BarTop from '../../../../components/BarTop.vue'; import { useChatStore } from '../../../../store/useChatStore'; let store = useChatStore(); let logInfo = ref(\"\"); let curId = \"\"; //è®¢é˜…Storeå†…æ•°æ®çš„å˜åŒ– store.$subscribe((mutations, state) =\u003e { let item = state.data.find((v) =\u003e v.isSelected); let id = item?.id as string; if (id != curId) { logInfo.value = `ç°åœ¨åº”è¯¥åŠ è½½IDä¸º${item?.id}çš„èŠå¤©è®°å½•`; curId = id; } }); \u003c/script\u003e \u003cstyle scoped lang=\"scss\"\u003e .MessageBord { height: 100%; display: flex; flex: 1; flex-direction: column; } .MessageList { flex: 1; overflow-y: auto; overflow-x: hidden; background: rgb(245, 245, 245); } \u003c/style\u003e ä½¿ç”¨ store å¯¹è±¡çš„ $subscribe æ–¹æ³•è®¢é˜…äº†æ•°æ®å˜æ›´äº‹ä»¶ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™ store å†…çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œéƒ½ä¼šæ‰§è¡Œ $subscribe æ–¹æ³•æä¾›çš„å›è°ƒå‡½æ•°ã€‚ åœ¨è®¢é˜…å›è°ƒä¸­ï¼ŒéªŒè¯é€‰ä¸­çš„ä¼šè¯æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼ˆæœ‰å¯èƒ½æ˜¯å½“å‰ store å…¶ä»–æ•°æ®å¯¹è±¡çš„å˜åŒ–è§¦å‘äº†è®¢é˜…å›è°ƒï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°±ç»™å‡ºæç¤ºã€‚ è®¢é˜…å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° ï¼Œç¬¬ä¸€ä¸ªæ˜¯ mutations å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„ events å±æ€§æºå¸¦ç€å˜æ›´å‰çš„å€¼å’Œå˜æ›´åçš„å€¼ï¼Œä½†è¿™ä¸ªå±æ€§åªæœ‰åœ¨å¼€å‘ç¯å¢ƒä¸‹å­˜åœ¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ä¸å­˜åœ¨ã€‚è®¢é˜…çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ stateï¼Œè¿™ä¸ªå‚æ•°åŒ…å« store ä¸­çš„æ•°æ®ã€‚ ä»¥è¿™ç§æ–¹å¼æ›´æ–° store é‡Œçš„æ•°æ®ï¼Œä¸åˆ©äºå¤ç”¨æ•°æ®æ›´æ–°çš„é€»è¾‘ï¼Œæ”¹ç”¨å¯ä»¥å¤ç”¨æ•°æ®æ›´æ–°é€»è¾‘çš„æ–¹æ¡ˆã€‚ ","date":"2023-02-07","objectID":"/electron/:8:5","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"äº’è®¿ Store æ–°å»ºä¸€ä¸ªæ¨¡å‹ç±»ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/model/ModelMessage.ts import { ModalBase } from './ModalBase'; export class ModelMessage extends ModalBase { createTime?: number; receiveTime?: number; messageContent?: string; chatId?: string; fromName?: string; avatar?: string; // æ˜¯å¦ä¸ºä¼ å…¥æ¶ˆæ¯ isInMsg?: boolean; } åˆ›å»º useMessageStoreï¼Œç”¨äºç®¡ç†æ¶ˆæ¯çš„çŠ¶æ€æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š src/renderer/store/useMessageStore.ts import { ModelChat } from '../../model/ModelChat'; import { ModelMessage } from '../../model/ModelMessage'; import { defineStore } from 'pinia'; import { ref, Ref } from 'vue'; export const useMessageStore = defineStore('message', () =\u003e { let data: Ref\u003cModelMessage[]\u003e = ref([]); const msg1 = `é†‰é‡ŒæŒ‘ç¯çœ‹å‰‘ï¼Œæ¢¦å›å¹è§’è¿è¥ã€‚å…«ç™¾é‡Œåˆ†éº¾ä¸‹ç¸ï¼Œäº”åå¼¦ç¿»å¡å¤–å£°ã€‚æ²™åœºç§‹ç‚¹å…µã€‚é©¬ä½œçš„å¢é£å¿«ï¼Œå¼“å¦‚éœ¹é›³å¼¦æƒŠã€‚äº†å´å›ç‹å¤©ä¸‹äº‹ï¼Œå¬´å¾—ç”Ÿå‰èº«ååã€‚å¯æ€œç™½å‘ç”Ÿ`; const msg2 = `æ€’å‘å†²å† ï¼Œå‡­æ å¤„ï¼Œæ½‡æ½‡é›¨æ­‡ã€‚æŠ¬æœ›çœ¼ï¼Œä»°å¤©é•¿å•¸ï¼Œå£®æ€€æ¿€çƒˆã€‚ ä¸‰ååŠŸåå°˜ä¸åœŸï¼Œå…«åƒé‡Œè·¯äº‘å’Œæœˆã€‚è«ç­‰é—²ï¼Œç™½äº†å°‘å¹´å¤´ï¼Œç©ºæ‚²åˆ‡ï¼ é–åº·è€»ï¼ŒçŠ¹æœªé›ªï¼›è‡£å­æ¨ï¼Œä½•æ—¶ç­?é©¾é•¿è½¦ï¼Œè¸ç ´è´ºå…°å±±ç¼ºï¼ å£®å¿—é¥¥é¤èƒ¡è™è‚‰ï¼Œç¬‘è°ˆæ¸´é¥®åŒˆå¥´è¡€ã€‚å¾…ä»å¤´ï¼Œæ”¶æ‹¾æ—§å±±æ²³ï¼Œæœå¤©é˜™ï¼`; const initData = (chat: ModelChat) =\u003e { let result = []; for (let i = 0; i \u003c 10; i++) { let model = new ModelMessage(); model.createTime = Date.now(); model.isInMsg = i % 2 === 0; model.messageContent = model.isInMsg ? msg1 : msg2; model.fromName = model.isInMsg ? chat.fromName : \"æˆ‘\"; model.avatar = chat.avatar; model.chatId = chat.id; result.push(model); } data.value = result; }; return { data, initData }; }); æ¶ˆæ¯æ•°æ®æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œè¿™é‡Œæ¨¡æ‹Ÿäº† 10 æ¡æ¶ˆæ¯ï¼Œé¢„æœŸç”¨æˆ·åˆ‡æ¢ä¼šè¯çš„æ—¶å€™ï¼Œæ‰§è¡Œ initData æ–¹æ³•ï¼Œåˆå§‹åŒ–å½“å‰ä¼šè¯çš„æ¶ˆæ¯ã€‚ ä¿®æ”¹ä¸€ä¸‹ MessageBoard ç»„ä»¶çš„çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/window/WindowMain/chat/components/MessageBoard.vue \u003ctemplate\u003e \u003cdiv class=\"MessageBord\"\u003e \u003cBarTop /\u003e \u003cdiv class=\"MessageList\"\u003e \u003cMessageItem :data=\"item\" v-for=\"item in messageStore.data\" :key=\"item.id\"\u003e\u003c/MessageItem\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript lang=\"ts\" setup\u003e import BarTop from '../../../../components/BarTop.vue'; import { ModelChat } from '../../../../../model/ModelChat'; import { useMessageStore } from '../../../../store/useMessageStore'; import { useChatStore } from '../../../../store/useChatStore'; import MessageItem from './MessageItem.vue'; const chatStore = useChatStore(); const messageStore = useMessageStore(); let curId = ''; chatStore.$subscribe((mutations, state) =\u003e { const item = state.data.find(v =\u003e v.isSelected) as ModelChat; if (item?.id !== curId) { messageStore.initData(item); curId = item?.id; } }) \u003c/script\u003e \u003cstyle scoped lang=\"scss\"\u003e .MessageBord { height: 100%; display: flex; flex: 1; flex-direction: column; } .MessageList { flex: 1; overflow-y: auto; overflow-x: hidden; background: rgb(245, 245, 245); } \u003c/style\u003e å½“é€‰ä¸­çš„èŠå¤©ä¼šè¯åˆ‡æ¢æ—¶ï¼Œæ‰§è¡Œ messageStore å¯¹è±¡çš„ initData æ–¹æ³•ï¼Œè¿™æ ·å°±åˆå§‹åŒ–äº† messageStore å†…éƒ¨çš„çŠ¶æ€æ•°æ®ã€‚ MessageItem æ˜¯æ–°åˆ›å»ºçš„ä¸€ä¸ª Vue ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ç”¨äºæ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯çš„å…·ä½“ä¿¡æ¯ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/window/WindowMain/chat/components/MessageItem.vue \u003ctemplate\u003e \u003ctemplate v-if=\"data.isInMsg\"\u003e \u003cdiv class=\"MessageItem left\"\u003e \u003cdiv class=\"avatar\"\u003e \u003cimg :src=\"data.avatar\" alt=\"\" /\u003e \u003c/div\u003e \u003cdiv class=\"MessageBox\"\u003e \u003cdiv class=\"FromName\"\u003e{{ data.fromName }}\u003c/div\u003e \u003cdiv class=\"MsgContent\"\u003e{{ data.messageContent }}\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003ctemplate v-else\u003e \u003cdiv class=\"MessageItem right\"\u003e \u003cdiv class=\"MessageBox\"\u003e \u003cdiv class=\"MessageContent\"\u003e{{ data.messageContent }}\u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"avatar\"\u003e \u003cimg :src=\"data.avatar\" alt=\"\" /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import { ModelMessage } from '../../../../../model/ModelMessage'; defineProps\u003c{ data: ModelMessage }\u003e(); \u003c/script\u003e \u003cstyle lang=\"scss\" scoped\u003e .MessageItem { display: flex; padding-top: 8px; padding-bottom: 8px; position: relative; } .left { padding-right: 30%; \u0026::after { width: 0; height: 0; border-top: 6px solid transparent; border-bottom: 6px solid transparent; border-right: 6px solid #fff; position: absolute; left: 60px; top: 38px; content: \"\"; } } .right { padding-left: 30%; \u0026::after { width: 0; height: 0; border-top: 6px solid transparent; border-bottom: 6px solid transparent; border-left: 6px solid rgb(149, 236, 105); position: absolute; right: 60px; top: 18px; content: \"\"; } .MessageContent { background: rgb(149, 236, 105) !important; } } .avatar { width: 66px; text-align: center; img { width: 46","date":"2023-02-07","objectID":"/electron/:8:6","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å®¢æˆ·ç«¯æ•°æ®åº“ å¦‚ä½•æŠŠåº”ç”¨å†…çš„ä¸šåŠ¡æ•°æ®æŒä¹…åŒ–åˆ°ç”¨æˆ·æœ¬åœ°ç£ç›˜ä¸Šã€‚ å¯¹äºç®€å•çš„æ•°æ®ç±»å‹æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥æŠŠå®ƒä»¬å­˜å‚¨åœ¨ localStorage ä¸­ï¼Œè¿™äº›æ•°æ®æ˜¯æŒä¹…åŒ–åœ¨ç”¨æˆ·ç£ç›˜ä¸Šçš„ï¼Œä¸ä¼šå› ä¸ºç”¨æˆ·é‡å¯åº”ç”¨æˆ–è€…é‡è£…åº”ç”¨è€Œä¸¢å¤±ã€‚ å¯¹äºç¨å¾®å¤æ‚çš„æ•°æ®ç±»å‹æ¥è¯´ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œå…¶ä¸€æ˜¯æŠŠè¿™ç±»æ•°æ®å­˜å‚¨åœ¨ IndexedDB ä¸­ï¼Œä¸ localStorage ç±»ä¼¼ï¼Œè¿™ä¹Ÿæ˜¯è°·æ­Œæµè§ˆå™¨æ ¸å¿ƒæä¾›çš„æ•°æ®æŒä¹…åŒ–å·¥å…·ï¼Œå®ƒä»¥ JSON å¯¹è±¡çš„æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œæ•°æ®è¾ƒå¤šæ—¶ï¼Œå¤æ‚çš„æ¡ä»¶æŸ¥è¯¢æ•ˆç‡ä¸ä½³ã€‚ ç¬¬äºŒä¸ªé€‰æ‹©å°±æ˜¯æŠŠæ•°æ®å­˜å‚¨åœ¨ SQLite ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œå¤©ç”Ÿå¯¹å¤æ‚æ¡ä»¶æŸ¥è¯¢æ”¯æŒè‰¯å¥½ã€‚ ","date":"2023-02-07","objectID":"/electron/:9:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å®‰è£… SQLite npm install better-sqlite3 -D è¿™ä¸ªæ¨¡å—å®‰è£…å®Œæˆåï¼Œå¤§æ¦‚ç‡æ˜¯æ— æ³•ä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„ï¼Œå¯èƒ½ä¼šç¢°åˆ°å¦‚ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š Error: The module '...node_modules\\better-sqlite3\\build\\Release\\better_sqlite3.node' was compiled against a different Node.js version using NODE_MODULE_VERSION $XYZ. This version of Node.js requires NODE_MODULE_VERSION $ABC. Please try re-compiling or re-installing the module (for instance, using `npm rebuild` or `npm install`). è¿™æ˜¯å› ä¸º Electron å†…ç½®çš„ Node.js çš„ç‰ˆæœ¬å¯èƒ½ä¸ä½ ç¼–è¯‘åŸç”Ÿæ¨¡å—ä½¿ç”¨çš„ Node.js çš„ç‰ˆæœ¬ä¸åŒå¯¼è‡´çš„ã€‚ å»ºè®®å¼€å‘è€…ä½¿ç”¨ Electron å›¢é˜Ÿæä¾›çš„ electron-rebuild å·¥å…·æ¥å®Œæˆæ­¤å·¥ä½œï¼Œå› ä¸º electron-rebuild ä¼šç¡®å®š Electron çš„ç‰ˆæœ¬å·ã€Electron å†…ç½®çš„ Node.js çš„ç‰ˆæœ¬å·ã€ä»¥åŠ Node.js ä½¿ç”¨çš„ ABI çš„ç‰ˆæœ¬å·ï¼Œå¹¶æ ¹æ®è¿™äº›ç‰ˆæœ¬å·ä¸‹è½½ä¸åŒçš„å¤´æ–‡ä»¶å’Œç±»åº“ã€‚ å®‰è£… electron-rebuildï¼š npm install electron-rebuild -D åœ¨ package.json ä¸­å¢åŠ å¦‚ä¸‹é…ç½®èŠ‚ï¼ˆscriptsé…ç½®èŠ‚ï¼‰ï¼š \"rebuild\": \"electron-rebuild -f -w better-sqlite3\" åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š npm run rebuild å½“ä½ çš„å·¥ç¨‹ä¸‹å‡ºç°äº†è¿™ä¸ªæ–‡ä»¶ node_modules/better-sqlite3/build/Release/better_sqlite3.nodeï¼Œæ‰è¯æ˜ better_sqlite3 æ¨¡å—ç¼–è¯‘æˆåŠŸäº†ï¼Œå¦‚æœä¸Šè¿°æŒ‡ä»¤æ²¡æœ‰å¸®ä½ å®Œæˆè¿™é¡¹å·¥ä½œï¼Œä½ å¯ä»¥æŠŠæŒ‡ä»¤é…ç½®åˆ° node_modules/better-sqlite3 æ¨¡å—å†…éƒ¨å†æ‰§è¡Œä¸€æ¬¡ï¼Œä¸€èˆ¬å°±å¯ä»¥ç¼–è¯‘æˆåŠŸäº†ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚ è¿™æ ·å°±ä¸º Electron é‡æ–°ç¼–è¯‘äº†ä¸€é better-sqlite3ï¼Œç°åœ¨å°±å¯ä»¥åœ¨ Electron åº”ç”¨å†…ä½¿ç”¨ better-sqlite3 æä¾›çš„ API äº†ã€‚ åœ¨åº”ç”¨ä¸­è¯•è¯•å¦‚ä¸‹ä»£ç ï¼ˆæ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹å‡å¯ï¼Œç”šè‡³åœ¨æ¸²æŸ“è¿›ç¨‹çš„å¼€å‘è€…è°ƒè¯•å·¥å…·ä¸­ä¹Ÿæ²¡é—®é¢˜ï¼‰ï¼Œçœ‹æ˜¯ä¸æ˜¯å¯ä»¥æ­£ç¡®åˆ›å»º SQLite çš„æ•°æ®åº“ã€‚ const Database = require(\"better-sqlite3\"); const db = new Database(\"db.db\", { verbose: console.log, nativeBinding: \"./node_modules/better-sqlite3/build/Release/better_sqlite3.node\" }); ä¸å‡ºæ„å¤–çš„è¯ï¼Œå·¥ç¨‹æ ¹ç›®å½•ä¸‹å°†ä¼šåˆ›å»ºä¸€ä¸ªåä¸º db.db çš„ SQLite æ•°æ®åº“æ–‡ä»¶ï¼Œè¯´æ˜ better-sqlite3 åº“å·²ç»ç”Ÿæ•ˆäº†ã€‚ ","date":"2023-02-07","objectID":"/electron/:9:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å‹ç¼©å®‰è£…åŒ…ä½“ç§¯ better-sqlite3 æ˜¯ä¸€ä¸ªåŸç”Ÿæ¨¡å—ï¼ŒåŸç”Ÿæ¨¡å—æ˜¯æ— æ³•è¢« vite ç¼–è¯‘åˆ° JavaScript çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æŠŠå®ƒå®‰è£…æˆå¼€å‘ä¾èµ–å‘¢ï¼Ÿ æŠŠ better-sqlite3 å®‰è£…æˆå¼€å‘ä¾èµ–ï¼Œåœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œelectron-builder åœ¨åˆ¶ä½œå®‰è£…åŒ…æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºå®‰è£…åŒ…é™„åŠ è¿™ä¸ªä¾èµ–ï¼ˆbetter-sqlite3 è¿™ä¸ªåº“è‡ªå·±çš„ä¾èµ–ä¹Ÿä¼šè¢«æ­£ç¡®é™„åŠ åˆ°å®‰è£…åŒ…å†…ï¼‰ã€‚ ä½†electron-builder ä¼šæŠŠå¾ˆå¤šæ— ç”¨çš„æ–‡ä»¶ï¼ˆå¾ˆå¤šç¼–è¯‘åŸç”Ÿæ¨¡å—æ—¶çš„ä¸­é—´äº§ç‰©ï¼‰ä¹Ÿé™„åŠ åˆ°å®‰è£…åŒ…å†…ã€‚æ— å½¢ä¸­å¢åŠ äº†å®‰è£…åŒ…çš„ä½“ç§¯ï¼ˆå¤§æ¦‚ 10Mï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨ plugins/buildPlugin.ts ä¸­å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼š async prepareSqlite() { // æ‹·è´ better-sqlite3 const srcDir = path.join(process.cwd(), 'node_modules/better-sqlite3'); const destDir = path.join(process.cwd(), 'dist', 'node_modules/better-sqlite3'); fs.ensureDirSync(destDir); fs.copySync(srcDir, destDir, { filter: (src, dest) =\u003e { if (src.endsWith('better-sqlite3') || src.endsWith('build') || src.endsWith('Release') || src.endsWith('better_sqlite3.node')) { return true; } else return src.includes('node_modules\\\\better-sqlite3\\\\lib'); } }); let pkgJson = '{\"name\": \"better-sqlite3\",\"main\": \"lib/index.js\"}'; let pkgJsonPath = path.join(process.cwd(), 'dist', 'node_modules/better-sqlite3/package.json'); fs.writeFileSync(pkgJsonPath, pkgJson); // åˆ¶ä½œbindingsæ¨¡å— const bindingPath = path.join(process.cwd(), 'dist', 'node_modules/bindings/index.js'); fs.ensureDirSync(bindingPath); const bindingsContent = `module.exports = () =\u003e { let addonPath = require(\"path\").join(__dirname, '../better-sqlite3/build/Release/better_sqlite3.node'); return require(addonPath); };`; fs.writeFileSync(bindingPath, bindingsContent); pkgJson = '{\"name\": \"bindings\",\"main\": \"index.js\"}'; pkgJsonPath = path.join(process.cwd(), 'dist', 'node_modules/bindings/package.json'); fs.writeFileSync(pkgJsonPath, pkgJson); } è¿™æ®µä»£ç ä¸»è¦åšäº†ä¸¤ä¸ªå·¥ä½œï¼š æŠŠå¼€å‘ç¯å¢ƒçš„ node_modules/better-sqlite3 ç›®å½•ä¸‹æœ‰ç”¨çš„æ–‡ä»¶æ‹·è´åˆ° dist/node_modules/better-sqlite3 ç›®å½•ä¸‹ï¼Œå¹¶ä¸ºè¿™ä¸ªæ¨¡å—è‡ªåˆ¶äº†ä¸€ä¸ªç®€å•çš„ package.jsonã€‚ å®Œå…¨è‡ªå·±åˆ¶ä½œäº†ä¸€ä¸ª bindings æ¨¡å—ï¼ŒæŠŠè¿™ä¸ªæ¨¡å—æ”¾ç½®åœ¨ dist/node_modules/bindings ç›®å½•ä¸‹ã€‚ closeBundle é’©å­å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼šbuildObj.prepareSqlite()ã€‚ è¿™é‡Œ bindings æ¨¡å—æ˜¯ better-sqlite3 æ¨¡å—ä¾èµ–çš„ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒçš„ä½œç”¨ä»…ä»…æ˜¯ç¡®å®šåŸç”Ÿæ¨¡å—æ–‡ä»¶ better_sqlite3.node çš„è·¯å¾„ã€‚ æ¥ä¸‹æ¥å†ä¿®æ”¹ä¸€ä¸‹ BuildObjçš„preparePackageJson æ–¹æ³•ï¼Œåœ¨ç”Ÿæˆ package.json æ–‡ä»¶ä¹‹å‰ï¼Œä¸ºå…¶é™„åŠ ä¸¤ä¸ªç”Ÿäº§ä¾èµ–ï¼Œä»£ç å¦‚ä¸‹ï¼š localPkgJson.dependencies['better-sqlite3'] = '*'; localPkgJson.dependencies['bindings'] = '*'; æœ‰äº†è¿™ä¸¤ä¸ªé…ç½®ï¼Œelectron-builder å°±ä¸ä¼šè‡ªåŠ¨å®‰è£…è¿™äº›æ¨¡å—äº†ã€‚ å®Œæˆè¿™äº›å·¥ä½œåï¼Œåœ¨ closeBundle é’©å­å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š buildObj.prepareSqlite()ï¼Œå†æ‰“åŒ…çœ‹çœ‹ï¼Œå®‰è£…åŒ…çš„ä½“ç§¯æ˜¯å¦å˜å°äº†å‘¢ï¼Ÿ ","date":"2023-02-07","objectID":"/electron/:9:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å®‰è£… Knex.js æˆåŠŸå¼•å…¥ better-sqlite3 å¹¶ä¸”å‹ç¼©äº† better-sqlite3 æ¨¡å—åœ¨å®‰è£…åŒ…çš„ä½“ç§¯åï¼Œé¢ä¸´ç€å¦ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚ ä½¿ç”¨ better-sqlite3 è¯»å†™æ•°æ®åº“ä¸­çš„æ•°æ®æ—¶ï¼Œè¦ä¹¦å†™ SQL è¯­å¥ï¼Œè¿™ç§è¯­å¥æ˜¯ä¸“é—¨ä¸ºæ•°æ®åº“å‡†å¤‡çš„æŒ‡ä»¤ï¼Œä¸‹é¢æ˜¯ä¸º sqlite æ•°æ®åº“å»ºè¡¨å’Œåœ¨å¯¹åº”è¡¨ä¸­å®Œæˆå¢åˆ æ”¹æŸ¥çš„ SQL è¯­å¥ï¼š create table admin(username text,age integer); insert into admin values('allen',18); select * from admin; update admin set username='allen001',age=88 where username='allen' and age=18; delete from admin where username='allen001'; ä½¿ç”¨ Knex.js å¯ä»¥æ¥å®Œæˆå¯¹åº”çš„æ“ä½œï¼ŒKnex.js å…è®¸ä½¿ç”¨ JavaScript ä»£ç æ¥æ“ä½œæ•°æ®åº“é‡Œçš„æ•°æ®å’Œè¡¨ç»“æ„ï¼Œå®ƒä¼šæŠŠ JavaScript ä»£ç è½¬ä¹‰æˆå…·ä½“çš„ SQL è¯­å¥ï¼Œå†æŠŠ SQL è¯­å¥äº¤ç»™æ•°æ®åº“å¤„ç†ï¼Œå¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ç§ SQL Builderã€‚ npm install knex -D æ‰“åŒ…ä¹‹å‰ç¼–è¯‘è¿™ä¸ªåº“ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š plugins/buildPlugin.ts prepareKnex() { let pkgJsonPath = path.join(process.cwd(), 'dist', 'node_modules/knex'); fs.ensureDirSync(pkgJsonPath); require('esbuild').buildSync({ entryPoints: ['./node_modules/knex/knex.js'], bundle: true, platform: 'node', format: 'cjs', minify: true, outfile: './dist/node_modules/knex/index.js', external: ['oracledb', 'pg-query-stream', 'pg', 'sqlite3', 'tedious', 'mysql', 'mysql2', 'better-sqlite3'], }); let pkgJson = `{\"name\": \"bindings\",\"main\": \"index.js\"}`; pkgJsonPath = path.join(process.cwd(), 'dist', 'node_modules/knex/package.json'); fs.writeFileSync(pkgJsonPath, pkgJson); } ç›¸å¯¹äºå‹ç¼© better-sqlite3 çš„ä½“ç§¯æ¥è¯´ï¼Œå‹ç¼© Knex.js åŒ…çš„ä½“ç§¯å°±ç®€å•å¤šäº†ï¼Œä»…ä»…æ˜¯é€šè¿‡ esbuild å·¥å…·ç¼–è¯‘äº†ä¸€ä¸‹è¿™ä¸ªåŒ…çš„ä»£ç å°±å®Œæˆäº†å·¥ä½œã€‚ è¿™æ®µä»£ç æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚ é…ç½®é¡¹ external æ˜¯ä¸ºäº†é¿å…ç¼–è¯‘è¿‡ç¨‹ä¸­ esbuild å»å¯»æ‰¾è¿™äº›æ¨¡å—è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ï¼Œä¹Ÿå°±æ˜¯è¯´ Knex.js ä¸­è¿™æ ·çš„ä»£ç ä¼šä¿æŒåŸæ ·è¾“å‡ºåˆ°ç¼–è¯‘äº§ç‰©ä¸­ï¼š require(â€˜better-sqlite3â€™)ã€‚ package.json å¢åŠ ä¸€ä¸ªç”Ÿäº§ä¾èµ–ï¼šlocalPkgJson.dependencies[â€˜knexâ€™] = â€˜*â€™;ï¼Œä»¥é¿å… electron-builder å®‰è£… Knex.js æ¨¡å—ã€‚ closeBundle é’©å­å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼šbuildObj.prepareKnex()ã€‚ ","date":"2023-02-07","objectID":"/electron/:9:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è®¿é—®æ•°æ®åº“ æ–°å»ºæ•°æ®åº“ dbï¼Œæ•°æ®åº“ä¸­æœ‰ä¸¤å¼ è¡¨ Message å’Œ Chatï¼Œæˆªå›¾æ˜¯ Chat è¡¨çš„åˆ—ï¼š æ•°æ®åº“è®¾è®¡å¥½ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è®¿é—®ç±»ï¼Œç”±äºä¸»è¿›ç¨‹çš„é€»è¾‘å’Œæ¸²æŸ“è¿›ç¨‹çš„é€»è¾‘éƒ½æœ‰å¯èƒ½ä¼šè®¿é—®æ•°æ®åº“ï¼Œæ‰€ä»¥æŠŠæ•°æ®åº“è®¿é—®ç±»æ”¾ç½®åœ¨ src/common ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ä¸¤ä¸ªè¿›ç¨‹çš„é€»è¾‘ä»£ç ä½¿ç”¨è¿™ä¸ªç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š src/common/db.ts import knex, { Knex} from 'knex'; import fs from 'fs'; import path from 'path'; let dbInstance: Knex; // @ts-ignore if (!dbInstance) { let dbPath = process.env.APPDATA || `${process.env.HOME}${process.platform === 'darwin' ? '/Library/Preferences' : '/.local/share'}`; dbPath = path.join(dbPath, 'Electron'); const dbIsExist = fs.existsSync(dbPath); if (!dbIsExist) { console.log(process.execPath) const resourceDbPath = path.join(process.execPath, '../resources/db.db'); fs.copyFileSync(resourceDbPath, dbPath); } dbInstance = knex({ client: 'better-sqlite3', connection: { filename: dbPath }, useNullAsDefault: true, }) } export let db = dbInstance; å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“è®¿é—®å¯¹è±¡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡å¼•å…¥è¿™ä¸ªæ•°æ®åº“è®¿é—®å¯¹è±¡çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œæ­¤å¯¹è±¡çš„åˆå§‹åŒ–é€»è¾‘ï¼Œæ— è®ºåœ¨å¤šå°‘ä¸ªç»„ä»¶ä¸­å¼•å…¥è¿™ä¸ªæ•°æ®åº“è®¿é—®å¯¹è±¡ï¼Œå®ƒåªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä½†è¿™ä¸ªçº¦æŸåªå±€é™åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºæ•´ä¸ªåº”ç”¨è€Œè¨€ï¼Œä¸»è¿›ç¨‹æœ‰ä¸€ä¸ª db å®ä¾‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä¹Ÿæœ‰ä¸€ä¸ª db å®ä¾‹ï¼Œä¸¤ä¸ªå®ä¾‹æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ ç”±äºæ¸²æŸ“è¿›ç¨‹å†…çš„æ•°æ®åº“è®¿é—®å¯¹è±¡å’Œä¸»è¿›ç¨‹å†…çš„æ•°æ®åº“è®¿é—®å¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¼šæœ‰å¹¶å‘å†™å…¥æ•°æ®çš„é—®é¢˜ï¼Œéœ€è¦æ§åˆ¶å¥½ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œé¿å…ä¸¤ä¸ªè¿›ç¨‹åœ¨åŒä¸€æ—¶é—´å†™å…¥ç›¸åŒçš„ä¸šåŠ¡æ•°æ®ã€‚ SQLite ä¸æ”¯æŒå¹¶å‘å†™å…¥æ•°æ®ï¼Œä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å†™å…¥æ“ä½œåŒæ—¶æ‰§è¡Œæ—¶ï¼Œåªæœ‰ä¸€ä¸ªå†™æ“ä½œå¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œå…¶ä»–å†™æ“ä½œä¼šå¤±è´¥ã€‚å¹¶å‘è¯»å–æ•°æ®æ²¡æœ‰é—®é¢˜ã€‚ ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ•°æ®åº“é“¾æ¥å¯¹è±¡æ—¶ï¼Œä¼šæ£€æŸ¥ MacintoshHD/ç”¨æˆ·/[yourOsUserName]/èµ„æºåº“/ApplicationSupport/[yourAppName]/db.db æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä»åº”ç”¨ç¨‹åºå®‰è£…ç›®å½• MacintoshHD/ç”¨æˆ·/[yourOsUserName]/èµ„æºåº“/ApplicationSupport/[yourAppName]/resources/db.db æ‹·è´ä¸€ä»½åˆ°è¯¥è·¯å¾„ä¸‹ï¼Œæ‰€ä»¥è¦æå‰æŠŠæ•°æ®åº“è®¾è®¡å¥½ï¼ŒåŸºç¡€æ•°æ®ä¹Ÿè¦åˆå§‹åŒ–å¥½ï¼Œåˆ¶ä½œå®‰è£…åŒ…çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®åº“æ–‡ä»¶æ‰“åŒ…åˆ°å®‰è£…åŒ…é‡Œã€‚ é€šè¿‡ä¸º plugins/buildPlugin.ts å¢åŠ é…ç½®æ¥æŠŠæ•°æ®åº“æ–‡ä»¶æ‰“åŒ…åˆ°å®‰è£…åŒ…å†…çš„ï¼Œå…¶ä¸­å…³é”®çš„é…ç½®ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š // buildInstaller æ–¹æ³•å†… option.config çš„ä¸€ä¸ªå±æ€§ extraResources: [{ from: `./src/common/db.db`, to: `./` }] extraResources å¯ä»¥è®©å¼€å‘è€…ä¸ºå®‰è£…åŒ…æŒ‡å®šé¢å¤–çš„èµ„æºæ–‡ä»¶ï¼Œelectron-builder æ‰“åŒ…åº”ç”¨æ—¶ä¼šæŠŠè¿™äº›èµ„æºæ–‡ä»¶é™„åŠ åˆ°å®‰è£…åŒ…å†…ï¼Œå½“ç”¨æˆ·å®‰è£…åº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™äº›èµ„æºä¼šé‡Šæ”¾åœ¨å®‰è£…ç›®å½•çš„ resources/å­ç›®å½•ä¸‹ã€‚ ä¸ºä»€ä¹ˆè¦æŠŠæ•°æ®åº“æ–‡ä»¶æ‹·è´å†è®¿é—®ï¼Œä¸ç›´æ¥è®¿é—®å®‰è£…ç›®å½•ä¸‹çš„æ•°æ®åº“æ–‡ä»¶å‘¢ï¼Ÿ å› ä¸ºå½“ç”¨æˆ·å‡çº§åº”ç”¨ç¨‹åºæ—¶å®‰è£…ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºå¯èƒ½ä¼šåœ¨æ•°æ®åº“ä¸­æ”¾ç½®å¾ˆå¤šç”¨æˆ·æ•°æ®ï¼Œè¿™æ ·çš„è¯æ¯æ¬¡å‡çº§åº”ç”¨ç”¨æˆ·è¿™äº›æ•°æ®å°±éƒ½æ²¡äº†ã€‚ å‡å®šæ•°æ®åº“æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ²¡æœ‰å®ƒï¼Œæ•°æ®åº“åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥åˆå§‹åŒ–æ•°æ®åº“çš„é€»è¾‘éƒ½æ˜¯åŒæ­¥æ“ä½œï¼ˆfs.copyFileSyncï¼‰ï¼Œæ³¨æ„è¿™ç±»ä»¥ Sync ç»“å°¾çš„æ–¹æ³•éƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œå®ƒä»¬æ˜¯ä¼šé˜»å¡ JavaScript çš„æ‰§è¡Œçº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®ƒä»¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–ä»»ä½•æ“ä½œéƒ½ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚ åœ¨åº”ç”¨ç¨‹åºå¼€å‘è°ƒè¯•é˜¶æ®µï¼Œå¼€å‘è€…å¯ä»¥å…ˆæŠŠè®¾è®¡å¥½çš„æ•°æ®åº“æ–‡ä»¶æ”¾ç½®åœ¨ç›®æ ‡è·¯å¾„ MacintoshHD/ç”¨æˆ·/[yourOsUserName]/èµ„æºåº“/ApplicationSupport/[yourAppName] ä¸‹ã€‚ db.ts æ–‡ä»¶å¯¼å‡ºçš„æ˜¯ä¸€ä¸ª Knex ç±»å‹çš„å¯¹è±¡ï¼Œåˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡çš„ client å±æ€§ä»£è¡¨ç€ä½¿ç”¨ä»€ä¹ˆæ¨¡å—è®¿é—®æ•°æ®åº“ï¼Œè¿™é‡Œè¦æ±‚ Knex ä½¿ç”¨ better-sqlite3 è®¿é—®æ•°æ®åº“ï¼ŒKnex æ”¯æŒå¾ˆå¤šæ•°æ®åº“ï¼Œæ¯”å¦‚ MySqlã€Oracleã€SqlServer ç­‰ï¼Œéƒ½æœ‰å¯¹åº”çš„æ•°æ®åº“è®¿é—®æ¨¡å—ã€‚ ç”±äº SQLite æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯æ•°æ®åº“ï¼Œæ‰€ä»¥åªè¦æŠŠæ•°æ®åº“çš„æœ¬åœ°è·¯å¾„å‘ŠçŸ¥ Knex å³å¯ï¼Œè¿™ä¸ªå±æ€§æ˜¯é€šè¿‡é…ç½®å¯¹è±¡çš„ connection å±æ€§æä¾›çš„ã€‚é…ç½®å¯¹è±¡çš„ useNullAsDefault å±æ€§å‘ŠçŸ¥ Knex æŠŠå¼€å‘è€…æœªæ˜ç¡®æä¾›çš„æ•°æ®é…ç½®ä¸º Nullã€‚ æ¥ä¸‹æ¥å°è¯•ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“è®¿é—®å¯¹è±¡æŠŠ Chat è¡¨çš„æ•°æ®æ£€ç´¢å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š src/renderer/main.ts import { db } from \"../common/db\"; db(\"Chat\") .first() .then((obj) =\u003e { console.log(obj); }); é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡ dbï¼Œæ¥ç€ä½¿ç”¨è¿™ä¸ªå¯¹è±¡è¯»å– Chat è¡¨é‡Œçš„ç¬¬ä¸€è¡Œè®°å½•ï¼Œæ•°æ®è¯»å–æˆåŠŸåæŠŠè¿™è¡Œæ•°æ®æ‰“å°åˆ°æ§åˆ¶å°ã€‚ ","date":"2023-02-07","objectID":"/electron/:9:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ•°æ®åº“åŸºæœ¬æ“ä½œ å¢åŠ æ•°æ® å¢åŠ ä¸€æ¡æ•°æ®ï¼š src/renderer/window/WindowMain/Contact.vue const insertData = async () =\u003e { let model = new ModelChat(); model.fromName = \"èŠå¤©å¯¹è±¡\"; model.sendTime = Date.now(); model.lastMsg = \"è¿™æ˜¯æ­¤ä¼šè¯çš„æœ€åä¸€æ¡æ¶ˆæ¯\"; model.avatar = `https://pic3.zhimg.com/v2-306cd8f07a20cba46873209739c6395d_im.jpg?source=32738c0c`; await db(\"Chat\").insert(model); }; å¦‚æœè¦åœ¨åŒä¸€å¼ è¡¨ä¸­å¢åŠ å¤šè¡Œæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªæ•°ç»„æäº¤ç»™æ•°æ®åº“ï¼š const insertMultiData = async () =\u003e { let result = []; for (let i = 0; i \u003c 10; i++) { let model = new ModelChat(); model.fromName = \"èŠå¤©å¯¹è±¡\" + i; model.sendTime = Date.now(); model.lastMsg = \"è¿™æ˜¯æ­¤ä¼šè¯çš„æœ€åä¸€æ¡æ¶ˆæ¯\" + i; model.avatar = `https://pic3.zhimg.com/v2-306cd8f07a20cba46873209739c6395d_im.jpg?source=32738c0c`; result.push(model); } result[5].isSelected = true; await db(\"Chat\").insert(result); }; æŸ¥è¯¢æ•°æ® const selectData = async () =\u003e { let data = await db(\"Chat\").where({ id: `256d6532-fcfe-4b81-a3f8-ee940f2de3e3` }).first(); console.log(data); }; ä¿®æ”¹æ•°æ® const updateData = async () =\u003e { let data = await db(\"Chat\").update({ fromName: \"ä¸‰å²›ç”±çºªå¤«\", lastMsg: \"å°±åœ¨åˆ€åˆƒçŒ›ç„¶åˆºå…¥è…¹éƒ¨çš„ç¬é—´ï¼Œä¸€è½®çº¢æ—¥åœ¨çœ¼ç‘èƒŒé¢ç²²ç„¶å‡äº†ä¸Šæ¥ã€‚\" }).where({ id: `256d6532-fcfe-4b81-a3f8-ee940f2de3e3` }); console.log(data); }; éœ€è¦ä½¿ç”¨ where æ–¹æ³•ç¡®å®šæ›´æ–°èŒƒå›´ï¼Œä¸ç„¶æ•´ä¸ªè¡¨çš„æ•°æ®éƒ½å°†è¢«ä¿®æ”¹ (æ•°æ®åº“æ“ä½œè¿”å›çš„å€¼ data ä¸ºå—å½±å“çš„è¡Œæ•°) ã€‚ åˆ é™¤æ•°æ® let deleteData = async () =\u003e { let data = await db(\"Chat\").where({ id: `256d6532-fcfe-4b81-a3f8-ee940f2de3e3` }).delete(); console.log(data); }; éœ€è¦ä½¿ç”¨ where æ–¹æ³•ç¡®å®šåˆ é™¤èŒƒå›´ï¼Œä¸ç„¶æ•´ä¸ªè¡¨çš„æ•°æ®éƒ½å°†è¢«åˆ é™¤ï¼ˆæ•°æ®åº“æ“ä½œè¿”å›çš„å€¼ data ä¸ºå—å½±å“çš„è¡Œæ•°ï¼‰ã€‚ äº‹åŠ¡ æ•°æ®åº“çš„äº‹åŠ¡æ˜¯ä¸€ä¸ªæ“ä½œåºåˆ—ï¼ŒåŒ…å«äº†ä¸€ç»„æ•°æ®åº“æ“ä½œæŒ‡ä»¤ã€‚ äº‹åŠ¡æŠŠè¿™ç»„æŒ‡ä»¤ä½œä¸ºä¸€ä¸ªæ•´ä½“å‘æ•°æ®åº“æäº¤æ“ä½œè¯·æ±‚ï¼Œè¿™ä¸€ç»„æ•°æ®åº“å‘½ä»¤è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œé€»è¾‘å•å…ƒã€‚ const transaction = async () =\u003e { try { await db.transaction(async (trx) =\u003e { let chat = new ModelChat(); chat.fromName = \"èŠå¤©å¯¹è±¡aaa\"; chat.sendTime = Date.now(); chat.lastMsg = \"è¿™æ˜¯æ­¤ä¼šè¯çš„æœ€åä¸€æ¡æ¶ˆæ¯\"; chat.avatar = `https://pic3.zhimg.com/v2-306cd8f07a20cba46873209739c6395d_im.jpg?source=32738c0c`; await trx(\"Chat\").insert(chat); // throw \"throw a error\"; let message = new ModelMessage(); message.fromName = \"èŠå¤©å¯¹è±¡\"; message.chatId = chat.id; message.createTime = Date.now(); message.isInMsg = true; message.messageContent = \"è¿™æ˜¯æˆ‘å‘ç»™ä½ çš„æ¶ˆæ¯\"; message.receiveTime = Date.now(); message.avatar = `https://pic3.zhimg.com/v2-306cd8f07a20cba46873209739c6395d_im.jpg?source=32738c0c`; await trx(\"Message\").insert(message); }); } catch (error) { console.error(error); } }; æŠŠä¸¤ä¸ªæ’å…¥æ“ä½œå°è£…åˆ°äº†ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œä¸¤ä¸ªæ’å…¥æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆä¸€ä¸ªä¹Ÿä¸æ‰§è¡Œï¼Œå¯ä»¥æŠŠ throw â€œthrow a errorâ€ è¯­å¥å–æ¶ˆæ³¨é‡Šï¼Œè§‚å¯Ÿä¸€ä¸‹æ•°æ®åº“çš„æ•°æ®æ›´æ–°æƒ…å†µã€‚ db.transaction æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­ trx å°±æ˜¯ Knex å°è£…çš„æ•°æ®åº“äº‹åŠ¡å¯¹è±¡ã€‚ åˆ†é¡µæŸ¥è¯¢ åˆ†é¡µä»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚ import { ref, Ref } from 'vue'; // å½“å‰æ˜¯ç¬¬å‡ é¡µ let currentPageIndex: Ref\u003cnumber\u003e = ref(0); // æ¯é¡µæ•°æ®è¡Œæ•° let rowCountPerPage: Ref\u003cnumber\u003e = ref(6); // æ€»é¡µæ•° let pageCount: Ref\u003cnumber\u003e = ref(-1); // è·å–æŸä¸€é¡µæ•°æ® const getOnePageData = async () =\u003e { let data = await db('Chat') .orderBy('sendTime', 'desc') .offset(currentPageIndex.value * rowCountPerPage.value) .limit(rowCountPerPage.value); console.log(data); } // è·å–ç¬¬ä¸€é¡µæ•°æ® const getFirstPage = async () =\u003e { if (pageCount.value === -1) { // @ts-ignore let { count } = await db('Chat').count('id as count').first(); count = count as number; pageCount.value = count / rowCountPerPage.value as number; } currentPageIndex.value = 0; await getOnePageData(); } // è·å–ä¸‹ä¸€é¡µæ•°æ® const getNextPage = async () =\u003e { currentPageIndex.value = currentPageIndex.value + 1 \u003e= pageCount.value ? Math.ceil(pageCount.value) - 1 : currentPageIndex.value + 1; await getOnePageData(); } // è·å–ä¸Šä¸€é¡µæ•°æ® const getPrevPage = async () =\u003e { currentPageIndex.value = currentPageIndex.value - 1 \u003c 0 ? 0 : currentPageIndex.value - 1; await getOnePageData(); } // è·å–æœ€åä¸€é¡µæ•°æ® const getLastPage = async () =\u003e { currentPageIndex.value = Math.ceil(pageCount.value) - 1; await getOnePageData(); } è·å–ç¬¬ä¸€é¡µæ•°æ®æ—¶ï¼Œåˆå§‹åŒ–æ€»é¡µæ•°å’Œå½“å‰é¡µç æ•°ï¼Œæ€»é¡µæ•°æ˜¯é€šè¿‡æ•°æ®åº“ä¸­çš„æ€»è¡Œæ•°é™¤ä»¥æ¯é¡µè¡Œæ•°å¾—åˆ°çš„ï¼Œè¿™ä¸ªå€¼æœ‰å¯èƒ½åŒ…å«å°æ•°éƒ¨åˆ†ã€‚å½“å‰é¡µç æ•°æ˜¯ä»é›¶å¼€å§‹çš„æ•´æ•°ã€‚ç¬¬ä¸€é¡µæ—¶ï¼Œå®ƒçš„å€¼ä¸º 0ã€‚ è·å–ä¸‹ä¸€é¡µæ•°æ®æ—¶ï¼Œåˆ¤æ–­å½“å‰é¡µç æ•°æ˜¯ä¸æ˜¯åˆ°è¾¾äº†æœ€åä¸€é¡µï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±æŠŠå½“å‰é¡µç æ•°åŠ  1ï¼Œè€ƒè™‘åˆ°æ€»é¡µæ•°å­˜åœ¨å°æ•°çš„å¯èƒ½ï¼Œæ‰€ä»¥æœ€åä¸€é¡µçš„å½“å‰é¡µç æ•°åº”ä¸ºï¼šMath.ceil(pageCount) - 1ã€‚Math.ceil() å‡½æ•°è¿”å›å¤§äºæˆ–ç­‰äºä¸€ä¸ªç»™å®šæ•°å­—çš„æœ€å°æ•´æ•°ã€‚ Math.ceil(6.11) çš„ç»“æœä¸º 7ï¼ŒMath.ceil(6) çš„ç»“æœä¸º 6ã€‚ è·å–ä¸Šä¸€é¡µæ•°æ®æ—¶ï¼Œåˆ¤æ–­å½“å‰é¡µç æ•°æ˜¯ä¸æ˜¯å°äº 0ï¼Œå¦‚æœæ˜¯ï¼Œå°±æŠŠå½“å‰é¡µç æ•°ç½®ä¸º 0ï¼Œå¦‚æœä¸æ˜¯å°±æŠŠå½“å‰é¡µç æ•°å‡ä¸€ã€‚ è·å–æœ€åä¸€é¡µæ•°æ®æ—¶ï¼ŒæŠŠå½“å‰é¡µç æ•°ç½®ä¸º Math.ceil(pageCount) - 1 å³å¯ã€‚ æ¯æ¬¡è·å–æ•°æ®éƒ½è°ƒç”¨ getOnePageData æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸­","date":"2023-02-07","objectID":"/electron/:9:5","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¼€å‘åŸç”Ÿæ¨¡å— Node.js å…è®¸å¼€å‘è€…ä½¿ç”¨ Cã€C++ ç­‰è¯­è¨€å¼€å‘åŸç”Ÿæ¨¡å—ã€‚å¹¶ä¸”éµå¾ªæ­¤æ–¹æ¡ˆå¼€å‘å‡ºçš„åŸç”Ÿæ¨¡å—å¯ä»¥åƒæ™®é€šçš„ Node.js æ¨¡å—ä¸€æ ·é€šè¿‡ require() å‡½æ•°åŠ è½½ï¼Œå¹¶ä½¿ç”¨ JavaScript è®¿é—®æ¨¡å—æä¾›çš„ APIã€‚ Node.js å…·å¤‡åŸç”Ÿæ¨¡å—çš„èƒ½åŠ›è¿˜æœ‰ä»¥ä¸‹åŸå› ï¼š æ€§èƒ½æå‡ï¼š JavaScript æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œç›¸å¯¹äºç³»ç»Ÿçº§è¯­è¨€æ¥è¯´æ€§èƒ½ä¸Šè¿˜æ˜¯ç•¥æœ‰ä¸è¶³ã€‚ èŠ‚çº¦æˆæœ¬ï¼šæœ‰å¾ˆå¤šç°æˆçš„ C/C++ é¡¹ç›®ï¼Œåœ¨ Node.js é¡¹ç›®ä¸­ç›´æ¥å¤ç”¨è¿™äº›é¡¹ç›®å¯ä»¥èŠ‚çº¦å¾ˆå¤šå¼€å‘æˆæœ¬ã€‚ èƒ½åŠ›æ‹“å±•ï¼šNode.js ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œéœ€è¦ C/C++ çš„èƒ½åŠ›æ¥è¾…åŠ©å®Œæˆã€‚ å¦‚ä½•åœ¨ Electron åº”ç”¨ä¸­ä½¿ç”¨åŸç”Ÿæ¨¡å—ï¼Ÿ ","date":"2023-02-07","objectID":"/electron/:10:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ­å»ºå¼€å‘ç¯å¢ƒ ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ Node-API å¼€å‘åŸç”Ÿæ¨¡å—ï¼ŒNode-API æ˜¯ä¸“é—¨ç”¨äºæ„å»ºåŸç”Ÿæ¨¡å—ï¼Œå®ƒç‹¬ç«‹äºåº•å±‚ JavaScript è¿è¡Œæ—¶ï¼Œå¹¶ä½œä¸º Node.js çš„ä¸€éƒ¨åˆ†è¿›è¡Œç»´æŠ¤ã€‚ å®ƒæ˜¯è·¨ Node.js ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆApplication Binary Interfaceï¼ŒABIï¼‰ï¼Œæ—¨åœ¨å°†åŸç”Ÿæ¨¡å—ä¸åº•å±‚å®ç°éš”ç¦»å¼€ï¼Œå¹¶å…è®¸ä¸ºæŸä¸ª Node.js ç‰ˆæœ¬ç¼–è¯‘çš„æ¨¡å—åœ¨æ›´é«˜ç‰ˆæœ¬çš„ Node.js ä¸Šè¿è¡Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘ã€‚ ä¸åŒç‰ˆæœ¬çš„ Node.js ä½¿ç”¨åŒæ ·çš„æ¥å£ä¸ºåŸç”Ÿæ¨¡å—æä¾›æœåŠ¡ï¼Œè¿™äº›æ¥å£æ˜¯ ABI åŒ–çš„ï¼Œåªè¦ ABI çš„ç‰ˆæœ¬å·ä¸€è‡´ï¼Œç¼–è¯‘å¥½çš„åŸç”Ÿæ¨¡å—å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚ åŸºäº Node-API å¼€å‘åŸç”Ÿæ¨¡å—ä»å­˜åœ¨ä¸¤ç§æ–¹å¼ã€‚ ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨ C è¯­è¨€å¼€å‘ï¼Œç”±äº Node-API å°±æ˜¯ç”¨ C è¯­è¨€å°è£…çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•æ›´ä¸ºç›´æ¥ï¼Œç”±äº C è¯­è¨€è¿‡äºç®€å•ç›´æ¥ï¼Œè¯­è¨€ç‰¹æ€§è¾ƒå°‘ï¼Œæ‰€ä»¥å¼€å‘èµ·æ¥éå¸¸éº»çƒ¦ã€‚ å¦ä¸€ç§æ–¹å¼æ˜¯åŸºäº node-addon-api ä½¿ç”¨ C++ è¯­è¨€å¼€å‘ï¼Œnode-addon-api é¡¹ç›®æ˜¯å¯¹ Node-API çš„ C++ å†åŒ…è£…ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç²¾ç®€å¾ˆå¤šä»£ç ã€‚ å…¨å±€å®‰è£… node-gyp å·¥å…·ï¼Œå®ƒæ˜¯ä¸“é—¨ä¸ºæ„å»ºå¼€å‘ã€ç¼–è¯‘åŸç”Ÿæ¨¡å—ç¯å¢ƒè€Œç”Ÿçš„è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ã€‚ npm install -g node-gyp æ–°å»ºä¸€ä¸ª Node.js é¡¹ç›®ï¼Œå®‰è£… node-addon-api: src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ nativeã€‚ åˆå§‹åŒ– Node.js é¡¹ç›®ï¼š npm init -y npm install node-addon-api åˆ›å»ºåŸç”Ÿæ¨¡å—é…ç½®æ–‡ä»¶ binding.gyp: { \"targets\": [ { \"cflags!\": [\"-fno-exceptions\"], \"cflags_cc!\": [\"-fno-exceptions\"], \"defines\": [\"NAPI_DISABLE_CPP_EXCEPTIONS\"], \"target_name\": \"addon\", \"include_dirs\": [\"\u003c!(node -p \\\"require('node-addon-api').include_dir\\\")\"], \"sources\": [\"export.cc\"], \"conditions\": [ [ 'OS==\"mac\"', { \"sources\": [\"clipboard.mm\"], \"link_settings\": { \"libraries\": [\"-framework Cocoa\", \"-framework CoreFoundation\"] }, \"xcode_settings\": { \"GCC_ENABLE_CPP_EXCEPTIONS\": \"YES\", \"CLANG_ENABLE_OBJC_ARC\": \"YES\", \"OTHER_CFLAGS\": [\"-ObjC++\", \"-std=c++17\"] } } ], [ 'OS==\"win\"', { \"sources\": [\"clipboard.cc\"], \"libraries\": [\"Shlwapi.lib\", \"Shcore.lib\"], \"msvs_settings\": { \"VCCLCompilerTool\": { \"AdditionalOptions\": [\"/std:c++17\"] } } } ] ] } ] } include_dirs é…ç½® node-addon-api é¡¹ç›®æä¾›çš„ C++ å¤´æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚ definesã€cflags_cc!ã€ cflags!èµ·åˆ°ç¦ç”¨ C++ å¼‚å¸¸çš„ä½œç”¨ï¼ˆæ³¨æ„ï¼Œå¦‚æœé€‰æ‹©ç¦ç”¨ C++ å¼‚å¸¸ï¼Œé‚£ä¹ˆ node-addon-api æ¡†æ¶å°†ä¸å†ä¸ºå¼€å‘è€…å¤„ç†å¼‚å¸¸ï¼Œéœ€è¦è‡ªå·±æ£€æŸ¥å¼‚å¸¸ï¼‰ã€‚ sources æŒ‡å‘è¿™ä¸ªåŸç”Ÿæ¨¡å—çš„å…¥å£æ–‡ä»¶ã€‚ target_name ä¸ºåŸç”Ÿæ¨¡å—çš„åç§°ã€‚ ","date":"2023-02-07","objectID":"/electron/:10:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è¯»å–å‰ªåˆ‡æ¿æ–‡ä»¶è·¯å¾„ Electron å…¬å¼€çš„å‰ªåˆ‡æ¿ API æ˜¯æ— æ³•è¯»å–å‰ªåˆ‡æ¿å†…å¤šä¸ªæ–‡ä»¶çš„è·¯å¾„çš„ï¼Œå¼€å‘ä¸€ä¸ªåŸç”Ÿæ¨¡å—æ¥è¡¥å…¨ Electron åœ¨è¿™æ–¹é¢çš„ä¸è¶³ã€‚ åˆ›å»ºåŸç”Ÿæ¨¡å—çš„å…¥å£æ–‡ä»¶ï¼š src/native/export.cc #include \u003cnapi.h\u003e #include \u003ctuple\u003e #include \"clipboard.h\" Napi::Array ReadFilePathsJs(const Napi::CallbackInfo \u0026info) { auto env = info.Env(); const auto file_paths = ReadFilePaths(); auto result = Napi::Array::New(env, file_paths.size()); for (size_t i = 0; i != file_paths.size(); ++i) { result.Set(i, file_paths[i]); } return result; } Napi::Object Init(Napi::Env env, Napi::Object exports) { exports.Set(\"readFilePaths\", Napi::Function::New(env, ReadFilePathsJs)); return exports; } NODE_API_MODULE(NODE_GYP_MODULE_NAME, Init); NODE_API_MODULE å®šä¹‰æ­¤åŸç”Ÿæ¨¡å—çš„å…¥å£å‡½æ•°ï¼Œä¸€æ—¦ Node.js åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œå°†æ‰§è¡Œ Init æ–¹æ³•ï¼ŒNODE_GYP_MODULE_NAME å®å±•å¼€åä¸ºç¼–è¯‘é…ç½®æ–‡ä»¶ binding.gyp ä¸­çš„ target_nameã€‚ Init æ–¹æ³•æ˜¯è¿™ä¸ªæ¨¡å—çš„å…¥å£å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ JavaScript è¿è¡Œæ—¶ç¯å¢ƒå¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯ module.exportsï¼‰ï¼Œç»™è¿™ä¸ªå¯¹è±¡è®¾ç½®å±æ€§ï¼Œä»¥å¯¼å‡ºæƒ³è¦æš´éœ²ç»™å¤–éƒ¨çš„å†…å®¹ï¼Œæ­¤å¤„å¯¼å‡ºäº† ReadFilePathsJs æ–¹æ³•ï¼Œå½“å¤–éƒ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œå°†æ‰§è¡Œ ReadFilePathsJs å‡½æ•°ã€‚å…¥å£å‡½æ•°é€€å‡ºæ—¶åº”æŠŠ exports å¯¹è±¡è¿”å›ç»™è°ƒç”¨æ–¹ã€‚ ReadFilePathsJs æ–¹æ³•æ‰§è¡Œæ—¶è°ƒç”¨æ–¹ä¼šä¼ å…¥ä¸€ä¸ª CallbackInfo ç±»å‹çš„å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”± Node.js ä¼ å…¥çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« JavaScript è°ƒç”¨æ­¤æ–¹æ³•æ—¶çš„è¾“å…¥å‚æ•°ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„ Env æ–¹æ³•è·å– JavaScript è¿è¡Œæ—¶ç¯å¢ƒå¯¹è±¡ã€‚ ReadFilePathsJs æ–¹æ³•å†…ï¼Œè°ƒç”¨äº† ReadFilePaths æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ clipboard.h ä¸­å®šä¹‰ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å®¹å™¨ï¼ˆstd::vectorstd::stringç±»å‹ï¼‰ï¼Œè¿™ä¸ªå®¹å™¨ä¸­çš„å†…å®¹å°±æ˜¯å‰ªåˆ‡æ¿å†…çš„æ–‡ä»¶è·¯å¾„ã€‚ æŠŠè¿™ä¸ªå®¹å™¨ä¸­çš„å†…å®¹é€ä¸€å¤åˆ¶åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼ˆNapi::Array ç±»å‹ï¼Œè¿™ä¸ªç±»å‹å¯ä»¥ç›´æ¥è¢« JavaScript è®¿é—®ï¼‰ï¼Œæœ€åæŠŠè¿™ä¸ªæ•°ç»„è¿”å›ç»™è°ƒç”¨è€…ã€‚ å®šä¹‰ clipboard.h å¤´æ–‡ä»¶å†…å®¹: src/native/clipboard.h #ifndef CLIPBOARD_H #define CLIPBOARD_H #include \u003cvector\u003e #include \u003cstring\u003e std::vector\u003cstd::string\u003e ReadFilePaths(); #endif å®šä¹‰æ–¹æ³•ï¼šReadFilePathsï¼Œåœ¨ä¸åŒå¹³å°ä¸‹è¯»å–å‰ªåˆ‡æ¿çš„å®ç°é€»è¾‘ä¸åŒï¼Œæ‰€ä»¥è¦ä¸ºè¿™ä¸ªå¤´æ–‡ä»¶å®Œæˆä¸¤ä¸ªå®ç°é€»è¾‘ã€‚clipboard.cc æ˜¯ Windows å¹³å°ä¸Šçš„å®ç°ã€‚clipboard.mm æ˜¯ Mac å¹³å°ä¸Šçš„å®ç°é€»è¾‘ã€‚ Windows å¹³å°ä¸Šçš„å®ç°é€»è¾‘ï¼š src/native/clipboard.cc #include \u003cWindows.h\u003e #include \u003cShlObj.h\u003e #include \u003cmemory\u003e #include \"clipboard.h\" // å®½å­—ç¬¦ä¸²è½¬UTF8å­—ç¬¦ä¸² std::string Utf16CStringToUtf8String(LPCWSTR input, UINT len) { int target_len = WideCharToMultiByte(CP_UTF8, 0, input, len, NULL, 0, NULL, NULL); std::string result(target_len, '\\0'); WideCharToMultiByte(CP_UTF8, 0, input, len, result.data(), target_len, NULL, NULL); return result; } // RAIIï¼ˆResource Acquisition Is Initializationï¼‰ç±» class ClipboardScope { bool valid; public: ClipboardScope() { valid = static_cast\u003cbool\u003e(OpenClipboard(NULL)); } ~ClipboardScope() { CloseClipboard(); } bool IsValid() { return valid; } }; //è¯»å–å‰ªåˆ‡æ¿å†…çš„æ–‡ä»¶è·¯å¾„ std::vector\u003cstd::string\u003e ReadFilePaths() { auto result = std::vector\u003cstd::string\u003e(); ClipboardScope clipboard_scope; if (!clipboard_scope.IsValid()) { return result; } HDROP drop_files_handle = (HDROP)GetClipboardData(CF_HDROP); if (!drop_files_handle) { return result; } UINT file_count = DragQueryFileW(drop_files_handle, 0xFFFFFFFF, NULL, 0); result.reserve(file_count); for (UINT i = 0; i \u003c file_count; ++i) { UINT path_len = DragQueryFileW(drop_files_handle, i, NULL, 0); UINT buffer_len = path_len + 1; std::unique_ptr\u003cWCHAR[]\u003e buffer(new WCHAR[buffer_len]); path_len = DragQueryFileW(drop_files_handle, i, buffer.get(), buffer_len); result.emplace_back(Utf16CStringToUtf8String(buffer.get(), path_len)); } return result; } OpenClipboard ä¹‹åè¦å¯¹åº”çš„å…³é—­æ“ä½œ CloseClipboardï¼ŒæŠŠè¿™ä¸¤ä¸ªæ“ä½œå°è£…åˆ°äº†ä¸€ä¸ªå¯¹è±¡ä¸­ï¼šclipboard_scopeï¼Œè¿™ä¸ªå¯¹è±¡åˆå§‹åŒ–æ—¶ï¼Œæ‰§è¡Œ OpenClipboard æ“ä½œï¼Œå¯¹è±¡é‡Šæ”¾æ—¶ï¼Œæ‰§è¡Œ CloseClipboard æ“ä½œï¼Œè¿™æ˜¯ä½¿ç”¨ C++ å¼€å‘å¸¸è§çš„ RAIIï¼ˆResource Acquisition Is Initializationï¼‰å¼€å‘æŠ€å·§ã€‚ é€šè¿‡ Windows API è·å–åˆ°çš„æ–‡ä»¶è·¯å¾„æ˜¯å®½å­—èŠ‚å­—ç¬¦ä¸²ï¼Œéœ€è¦æŠŠè¿™ä¸ªå­—ç¬¦ä¸²è½¬åŒ–æˆ UTF8 æ ¼å¼çš„å­—ç¬¦ä¸²æ‰èƒ½è¢« JavaScript ä½¿ç”¨ï¼Œä¸Šè¿°ä»£ç ä¸­ Utf16CStringToUtf8String æ–¹æ³•å°±æ˜¯å®Œæˆè¿™ä¸ªä»»åŠ¡çš„ã€‚ å¦‚æœå‰ªåˆ‡æ¿å†…æ²¡æœ‰æ–‡ä»¶è·¯å¾„ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºå®¹å™¨ï¼Œå¦‚æœæœ‰æ–‡ä»¶è·¯å¾„ï¼Œå°±æŠŠæ‰€æœ‰çš„æ–‡ä»¶è·¯å¾„éƒ½æ”¾ç½®åˆ°å®¹å™¨ä¸­è¿”å›ç»™è°ƒç”¨è€…ã€‚ Mac å¹³å°ä¸Šçš„å®ç°é€»è¾‘ï¼š src/native/clipboard.mm #import \u003cFoundation/Foundation.h\u003e #import \u003cCocoa/Cocoa.h\u003e #include \"clipboard.h\" std::vector\u003cstd::string\u003e ReadFilePaths() { NSPasteboard *pasteboard = [NSPasteboard generalPasteboard]; NSArray\u003cNSURL *\u003e *urls = [pasteboard readObjectsForClasses:@[NSURL.class] options:@{ NSPasteboardURLReadingFileURLsOnlyKey: @YES, }]; if (!urls) { return {}; } auto result = std::vector\u003cstd::string\u003e(); result.reserve(urls.count); for (NSURL *url in urls) { result.emplace_back([url.path UTF8String]); } return result; } ","date":"2023-02-07","objectID":"/electron/:10:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ç¼–è¯‘åŸç”Ÿæ¨¡å— å¦‚ä½•å®ç°åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œç¼–è¯‘ src/native/clipboard.cc æºç ï¼Œåœ¨ Mac ç¯å¢ƒä¸‹ç¼–è¯‘ src/native/clipboard.mmï¼Ÿ ç¼–è¯‘é…ç½®æ–‡ä»¶ï¼šsrc/native/binding.gyp æœ€åä¸€ä¸ªé…ç½®èŠ‚æä¾›äº†é…ç½®èƒ½åŠ›ã€‚è¿™ä¸ªé…ç½®èŠ‚çš„ä½œç”¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸åŒæ—¶ï¼ˆâ€˜OS==â€œmacâ€â€™ï¼‰ï¼ŒæŒ‡å®šä¸åŒçš„æºç æ–‡ä»¶ï¼ˆsourcesï¼‰ã€ä¾èµ–åº“ï¼ˆlibrariesï¼‰å’Œç¼–è¯‘å·¥å…·ï¼ˆmsvs_settingsã€xcode_settingsï¼‰ã€‚ ç°åœ¨æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤æ¥ç”Ÿæˆæ„å»ºå·¥ç¨‹ï¼š node-gyp configure æ„å»ºå¥½å·¥ç¨‹ä¹‹åï¼Œå°è¯•ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥ç¼–è¯‘è¿™ä¸ªåŸç”Ÿæ¨¡å—ã€‚ node-gyp build å¦‚æœåœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸­çœ‹åˆ°å½©è‰²çš„ gyp info ok è¿™è¡Œä¿¡æ¯ï¼Œè¯´æ˜åŸç”Ÿæ¨¡å—å·²ç»ç¼–è¯‘æˆåŠŸäº†ï¼Œå®ƒè¢«æ”¾ç½®åœ¨ build/Release/addon.node è·¯å¾„ä¸‹ã€‚ æ¥ä¸‹æ¥å†™ä¸€æ®µ JavaScript ä»£ç ï¼Œæµ‹è¯•ä¸€ä¸‹è¿™ä¸ªåŸç”Ÿæ¨¡å—ã€‚ //src\\native\\test.js let native = require(\"./build/Release/addon.node\"); let paths = native.readFilePaths(); console.log(paths); å…ˆå¤åˆ¶å‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œè¿™ä¸ªæµ‹è¯•è„šæœ¬ï¼š node test.js çœ‹çœ‹ä½ å¤åˆ¶çš„æ–‡ä»¶è·¯å¾„æ˜¯ä¸æ˜¯å·²ç»æ‰“å°åˆ°æ§åˆ¶å°ä¸Šäº†å‘¢ï¼Ÿ ä¸Šé¢ç¼–è¯‘å‡ºçš„åŸç”Ÿæ¨¡å—ä¸ä¸€å®šèƒ½åœ¨ Electron åº”ç”¨ä¸­æ­£å¸¸å·¥ä½œã€‚è¿™æ˜¯å› ä¸º Electron å†…ç½®çš„ Node.js çš„ç‰ˆæœ¬å¯èƒ½ä¸ä½ ç¼–è¯‘åŸç”Ÿæ¨¡å—ä½¿ç”¨çš„ Node.js çš„ç‰ˆæœ¬ä¸åŒã€‚å¦‚æœåœ¨ Electron å·¥ç¨‹å†…ä½¿ç”¨åŸç”Ÿæ¨¡å—æ—¶ï¼Œç¢°åˆ°å¦‚ä¸‹é”™è¯¯ï¼š Error: The module '/path/to/native/module.node' was compiled against a different Node.js version using NODE_MODULE_VERSION $XYZ. This version of Node.js requires NODE_MODULE_VERSION $ABC. Please try re-compiling or re-installing the module (for instance, using `npm rebuild` or `npm install`). åˆ™è¯´æ˜ä½ ä½¿ç”¨çš„åŸç”Ÿæ¨¡å—ä¸ Electron çš„ ABI ä¸åŒ¹é…ï¼Œæ­¤æ—¶å°±è¦é’ˆå¯¹ Electron å†…ç½®çš„ ABI æ¥ç¼–è¯‘ä½ çš„åŸç”Ÿæ¨¡å—ã€‚ ä½¿ç”¨æ–¹æ³•ä¸ç¼–è¯‘ SQLite åŸç”Ÿæ¨¡å—æ—¶ç›¸åŒï¼Œå¦‚ä¸‹æŒ‡ä»¤æ‰€ç¤ºï¼š electron-rebuild -f -m ./src/native ç°åœ¨ç¼–è¯‘å‡ºçš„åŸç”Ÿæ¨¡å—å°±å¯ä»¥åœ¨ Electron å·¥ç¨‹ä¸‹æ­£å¸¸ä½¿ç”¨äº†ã€‚ ","date":"2023-02-07","objectID":"/electron/:10:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åº”ç”¨å‡çº§æ–¹æ¡ˆ äº§å“åœ¨ç¬¬ä¸€æ¬¡ä¸Šçº¿åï¼Œå¼€å§‹è¿›å…¥è¿­ä»£æœŸï¼Œå¼€å‘è€…ä¼šä¸ºäº§å“å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œä¿®å¤ Bugï¼Œéšä¹‹å°±ä¼šæ¨å‡ºæ–°ç‰ˆæœ¬ï¼Œæ€ä¹ˆæŠŠæ–°ç‰ˆæœ¬çš„äº§å“åˆ†å‘ç»™ç”¨æˆ·å°±æˆä¸ºäº†ä¸€ä¸ªäº§å“ç»ç†å’Œå¼€å‘äººå‘˜éƒ½å…³æ³¨çš„é—®é¢˜ã€‚ å¸‚é¢ä¸Šå¸¸è§çš„äº§å“å‡çº§æ–¹å¼æœ‰ä¸¤ç§: å…¨é‡å‡çº§ï¼Œè¿™ç§å‡çº§æ–¹å¼è¦æ±‚ç”¨æˆ·é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬çš„äº§å“ï¼Œåœ¨å®‰è£…æ–°ç‰ˆæœ¬å‰ï¼Œå®‰è£…ç¨‹åºä¼šæŠŠè€ç‰ˆæœ¬çš„äº§å“å¸è½½æ‰ï¼Œä»¥è¾¾åˆ°å‡çº§çš„ç›®çš„ã€‚è¿™ç§æ–¹å¼æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å‡çº§å¾—æ¯”è¾ƒå½»åº•ï¼Œä¸ä¼šå—è€ç‰ˆæœ¬äº§å“çš„ä»»ä½•å½±å“ã€‚å¯æ˜¯å¦‚æœå¼€å‘è€…ä»…ä»…ä¿®æ”¹äº†ä¸€ä¸¤ä¸ªæ–‡ä»¶ï¼Œå°±è¦è®©ç”¨æˆ·é‡æ–°å®‰è£…ä¸€éäº§å“çš„è¯ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚ å¢é‡å‡çº§ï¼Œè¿™ç§å‡çº§æ–¹å¼åªå‡çº§å¼€å‘è€…ä¿®æ”¹è¿‡çš„å†…å®¹ï¼Œå‡çº§å†…å®¹å°‘ï¼Œè¿‡ç¨‹è¿…é€Ÿï¼Œå¦‚æœå‡çº§å†…å®¹ä¸æ¶‰åŠå…³é”®ä¸šåŠ¡çš„è¯ï¼Œè¿˜å¯ä»¥åšåˆ°ç”¨æˆ·æ— æ„Ÿå‡çº§ã€‚ ","date":"2023-02-07","objectID":"/electron/:11:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å…¨é‡å‡çº§ ä½¿ç”¨ electron-updater æ¨¡å—æ¥å®Œæˆå‡çº§åŠŸèƒ½ï¼Œå®‰è£…è¿™ä¸ªæ¨¡å—ï¼š npm install electron-updater -D åˆ›å»º Updater.ts å°è£… Updater ç±»: src/main/Updater.ts import { dialog } from 'electron'; import { autoUpdater} from 'electron-updater'; export class Updater { static check() { autoUpdater.checkForUpdates(); autoUpdater.on('update-downloaded', async () =\u003e { await dialog.showMessageBox({ message: 'æœ‰å¯ç”¨çš„å‡çº§', }); autoUpdater.quitAndInstall(); }); } } Updater ç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³• checkï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œè®© autoUpdater å¯¹è±¡æ£€æŸ¥æœåŠ¡ç«¯æ˜¯å¦å­˜åœ¨æ–°ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œå¹¶ç›‘å¬ update-downloaded äº‹ä»¶ã€‚ ä¸€æ—¦ autoUpdater å‘ç°æœåŠ¡ç«¯å­˜åœ¨æ›´æ–°çš„å®‰è£…åŒ…ï¼Œåˆ™ä¼šæŠŠå®‰è£…åŒ…ä¸‹è½½åˆ°ç”¨æˆ·æœ¬åœ°ç”µè„‘å†…ï¼Œå½“æ–°ç‰ˆæœ¬å®‰è£…åŒ…ä¸‹è½½å®Œæˆåï¼Œupdate-downloaded äº‹ä»¶è¢«è§¦å‘ã€‚æ­¤æ—¶æé†’ç”¨æˆ·â€œæœ‰å¯ç”¨çš„å‡çº§â€ï¼Œç”¨æˆ·ç¡®è®¤åå°±é€€å‡ºå½“å‰åº”ç”¨å¹¶å®‰è£…æ–°çš„å®‰è£…åŒ…ã€‚ åœ¨å‡çº§è¿‡ç¨‹æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„: å‡çº§æœåŠ¡çš„åœ°å€æ˜¯åœ¨åˆ¶ä½œå®‰è£…åŒ…æ—¶ï¼Œé€šè¿‡ config.publish.url æŒ‡å®šçš„ï¼Œè¿™ä¸ªè·¯å¾„æŒ‡å‘æ–°ç‰ˆæœ¬å®‰è£…åŒ…æ‰€åœ¨çš„æœåŠ¡å™¨ç›®å½•ã€‚ src/plugins/buildPlugin.ts publish: [{ provider: \"generic\", url: \"http://localhost:5500/\" }] å½“å®Œæˆæ–°ç‰ˆæœ¬çš„å¼€å‘å·¥ä½œåï¼Œè¦æŠŠ release ç›®å½•ä¸‹çš„ [your_project_name] Setup [your_project_version].exe å’Œ latest.yml ä¸¤ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ç¬¬ 1 ç‚¹ä¸­æŒ‡å®šçš„æœåŠ¡å™¨åœ°å€ä¸‹ï¼ˆè¿™æ˜¯ Windows å¹³å°ä¸‹çš„å·¥ä½œï¼‰ã€‚Mac å¹³å°ä¸‹è¦æŠŠ release ç›®å½•ä¸‹çš„ [your_project_name]-[your_project_version]-mac.zipã€[your_project_name]-[your_project_version].dmg å’Œ latest-mac.yml ä¸‰ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šçš„æœåŠ¡å™¨åœ°å€ä¸‹ã€‚ äº§å“ç‰ˆæœ¬æ˜¯é€šè¿‡ package.json ä¸­çš„ version å±æ€§æŒ‡å®šçš„ï¼Œäº§å“çš„å®‰è£…åŒ…çš„ç‰ˆæœ¬ä¹Ÿæ˜¯åœ¨è¿™é‡ŒæŒ‡å®šçš„ã€‚ é€šè¿‡ dialog.showMessageBox æé†’ç”¨æˆ·å‡çº§ç¨‹åºå®åœ¨ç§°ä¸ä¸Šç¾è§‚ï¼Œè¿™é‡Œåº”è¯¥å‘æ¶ˆæ¯ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œè®©æ¸²æŸ“è¿›ç¨‹å¼¹å‡ºä¸€ä¸ªæ›´æ¼‚äº®çš„å‡çº§æé†’çª—å£ã€‚ç”¨æˆ·åšå‡ºé€‰æ‹©åï¼Œå†ç”±æ¸²æŸ“è¿›ç¨‹å‘æ¶ˆæ¯ç»™ä¸»è¿›ç¨‹ï¼Œå†æ‰§è¡Œ autoUpdater.quitAndInstall é€»è¾‘ã€‚ åœ¨ app ready äº‹ä»¶å‘ç”Ÿä¹‹åå†è°ƒç”¨ Updater.check() æ–¹æ³•ï¼Œè€Œä¸”åº”è¯¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è°ƒç”¨ï¼Œå› ä¸ºåœ¨å¼€å‘ç¯å¢ƒä¸‹è°ƒç”¨å®ƒæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œelectron-updateråº“ä¼šç»™å‡ºå¦‚ä¸‹é”™è¯¯æç¤ºï¼š src/main/mainEntry.ts import {app, BrowserWindow} from 'electron'; import {CustomScheme} from \"./CustomScheme\"; import { Updater } from \"./Updater\"; import {CommonWindowEvent} from \"./CommonWindowEvent\"; process.env.ELECTRON_DISABLE_SECURITY_WARNINGS = 'true'; let mainWindow: BrowserWindow; app.on(\"browser-window-created\", (e, win) =\u003e { CommonWindowEvent.regWinEvent(win); }); app.whenReady().then(() =\u003e { let config = { frame: false, show: false, webPreferences: { nodeIntegration: true, webSecurity: false, allowRunningInsecureContent: true, contextIsolation: false, webviewTag: true, spellcheck: false, disableHtmlFullscreenWindowResize: true, nativeWindowOpen: true, }, }; mainWindow = new BrowserWindow(config); mainWindow.webContents.openDevTools({mode: 'undocked'}); if (process.argv[2]) { mainWindow.loadURL(process.argv[2]); } else { CustomScheme.registerScheme(); mainWindow.loadURL('app\"//index.html'); // Updater.check(); } CommonWindowEvent.listen(); }); Skip checkForUpdatesAndNotify because application is not packed æœ€å¥½è®©å‡çº§æœåŠ¡åœ°å€ä¸‹å§‹ç»ˆæœ‰ä¸€ä¸ªå®‰è£…åŒ…å’Œç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œä¸ç„¶ checkForUpdates æ–¹æ³•ä¼šæŠ¥é”™ã€‚ latest.yml çš„æ–‡ä»¶å†…åŒ…å«å¦‚ä¸‹å‡ ä¸ªä¿¡æ¯ï¼šæ–°ç‰ˆæœ¬å®‰è£…æ–‡ä»¶çš„ç‰ˆæœ¬å·ã€æ–‡ä»¶åã€æ–‡ä»¶çš„ sha512 å€¼ã€æ–‡ä»¶å¤§å°ã€æ–‡ä»¶ç”Ÿæˆæ—¶é—´ã€æ‰§è¡Œæ–°ç‰ˆæœ¬å®‰è£…æ–‡ä»¶æ—¶æ˜¯å¦éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ å½“ autoUpdater.checkForUpdates() æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆè¯·æ±‚è¿™ä¸ª yml æ–‡ä»¶ï¼Œå¾—åˆ°æ–‡ä»¶é‡Œçš„å†…å®¹åï¼Œå†æ‹¿æ­¤æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ä¸å½“å‰ç‰ˆæœ¬å·å¯¹æ¯”ï¼Œå¦‚æœæ­¤æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·æ¯”å½“å‰ç‰ˆæœ¬å·æ–°ï¼Œåˆ™ä¸‹è½½æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™å°±é€€å‡ºæ›´æ–°é€»è¾‘ã€‚ å½“æ–°ç‰ˆæœ¬å®‰è£…åŒ…ä¸‹è½½å®Œæˆåï¼Œelectron-updater ä¼šéªŒè¯æ–‡ä»¶çš„ sha512 å€¼æ˜¯å¦åˆæ³•ï¼Œyml æ–‡ä»¶ä¸­åŒ…å«æ–°ç‰ˆæœ¬å®‰è£…åŒ…çš„ sha512 å€¼ï¼Œelectron-updater é¦–å…ˆè®¡ç®—å‡ºä¸‹è½½çš„æ–°ç‰ˆæœ¬å®‰è£…åŒ…çš„ sha512 å€¼ï¼Œç„¶åå†ä¸ yml æ–‡ä»¶ä¸­çš„ sha512 å€¼å¯¹æ¯”ï¼Œä¸¤ä¸ªå€¼ç›¸ç­‰ï¼Œåˆ™éªŒè¯é€šè¿‡ï¼Œä¸ç›¸ç­‰åˆ™éªŒè¯ä¸é€šè¿‡ã€‚ éªŒè¯é€šè¿‡å Electron åˆ™ä½¿ç”¨ Node.js çš„ child-process æ¨¡å—å¯åŠ¨è¿™ä¸ªæ–°çš„å®‰è£…æ–‡ä»¶ï¼Œä»¥å®Œæˆåº”ç”¨ç¨‹åºå‡çº§å·¥ä½œã€‚ ","date":"2023-02-07","objectID":"/electron/:11:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å¢é‡å‡çº§ ä¸€èˆ¬æƒ…å†µä¸‹ä¼šä½¿ç”¨ asar æ–‡ä»¶å­˜å‚¨åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ‰€ä»¥å¢é‡å‡çº§åªè¦è€ƒè™‘æ›´æ–°è¿™ä¸ªæ–‡ä»¶å³å¯ã€‚ Electron åº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šé¦–å…ˆåŠ è½½ä¸»è¿›ç¨‹çš„å…¥å£æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨æ‰“åŒ… Electron åº”ç”¨æ—¶æŒ‡å®šçš„ã€‚ å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š src/plugins/buildPlugin.ts localPkgJson.main = \"mainEntry.js\"; å‡è®¾è¿™ä¸ªæ–‡ä»¶ï¼ˆmainEntry.jsï¼‰æ²¡æœ‰å…·ä½“çš„ä¸šåŠ¡åŠŸèƒ½é€»è¾‘ï¼Œè€Œæ˜¯åªå®Œæˆè¿™æ ·çš„é€»è¾‘ï¼šåˆ¤æ–­ä¸€ä¸‹å½“å‰ç”¨æˆ·ç¯å¢ƒä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ asar æ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥åŠ è½½æ–°ç‰ˆæœ¬ asar æ–‡ä»¶ä¸­çš„ä¸šåŠ¡ä»£ç ï¼ˆå‡è®¾å« mainLogic.jsï¼‰ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±åŠ è½½å½“å‰ asar æ–‡ä»¶ä¸­çš„ä¸šåŠ¡ä»£ç  mainLogic.jsã€‚æ³¨æ„ï¼šmainEntry.js å’Œ mainLogic.js éƒ½å­˜åœ¨äº asar æ–‡ä»¶ä¸­ã€‚ ä½ å¯èƒ½ä¼šæ‹…å¿ƒä¸€ä¸ª asar æ–‡ä»¶ä¸­çš„ js ä»£ç æ˜¯ä¸æ˜¯å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ª asar ä¸­çš„ js ä»£ç ï¼Œè¿™æ˜¯æ²¡é—®é¢˜çš„ã€‚ å¦‚ä¸‹ä»£ç å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œåªè¦æŠŠ asar å½“ä½œä¸€ä¸ªç›®å½•å³å¯ï¼ŒElectron ä¼šå®Œæˆå…·ä½“çš„åŠ è½½å·¥ä½œã€‚ let mainLogicPath = path.join(`c://yourNewVersion.asar`, \"mainLogic.js\"); let mainLogic = require(this.mainPath); mainLogic.start(); æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œå°±å¯ä»¥æ¯æ¬¡å‡çº§åªå‡çº§ asar æ–‡ä»¶ï¼Œè€Œä¸å¿…å‡çº§æ•´ä¸ªåº”ç”¨äº†ã€‚ çº¢è‰²æ¨¡å—çš„é€»è¾‘æ˜¯ç”¨æˆ·å®Œæˆçš„ï¼Œè“è‰²æ¨¡å—çš„é€»è¾‘éƒ½æ˜¯åœ¨ mainEntry.js ä¸­å®ç°çš„ï¼Œç»¿è‰²æ¨¡å—çš„é€»è¾‘æ˜¯åœ¨ mainLogic.js æ–‡ä»¶ä¸­å®ç°çš„ã€‚ mainLogic.js ä¸å•å•æœ‰ç»¿è‰²æ¨¡å—æè¿°çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜åŒ…æ‹¬æ•´ä¸ªåº”ç”¨çš„å…¶ä»–ä¸»è¿›ç¨‹ä¸šåŠ¡é€»è¾‘ã€‚ åœ¨å®‰è£…ç›®å½•ä¸‹çš„ asar æ–‡ä»¶æ˜¯ä¸€ä¸ªå®Œæ•´åº”ç”¨çš„ asar æ–‡ä»¶ï¼Œå®ƒåŒ…æ‹¬ mainEntry.jsã€mainLogic.js å’Œæ¸²æŸ“è¿›ç¨‹çš„æ‰€æœ‰ä»£ç æ–‡ä»¶ã€‚ å‡çº§ç›®å½•ä¸‹çš„ asar æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå®Œæ•´åº”ç”¨çš„ asar æ–‡ä»¶ï¼Œå®ƒä¹ŸåŒ…æ‹¬ mainEntry.jsã€mainLogic.js å’Œæ¸²æŸ“è¿›ç¨‹çš„æ‰€æœ‰ä»£ç æ–‡ä»¶ï¼Œåªä¸è¿‡ mainEntry.js æ–‡ä»¶å¯¹äºå®ƒæ¥è¯´æ˜¯å¯æœ‰å¯æ— çš„ã€‚ å‡çº§ç›®å½•å¯ä»¥ç”±å¼€å‘è€…è‡ªå·±æŒ‡å®šï¼Œæ¨èæŠŠè¿™ä¸ªç›®å½•æŒ‡å®šä¸ºç”¨æˆ·çš„ appData ç›®å½•ä¸‹çš„ä¸€ä¸ªå­ç›®å½•ã€‚ ä¸‹è½½ä¿å­˜æ—¶ï¼Œè¦æ³¨æ„ asar æ–‡ä»¶çš„å‘½åè§„åˆ™ã€‚æ¯”å¦‚ï¼šmain.2.3.6.18.asarï¼Œå…¶ä¸­ 2.3.6 æ˜¯äº§å“çš„ç‰ˆæœ¬å·ï¼ŒæŠŠè¿™ä¸ªç‰ˆæœ¬å·å«ä½œå¤§ç‰ˆæœ¬å·ï¼›18 æ˜¯ asar æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼ŒæŠŠè¿™ä¸ªç‰ˆæœ¬å·å«å°ç‰ˆæœ¬å·ã€‚ è¿™æ ·åšæœ‰ä»¥ä¸‹ä¸¤ä¸ªç›®çš„: å½“ç”¨æˆ·å¤šæ¬¡å¢é‡å‡çº§åº”ç”¨ç¨‹åºåï¼Œå‡çº§ç›®å½•ä¸‹å°±ä¼šæœ‰å¤šä¸ª asar æ–‡ä»¶ï¼Œä»¥è¿™ç§è§„åˆ™å‘½å mainEntry.js å°±å¯ä»¥æ–¹ä¾¿åœ°æ‰¾åˆ°å“ªä¸ªæ–‡ä»¶æ˜¯æœ€æ–°çš„ã€‚å‡è®¾å®‰è£…ç›®å½•ä¸‹çš„ asar æ–‡ä»¶çš„ç‰ˆæœ¬å·æ˜¯ 0ï¼Œé‚£ä¹ˆå‡çº§ç›®å½•ä¸‹çš„ asar æ–‡ä»¶çš„ç‰ˆæœ¬å·åº”è¯¥ä»ç‰ˆæœ¬å· 1 å¼€å§‹ã€‚ åº”å¯¹ç”¨æˆ·è‡ªå·±é‡æ–°å®‰è£…äº†ä¸€ä¸ªè€æ—§çš„å®‰è£…åŒ…çš„æƒ…å†µï¼Œå½“å‡çº§ç›®å½•ä¸‹æœ‰ main.2.3.7.1.asar æ–‡ä»¶ã€ä¹Ÿæœ‰ main.2.3.6.1.asar æ–‡ä»¶æ—¶ï¼Œä½†å½“å‰ç”¨æˆ·å®‰è£…çš„äº§å“çš„ç‰ˆæœ¬å·æ˜¯ 2.3.6 æ—¶ï¼Œä¸åº”è¯¥åŠ è½½è¿™ä¸ª main.2.3.7.1.asarï¼Œè€Œåº”è¯¥åŠ è½½ main.2.3.6.1.asar. å‡è®¾è¦è€ƒè™‘ç‰ˆæœ¬é™çº§ä»¥åº”å¯¹ç‰ˆæœ¬å‘å¸ƒåæ‰å‘ç°äº†é‡å¤§é—®é¢˜çš„åœºæ™¯ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æœåŠ¡å™¨ç»™ä½ çš„å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæŒ‡ä»¤ï¼Œè¿«ä½¿ä½ çš„å®¢æˆ·ç«¯åˆ é™¤æŒ‡å®šç‰ˆæœ¬çš„ asar æ–‡ä»¶ï¼Œç„¶åæç¤ºç”¨æˆ·é‡å¯åº”ç”¨å³å¯ã€‚ ç”¨æˆ·å¯åŠ¨åº”ç”¨åï¼Œå‘ç°æœåŠ¡ç«¯æœ‰æ–°çš„ asar æ–‡ä»¶ï¼Œä¸‹è½½æˆåŠŸåï¼Œé©¬ä¸Šåˆè¦æ±‚ç”¨æˆ·é‡å¯ï¼Œå¦‚æœä½ æ‹…å¿ƒè¿™ä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œé‚£ä½ å¯ä»¥æŠŠæ£€æŸ¥å¹¶ä¸‹è½½æ–°ç‰ˆæœ¬ asar çš„é€»è¾‘æ”¾åœ¨ä¸»çª—å£æ˜¾ç¤ºä¹‹å‰ï¼Œåªæœ‰åœ¨æœåŠ¡ç«¯æ²¡æœ‰æ–° asar æ–‡ä»¶æˆ–æœåŠ¡ç«¯æ— æ³•è®¿é—®æ—¶æ‰ä¼šæ˜¾ç¤ºä¸»çª—å£ã€‚ è¿™æ ·é‡å¯åº”ç”¨çš„é€»è¾‘ä¹Ÿä¸éœ€è¦ç”¨æˆ·ç¡®è®¤äº†ï¼Œå³ä½¿å®¢æˆ·ç«¯åœ¨æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œã€‚ ä½†è¿™æ ·åšä¼šå¢åŠ åº”ç”¨é¦–å±åŠ è½½çš„æ—¶é—´ï¼Œä¸è¿‡å¼€å‘è€…è¿˜å¯ä»¥åŠ ä¸€ä¸ª splash window ä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚ asar æ–‡ä»¶ä¸ä¼šå¤ªå¤§ï¼Œä¹Ÿå°±å‡ å…†ï¼Œå¸¦ç»™ç”¨æˆ·çš„è´Ÿæ‹…æ›´å°ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚ ","date":"2023-02-07","objectID":"/electron/:11:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"è°ƒè¯•çº¿ä¸Šåº”ç”¨ ï¼ˆï¼šè¯·è½¬ç§»åˆ°å…¬å¸æä¾›çš„ windows ç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•ï¼Œæ¯•ç«ŸæŠŠç”µè„‘ç©åäº†ä¸ç”¨è‡ªæè…°åŒ…ã€‚ æŒ‰é»˜è®¤é…ç½®ç”Ÿæˆçš„ Electron åº”ç”¨ä¸å…·å¤‡æºç ä¿æŠ¤èƒ½åŠ›ï¼Œå…ˆè§£æçº¿ä¸Š Electron åº”ç”¨çš„ä¸šåŠ¡ä»£ç ã€‚ è§£æå‡ºçš„ä¸šåŠ¡ä»£ç ï¼Œä¸€èˆ¬éƒ½æ˜¯å‹ç¼©è¿‡çš„ï¼Œå¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œåˆ†æå¦‚ä½•è°ƒè¯•çº¿ä¸Šåº”ç”¨çš„ä¸šåŠ¡ä»£ç ã€‚ åˆ†æ Electron åº”ç”¨çš„å´©æºƒæŠ¥å‘Šï¼Œåº”å¯¹ä¸€äº›éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚ ","date":"2023-02-07","objectID":"/electron/:12:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ä¸šåŠ¡ä»£ç è§£æ é»˜è®¤æƒ…å†µä¸‹ï¼Œelectron-builder ä¼šæŠŠ HTMLã€CSS å’Œ JavaScript ä»£ç ä»¥åŠç›¸å…³çš„èµ„æºæ‰“åŒ…æˆ asar æ–‡ä»¶åµŒå…¥åˆ°å®‰è£…åŒ…ä¸­ï¼ˆå°±æ˜¯å®‰è£…ç›®å½•ä¸‹çš„ app.asar æ–‡ä»¶ï¼‰ï¼Œå†åˆ†å‘ç»™ç”¨æˆ·ã€‚ asar æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜æ¡£æ ¼å¼ï¼Œå®ƒå¯ä»¥æŠŠå¤§æ‰¹çš„æ–‡ä»¶ä»¥ä¸€ç§æ— æŸã€æ— å‹ç¼©çš„æ–¹å¼è¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶æä¾›éšæœºè®¿é—®æ”¯æŒã€‚ å…¨å±€å®‰è£… asar å·¥å…·ï¼š npm install asar -g å®‰è£…å¥½å·¥å…·åï¼Œæ‰“å¼€åº”ç”¨çš„å®‰è£…ç›®å½•ï¼Œåœ¨ resources å­ç›®å½•ä¸‹æ‰¾åˆ° app.asar æ–‡ä»¶ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ—å‡ºè¯¥æ–‡ä»¶å†…éƒ¨åŒ…å«çš„æ–‡ä»¶ä¿¡æ¯ï¼š asar list app.asar å¦‚æœæƒ³çœ‹ app.asar åŒ…ä¸­çš„æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŠŠè¯¥æ–‡ä»¶é‡Šæ”¾å‡ºæ¥ï¼š asar ef app.asar entry.js è¿™æ · entry.js å°±ä¼šå‡ºç°åœ¨ app.asar åŒçº§ç›®å½•ä¸‹äº†ï¼Œå¦‚æœé‡Šæ”¾æ–‡ä»¶å¤±è´¥ï¼Œæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š internal/fs/utils.js:307 throw err; Error: EPERM: operation not permitted, open 'entry.js' 90m at Object.openSync (fs.js:476:3)39m 90m at Object.writeFileSync (fs.js:1467:35)39m å¯èƒ½æ˜¯å› ä¸ºä½ çš„åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œapp.asar æ–‡ä»¶è¢«å ç”¨äº†å¯¼è‡´çš„ï¼Œé€€å‡ºåº”ç”¨ç¨‹åºå†æ¬¡å°è¯•ï¼Œå¦‚æœè¿˜æ˜¯æ— æ³•é‡Šæ”¾ç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥è€ƒè™‘æŠŠ app.asar æ‹·è´åˆ°å¦ä¸€ä¸ªç›®å½•ä¸‹å†é‡Šæ”¾ã€‚ å¦‚æœå¸Œæœ›ä¸€æ¬¡æ€§æŠŠ app.asar å†…çš„æ–‡ä»¶å…¨éƒ¨é‡Šæ”¾å‡ºæ¥ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ï¼š asar e app.asar ","date":"2023-02-07","objectID":"/electron/:12:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"ç”Ÿäº§ç¯å¢ƒè°ƒè¯• æŠŠ asar æ–‡ä»¶ä¸­çš„ä¸šåŠ¡ä»£ç è§£æå‡ºæ¥ä¹‹åï¼Œè¿™äº›ä¸šåŠ¡ä»£ç éƒ½æ˜¯å‹ç¼©è¿‡çš„ï¼Œå¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œè¦æƒ³é€šè¿‡è¿™äº›ä»£ç æ–‡ä»¶åˆ†æçº¿ä¸Šåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘æ˜¯éå¸¸å›°éš¾çš„ï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯èƒ½æƒ³åŠæ³•è°ƒè¯•è¿™äº›ä¸šåŠ¡ä»£ç æ‰è¡Œã€‚ é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ä¸€ä¸ªçº¿ä¸Š Electron åº”ç”¨ï¼š D:\\\\yourApp\\\\yourProductName.exe --inspect=7676 --remote-debugging-port=7878 è¿™ä¸ªå‘½ä»¤åœ¨å¯åŠ¨ Electron åº”ç”¨ç¨‹åºæ—¶ï¼Œä¸ºç›®æ ‡ç¨‹åºæŒ‡å®šäº†ä¸¤ä¸ªç«¯å£å·ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡â€“inspect æŒ‡ä»¤æŒ‡å®šçš„ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡â€“remote-debugging-port æŒ‡ä»¤æŒ‡å®šçš„ï¼Œæ¥ä¸‹æ¥è¦æ ¹æ®è¿™ä¸¤ä¸ªç«¯å£å·è·å–è°ƒè¯•åœ°å€ã€‚ æ‰“å¼€è°·æ­Œæµè§ˆå™¨ï¼Œè®¿é—®å¦‚ä¸‹ä¸¤ä¸ªåœ°å€ï¼š http://127.0.0.1:7676/json http://127.0.0.1:7878/json è¿™ä¸¤ä¸ªåœ°å€å‡ä¼šå“åº” JSON å­—ç¬¦ä¸²ï¼Œå“åº”ç»“æœæ˜¯ä¸€ä¸ªå¯¹åº”ç€ä¸»è¿›ç¨‹çš„è°ƒè¯•ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š { \"description\": \"node.js instance\", \"devtoolsFrontendUrl\": \"devtools://devtools/bundled/js_app.html?experiments=true\u0026v8only=true\u0026ws=127.0.0.1:7676/85ac5529-d1a5-49b3-8655-f71c7c198b71\", \"devtoolsFrontendUrlCompat\": \"devtools://devtools/bundled/inspector.html?experiments=true\u0026v8only=true\u0026ws=127.0.0.1:7676/85ac5529-d1a5-49b3-8655-f71c7c198b71\", \"faviconUrl\": \"https://nodejs.org/static/images/favicons/favicon.ico\", \"id\": \"85ac5529-d1a5-49b3-8655-f71c7c198b71\", \"title\": \"Node.js[25204]\", \"type\": \"node\", \"url\": \"file://\", \"webSocketDebuggerUrl\": \"ws://127.0.0.1:7676/85ac5529-d1a5-49b3-8655-f71c7c198b71\" } å¦ä¸€ä¸ªå¯¹åº”ç€æ¸²æŸ“è¿›ç¨‹çš„è°ƒè¯•ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š { \"description\": \"\", \"devtoolsFrontendUrl\": \"/devtools/inspector.html?ws=127.0.0.1:7878/devtools/page/AFCF98D56EE8462C3D8E52FA99C02F91\", \"id\": \"AFCF98D56EE8462C3D8E52FA99C02F91\", \"title\": \"Vite App\", \"type\": \"page\", \"url\": \"app://./index.html\", \"webSocketDebuggerUrl\": \"ws://127.0.0.1:7878/devtools/page/AFCF98D56EE8462C3D8E52FA99C02F91\" } è¿™ä¸¤ä¸ªå“åº”ä¸­æœ€é‡è¦çš„ä¿¡æ¯å°±æ˜¯ devtoolsFrontendUrlï¼Œå¾—åˆ°æ­¤ä¿¡æ¯åï¼Œè¦æŠŠå®ƒä»¬è½¬æ¢ä¸ºå¦‚ä¸‹çš„æ ¼å¼ï¼š devtools://devtools/bundled/js_app.html?experiments=true\u0026v8only=true\u0026ws=127.0.0.1:7676/e9c9b139-a606-4703-be3f-f4ffc496a6aa devtools://devtools/bundled/inspector.html?ws=127.0.0.1:7878/devtools/page/33DFD3D347C1B575DC6361CC61ABAEDE è¿™ä¸ªè½¬æ¢è¿‡ç¨‹æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢ï¼Œå¦‚æœä½ å«Œéº»çƒ¦ä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæ›¿æ¢ï¼š devtoolsFrontendUrl.replace(/^\\/devtools/, \"devtools://devtools/bundled\"); æŠŠè½¬æ¢åçš„åœ°å€æ”¾å…¥è°·æ­Œæµè§ˆå™¨ä¸­ï¼Œå°†å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºç»“æœï¼Œå¯ä»¥è¯•ç€åœ¨å¯¹åº”çš„æºæ–‡ä»¶ä¸­ä¸‹ä¸€ä¸ªæ–­ç‚¹è¯•è¯•çœ‹ã€‚ å¦‚æœç›®æ ‡åº”ç”¨çš„æºç æ˜¯å‹ç¼©è¿‡çš„ï¼Œå¯ä»¥å°è¯•ç‚¹å‡»è°ƒè¯•å™¨å³ä¸‹è§’çš„ {} æŒ‰é’®ç¾åŒ–ä»£ç ï¼ŒæŸ¥çœ‹ç¾åŒ–åçš„ä»£ç ï¼Œè¿™æ ·å°±å¯ä»¥æ›´æ–¹ä¾¿åœ°ä¸‹æ–­ç‚¹è°ƒè¯•äº†ã€‚ é€šè¿‡è¿™ç§æ–¹æ³•åªèƒ½è°ƒè¯•å¸‚é¢ä¸Šä¸€éƒ¨åˆ†åŸºäº Electron å¼€å‘çš„åº”ç”¨ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åŸºäº Electron å¼€å‘çš„åº”ç”¨éƒ½èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•è°ƒè¯•ã€‚ ","date":"2023-02-07","objectID":"/electron/:12:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åˆ†æå´©æºƒæŠ¥å‘Š åˆ†æè°ƒè¯•ä¸šåŠ¡ä»£ç ä¸»è¦ç›®çš„æ˜¯è¿½è¸ªä¸šåŠ¡ä»£ç çš„é—®é¢˜ï¼Œä½†æœ‰äº›é—®é¢˜æ˜¯ä¸ä¼šç»™æˆ‘ä»¬è¿½è¸ªçš„æœºä¼šçš„ï¼Œæ¯”å¦‚é‚£äº›å¶å‘çš„ã€ä¸€æ—¦å‡ºç°åº”ç”¨ç¨‹åºå°±ç«‹å³ Crash çš„é—®é¢˜ã€‚è¦è§£å†³è¿™äº›é—®é¢˜å°±è¦æŒæ¡åˆ†æ Electron åº”ç”¨å´©æºƒæŠ¥å‘Šçš„çŸ¥è¯†ã€‚ å¦‚æœä½ å¸Œæœ›ä½ çš„åº”ç”¨ç¨‹åºå´©æºƒæ—¶ï¼Œè‡ªåŠ¨ä¿å­˜å´©æºƒæŠ¥å‘Šæ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±è¦åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç æ”¶é›†å´©æºƒæŠ¥å‘Šï¼š import { crashReporter } from \"electron\"; crashReporter.start({ submitURL: \"\", uploadToServer: false }); æœ‰äº†è¿™æ®µä»£ç ï¼Œå½“åº”ç”¨ç¨‹åºå´©æºƒæ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ª.dmp æ‰©å±•åç»“å°¾çš„æ–‡ä»¶ï¼ˆå­˜æ”¾äº C://Users/[yourOsUserName]/AppData/Roaming/[yourAppName]/Crashpadï¼‰ã€‚ é¦–å…ˆéœ€è¦å®‰è£… WinDbg è°ƒè¯•å·¥å…·ï¼Œå¦‚æœä½ åœ¨å®‰è£… Windows 10 SDK æ—¶å‹¾é€‰äº† Debugging Tools For Windowsï¼Œé‚£ä¹ˆ WinDbg å·²ç»åœ¨å¦‚ä¸‹ç›®å½•å†…äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼š C://Program Files (x86)/Windows Kits/10/Debuggers/x86 å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å¦‚ä¸‹åœ°å€ä¸‹è½½å®‰è£…ï¼š https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools å®‰è£…å®Œæˆåï¼Œé€šè¿‡èœå• File-\u003eSymbol File Path æ‰“å¼€ç¬¦å·è·¯å¾„è®¾ç½®çª—å£ï¼Œè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š SRV*d:\\code\\symbols\\*https://msdl.microsoft.com/download/symbols;SRV*d:\\code\\symbols\\*https://symbols.electronjs.org è¿™æ®µé…ç½®ä¸­æœ‰ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼Œä¾æ¬¡æ˜¯ç¬¦å·æ–‡ä»¶çš„ç¼“å­˜è·¯å¾„ã€Windows æ“ä½œç³»ç»Ÿå…³é”® dll çš„ç¬¦å·æœåŠ¡å™¨å’Œ Electron çš„ç¬¦å·æœåŠ¡å™¨ã€‚ è®¾ç½®å®Œç¬¦å·æœåŠ¡å™¨ä¹‹åï¼Œé€šè¿‡èœå• File-\u003eOpen Crash Dump æ‰“å¼€åˆšåˆšç”Ÿæˆçš„å´©æºƒæŠ¥å‘Šï¼Œæ¥ç€å°±ç­‰å¾… WinDbg åŠ è½½å¯¹åº”çš„ç¬¦å·ï¼ˆWinDbg ä¼šé€šè¿‡ Electron ç¬¦å·æœåŠ¡å™¨ä¸‹è½½ä¸å´©æºƒæŠ¥å‘Šå¯¹åº”çš„ Electron ç‰ˆæœ¬çš„ç¬¦å·æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åœ¨ç¼“å­˜ç›®å½•ä¸­ä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨ï¼‰ã€‚ æ¥ç€å†åœ¨å‘½ä»¤çª—å£çš„åº•éƒ¨è¾“å…¥ !analyze -v æŒ‡ä»¤å¼€å§‹åˆ†æå´©æºƒæŠ¥å‘Šã€‚ åŠ è½½å®Œæˆå WinDbg ä¼šåœ¨çª—å£ä¸­æ˜¾ç¤ºå´©æºƒæŠ¥å‘Šå†…éƒ¨çš„ä¿¡æ¯ï¼š EXCEPTION_RECORD: (.exr -1) ExceptionAddress: 00007ff725996fac (electron!node::AsyncResource::CallbackScope::~CallbackScope+0x000000000013227c) ExceptionCode: c0000005 (Access violation) ExceptionFlags: 00000000 NumberParameters: 2 Parameter[0]: 0000000000000001 Parameter[1]: 0000000000000000 Attempt to write to address 0000000000000000 PROCESS_NAME: electron.exe WRITE_ADDRESS: 0000000000000000 ERROR_CODE: (NTSTATUS) 0xc0000005 - 0x%p 0x%p %s EXCEPTION_CODE_STR: c0000005 EXCEPTION_PARAMETER1: 0000000000000001 EXCEPTION_PARAMETER2: 0000000000000000 STACK_TEXT: 00000053`0abf82f0 00007ff7`275a0513 : 00001c69`00000000 00000053`0abf84d8 00008d04`5e11c7b4 00001c69`00000000 : electron!node::AsyncResource::CallbackScope::~CallbackScope+0x13227c 00000053`0abf84a0 00007ff7`275a0121 : 00008d04`5e11c7a4 00000053`0abf8690 00007ff7`2b7e55c0 0000452c`0087b1bb : electron!v8::Object::SlowGetInternalField+0x7f3 00000053`0abf84d0 00007ff7`26cacd53 : 00000000`00000000 00007ff7`26c1f112 00000000`00000000 00000000`06b96722 : electron!v8::Object::SlowGetInternalField+0x401 00000053`0abfcfe0 00007ff7`26652c61 : 00000000`00000000 00001c69`08042229 00001c69`c0cdb000 00001c69`08282125 : electron!v8::V8::ToLocalEmpty+0x2193 00000053`0abfd010 00007ff7`27720c24 : 00000000`00000000 00000000`00000000 00000053`0abfd068 00000000`00000000 : electron!v8::Value::ToString+0x2eef1 00000053`0abfd050 00007ff7`251fa720 : 00000000`00000000 00000000`00000000 00000000`00000000 00001c69`a5e82115 : electron!v8::internal::TickSample::Init+0x11a24 00000053`0abfd0d0 00007ff7`25ae571c : 00000000`00000000 00000053`0abfd218 00001c69`a5e80000 00000000`00000002 : electron!v8::Isolate::CreateParams::~CreateParams+0xce60 00000053`0abfd130 00001c69`000c6308 : 00000000`0d72ce44 00001c69`08942dd9 00000000`06b96722 00001c69`08582e0d : electron!v8_inspector::protocol::Binary::operator=+0x6f12c 00000053`0abfd188 00000000`0d72ce44 : 00001c69`08942dd9 00000000`06b96722 00001c69`08582e0d 00000000`0d72ce44 : 0x00001c69`000c6308 00000053`0abfd190 00001c69`08942dd9 : 00000000`06b96722 00001c69`08582e0d 00000000`0d72ce44 00001c69`0946344d : 0xd72ce44 00000053`0abfd198 00000000`06b96722 : 00001c69`08582e0d 00000000`0d72ce44 00001c69`0946344d 00001c69`088c2349 : 0x00001c69`08942dd9 00000053`0abfd1a0 00001c69`08582e0d : 00000000`0d72ce44 00001c69`0946344d 00001c69`088c2349 00001c69`08582e0d : 0x6b96722 00000053`0abfd1a8 00000000`0d72ce44 : 00001c69`0946344d 00001c69`088c2349 00001c69`08582e0d 00001c69`083d6e61 : 0x00001c69`08582e0d 00000053`0abfd1b0 00001c69`0946344d : 00001c69`088c2349 00001c69`08582e0d 00001c69`083d6e61 00001c69`08584a49 : 0xd72ce44 00000053`0abfd1b8 00001c69`088c2349 : 00001c69`08582e0d 00001c69`083d6e61 00001c69`08584a49 00000000`0000069c : 0x00001c69`0946344d 00000053`0abfd1c0 00001c69`08582e0d : 00001c69`083d6e61 00001c69`08584a49 00000000`0000069c 00000000`0000645c : 0x00001c69`088c2349 00000053`0abf","date":"2023-02-07","objectID":"/electron/:12:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"å…¶å®ƒ ","date":"2023-02-07","objectID":"/electron/:13:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åº”ç”¨ç¨‹åºå®‰è£…ç›®å½• ä½¿ç”¨ electron-builder æ‰“åŒ…åº”ç”¨æ—¶è®¾ç½®äº†ä¸å…è®¸ç”¨æˆ·ä¿®æ”¹åº”ç”¨ç¨‹åºå®‰è£…ç›®å½•ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºä¼šå®‰è£…åœ¨ç”¨æˆ·çš„å¦‚ä¸‹ç›®å½•ä¸­ï¼š 64 ä½åº”ç”¨ç¨‹åºçš„å®‰è£…ç›®å½•ï¼šC:\\Program Files\\\\[yourAppName] 32 ä½åº”ç”¨ç¨‹åºçš„å®‰è£…ç›®å½•ï¼šC:\\Program Files (x86)\\\\[yourAppName] åº”ç”¨ç¨‹åºå®‰è£…ç›®å½•ä¸‹çš„æ–‡ä»¶åŠå…¶åŠŸç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š åº”ç”¨ç¨‹åºçš„å®‰è£…ç›®å½• â”œâ”€ localesï¼ˆElectronçš„å¤šå›½è¯­è¨€æ–‡ä»¶ï¼‰ â”‚ â”‚ â”œâ”€ en-GB.pakï¼ˆè‹±å›½è‹±è¯­ï¼‰ â”‚ â”‚ â”œâ”€ en-US.pakï¼ˆç¾å›½è‹±è¯­ï¼‰ â”‚ â”‚ â”œâ”€ zh-CN.pakï¼ˆç®€ä½“ä¸­æ–‡ï¼‰ â”‚ â”‚ â”œâ”€ zh-TW.pakï¼ˆç¹ä½“ä¸­æ–‡ï¼‰ â”‚ â”‚ â”œâ”€ .....ï¼ˆå…¶ä»–å›½å®¶è¯­è¨€æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥åˆ é™¤ï¼‰ â”œâ”€ resourcesï¼ˆåº”ç”¨ç¨‹åºèµ„æºåŠç¼–è¯‘åçš„æºç ï¼‰ â”‚ â”œâ”€ app.asarï¼ˆç¼–è¯‘åçš„æºç å‹ç¼©æ–‡æ¡£ï¼‰ â”‚ â”œâ”€ app.asar.unpackedï¼ˆç¼–è¯‘åçš„æºç æœªå‹ç¼©æ–‡æ¡£ï¼‰ â”‚ â”œâ”€ appï¼ˆå¦‚æœæ²¡æœ‰app.asaræˆ–app.asar.unpackedï¼Œåˆ™ç¼–è¯‘åæºç æ–‡æ¡£åœ¨æ­¤ç›®å½•ä¸‹ï¼‰ â”‚ â”œâ”€ app-update.ymlï¼ˆåº”ç”¨ç¨‹åºå‡çº§ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼‰ â”‚ â”œâ”€ .....ï¼ˆé€šè¿‡electron-builderé…ç½®çš„å…¶ä»–çš„é¢å¤–èµ„æºï¼‰ â”œâ”€ swiftshaderï¼ˆå›¾å½¢æ¸²æŸ“å¼•æ“ç›¸å…³åº“ï¼‰ â”œâ”€ yourApp.exeï¼ˆåº”ç”¨ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯electron.exeä¿®æ”¹å›¾æ ‡å’Œæ–‡ä»¶ååå¾—æ¥çš„ï¼‰ â”œâ”€ UnInstall yourApp.exeï¼ˆå¸è½½åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ â””â”€ ......ï¼ˆå…¶ä»–Electronåº”ç”¨ç¨‹åºä½¿ç”¨çš„äºŒè¿›åˆ¶èµ„æºï¼‰ Electron åº”ç”¨åœ¨ Mac æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä¹‹åï¼Œä¼šä»¥ app åº”ç”¨çš„å½¢å¼å‡ºç°åœ¨ç”¨æˆ·çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹ï¼Œå³å‡»èœå•çš„æ˜¾ç¤ºåŒ…å†…å®¹æ¥æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„ç›®å½•ç»“æ„ï¼š åº”ç”¨ç¨‹åº.app â”œâ”€ Contentsï¼ˆæ ¹ç›®å½•ï¼‰ â”‚ â”‚ â”œâ”€ _CodeSignatureï¼ˆå­˜æ”¾åº”ç”¨ç¨‹åºçš„ç­¾åä¿¡æ¯ï¼‰ â”‚ â”‚ â”œâ”€ Frameworksï¼ˆå­˜æ”¾Electronç›¸å…³çš„äºŒè¿›åˆ¶èµ„æºï¼‰ â”‚ â”‚ â”œâ”€ Info.plistï¼ˆåº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºåç§°ã€idã€å›¾æ ‡ä»¥åŠåº•å±‚æ¥å£æƒé™çš„ä¿¡æ¯ï¼‰ â”‚ â”‚ â”œâ”€ Resourcesï¼ˆåº”ç”¨ç¨‹åºèµ„æºåŠç¼–è¯‘åçš„æºç ï¼‰ â”‚ â”‚ â”‚ â”œâ”€ app-update.ymlï¼ˆåº”ç”¨ç¨‹åºå‡çº§ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼‰ â”‚ â”‚ â”‚ â”œâ”€ app.asarï¼ˆç¼–è¯‘åçš„æºç å‹ç¼©æ–‡æ¡£ï¼‰ â”‚ â”‚ â”‚ â”œâ”€ app.asar.unpackedï¼ˆç¼–è¯‘åçš„æºç æœªå‹ç¼©æ–‡æ¡£ï¼‰ â”‚ â”‚ â”‚ â”œâ”€ appï¼ˆå¦‚æœæ²¡æœ‰app.asaræˆ–app.asar.unpackedæ–‡ä»¶ï¼Œåˆ™ç¼–è¯‘åæºç æ–‡æ¡£åœ¨æ­¤ç›®å½•ä¸‹ï¼‰ â”‚ â”‚ â”‚ â”œâ”€ ...ï¼ˆElectronå†…ç½®çš„å¤šå›½è¯­è¨€æ–‡ä»¶ï¼‰ â””â”€â””â”€â””â”€ ...ï¼ˆé€šè¿‡electron-builderé…ç½®çš„å…¶ä»–çš„é¢å¤–èµ„æºï¼‰ ","date":"2023-02-07","objectID":"/electron/:13:1","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"åº”ç”¨ç¨‹åºç¼“å­˜ç›®å½• ç”¨æˆ·ç¬¬ä¸€æ¬¡å¯åŠ¨ Electron åº”ç”¨åï¼ŒElectron ä¼šåœ¨å¦‚ä¸‹ç›®å½•åˆ›å»ºç›¸åº”çš„ç¼“å­˜æ–‡ä»¶ï¼Œè¯¥ç›®å½•çš„æ–‡ä»¶ç»“æ„åŠåŠŸèƒ½è¯´æ˜å¦‚ä¸‹ï¼š C://Users/[yourOsUserName]/AppData/Roaming/[yourAppName] â”œâ”€ IndexedDBï¼ˆElectronåº”ç”¨æ¸²æŸ“è¿›ç¨‹IndexedDBæ•°æ®å­˜æ”¾ç›®å½•ï¼‰ â”œâ”€ Local Storageï¼ˆElectronåº”ç”¨æ¸²æŸ“è¿›ç¨‹Local Storageæ•°æ®å­˜æ”¾ç›®å½•ï¼‰ â”œâ”€ Session Storageï¼ˆElectronåº”ç”¨æ¸²æŸ“è¿›ç¨‹Session Storageæ•°æ®å­˜æ”¾ç›®å½•ï¼‰ â”œâ”€ Crashpadï¼ˆElectronåº”ç”¨å´©æºƒæ—¥å¿—æ•°æ®å­˜æ”¾ç›®å½•ï¼‰ â”œâ”€ Code Cacheï¼ˆElectronåº”ç”¨æ¸²æŸ“è¿›ç¨‹æºç æ–‡ä»¶ç¼“å­˜ç›®å½•ï¼Œwasmçš„ç¼“å­˜ä¹Ÿä¼šå­˜åœ¨æ­¤å¤„ï¼‰ â”œâ”€ Partitionsï¼ˆå¦‚æœä½ çš„åº”ç”¨ä¸­é€‚åº”äº†è‡ªå®šä¹‰åè®®ï¼Œæˆ–æ ¹æ®å­—ç¬¦ä¸²äº§ç”Ÿäº†sessionï¼Œæ­¤ç›®å½•å°†æœ‰ç›¸åº”çš„å†…å®¹ï¼‰ â”œâ”€ GPUCacheï¼ˆElectronåº”ç”¨æ¸²æŸ“è¿›ç¨‹GPUè¿è¡Œè¿‡ç¨‹äº§ç”Ÿçš„ç¼“å­˜æ•°æ®ï¼‰ â””â”€ ......ï¼ˆå…¶ä»–Electronæ¸²æŸ“è¿›ç¨‹ç¼“å­˜æ–‡ä»¶ï¼‰ Mac æ“ä½œç³»ç»Ÿä¸‹çš„ç¼“å­˜ç›®å½•ä¸ºï¼š MacintoshHD/ç”¨æˆ·/[yourOsUserName]/èµ„æºåº“/ApplicationSupport/[yourAppName] è¯¥ç›®å½•ä¸‹çš„å†…å®¹ä¸å­ç›®å½•ç»“æ„è·Ÿ Windows æ“ä½œç³»ç»Ÿç±»ä¼¼ã€‚ è™½ç„¶ä»¥ä¸Šç›®å½•å†…çš„æ–‡ä»¶éƒ½æ˜¯åŠ å¯†å­˜å‚¨çš„ï¼Œä½†åªè¦æŠŠè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´åˆ°å¦ä¸€å°æœºå™¨ä¸Šï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ªä¼ªé€ çš„ Electron ç¨‹åºè¯»å–åˆ°è¿™äº›ç¼“å­˜æ–‡ä»¶å†…çš„æ•°æ®ã€‚ å®¢æˆ·ç«¯æ•°æ®åº“æ–‡ä»¶ä¹Ÿæ˜¯å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„ã€‚ Electron æä¾›äº†ä¸€ä¸ªä¾¿æ·çš„ API æ¥è·å–æ­¤è·¯å¾„ï¼Œæ­¤æ–¹æ³•æ‰§è¡Œæ—¶ä¼šåˆ¤æ–­å½“å‰åº”ç”¨æ­£è¿è¡Œåœ¨ä»€ä¹ˆæ“ä½œç³»ç»Ÿä¸Šï¼Œç„¶åæ ¹æ®æ“ä½œç³»ç»Ÿçš„åç§°è¿”å›å…·ä½“çš„è·¯å¾„åœ°å€ã€‚ app.getPath(\"userData\"); ","date":"2023-02-07","objectID":"/electron/:13:2","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"çª—å£é’‰åœ¨æ¡Œé¢ä¸Š ä½¿ç”¨ electget åº“ï¼Œå®‰è£…å¹¶åœ¨ä¸»è¿›ç¨‹ä»£ç ä¸­å¼•å…¥ï¼š // import electget from \"electget\"; electget.preventFromAeroPeek(win); electget.preventFromShowDesktop(win); electget.moveToBottom(win); è¿™æ—¶çª—å£å°±å¯ä»¥â€œé’‰â€åœ¨æ¡Œé¢ä¸Šäº†ã€‚ ä¸ºäº†æ›´å®Œç¾åœ°æ»¡è¶³éœ€æ±‚ï¼Œæœ€å¥½ç›‘æ§ä¸€ä¸‹çª—å£èšç„¦äº‹ä»¶ï¼Œå½“ç”¨æˆ·èšç„¦çª—å£æ—¶ï¼ŒæŠŠçª—å£ç§»è‡³æœ€åº•å±‚ï¼š app.on(\"browser-window-focus\", (e, win: BrowserWindow) =\u003e { if (win.id != mainWindow.id) return; electget.moveToBottom(mainWindow); }); è¿™æ ·åšå¯ä»¥é¿å…åœ¨ç”¨æˆ·ä¸çª—å£äº¤äº’åï¼Œè¢«é’‰ä½çš„çª—å£æµ®åˆ°å…¶ä»–çª—å£ä¹‹ä¸Šã€‚ ","date":"2023-02-07","objectID":"/electron/:13:3","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ–‡ä»¶é‡æ–°ä¸Šä¼  å¼€å‘è€…åœ¨ä¸Šä¼ æ–‡ä»¶ä¹‹å‰ï¼ŒæŠŠæ–‡ä»¶è·¯å¾„è®°å½•ä¸‹æ¥ï¼Œé‡æ–°ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œç›´æ¥ç”¨æ–‡ä»¶è·¯å¾„æ„é€ ä¸€ä¸ª File å¯¹è±¡ï¼Œç„¶åå†ä¸Šä¼ åˆ°æœåŠ¡ç«¯ã€‚ ä½¿ç”¨æ–‡ä»¶è·¯å¾„æ„é€  File å¯¹è±¡çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š let extname = path.extname(filePath); let buffer = await fs.promises.readFile(filePath); let file = new window.File([Uint8Array.from(buffer)], path.basename(filePath), { type: this.ext2type[extname], //mimetypeç±»ä¼¼\"image/png\" }); è¿™ç§æ–¹æ³•è¦æŠŠæ•´ä¸ªæ–‡ä»¶çš„å†…å®¹éƒ½è¯»å‡ºæ¥æ”¾åˆ° buffer é‡Œï¼Œå°æ–‡ä»¶è¿˜å¥½ï¼Œé‡åˆ°å¤§æ–‡ä»¶å°±æå…¶æ¶ˆè€—ç”¨æˆ·çš„å†…å­˜äº†ï¼Œè€Œä¸” V8 å¹¶ä¸ä¼šåŠæ—¶é‡Šæ”¾è¿™å—å†…å­˜ã€‚ æ›´å¥½çš„æ–¹æ¡ˆæ˜¯ä¸€å—ä¸€å—è¯»æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åå†é™„åŠ åˆ° POST è¯·æ±‚å†…ã€‚ æœ‰ä¸€ä¸ªå¼€æºåº“ â€”â€” form-dataï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–è¿™æ–¹é¢çš„å·¥ä½œã€‚ æŠŠ form-data å¼•å…¥å·¥ç¨‹å†…åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ„é€ ä¸Šä¼ è¡¨å•ï¼Œç”¨è¿™ç§æ–¹æ³•ä¸Šä¼ æ–‡ä»¶å°±æ˜¯åˆ†ç‰‡ä¸Šä¼ çš„ã€‚ var FormData = require(\"form-data\"); var fs = require(\"fs\"); var form = new FormData(); form.append(\"yourFile\", fs.createReadStream(\"/your/file/path.7z\")); form.submit(\"http://yourFileService.com/upload\"); å¦‚æœè¦å¼€å‘å–æ¶ˆä¸Šä¼ ã€æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ è¿›åº¦ç­‰åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š new Promise((resolve, reject) =\u003e { let req = formData.submit(params, (err, res) =\u003e { const body = []; res.on(\"data\", (chunk) =\u003e { body.push(chunk); }); res.on(\"end\", () =\u003e { let resString = Buffer.concat(body).toString(); let resObj = JSON.parse(resString); eventer.off(\"setXhrAbort\", abort); resolve(res); }); }); req.on(\"socket\", () =\u003e req.socket.on(\"drain\", () =\u003e { let percent = parseInt((req.socket.bytesWritten / file.size) * 100); // æ­¤å¤„æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ è¿›åº¦çš„é€»è¾‘ }) ); let abort = () =\u003e { req.destroy(); // è°ƒç”¨æ­¤æ–¹æ³•ç»“æŸæ–‡ä»¶ä¸Šä¼  }; }); ","date":"2023-02-07","objectID":"/electron/:13:4","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["ç¬¬ä¸€æŠ€èƒ½"],"content":"æ€»ç»“ ğŸ¤ª ä»Šå¤©ä¸å­¦ä¹ ï¼Œæ˜å¤©å˜åƒåœ¾ã€‚ ","date":"2023-02-07","objectID":"/electron/:14:0","tags":["ç¬¬ä¸€æŠ€èƒ½"],"title":"åŸºäº Electron + Vue3 çš„æ¡Œé¢åº”ç”¨å¼€å‘å®æˆ˜","uri":"/electron/"},{"categories":["è°ˆäººç”Ÿ"],"content":"2023 ","date":"2023-02-01","objectID":"/blog/:1:0","tags":["è°ˆäººç”Ÿ"],"title":"åšä¸ªä¿—äººï¼Œè´ªè´¢å¥½è‰²","uri":"/blog/"},{"categories":["è°ˆäººç”Ÿ"],"content":"ç”±æˆ¿å±‹ç§Ÿèµçº çº·å¼•å‘çš„æ€è€ƒ ç®€è¿°ä¸€ä¸‹äº‹æƒ…çš„èµ·å› ï¼Œå› ä¸ºå·¥ä½œå˜åŠ¨ï¼Œæ²¡æœ‰å¤ªå¤šæ—¶é—´æ‰¾æˆ¿å­ï¼Œåœ¨è´å£³æ‰¾æˆ¿ä¸Šç´§æ€¥ç§Ÿåˆ°äº†å¥—ä¸€å…¬å¯“ï¼Œå’Œä¸­ä»‹å…¬å¸ç­¾è®¢äº†åŠå¹´çš„ç§Ÿæˆ¿åˆåŒï¼Œç­¾è®¢åˆåŒå‰ï¼Œå‡­å€Ÿç€è‡ªå·±é‚£ç‚¹å¯æ€œçš„äººç”Ÿç»éªŒè§‰å¾—åˆåŒå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°±ç—›å¿«åœ°ç­¾äº†ã€‚ (æ³¨ï¼šåˆåŒçš„ç”²æ–¹å†™çš„æ˜¯æˆ¿ä¸œçš„åå­—ï¼Œæ¶‰åŠä¸ªäººéšç§éƒ¨åˆ†æ‰“ç )ã€‚ ä¹Ÿæ€ªè‡ªå·±ç§Ÿæˆ¿å‰æ²¡ä»”ç»†æ£€æŸ¥ï¼Œæ¬è¿›æ¥ä¹‹åå‘ç°ç”µå™¨æœ‰ä¸€äº›å°é—®é¢˜ï¼Œæ¯”å¦‚å®¢å…ç¯ä¸äº®è¿™äº›ï¼Œæƒ³ç€ä¹Ÿæ²¡æœ‰å¤ªå¤§å½±å“ï¼Œåæ­£åªç§Ÿäº†åŠå¹´ï¼Œåˆ°æœŸåè‚¯å®šä¸ç§Ÿäº†ï¼Œå°±å…ˆå‡‘åˆä½å§ï¼Œå°±è¿™æ ·ç›¸å®‰æ— äº‹åœ°ä½äº†3ä¸ªæœˆã€‚ ä»Šå¹´1æœˆä»½å¿½ç„¶è¢«å‘ŠçŸ¥ä¸­ä»‹å…¬å¸ä¸æˆ¿ä¸œåˆçº¦åˆ°æœŸï¼ˆå®é™…æ˜¯å…¬å¸ç»è¥ä¸å–„å†³å®šé€€ç§Ÿ(ï¼šæˆ¿ä¸œè¯´çš„ï¼ŒçœŸå‡æ— ä»è€ƒè¯ï¼‰ï¼Œå¹¶ä¸”åŒæ–¹åœ¨æ²¡æœ‰å‘ŠçŸ¥æˆ‘çš„æƒ…å†µä¸‹å·²ç»å®Œæˆäº†æ‰‹ç»­ç§»äº¤ã€‚ é¦–å…ˆæ²Ÿé€šçš„æ˜¯å®½å¸¦é—®é¢˜ï¼Œå› ä¸ºä¹‹å‰è¦æ¯ä¸ªæœˆç»™ä¸­ä»‹å…¬å¸äº¤200å…ƒæ‚è´¹ï¼Œå…¶ä¸­åŒ…æ‹¬ç‰©ä¸šè´¹ã€å®½å¸¦ç­‰ä¹‹ç±»çš„è´¹ç”¨ï¼Œç°åœ¨ä¸­ä»‹å…¬å¸ä¸ç®¡äº†ï¼Œå®½å¸¦æˆ‘è‚¯å®šæ˜¯è¦ç”¨çš„ï¼Œé‚æ‰¾åˆ°æˆ¿ä¸œï¼Œæˆ¿ä¸œè®©æˆ‘æ‰¾ä¸­ä»‹å…¬å¸ï¼Œä¸­ä»‹å…¬å¸è®©æˆ‘æ‰¾æˆ¿ä¸œï¼ˆç›¸äº’è¸¢çš®çƒï¼‰ã€‚ä»¥ä¸‹æ˜¯èŠå¤©è®°å½•ï¼š å’Œæˆ¿ä¸œæ²Ÿé€šï¼š å’Œä¸­ä»‹æ²Ÿé€šï¼š æˆ¿ä¸œè®©æ‰¾ä¸­ä»‹ï¼Œä¸­ä»‹é€‰æ‹©æ²‰é»˜ï¼Œæœ€åè¿™ä»¶äº‹æƒ…ä¸äº†äº†ä¹‹ï¼Œæ²¡åŠæ³•ï¼Œè‡ªå·±è£…ä¸ªå®½å¸¦å§ã€‚ã€‚ã€‚å®³ã€‚ è¿‡èŠ‚å›æ¥åï¼Œåˆæœ‰éº»çƒ¦äº†ï¼Œçª—æˆ·çš„é”å› ä¸ºè€æ—§åæ‰äº†ï¼Œå¤§å†¬å¤©å¤ªå†·äº†ï¼Œå†»äº†3å¤©ä¹‹åï¼Œå®åœ¨å¿ä¸äº†äº†ï¼Œå› ä¸ºæˆ‘å¯¹å‘¨å›´ç¯å¢ƒä¹Ÿä¸ç†Ÿæ‚‰ï¼Œæƒ³ç€è”ç³»ä¸‹æˆ¿ä¸œå¸®å¿™ç»™å¤„ç†ä¸‹ï¼Œç„¶åå°±å‘ç”Ÿäº†ä¸æ„‰å¿«çš„äº‹æƒ…ï¼Œæˆ¿ä¸œå‹’ä»¤æˆ‘ç«‹é©¬æ¬å‡ºå»ï¼Œä¸­ä»‹è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€åœ°è¸¢çš®çƒï¼Œè¿˜æŠ¥äº†è­¦ï¼Œæ°‘è­¦æ¥äº†åªæ˜¯é—®äº†é—®ï¼Œç»™äº†ç‚¹å»ºè®®ï¼Œè¯´ä»–ä»¬ç®¡ä¸äº†ï¼Œç„¶åå°±èµ°äº†ã€‚ å’Œæˆ¿ä¸œæ²Ÿé€šï¼š å’Œä¸­ä»‹æ²Ÿé€šï¼š ä¸­é—´è¿˜ç»™æˆ¿ä¸œæ‰“äº†ç”µè¯ï¼Œæˆ¿ä¸œè¯´è‡ªå·±æ˜¯70å²+çš„é€€ä¼‘å›½å®¶å¹²éƒ¨ï¼Œå·²ç»å®ç°äº†è´¢åŠ¡è‡ªç”±ï¼Œè¨€è¯­ä¸­é€éœ²å‡ºæµ“æµ“åœ°å®˜åƒšèµ„æœ¬ä¸»ä¹‰ï¼Œæ‰€ä»¥ä¸åœ¨ä¹æˆ¿å­ç§Ÿä¸ç§Ÿçš„å‡ºå»ï¼Œåªæ˜¯æ€•éº»çƒ¦ï¼Œå–Šæˆ‘å¦‚æœæƒ³ç»§ç»­ä½ä¸‹å»ï¼Œå°±æ¯ä¸ªæœˆåªæŒ‰æ—¶ç»™å¥¹æˆ¿ç§Ÿï¼Œå…¶ä½™çš„äº‹æƒ…å…¨éƒ¨è‡ªå·±æ¥è§£å†³ã€‚ æœ€åè¿™ä»¶äº‹æƒ…ï¼Œè‚¯å®šæ˜¯è‡ªå·±æé’±æŠŠé”ä¿®å¥½äº†ã€‚è‡ªå·±å¯èƒ½è¿˜æ˜¯å¤ªå¹´è½»å§ï¼Œè¨€è¯­ä¸­å……æ»¡äº†æ„¤æ„¤ä¸å¹³å’Œå¯¹å½“ä»Šè¿™ä¸ªç¤¾ä¼šçš„å¤±æœ›ã€‚å†·é™ä¸‹æ¥ä¹‹åï¼Œç ”ç©¶äº†ä¸‹ç§Ÿæˆ¿åˆåŒã€ä»–ä»¬çš„äº¤æ¥åè®®ã€ä»¥åŠè¿™æ®µæ—¶é—´å’Œä»–ä»¬çš„æ²Ÿé€šè®°å½•ï¼š é¦–å…ˆï¼šç”²ä¹™ï¼ˆç”²ï¼šæˆ¿ä¸œï¼Œä¹™ï¼šä¸­ä»‹å…¬å¸ï¼‰åŒæ–¹äº1æœˆ15æ—¥è¿›è¡Œæˆ¿å­äº¤å‰²åè®®ï¼Œä¸­ä»‹å…¬å¸å°†æŠ¼é‡‘å’Œ15æ—¥ä¹‹åçš„æˆ¿ç§Ÿäº¤ç»™äº†æˆ¿ä¸œï¼Œæ˜¯ä¸æ˜¯å°±è¯´æ˜è¿™ä¸ªæˆ¿å­å’Œä¸­ä»‹å…¬å¸æ²¡æœ‰å…³ç³»äº†ï¼Œä»¥åæˆ¿å­çš„äº‹æƒ…éƒ½ç”±æˆ¿ä¸œè‡ªå·±æ¥å¤„ç†ï¼ˆä½œä¸ºæˆ¿ä¸œå‡ºç§Ÿæˆ¿å±‹åº”è¯¥æœ‰è´£ä»»è¦å¤„ç†æˆ¿å­ç¡¬ä»¶è®¾æ–½è€åŒ–ç»´æŠ¤çš„é—®é¢˜ï¼‰ã€‚ å…¶æ¬¡ï¼šä¸­ä»‹å…¬å¸æœªæå‰ä¸æˆ‘è¿›è¡Œæ²Ÿé€šï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸æ˜¯å¤„ç†å¤ªä¸æ°å½“ï¼Œå¹¶åº”è¯¥æœ‰ä¹‰åŠ¡å¯¹ä¹‹åçš„çº çº·è¿›è¡Œåè°ƒå¤„ç†ã€‚ é™„ä¸Šä¸€ç¯‡ä»ç½‘ä¸Šæ‰¾åˆ°çš„ç›¸å…³æŠ¥é“ï¼Œè™½ç„¶æˆ‘ç›®å‰çš„çŠ¶å†µè¿˜æ²¡æœ‰è¿™ä¸ªäººçš„è¿™ä¹ˆä¸¥é‡â€¦ æˆ‘çš„æœ‹å‹ï¼Œä½ æ€ä¹ˆçœ‹å¾…è¿™ä»¶äº‹æƒ…å‘¢ï¼ŸæœŸå¾…æ”¶è·æ‚¨çš„å®è´µç»éªŒã€‚ æ›´æ–°ï¼š å‡ ä½æœ‹å‹ç»™å‡ºäº†è‡ªå·±çš„å»ºè®®ã€‚ â€œä½ å¯ä»¥æ‰¾äººé—®é—®åˆåŒçš„å±¥è¡Œäººç°åœ¨æ˜¯å…¬å¸è¿˜æ˜¯æˆ¿ä¸œï¼Œbutéƒ½å¾ˆéº»çƒ¦ï¼Œèµ°è­¦å¯Ÿéƒ½æ˜¯åŠè¯«ä¸ºä¸»ï¼Œèµ°æ³•é™¢åŠå¹´èµ·æ­¥ã€‚â€ â€œè¿™äº‹åªèƒ½åƒå“‘å·´äºï¼Œè‡ªå·±è®¤å€’éœ‰ã€‚â€ â€œé‚£ä½ ç›´æ¥è·Ÿè¿™ä¸ªæˆ¿ä¸œè¡¥ç­¾ä¸€ä¸ªä¸‰ä¸ªæœˆçš„çŸ­ç§ŸåˆåŒå¥½äº†çœ‹å¥¹åŒä¸åŒæ„ã€‚â€ â€œä½ å°±è¯´å¥¹è®©ä½ æ¬å‡ºå»ä¹Ÿå¾—æŠŠä¹‹å‰çš„æŠ¼é‡‘é€€ç»™ä½ ï¼Œç„¶åä½ æ¬å‡ºå»äº†å†åˆ°å¥¹æ‰¾åˆ°æ–°æˆ¿å®¢ä¸­é—´å°‘è¯´ä¹Ÿè¦ä¸€ä¸ªå¤šæ˜ŸæœŸä¸¤ä¸ªæ˜ŸæœŸæˆ¿å­æ˜¯ç©ºç€çš„ï¼Œå¥¹è‡ªå·±æ˜¯æœ‰æŸå¤±çš„ï¼Œè°ä¹Ÿä¸ä¼šè·Ÿé’±è¿‡ä¸å»ã€‚â€ soï¼Œè¿™æˆ¿å­åˆ°æœŸå°± ğŸ‘‹ğŸ» å§ ğŸ‘µğŸ»ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªå€’éœ‰ ğŸ¥š å…¥å‘ã€‚ ","date":"2023-02-01","objectID":"/blog/:1:1","tags":["è°ˆäººç”Ÿ"],"title":"åšä¸ªä¿—äººï¼Œè´ªè´¢å¥½è‰²","uri":"/blog/"},{"categories":null,"content":"å…³äº LoveIt","date":"2019-08-02","objectID":"/about/","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":" Â LoveIt æ˜¯ä¸€ä¸ªç”± â€‰Dillon å¼€å‘çš„ç®€æ´ã€ä¼˜é›…ä¸”é«˜æ•ˆçš„ Hugo åšå®¢ä¸»é¢˜ã€‚ å®ƒçš„åŸå‹åŸºäº LeaveIt ä¸»é¢˜ å’Œ KeepIt ä¸»é¢˜ã€‚ Hugo ä¸»é¢˜ LoveIt ","date":"2019-08-02","objectID":"/about/:0:0","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"ç‰¹æ€§ ","date":"2019-08-02","objectID":"/about/:1:0","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"æ€§èƒ½å’Œ SEO Â æ€§èƒ½ä¼˜åŒ–ï¼šåœ¨ Google PageSpeed Insights ä¸­ï¼Œ 99/100 çš„ç§»åŠ¨è®¾å¤‡å¾—åˆ†å’Œ 100/100 çš„æ¡Œé¢è®¾å¤‡å¾—åˆ† Â ä½¿ç”¨åŸºäº JSON-LD æ ¼å¼ çš„ SEO SCHEMA æ–‡ä»¶è¿›è¡Œ SEO ä¼˜åŒ– Â æ”¯æŒ Google Analytics Â æ”¯æŒ Fathom Analytics Â æ”¯æŒ Plausible Analytics Â æ”¯æŒ Yandex Metrica Â æ”¯æŒæœç´¢å¼•æ“çš„ç½‘ç«™éªŒè¯ (Google, Bind, Yandex and Baidu) Â æ”¯æŒæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“çš„ CDN Â åŸºäº lazysizes è‡ªåŠ¨è½¬æ¢å›¾ç‰‡ä¸ºæ‡’åŠ è½½ ","date":"2019-08-02","objectID":"/about/:1:1","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"å¤–è§‚å’Œå¸ƒå±€ Â æ¡Œé¢ç«¯/ç§»åŠ¨ç«¯ å“åº”å¼å¸ƒå±€ Â æµ…è‰²/æ·±è‰² ä¸»é¢˜æ¨¡å¼ Â å…¨å±€ä¸€è‡´çš„è®¾è®¡è¯­è¨€ Â æ”¯æŒåˆ†é¡µ Â æ˜“ç”¨å’Œè‡ªåŠ¨å±•å¼€çš„æ–‡ç« ç›®å½• Â æ”¯æŒå¤šè¯­è¨€å’Œå›½é™…åŒ– Â ç¾è§‚çš„ CSS åŠ¨ç”» ç¤¾äº¤å’Œè¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Gravatar å¤´åƒ Â æ”¯æŒæœ¬åœ°å¤´åƒ Â æ”¯æŒå¤šè¾¾ 73 ç§ç¤¾äº¤é“¾æ¥ Â æ”¯æŒå¤šè¾¾ 24 ç§ç½‘ç«™åˆ†äº« Â æ”¯æŒ Disqus è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Gitalk è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Valine è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Facebook comments è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Telegram comments è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Commento è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ utterances è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ giscus è¯„è®ºç³»ç»Ÿ ","date":"2019-08-02","objectID":"/about/:1:2","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"æ‰©å±•åŠŸèƒ½ Â æ”¯æŒåŸºäº Lunr.js æˆ– algolia çš„æœç´¢ Â æ”¯æŒ Twemoji Â æ”¯æŒä»£ç é«˜äº® Â ä¸€é”®å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ Â æ”¯æŒåŸºäº lightGallery çš„å›¾ç‰‡ç”»å»Š Â æ”¯æŒ Font Awesome å›¾æ ‡çš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒä¸Šæ ‡æ³¨é‡Šçš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒåˆ†æ•°çš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒåŸºäº $\\KaTeX$ çš„æ•°å­¦å…¬å¼ Â æ”¯æŒåŸºäº mermaid çš„å›¾è¡¨ shortcode Â æ”¯æŒåŸºäº ECharts çš„äº¤äº’å¼æ•°æ®å¯è§†åŒ– shortcode Â æ”¯æŒåŸºäº Mapbox GL JS çš„ Mapbox shortcode Â æ”¯æŒåŸºäº APlayer å’Œ MetingJS çš„éŸ³ä¹æ’­æ”¾å™¨ shortcode Â æ”¯æŒ Bilibili è§†é¢‘ shortcode Â æ”¯æŒå¤šç§æ³¨é‡Šçš„ shortcode Â æ”¯æŒè‡ªå®šä¹‰æ ·å¼çš„ shortcode Â æ”¯æŒè‡ªå®šä¹‰è„šæœ¬çš„ shortcode Â æ”¯æŒåŸºäº TypeIt çš„æ‰“å­—åŠ¨ç”» shortcode Â æ”¯æŒåŸºäº cookieconsent çš„ Cookie è®¸å¯æ¨ªå¹… Â æ”¯æŒäººç‰©æ ‡ç­¾çš„ shortcode â€¦ ","date":"2019-08-02","objectID":"/about/:1:3","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"è®¸å¯åè®® LoveIt æ ¹æ® MIT è®¸å¯åè®®æˆæƒã€‚ æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ LICENSE æ–‡ä»¶ã€‚ ","date":"2019-08-02","objectID":"/about/:2:0","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"ç‰¹åˆ«æ„Ÿè°¢ LoveIt ä¸»é¢˜ä¸­ç”¨åˆ°äº†ä»¥ä¸‹é¡¹ç›®ï¼Œæ„Ÿè°¢å®ƒä»¬çš„ä½œè€…ï¼š normalize.css Font Awesome Simple Icons Animate.css autocomplete Lunr.js algoliasearch lazysizes object-fit-images Twemoji emoji-data lightGallery clipboard.js Sharer.js TypeIt $\\KaTeX$ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/about/:3:0","tags":null,"title":"å…³äº LoveIt","uri":"/about/"}]