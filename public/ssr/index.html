<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>ğŸ‘©â€ğŸ’» åŸºäº Nextjs &#43; Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜ - OweQian</title><meta name="Description" content="Hugo theme - LoveIt"><meta property="og:title" content="ğŸ‘©â€ğŸ’» åŸºäº Nextjs &#43; Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜" />
<meta property="og:description" content="é¡¹ç›®åœ°å€ï¼š SSR" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://oweqian.xyz/ssr/" /><meta property="og:image" content="http://oweqian.xyz/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-20T11:25:47+08:00" />
<meta property="article:modified_time" content="2023-03-16T11:21:02+08:00" /><meta property="og:site_name" content="OweQian" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://oweqian.xyz/logo.png"/>

<meta name="twitter:title" content="ğŸ‘©â€ğŸ’» åŸºäº Nextjs &#43; Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜"/>
<meta name="twitter:description" content="é¡¹ç›®åœ°å€ï¼š SSR"/>
<meta name="application-name" content="OweQian">
<meta name="apple-mobile-web-app-title" content="OweQian"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://oweqian.xyz/ssr/" /><link rel="prev" href="http://oweqian.xyz/draw/" /><link rel="next" href="http://oweqian.xyz/souldance/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "ğŸ‘©â€ğŸ’» åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/oweqian.xyz\/ssr\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/oweqian.xyz\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "ç¬¬ä¸€æŠ€èƒ½","wordcount":  32601 ,
        "url": "http:\/\/oweqian.xyz\/ssr\/","datePublished": "2023-02-20T11:25:47+08:00","dateModified": "2023-03-16T11:21:02+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "http:\/\/oweqian.xyz\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "OweQian"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="OweQian"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>OweQian</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ‰€æœ‰æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><a class="menu-item" href="https://github.com/OweQian" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="OweQian"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>OweQian</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ‰€æœ‰æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a class="menu-item" href="https://github.com/OweQian" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ğŸ‘©â€ğŸ’» åŸºäº Nextjs + Strapi çš„å®˜ç½‘å¼€å‘å®æˆ˜</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>OweQian</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E7%AC%AC%E4%B8%80%E6%8A%80%E8%83%BD/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>ç¬¬ä¸€æŠ€èƒ½</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-02-20">2023-02-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;çº¦ 32601 å­—&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;é¢„è®¡é˜…è¯» 66 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#æ­å»º-client-é¡¹ç›®">æ­å»º Client é¡¹ç›®</a>
      <ul>
        <li><a href="#é¡¹ç›®åˆå§‹åŒ–">é¡¹ç›®åˆå§‹åŒ–</a></li>
        <li><a href="#ä»£ç -lint">ä»£ç  Lint</a></li>
        <li><a href="#æ¨¡å—åŒ–ä»£ç æç¤º">æ¨¡å—åŒ–ä»£ç æç¤º</a></li>
        <li><a href="#æœåŠ¡ç«¯è°ƒè¯•èƒ½åŠ›">æœåŠ¡ç«¯è°ƒè¯•èƒ½åŠ›</a></li>
      </ul>
    </li>
    <li><a href="#å®ç°é¡µé¢é“¾è·¯">å®ç°é¡µé¢é“¾è·¯</a>
      <ul>
        <li><a href="#æ¨¡æ¿é¡µé¢æ¸²æŸ“">æ¨¡æ¿é¡µé¢æ¸²æŸ“</a>
          <ul>
            <li><a href="#é€šç”¨-layout">é€šç”¨ layout</a>
              <ul>
                <li><a href="#é¡µé¦–ç»„ä»¶">é¡µé¦–ç»„ä»¶</a></li>
                <li><a href="#é¡µå°¾ç»„ä»¶">é¡µå°¾ç»„ä»¶</a></li>
                <li><a href="#layout-ç»„ä»¶">layout ç»„ä»¶</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#æ•°æ®æ³¨å…¥">æ•°æ®æ³¨å…¥</a></li>
        <li><a href="#è·¯ç”±åŒ¹é…">è·¯ç”±åŒ¹é…</a></li>
        <li><a href="#header-ä¿®æ”¹">header ä¿®æ”¹</a></li>
      </ul>
    </li>
    <li><a href="#æ­å»º-server-é¡¹ç›®">æ­å»º Server é¡¹ç›®</a>
      <ul>
        <li><a href="#é¡¹ç›®åˆå§‹åŒ–-1">é¡¹ç›®åˆå§‹åŒ–</a></li>
        <li><a href="#æ•°æ®å¯è§†åŒ–é…ç½®">æ•°æ®å¯è§†åŒ–é…ç½®</a>
          <ul>
            <li><a href="#ç»“æ„ä½“å®šä¹‰">ç»“æ„ä½“å®šä¹‰</a></li>
            <li><a href="#ç»“æ„ä½“æ•°æ®å†™å…¥">ç»“æ„ä½“æ•°æ®å†™å…¥</a></li>
            <li><a href="#æƒé™é…ç½®åŠä¸Šçº¿">æƒé™é…ç½®åŠä¸Šçº¿</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#bff-æ•°æ®æµè½¬">BFF æ•°æ®æµè½¬</a>
      <ul>
        <li><a href="#cms-æ¥å£ä¼˜åŒ–">CMS æ¥å£ä¼˜åŒ–</a>
          <ul>
            <li><a href="#è‡ªå®šä¹‰è¿”å›">è‡ªå®šä¹‰è¿”å›</a></li>
            <li><a href="#å¢åŠ è·¨åŸŸé™åˆ¶">å¢åŠ è·¨åŸŸé™åˆ¶</a></li>
          </ul>
        </li>
        <li><a href="#bff-æ¥å£å®šä¹‰">BFF æ¥å£å®šä¹‰</a></li>
      </ul>
    </li>
    <li><a href="#ä¸»é¢˜åŒ–åŠŸèƒ½">ä¸»é¢˜åŒ–åŠŸèƒ½</a>
      <ul>
        <li><a href="#åŸºç¡€è‰²è°ƒå˜é‡æŠ½ç¦»">åŸºç¡€è‰²è°ƒå˜é‡æŠ½ç¦»</a></li>
        <li><a href="#å›¾ç‰‡ä¸»é¢˜åŒ–é…ç½®">å›¾ç‰‡ä¸»é¢˜åŒ–é…ç½®</a></li>
        <li><a href="#ä¸»é¢˜æ•°æ®æ³¨å…¥">ä¸»é¢˜æ•°æ®æ³¨å…¥</a></li>
        <li><a href="#å¤šè¿›ç¨‹åœºæ™¯ä¸‹ä¸»é¢˜åŒæ­¥">å¤šè¿›ç¨‹åœºæ™¯ä¸‹ä¸»é¢˜åŒæ­¥</a></li>
        <li><a href="#é—ªçƒåœºæ™¯ä¼˜åŒ–">é—ªçƒåœºæ™¯ä¼˜åŒ–</a></li>
      </ul>
    </li>
    <li><a href="#å¸§åŠ¨ç”»åŠŸèƒ½">å¸§åŠ¨ç”»åŠŸèƒ½</a>
      <ul>
        <li><a href="#ä¸»åŠ¨è§¦å‘åŠ¨ç”»é‡æ–°æ’­æ”¾">ä¸»åŠ¨è§¦å‘åŠ¨ç”»é‡æ–°æ’­æ”¾</a></li>
      </ul>
    </li>
    <li><a href="#å¤šåª’ä½“é€‚é…">å¤šåª’ä½“é€‚é…</a>
      <ul>
        <li><a href="#px-è½¬-rem">Px è½¬ Rem</a></li>
        <li><a href="#css-å¤šåª’ä½“è®¾å¤‡é€‚é…">CSS å¤šåª’ä½“è®¾å¤‡é€‚é…</a></li>
        <li><a href="#context-æ³¨å…¥è®¾å¤‡ä¿¡æ¯">Context æ³¨å…¥è®¾å¤‡ä¿¡æ¯</a></li>
        <li><a href="#æœåŠ¡ç«¯åˆ¤å®šè®¾å¤‡ä¿¡æ¯">æœåŠ¡ç«¯åˆ¤å®šè®¾å¤‡ä¿¡æ¯</a></li>
      </ul>
    </li>
    <li><a href="#ä¸šåŠ¡åŠŸèƒ½å®ç°">ä¸šåŠ¡åŠŸèƒ½å®ç°</a>
      <ul>
        <li><a href="#æ–‡ç« é¡µåˆ†é¡µ">æ–‡ç« é¡µåˆ†é¡µ</a>
          <ul>
            <li><a href="#æ ·å¼å®ç°">æ ·å¼å®ç°</a></li>
            <li><a href="#æ¥å£å±‚å®ç°">æ¥å£å±‚å®ç°</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#å›½é™…åŒ–åŠŸèƒ½">å›½é™…åŒ–åŠŸèƒ½</a></li>
    <li><a href="#è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶">è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶</a>
      <ul>
        <li><a href="#é™æ€æ ·å¼">é™æ€æ ·å¼</a></li>
        <li><a href="#é®ç½©å±‚æ»šåŠ¨ç©¿é€">é®ç½©å±‚æ»šåŠ¨ç©¿é€</a></li>
        <li><a href="#æŒ‡å®šæ¸²æŸ“ä½ç½®">æŒ‡å®šæ¸²æŸ“ä½ç½®</a></li>
        <li><a href="#åŠ¨ç”»å®ç°">åŠ¨ç”»å®ç°</a></li>
      </ul>
    </li>
    <li><a href="#å›¾ç‰‡ä¼˜åŒ–">å›¾ç‰‡ä¼˜åŒ–</a>
      <ul>
        <li><a href="#é™æ€æ ·å¼-1">é™æ€æ ·å¼</a></li>
        <li><a href="#navigatorconnectioneffectivetype">navigator.connection.effectiveType</a></li>
        <li><a href="#responsive-images--picture">responsive images / picture</a></li>
        <li><a href="#webpæ¨è">webp(æ¨è)</a></li>
      </ul>
    </li>
    <li><a href="#ios-300ms-delay">IOS 300ms delay</a>
      <ul>
        <li><a href="#meta-ç¦ç”¨ç¼©æ”¾æ¨è">Meta ç¦ç”¨ç¼©æ”¾(æ¨è)</a></li>
        <li><a href="#æ›´æ”¹è§†å£å°ºå¯¸">æ›´æ”¹è§†å£å°ºå¯¸</a></li>
        <li><a href="#touch-action">Touch-action</a></li>
        <li><a href="#fastclick">fastclick</a></li>
      </ul>
    </li>
    <li><a href="#æ©¡çš®ç­‹é—®é¢˜">æ©¡çš®ç­‹é—®é¢˜</a>
      <ul>
        <li><a href="#overflow-ç»™å®šå®½é«˜">overflow ç»™å®šå®½é«˜</a></li>
        <li><a href="#ç¦ç”¨-touchmove-äº‹ä»¶">ç¦ç”¨ touchmove äº‹ä»¶</a></li>
        <li><a href="#ç›‘å¬æ»šåŠ¨ç¦æ­¢">ç›‘å¬æ»šåŠ¨ç¦æ­¢</a></li>
        <li><a href="#ç®€å•æ–¹æ¡ˆæ¨è">ç®€å•æ–¹æ¡ˆ(æ¨è)</a></li>
      </ul>
    </li>
    <li><a href="#å‰ç«¯å‹åŠ›æµ‹è¯•">å‰ç«¯å‹åŠ›æµ‹è¯•</a>
      <ul>
        <li><a href="#webbench">WebBench</a></li>
        <li><a href="#wrk">wrk</a></li>
        <li><a href="#autocannon">autocannon</a></li>
      </ul>
    </li>
    <li><a href="#æé«˜æœç´¢å¼•æ“æ’å">æé«˜æœç´¢å¼•æ“æ’å</a>
      <ul>
        <li><a href="#æŠ€æœ¯ä¼˜åŒ–">æŠ€æœ¯ä¼˜åŒ–</a>
          <ul>
            <li><a href="#è¯­ä¹‰åŒ–æ ‡ç­¾">è¯­ä¹‰åŒ–æ ‡ç­¾</a></li>
            <li><a href="#meta">Meta</a></li>
            <li><a href="#sitemap">Sitemap</a></li>
          </ul>
        </li>
        <li><a href="#å†…å®¹ä¼˜åŒ–">å†…å®¹ä¼˜åŒ–</a>
          <ul>
            <li><a href="#sem">SEM</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#ç½‘ç«™æœåŠ¡éƒ¨ç½²">ç½‘ç«™æœåŠ¡éƒ¨ç½²</a>
      <ul>
        <li><a href="#æœåŠ¡éƒ¨ç½²">æœåŠ¡éƒ¨ç½²</a></li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>é¡¹ç›®åœ°å€ï¼š <a href="https://github.com/OweQian/SSR.git" target="_blank" rel="noopener noreffer ">SSR</a></p>
<h2 id="æ­å»º-client-é¡¹ç›®">æ­å»º Client é¡¹ç›®</h2>
<h3 id="é¡¹ç›®åˆå§‹åŒ–">é¡¹ç›®åˆå§‹åŒ–</h3>
<p>å…ˆå¯¹é¡¹ç›®è¿›è¡Œåˆå§‹åŒ–ï¼ŒNextjs æä¾›äº†è„šæ‰‹æ¶æ¥å¸®åŠ©åˆå§‹åŒ–é¡¹ç›®ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npx create-next-app@latest --typescript
</span></span></code></pre></td></tr></table>
</div>
</div><p>next.config.js æ˜¯æ„å»ºé…ç½®ï¼Œåº•å±‚æ˜¯åŸºäº Webpack å»æ‰“åŒ…çš„ï¼Œåœ¨é»˜è®¤çš„é…ç½®ä¸ŠåŠ ä¸Šä¸‹é¢çš„é…ç½®æ¥æä¾›åˆ«åçš„èƒ½åŠ›ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/** @type {import(&#39;next&#39;).NextConfig} */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;path&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">nextConfig</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">reactStrictMode</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">swcMinify</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">nextConfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>tsconfig.json ä¸­éœ€è¦åŠ ä¸€ä¸‹å¯¹åº”çš„åˆ«åè§£æè¯†åˆ«ï¼ˆbaseurl , pathsï¼‰ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;compilerOptions&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="s2">&#34;es5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;lib&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;dom&#34;</span><span class="p">,</span> <span class="s2">&#34;dom.iterable&#34;</span><span class="p">,</span> <span class="s2">&#34;esnext&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;allowJs&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;skipLibCheck&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;strict&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;forceConsistentCasingInFileNames&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;noEmit&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;esModuleInterop&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;esnext&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;moduleResolution&#34;</span><span class="p">:</span> <span class="s2">&#34;node&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;resolveJsonModule&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;isolatedModules&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;jsx&#34;</span><span class="p">:</span> <span class="s2">&#34;preserve&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;incremental&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;baseUrl&#34;</span><span class="p">:</span> <span class="s2">&#34;./&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;paths&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;@/*&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;./*&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;include&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;next-env.d.ts&#34;</span><span class="p">,</span> <span class="s2">&#34;**/*.ts&#34;</span><span class="p">,</span> <span class="s2">&#34;**/*.tsx&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;exclude&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;node_modules&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm run dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨ï¼šå¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œè¯·å°†ä½ çš„ node ç‰ˆæœ¬å‡çº§åˆ° 18+ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img.png" alt="" width="700" />  
<p>æ‰“å¼€ http://localhost:3000 å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé»˜è®¤æœåŠ¡å™¨ç«¯æ¸²æŸ“é¡µé¢:</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_1.png" alt="" width="700" />  
<h3 id="ä»£ç -lint">ä»£ç  Lint</h3>
<p>Nextjs å†…ç½®äº†å¼€ç®±çš„ eslint èƒ½åŠ›ï¼Œä¸éœ€è¦è‡ªå·±è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„è„šæœ¬æ¥è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ lintã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm run lint
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¨¡å—åŒ–ä»£ç æç¤º">æ¨¡å—åŒ–ä»£ç æç¤º</h3>
<p>ä½¿ç”¨ sass ç­‰è¶…ç±»æ¥æ›¿ä»£ cssï¼Œç›¸æ¯” cssï¼Œsass ç­‰è¶…ç±»æä¾›äº†å˜é‡å®šä¹‰å’Œå‡½æ•°çš„èƒ½åŠ›ï¼Œå¯ä»¥é¿å…ä¸€äº›é‡å¤çš„ css ä»£ç ï¼Œä½¿æ ·å¼çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§æ›´é«˜ã€‚</p>
<p>Nextjs å·²ç»æä¾›äº†å¯¹ css å’Œ sass çš„æ”¯æŒï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸‹ sass çš„ä¾èµ–å³å¯:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install sass --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>é’ˆå¯¹ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œéœ€è¦å®šä¹‰å¤šçº§åµŒå¥—çš„ç»„ä»¶æ¥æé«˜é¡µé¢å¤ç”¨æ€§ï¼Œç»„ä»¶ä¹‹é—´çš„æ ·å¼å‘½åå¾ˆå®¹æ˜“é‡å¤ï¼Œé’ˆå¯¹éç»„ä»¶åº“çš„ä¸šåŠ¡ä»£ç ï¼Œé€šå¸¸ä¼šä½¿ç”¨ css æ¨¡å—åŒ–æ¥è¿›è¡Œç›¸å…³çš„æ ·å¼å®šä¹‰ã€‚</p>
<p>æ¨¡å—åŒ–ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å°†æ ·å¼çš„ç±»ååŠ ä¸Šå¯¹åº”å”¯ä¸€çš„å“ˆå¸Œå€¼æ¥è¿›è¡ŒåŒºåˆ†ï¼Œä»è€Œè§£å†³æ ·å¼ç±»åé‡å¤çš„é—®é¢˜ã€‚</p>
<p>Nextjs å·²ç»å†…ç½®äº†è¿™éƒ¨åˆ†èƒ½åŠ›ï¼Œåªéœ€è¦å°†ç±»åå®šä¹‰ä¸º [name].module.scssã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FC</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s2">&#34;./index.module.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">Demo</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">IProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">demo</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;</span><span class="nx">demo</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_2.png" alt="" width="700" />  
<h3 id="æœåŠ¡ç«¯è°ƒè¯•èƒ½åŠ›">æœåŠ¡ç«¯è°ƒè¯•èƒ½åŠ›</h3>
<p>æœåŠ¡å™¨æ¸²æŸ“ä¸€ä¸ªé™æ€é¡µé¢ï¼Œè¯·æ±‚ä¼šåœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œå°†æ•°æ®æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œæ„å‘³ç€è¿™éƒ¨åˆ†é€»è¾‘å¹¶ä¸åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æœåŠ¡ç«¯æ‰§è¡Œæ—¶ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ç”¨ Chrome çš„ network æ¥è°ƒè¯•ï¼Œå®ƒåªèƒ½è°ƒè¯•ç›´æ¥åœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„è„šæœ¬ã€‚</p>
<p>Nextjs ä¹Ÿæœ‰å†…ç½®ç›¸å…³çš„è°ƒè¯•èƒ½åŠ›æ¥å¸®åŠ©è¿›è¡Œè°ƒè¯•ï¼Œåªéœ€è¦ä¸º dev å‘½ä»¤åŠ ä¸€ä¸ª &ndash;inspect çš„ node option å°±è¡Œã€‚</p>
<p>é¦–å…ˆæ¥å®‰è£… cross-env çš„ä¾èµ–æ¥æ”¯æŒè·¨å¹³å°çš„ç¯å¢ƒå˜é‡æ·»åŠ ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install cross-env --save-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååœ¨ package.json ä¸­ï¼ŒåŠ ä¸€æ¡ debugger çš„å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="s2">&#34;next dev&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;debugger&#34;</span><span class="p">:</span> <span class="s2">&#34;cross-env NODE_OPTIONS=&#39;--inspect&#39; next dev&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm run debugger
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‡æ–°æ‰“å¼€ http://localhost:3000ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„ nodejs çš„å°å›¾æ ‡ï¼Œç‚¹å¼€ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ networkï¼Œè¿™ä¸ªå°±æ˜¯æœåŠ¡å™¨ç«¯ server çš„ networkï¼ŒæœåŠ¡å™¨ç«¯æ‰§è¡Œçš„ç›¸å…³ä»£ç æ–­ç‚¹å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œè°ƒè¯•ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_3.png" alt="" width="700" />  
<h2 id="å®ç°é¡µé¢é“¾è·¯">å®ç°é¡µé¢é“¾è·¯</h2>
<p>ä¸»ä½“ä¸Šåˆ†ä¸ºæ¨¡æ¿é¡µé¢æ¸²æŸ“ã€è·¯ç”±åŒ¹é…å’Œ header ä¿®æ”¹ä¸‰ä¸ªæ¨¡å—ï¼Œæ¨¡æ¿é¡µé¢æ¸²æŸ“æ˜¯é¡µé¢æ¸²æŸ“çš„ä¸»è¦éƒ¨åˆ†ï¼ŒåŒ…å«äº†é™æ€æ¨¡æ¿çš„ç”Ÿæˆå’Œé¡µé¢æ•°æ®çš„æ³¨å…¥ï¼Œæœ€åå½¢æˆæœåŠ¡ç«¯è¿”å›çš„ HTML æ–‡æœ¬ã€‚</p>
<h3 id="æ¨¡æ¿é¡µé¢æ¸²æŸ“">æ¨¡æ¿é¡µé¢æ¸²æŸ“</h3>
<h4 id="é€šç”¨-layout">é€šç”¨ layout</h4>
<p>web åº”ç”¨çš„è·¯ç”±é¡µé¢ä¹‹é—´é€šå¸¸ä¼šæœ‰å…±åŒçš„é¡µé¢å…ƒç´ ï¼Œå¦‚é¡µé¦–ã€é¡µå°¾ã€‚</p>
<p>å¯¹äºè¿™ç§é¡µé¢ï¼Œé€šå¸¸ä¼šå®šä¹‰å¯¹åº”çš„ç»„ä»¶åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œè¿™æ ·æ‰€æœ‰çš„é¡µé¢å°±éƒ½å¯ä»¥æœ‰ç›¸åŒçš„é¡µé¢ç»„ä»¶äº†ï¼Œä¸åœ¨éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­å»å•ç‹¬è°ƒç”¨ã€‚</p>
<p>åœ¨å†™é¡µé¢ä¹‹å‰ï¼Œå…ˆå®‰è£…ç±»ååº“ classnamesï¼Œå®ƒå¯ä»¥ç”¨å‡½æ•°å¼çš„æ–¹å¼æ¥å¤„ç†ä¸€äº›ç›¸å¯¹å¤æ‚çš„ç±»åœºæ™¯ï¼Œåç»­ä¼šæœ‰å¤§é‡åº”ç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install classnames --save
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="é¡µé¦–ç»„ä»¶">é¡µé¦–ç»„ä»¶</h5>
<p>client/components/navbar/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FC</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Image</span> <span class="kr">from</span> <span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">LogoLight</span> <span class="kr">from</span> <span class="s1">&#39;@/public/logo_light.png&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">INavBarProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">NavBar</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">INavBarProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">navBar</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://localhost:3000/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Image</span> <span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">LogoLight</span><span class="p">}</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">width</span><span class="o">=</span><span class="p">{</span><span class="mi">70</span><span class="p">}</span> <span class="na">height</span><span class="o">=</span><span class="p">{</span><span class="mi">20</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>client/components/navbar/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.navBar</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">hsla</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="kt">%</span><span class="o">,</span><span class="mi">100</span><span class="kt">%</span><span class="o">,.</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">backdrop-filter</span><span class="o">:</span> <span class="nf">blur</span><span class="p">(</span><span class="mi">8</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">64</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">sticky</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="mi">32</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>next/image å†…ç½®çš„ Image æ ‡ç­¾ï¼Œç›¸æ¯”å¹³å¸¸çš„ img æ ‡ç­¾ï¼Œä¼šæ ¹æ®å¯¼å…¥çš„å›¾åƒæ¥ç¡®è®¤å®½é«˜ï¼Œä»è€Œè§„é¿ç´¯ç§¯å¸ƒå±€ç§»ä½ (CLS) çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨å¸ƒå±€é˜¶æ®µæå‰è¿›è¡Œç›¸å…³åŒºåŸŸé¢„ç•™ä½ç½®ï¼Œè€Œä¸æ˜¯åŠ è½½ä¸­å†è¿›è¡Œç§»ä½ã€‚</p>
<h5 id="é¡µå°¾ç»„ä»¶">é¡µå°¾ç»„ä»¶</h5>
<p>client/components/footer/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FC</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Image</span> <span class="kr">from</span> <span class="s1">&#39;next/image&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">PublicLogo</span> <span class="kr">from</span> <span class="s1">&#39;@/public/public_logo.png&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">ILink</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">link?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">ILinkList</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span>: <span class="kt">ILink</span><span class="p">[];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IQRCode</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">image</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">text</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IFooterProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">linkList</span>: <span class="kt">ILinkList</span><span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="nx">qrCode</span>: <span class="kt">IQRCode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">copyRight</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">siteNumber</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">publicNumber</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Footer</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">IFooterProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">linkList</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">qrCode</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">copyRight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">siteNumber</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">publicNumber</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">footer</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">topArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">footerTitle</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">linkListArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">linkList</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">linkArea</span><span class="p">}</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">links</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                      <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">_item</span><span class="p">,</span> <span class="nx">_index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">link</span><span class="p">]</span><span class="o">:</span> <span class="nx">_item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">disabled</span><span class="p">]</span><span class="o">:</span> <span class="o">!</span><span class="nx">_item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="p">})}</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">_index</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">_item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">                            <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                              <span class="nx">_item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">);</span>
</span></span><span class="line"><span class="cl">                          <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">{</span><span class="nx">_item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">)</span>
</span></span><span class="line"><span class="cl">                      <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">bottomArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">codeArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Image</span> <span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">qrCode</span><span class="o">?</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span> <span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">qrCode</span><span class="o">?</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span> <span class="na">width</span><span class="o">=</span><span class="p">{</span><span class="mi">56</span><span class="p">}</span> <span class="na">height</span><span class="o">=</span><span class="p">{</span><span class="mi">56</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">qrCode</span><span class="o">?</span><span class="p">.</span><span class="nx">text</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">numArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{</span><span class="nx">copyRight</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{</span><span class="nx">siteNumber</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">publicLogo</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logo</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">Image</span> <span class="na">src</span><span class="o">=</span><span class="p">{</span><span class="nx">PublicLogo</span><span class="p">}</span> <span class="na">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">publicNumber</span><span class="p">}</span> <span class="na">width</span><span class="o">=</span><span class="p">{</span><span class="mi">20</span><span class="p">}</span> <span class="na">height</span><span class="o">=</span><span class="p">{</span><span class="mi">20</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;{</span><span class="nx">publicNumber</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Footer</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>client/components/footer/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">70</span><span class="kt">px</span> <span class="mi">145</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#f4f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.topArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.footerTitle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">36</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">36</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.linkListArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.linkArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-left</span><span class="o">:</span> <span class="mi">160</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">40</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.links</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.link</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.disabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">not-allowed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.bottomArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.codeArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">color</span><span class="o">:</span> <span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.numArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">flex-end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nt">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.publicLogo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-right</span><span class="o">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="layout-ç»„ä»¶">layout ç»„ä»¶</h5>
<p>client/components/layout/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FC</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">IFooterProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/footer&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Footer</span> <span class="kr">from</span> <span class="s1">&#39;@/components/footer&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">INavBarProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/navbar&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">NavBar</span> <span class="kr">from</span> <span class="s1">&#39;@/components/navbar&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">ILayoutProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">navbarData</span>: <span class="kt">INavBarProps</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">footerData</span>: <span class="kt">IFooterProps</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Layout</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">ILayoutProps</span> <span class="err">&amp;</span> <span class="p">{</span><span class="na">children</span><span class="err">:</span> <span class="na">JSX.Element</span><span class="p">}&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span><span class="p">,</span> <span class="nx">children</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">layout</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">NavBar</span> <span class="p">{</span><span class="na">...navbarData</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">}&gt;{</span><span class="nx">children</span><span class="p">}&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Footer</span> <span class="p">{</span><span class="na">...footerData</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Layout</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>client/components/layout/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.layout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-height</span><span class="o">:</span> <span class="nf">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">vh</span> <span class="o">-</span> <span class="mi">560</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®šä¹‰å¥½ layoutï¼ŒæŠŠ layout å¡è¿›å…¥å£æ–‡ä»¶ï¼ŒNextjs çš„å…¥å£æ–‡ä»¶æ˜¯ pagesä¸‹çš„ _app.tsxï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ•°æ®æ³¨å…¥">æ•°æ®æ³¨å…¥</h3>
<p>åœ¨ Nextjs ä¸­å®ç°æ•°æ®æ³¨å…¥çš„æ–¹å¼åˆ†åˆ«æ˜¯ getStaticPropsã€getServerSideProps å’Œ getInitialPropsã€‚</p>
<ul>
<li>getStaticPropsï¼šå¤šç”¨äºé™æ€é¡µé¢çš„æ¸²æŸ“ï¼Œåªä¼šåœ¨ç”Ÿäº§ä¸­æ‰§è¡Œï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶å†æ¬¡è°ƒç”¨ï¼Œæ„å‘³ç€å®ƒåªèƒ½ç”¨äºä¸å¸¸ç¼–è¾‘çš„éƒ¨åˆ†ï¼Œæ¯æ¬¡è°ƒæ•´éƒ½éœ€è¦é‡æ–°æ„å»ºéƒ¨ç½²ï¼Œå®˜ç½‘ä¿¡æ¯çš„æ—¶æ•ˆæ€§æ¯”è¾ƒæ•æ„Ÿï¼Œåªä¼šæœ‰å°‘éƒ¨åˆ†åº”ç”¨åˆ° getStaticPropsï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ²¡ç”¨ï¼Œåœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹ä¼šæœ‰å¥‡æ•ˆã€‚</li>
<li>getServerSidePropsï¼šåªä¼šæ‰§è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸ä¼šåœ¨å®¢æˆ·ç«¯æ‰§è¡Œã€‚å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯çš„è„šæœ¬æ‰“åŒ…ä¼šè¾ƒå°ï¼Œç›¸å…³æ•°æ®ä¸ä¼šæœ‰åœ¨å®¢æˆ·ç«¯æš´éœ²çš„é—®é¢˜ï¼Œç›¸å¯¹æ›´éšè”½å®‰å…¨ï¼Œä¸è¿‡é€»è¾‘é›†ä¸­åœ¨æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œä¼šåŠ é‡æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼ŒæœåŠ¡å™¨æˆæœ¬ä¹Ÿä¼šæ›´é«˜ã€‚</li>
<li>getInitialProps(æ¨è)ï¼šåˆå§‹åŒ–æ—¶ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨ç«¯è·¯ç”±ï¼Œæ•°æ®çš„æ³¨å…¥ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œå¯¹ SEO å‹å¥½ï¼Œåœ¨å®é™…çš„é¡µé¢æ“ä½œä¸­ï¼Œç›¸å…³çš„é€»è¾‘ä¼šåœ¨å®¢æˆ·ç«¯ æ‰§è¡Œï¼Œä»è€Œå‡è½»äº†æœåŠ¡å™¨ç«¯çš„è´Ÿæ‹…ã€‚</li>
</ul>
<p>æ•°æ®çš„æ³¨å…¥éƒ½æ˜¯é’ˆå¯¹é¡µé¢çš„ï¼Œä¹Ÿå°±æ˜¯ pages ç›®å½•ä¸‹ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæ•°æ®æ³¨å…¥æ˜¯ä¸æ”¯æŒçš„ï¼Œæ‰€ä»¥åº”åœ¨é¡µé¢ä¸­æ³¨å…¥å¯¹åº”æ•°æ®åå†é€ä¼ ç»™é¡µé¢ç»„ä»¶ã€‚</p>
<p>_app.tsx æ˜¯æ‰€æœ‰é¡µé¢çš„å…¥å£é¡µé¢ï¼Œæ‰€ä»¥å…¶å®ƒé¡µé¢çš„å‚æ•°ä¹Ÿéœ€è¦é€ä¼ ä¸‹æ¥ï¼Œå¯ä»¥ç”¨å†…ç½®çš„ App å¯¹è±¡æ¥è·å–å¯¹åº”ç»„ä»¶æœ¬èº«çš„ pagePropsï¼Œä¸è¦ç›´æ¥è¦†ç›–ï¼Œå¯¹äºéå…¥å£é¡µé¢çš„æ™®é€šé¡µé¢ï¼Œç›´æ¥åŠ ä¸Šä¸šåŠ¡é€»è¾‘å°±å¯ä»¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Code</span> <span class="kr">from</span> <span class="s1">&#39;@/public/code.png&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">navbarData</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">footerData</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Demo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">linkList</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;æŠ€æœ¯æ ˆ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;react&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;typescript&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;ssr&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;nodejs&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;äº†è§£æ›´å¤š&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ˜é‡‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://juejin.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;çŸ¥ä¹&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://www.zhihu.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;csdn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;è”ç³»æˆ‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;å¾®ä¿¡&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;QQ&#34;</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">qrCode</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">image</span>: <span class="kt">Code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;ç‹å°ç™½å­¦å‰ç«¯&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">copyRight</span><span class="o">:</span> <span class="s2">&#34;Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">siteNumber</span><span class="o">:</span> <span class="s2">&#34;å†€ICPå¤‡XXXXXXXXå·-X&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">publicNumber</span><span class="o">:</span> <span class="s2">&#34;å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è·¯ç”±åŒ¹é…">è·¯ç”±åŒ¹é…</h3>
<p>Nextjs çš„è·¯ç”±ä¸åŒäºä¸€èˆ¬ä½¿ç”¨çš„è·¯ç”±ï¼Œå®ƒæ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶å»é…ç½®å¯¹åº”çš„è·¯ç”±ï¼Œä¼šæ ¹æ®ç›¸å¯¹ pages çš„ç›®å½•è·¯å¾„æ¥ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ï¼Œå¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// ./pages/home/index.tsx =&gt; /home
</span></span><span class="line"><span class="cl">// ./pages/demo/[id].tsx =&gt; /demo/:id
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºä¸€ä¸ª article ç›®å½•æ¥è¯•éªŒä¸€ä¸‹å¯¹åº”çš„æ–‡ä»¶è·¯ç”±ï¼Œé’ˆå¯¹æ–‡ç« è·¯ç”±ï¼Œç»™å®ƒåŠ ä¸€ä¸ª articleId å‚æ•°æ¥åŒºåˆ†ä¸åŒæ–‡ç« ï¼š</p>
<p>pages/article/[articleId].tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IArticleProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">articleId</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Article</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IArticleProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">articleId</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="err">æ–‡ç« </span><span class="p">{</span><span class="nx">articleId</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Article</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">articleId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">articleId</span>: <span class="kt">Number</span><span class="p">(</span><span class="nx">articleId</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Article</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠé¦–é¡µé»˜è®¤çš„ index.tsx è¿›è¡Œæ”¹é€ ä¸€ä¸‹ï¼ŒæŠŠé“¾æ¥æŒ‡åˆ°å®šä¹‰çš„æ–‡ç« è·¯ç”±:</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}[];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">list</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Home</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Hello SSR!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>styles/Home.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="c1">// ./pages/index.module.scss
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nc">.container</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">min-height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">flex</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">flex</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">2</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="ni">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.footer</span> <span class="nt">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">flex-grow</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.title</span> <span class="nt">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.title</span> <span class="nt">a</span><span class="nd">:hover</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.title</span> <span class="nt">a</span><span class="nd">:focus</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.title</span> <span class="nt">a</span><span class="nd">:active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">underline</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.15</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.title</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.code</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">background</span><span class="o">:</span> <span class="mh">#fafafa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border-radius</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-family</span><span class="o">:</span> <span class="n">Menlo</span><span class="o">,</span> <span class="n">Monaco</span><span class="o">,</span> <span class="n">Lucida</span> <span class="n">Console</span><span class="o">,</span> <span class="n">Liberation</span> <span class="n">Mono</span><span class="o">,</span> <span class="n">DejaVu</span> <span class="n">Sans</span> <span class="n">Mono</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">Bitstream</span> <span class="n">Vera</span> <span class="n">Sans</span> <span class="n">Mono</span><span class="o">,</span> <span class="n">Courier</span> <span class="n">New</span><span class="o">,</span> <span class="ni">monospace</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.grid</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">flex-wrap</span><span class="o">:</span> <span class="ni">wrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">max-width</span><span class="o">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.card</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-align</span><span class="o">:</span> <span class="ni">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="ni">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border-radius</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">transition</span><span class="o">:</span> <span class="ni">color</span> <span class="mi">0</span><span class="mf">.15</span><span class="kt">s</span> <span class="ni">ease</span><span class="o">,</span> <span class="n">border-color</span> <span class="mi">0</span><span class="mf">.15</span><span class="kt">s</span> <span class="ni">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">max-width</span><span class="o">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.card</span><span class="nd">:hover</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.card</span><span class="nd">:focus</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nc">.card</span><span class="nd">:active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">border-color</span><span class="o">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.card</span> <span class="nt">h2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.card</span> <span class="nt">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">1</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">margin-left</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ window.open æ‰“å¼€æ–°é¡µé¢æ¥æŒ‡å‘ä¸Šæ–‡åˆ›å»ºçš„æ–‡ç« é¡µï¼Œnoopener=yes,noreferrer=yes æ˜¯ä¸ºäº†è·³è½¬çš„å®‰å…¨æ€§ï¼Œè¿™ä¸ªå¯ä»¥éšè—è·³è½¬çš„ window.opener ä¸ Document.referrerï¼Œåœ¨è·¨ç«™ç‚¹è·³è½¬ä¸­ï¼Œé€šå¸¸åŠ è¿™ä¸ªå‚æ•°æ¥ä¿è¯è·³è½¬ä¿¡æ¯çš„ä¸æ³„éœ²ã€‚</p>
<p>è®¿é—® http://localhost:3000/:</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_4.png" alt="" width="700" />  
<h3 id="header-ä¿®æ”¹">header ä¿®æ”¹</h3>
<p>Nextjs æä¾›äº†ç”¨ next/head æš´éœ²å‡ºæ¥çš„æ ‡ç­¾æ¥ä¿®æ”¹ headerï¼Œåœ¨ _app.tsx åŠ ä¸€ä¸ªé»˜è®¤çš„ titleã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Code</span> <span class="kr">from</span> <span class="s1">&#39;@/public/code.png&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="nx">A</span> <span class="nx">Demo</span> <span class="k">for</span> <span class="err">å®˜ç½‘å¼€å‘å®æˆ˜</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">navbarData</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">footerData</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Demo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">linkList</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;æŠ€æœ¯æ ˆ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;react&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;typescript&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;ssr&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;nodejs&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;äº†è§£æ›´å¤š&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ˜é‡‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://juejin.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;çŸ¥ä¹&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://www.zhihu.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;csdn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;è”ç³»æˆ‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">list</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;å¾®ä¿¡&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;QQ&#34;</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">qrCode</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">image</span>: <span class="kt">Code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;ç‹å°ç™½å­¦å‰ç«¯&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">copyRight</span><span class="o">:</span> <span class="s2">&#34;Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">siteNumber</span><span class="o">:</span> <span class="s2">&#34;å†€ICPå¤‡XXXXXXXXå·-X&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">publicNumber</span><span class="o">:</span> <span class="s2">&#34;å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_5.png" alt="" width="700" />  
<h2 id="æ­å»º-server-é¡¹ç›®">æ­å»º Server é¡¹ç›®</h2>
<p>è¿™é‡Œæ¨èä½¿ç”¨ Strapiï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºæ— å¤´çš„ CMS é…ç½® Apiã€‚åŸºäº Strapi ï¼Œå¯ä»¥å¿«é€Ÿé’ˆå¯¹ä¸šåŠ¡åœºæ™¯æ­å»ºä¸€å¥—å¯¹åº”çš„ CMSï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æŸ¥å’Œè”è¡¨ç­‰è¾ƒå¤æ‚åœºæ™¯ï¼Œéƒ½å¯ä»¥é€šè¿‡å¯è§†åŒ–çš„é…ç½®å®ç°ã€‚</p>
<p>å¯¹äºè‡ªå®šä¹‰è¾ƒé«˜çš„åœºæ™¯ï¼Œå®ƒä¹Ÿæš´éœ²äº†ç›¸å…³çš„å‚æ•°è¿›è¡Œè‡ªå®šä¹‰ï¼Œå¯ä»¥ä½¿ç”¨è¾ƒå°‘çš„å¼€å‘é‡å»å®ç°ç‰¹æ®Šåœºæ™¯ã€‚</p>
<h3 id="é¡¹ç›®åˆå§‹åŒ–-1">é¡¹ç›®åˆå§‹åŒ–</h3>
<p>æ‰§è¡Œ Strapi æä¾›çš„è„šæ‰‹æ¶å‘½ä»¤æ¥åˆå§‹åŒ–é¡¹ç›®:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npx create-strapi-app server --quickstart
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆåä¸º server çš„é¡¹ç›®ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨è¿è¡Œå¹¶æ‰“å¼€ä¸€ä¸ªç™»å½•é¡µï¼ŒæŒ‰ç…§æŒ‡ç¤ºé…ç½®ä¸€ä¸‹è´¦å·å¯†ç ï¼Œç„¶åç™»å½•ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_6.png" alt="" width="700" />  
<h3 id="æ•°æ®å¯è§†åŒ–é…ç½®">æ•°æ®å¯è§†åŒ–é…ç½®</h3>
<h4 id="ç»“æ„ä½“å®šä¹‰">ç»“æ„ä½“å®šä¹‰</h4>
<p>å®Œæˆç™»å½•åï¼Œè¿›å…¥åˆ° Strapi çš„ç®¡ç†é¡µé¢ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_7.png" alt="" width="700" />  
<ul>
<li>content manager æ˜¯ Api çš„æ•°æ®</li>
<li>content-type builder æ˜¯ Api çš„ç»“æ„ä½“</li>
</ul>
<p>ä»¥ä¸Šä¸€ç« èŠ‚ layout ä¸‹çš„é™æ€æ•°æ®ä¸¾ä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="nx">footerData</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Demo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">linkList</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;æŠ€æœ¯æ ˆ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;react&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;typescript&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;ssr&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;nodejs&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;äº†è§£æ›´å¤š&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ˜é‡‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://juejin.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;çŸ¥ä¹&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;https://www.zhihu.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;csdn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;è”ç³»æˆ‘&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;å¾®ä¿¡&#34;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;QQ&#34;</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span> 
</span></span><span class="line"><span class="cl">  <span class="nx">qrCode</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">image</span>: <span class="kt">Code</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">text</span><span class="o">:</span> <span class="s2">&#34;ç‹å°ç™½å­¦å‰ç«¯&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">copyRight</span><span class="o">:</span> <span class="s2">&#34;Copyright Â© 2023 xxx. ä¿ç•™æ‰€æœ‰æƒåˆ©&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">  <span class="nx">siteNumber</span><span class="o">:</span> <span class="s2">&#34;å†€ICPå¤‡XXXXXXXXå·-X&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">publicNumber</span><span class="o">:</span> <span class="s2">&#34;å†€å…¬ç½‘å®‰å¤‡ xxxxxxxxxxxxxxå·&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é’ˆå¯¹è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œåº”è¯¥å¦‚ä½•å»å®šä¹‰ Api å‘¢ï¼Ÿ</p>
<p>åˆ‡åˆ° content-type builderï¼Œç‚¹å‡» create new collection typeï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç»“æ„ä½“ï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_8.png" alt="" width="700" />  
<p>å¡«å®Œ display name åï¼Œå¯¹åº”çš„å•æ•°å’Œå¤æ•° id ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå°±æ˜¯å³è¾¹çš„ä¸¤é¡¹ï¼Œname å¡«éœ€è¦çš„ç»“æ„ä½“å°±å¯ä»¥ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_9.png" alt="" width="700" />  
<p>ç„¶åä¸ºç»“æ„ä½“åˆ›å»ºä¸€äº›å­—æ®µï¼Œå¸¸è§çš„ç±»å‹åŒ…æ‹¬æ–‡æœ¬ã€boolean å€¼ã€å¯Œæ–‡æœ¬ï¼Œè¿™äº›è¿™é‡Œéƒ½æœ‰ï¼Œä»¥ title ä¸¾ä¾‹ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç‚¹ textã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_10.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_11.png" alt="" width="700" />  
<p>ç›´æ¥ç”¨çŸ­æ–‡æœ¬å°±å¥½ï¼Œç„¶åé«˜çº§é…ç½®é€‰å¿…å¡«å’Œå”¯ä¸€ã€‚</p>
<p>å¯¹åº”çš„å­—æ®µå°±åŠ å¥½äº†ï¼Œå¯¹äºåˆ«çš„éƒ¨åˆ†ï¼Œç”¨ç›¸åŒçš„æ–¹å¼åŠ è¿›æ¥å°±å¯ä»¥ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_13.png" alt="" width="700" />  
<p>ç¨å¾®ç‰¹æ®Šä¸€äº›çš„å­—æ®µæ˜¯ linkListï¼Œå¯ä»¥çœ‹åˆ°å®ƒå…¶å®æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå…ˆæŠŠ footData çš„å…³ç³»æŒ‰ç…§æ€ç»´å¯¼å›¾æ¢³ç†ä¸€ä¸‹ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_30.png" alt="" width="700" />  
<p>æŒ‰ç…§æ•°æ®ç»“æ„å‘ç°ï¼ŒfooterData å’Œ linkList æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè€Œ linklist ä¸­åˆåŒ…å«å¤šä¸ª linkï¼Œä¹Ÿæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚</p>
<p>æ‰€ä»¥è¦æè¿°è¿™éƒ¨åˆ†å­—æ®µï¼Œåªæœ‰ layout ä¸€ä¸ªç»“æ„ä½“æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦åˆ›å»º linkList å’Œ linkï¼Œç„¶åç»™å®ƒä»¬ä¹‹é—´æ¥å»ºç«‹å¯¹åº”çš„å…³ç³»ã€‚</p>
<p>ç¡®å®šäº†æ€è·¯ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ¥åˆ›å»º linklist å’Œ link çš„ç»“æ„ä½“ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_12.png" alt="" width="700" />  
<p>linklist å’Œ link çš„å…³ç³»åº”è¯¥æ€ä¹ˆå»ºç«‹å‘¢ï¼Ÿåœ¨ linklist ç»“æ„ä½“ä¸­ï¼Œç‚¹æ–°å»ºå­—æ®µã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_14.png" alt="" width="700" />  
<p>ç‚¹å‡» relation å±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨æ¥è”ç«‹ç»“æ„ä½“ä¹‹é—´çš„æ•°æ®åº“å…³ç³»ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_15.png" alt="" width="700" />  
<p>ç‚¹å®Œæˆï¼Œå¯ä»¥å‘ç°åŠ ä¸Šäº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_16.png" alt="" width="700" />  
<p>æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§ä¸Šé¢çš„åŸç†é…ç½®å®Œæ‰€æœ‰çš„ç»“æ„ä½“å³å¯ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_17.png" alt="" width="700" />  
<h4 id="ç»“æ„ä½“æ•°æ®å†™å…¥">ç»“æ„ä½“æ•°æ®å†™å…¥</h4>
<p>å®šä¹‰å®Œç»“æ„ä½“åï¼Œéœ€è¦ä¸ºç»“æ„ä½“åŠ å…¥ä¸€äº›æ•°æ®ï¼Œé€šå¸¸åœ¨å¼€å‘å®Œåï¼Œè¿è¥ç›¸å…³çš„åŒå­¦é…ç½®ï¼Œå°±åªè¦è¿›è¡Œè¿™ä¸€æ­¥å°±å¯ä»¥äº†ï¼Œåˆ«çš„éƒ¨åˆ†å°±ä¸éœ€è¦å†è°ƒæ•´äº†ï¼Œç‚¹å‡» content managerã€‚</p>
<p>æ•°æ®çš„é…ç½®éœ€è¦æŒ‰ç…§ä»å­åˆ°çˆ¶çš„åŸåˆ™ï¼Œå› ä¸º layout æœ‰ç›¸å…³çš„å­—æ®µä¾èµ–äº linklistï¼Œlinklist åˆä¾èµ–äº linkï¼Œæ‰€ä»¥åªæœ‰ link é…ç½®å®Œä»¥åï¼Œæ‰å¯ä»¥è¿›è¡Œ linklist å’Œ layout çš„é…ç½®ï¼Œè¿™é‡Œä»¥ link å’Œ linklist ä¸¾ä¾‹ã€‚</p>
<p>åˆ‡åˆ° link çš„éƒ¨åˆ†ï¼Œç‚¹å‡» create new entryï¼Œå¯ä»¥è¿›åˆ°ä¸‹é¢çš„é¡µé¢ï¼Œè¾“å…¥å®Œå†…å®¹ä»¥åï¼Œè¿›è¡Œä¿å­˜ï¼Œè¿™é‡Œä¿å­˜æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæ˜¯ saveï¼Œä¸€ä¸ªæ˜¯ publishï¼Œå¦‚æœç‚¹å‡» publish ä¼šç”Ÿæ•ˆåˆ°å®é™… cdnï¼Œè¿™é‡Œå…ˆç‚¹å‡» publishï¼Œå®é™…åœºæ™¯ä¸‹è¿è¥é…ç½®çš„æ—¶å€™å¯ä»¥ç‚¹ saveï¼Œåœ¨ review æ²¡é—®é¢˜åå†å‘å¸ƒå³å¯ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_18.png" alt="" width="700" />  
<p>é…ç½®å®Œå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_19.png" alt="" width="700" />  
<p>ç„¶åé…ç½® linklist çš„éƒ¨åˆ†ï¼ŒåŒæ ·æ˜¯ç‚¹ create new entryã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_20.png" alt="" width="700" />  
<p>é™¤äº†åŸºæœ¬çš„å­—æ®µï¼Œå³ä¾§è¿˜ä¼šæœ‰å¯¹åº”å…³è”çš„å­—æ®µï¼Œå‹¾é€‰éœ€è¦çš„å°±å¯ä»¥å…³è”ä¸Šäº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_21.png" alt="" width="700" />  
<p>æœ€åé…ç½® layout çš„éƒ¨åˆ†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_22.png" alt="" width="700" />  
<h4 id="æƒé™é…ç½®åŠä¸Šçº¿">æƒé™é…ç½®åŠä¸Šçº¿</h4>
<p>ç‚¹å‡» settings -&gt; Rolesï¼Œè¿™é‡Œæ˜¯æƒé™é…ç½®çš„éƒ¨åˆ†ï¼ŒåŒ…å«ä½œè€…æƒé™å’Œå…¬å…±æƒé™ï¼Œå› ä¸ºéœ€è¦æ‰€æœ‰çš„äººå¯ä»¥çœ‹åˆ°æ¥å£ï¼Œæ‰€ä»¥ç‚¹ public å³ä¾§çš„ ğŸ–Šï¼ˆå¦‚æœæœ‰ç‰¹åˆ«éœ€æ±‚çš„åŒå­¦ï¼Œå¯ä»¥ç‚¹å‡» add new role æ–°å¢æƒé™è§’è‰²ï¼Œå†è¿›è¡Œåç»­çš„æ­¥éª¤ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_23.png" alt="" width="700" />  
<p>å¯ä»¥çœ‹åˆ°ä¹‹å‰å®šä¹‰çš„ç»“æ„ä½“ï¼Œå·¦ä¾§å¯¹åº”ç»“æ„ä½“æ”¯æŒçš„ç±»å‹ï¼Œå³ä¾§å¯¹åº”ç»“æ„ä½“æ¥å£çš„æŒ‡å‘ Api è·¯ç”±ã€‚å› ä¸ºè¦ç»™å¯¹åº”çš„æ¥å£é…ç½®å…¨æŸ¥å’Œå•æŸ¥çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å‹¾é€‰ä¸Š find å’Œ findOneã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_24.png" alt="" width="700" />  
<p>layout ä¾èµ–äº link å’Œ link-listï¼Œæ‰€ä»¥ link å’Œ link-list çš„ç»“æ„ä½“ä¹Ÿéœ€å‹¾é€‰ä¸Š find å’Œ findOneã€‚</p>
<p>è®¿é—® http://localhost:1337/api/layoutsï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_25.png" alt="" width="700" />  
<p>ä½ ä¼šå‘ç°å¥½åƒåªæœ‰åŸºç¡€å­—æ®µï¼Œè”è¡¨çš„ linklist å’Œ link å»å“ªé‡Œäº†ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º Strapi é»˜è®¤æ˜¯ä¸ä¼šå¡«å……è”è¡¨å…³ç³»çš„ï¼Œå¯ä»¥åœ¨è·¯ç”±ååŠ  populate=*ï¼Œè¿™ä¸ªå…¥å‚çš„æ„ä¹‰æ˜¯ä¸ºæ‰€æœ‰çš„å…³ç³»å¡«å……ä¸€çº§å…³ç³»ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_26.png" alt="" width="700" />  
<p>æ¨èä½¿ç”¨ strapi-plugin-populate-deepï¼Œè¿™æ˜¯åŸºäº Strapi çš„ä¸€ä¸ªæ·±åº¦æ’ä»¶ï¼Œåˆ‡åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ç»ˆç«¯å®‰è£…ä¸€ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install strapi-plugin-populate-deep --save
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‡å¯ï¼Œè®¿é—® http://localhost:1337/api/layouts?populate=deepã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_26.png" alt="" width="700" />  
<p>deep å‚æ•°çš„å«ä¹‰ä¸ºä½¿ç”¨é»˜è®¤çš„æœ€å¤§æ·±åº¦å¡«å……è¯·æ±‚ï¼Œå³ 5 å±‚ï¼Œå¦‚æœ 5 å±‚ä¸æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦æ›´å¤šï¼Œå…¥å‚çš„è°ƒæ•´ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚é’ˆå¯¹ 10 å±‚çš„åœºæ™¯ï¼Œåªéœ€è¦ä¼ é€’å…¥å‚ populate=deep,10å°±å¯ä»¥ã€‚</p>
<h2 id="bff-æ•°æ®æµè½¬">BFF æ•°æ®æµè½¬</h2>
<p>é€šè¿‡è®¿é—® http://localhost:1337/api/layouts?populate=deep å¯ä»¥æ‹¿åˆ°éœ€è¦çš„æ•°æ®ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_27.png" alt="" width="700" />  
<p>ä¸è¿‡è¿™æ ·çš„æ•°æ®æ˜¯æœ‰ä¸€äº›ä¹±çš„ï¼Œæœ‰å‡ ä¸ªå¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼š</p>
<ul>
<li>è¯·æ±‚å‚æ•° populate=deep æ˜¯æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å¸¦ä¸Šçš„ï¼Œå› ä¸ºéœ€è¦æ‰€æœ‰æ·±åº¦çš„æ•°æ®ã€‚</li>
<li>æœ€ç»ˆéœ€è¦çš„æ˜¯ data ä¸­çš„æ•°æ®ï¼Œlayout åªæœ‰ä¸€ä¸ªï¼Œä¸éœ€è¦åˆ†é¡µç›¸å…³çš„éƒ¨åˆ†ï¼ˆmetaï¼‰ã€‚</li>
<li>é’ˆå¯¹æ¯ä¸ªç»“æ„ä½“ï¼ŒStrapi ä¸ºå®ƒä»¬å¥—ä¸Šäº† attributes å’Œ idï¼Œè¿™ä¸ªæ˜¯ä¸åˆ©äºè°ƒç”¨çš„ï¼Œå› ä¸ºæ²¡æœ‰è¦†ç›–å¯¹åº” ts ç±»å‹ï¼Œä¼šå¢åŠ å¾ˆå¤šä¸å¿…è¦çš„è°ƒè¯•æˆæœ¬ã€‚</li>
<li>æ¯ä¸ªç»“æ„ä½“éƒ½åŠ ä¸Šäº† createdAtã€ publishedAtã€updatedAt ä¸‰ä¸ªå­—æ®µï¼Œå®é™…ä¸Šæ˜¯ä¸éœ€è¦è¿™äº›å­—æ®µçš„ï¼Œéšç€æ¥å£å±‚çº§çš„å¢åŠ ï¼Œè¿‡å¤šä¸è¢«ä½¿ç”¨çš„å­—æ®µä¼šå¢åŠ æ¥å£çš„å¤æ‚åº¦å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<h3 id="cms-æ¥å£ä¼˜åŒ–">CMS æ¥å£ä¼˜åŒ–</h3>
<h4 id="è‡ªå®šä¹‰è¿”å›">è‡ªå®šä¹‰è¿”å›</h4>
<p>åœ¨ src/api/* çš„ç›®å½•ä¸‹ï¼Œå­˜æ”¾ç€ç»“æ„ä½“æ¥å£çš„å®šä¹‰ï¼Œå…¶ä¸­ controllers å­˜æ”¾ç€æ¥å£çš„æ§åˆ¶å™¨ï¼Œæ¯å½“å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±æ—¶ï¼Œæ“ä½œéƒ½ä¼šæ‰§è¡Œä¸šåŠ¡é€»è¾‘ä»£ç å¹¶å‘å›å“åº”ï¼Œå¯ä»¥åœ¨å…¶ä¸­é‡å†™ api çš„ç›¸å…³æ–¹æ³•ï¼ˆfindã€findOneã€ update ç­‰ï¼‰ã€‚</p>
<p>ä»¥ layout ä¸ºä¾‹ï¼Œé¦–å…ˆä¸º layout æ¥å£åŠ ä¸Šé»˜è®¤çš„ populate=deep å‚æ•°ï¼Œè¿™æ ·æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™å°±ä¸ç”¨å†åŠ äº†ã€‚</p>
<p>src/api/layout/controllers/layout.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">createCoreController</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@strapi/strapi&#34;</span><span class="p">).</span><span class="nx">factories</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">createCoreController</span><span class="p">(</span><span class="s2">&#34;api::layout.layout&#34;</span><span class="p">,</span> <span class="p">({</span> <span class="nx">strapi</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">populate</span><span class="o">:</span> <span class="s2">&#34;deep&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®¿é—® http://localhost:1337/api/layoutsï¼Œå¯ä»¥çœ‹åˆ°ä¸éœ€è¦åŠ  populate å‚æ•°å°±å¯ä»¥æ‹¿åˆ°è”è¡¨çš„æ•°æ®äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_28.png" alt="" width="700" />  
<p>ç„¶åé’ˆå¯¹ä¸Šé¢æåˆ°çš„ attributesã€id å’Œæ—¶é—´ç›¸å…³çš„å­—æ®µå®šä¹‰ä¸¤ä¸ªæ·±åº¦éå†çš„å‡½æ•°æ¥å¯¹åº”å»é™¤ã€‚</p>
<p>æ–°å»º src/utils/index.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ç§»é™¤å¯¹è±¡ä¸­è‡ªåŠ¨åˆ›å»ºçš„æ—¶é—´å­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param obj
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @returns
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">removeTime</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">createdAt</span><span class="p">,</span> <span class="nx">publishedAt</span><span class="p">,</span> <span class="nx">updatedAt</span><span class="p">,</span> <span class="p">...</span><span class="nx">params</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">obj</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">].</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="nx">removeTime</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="nx">removeTime</span><span class="p">(</span><span class="nx">params</span><span class="p">[</span><span class="nx">item</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">params</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ç§»é™¤å±æ€§å’Œid
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param {*} obj
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @returns
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">removeAttrsAndId</span> <span class="o">=</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">attributes</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">params</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">obj</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">newObj</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">attributes</span><span class="p">,</span> <span class="p">...</span><span class="nx">params</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">newObj</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">].</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">=</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">newObj</span><span class="p">[</span><span class="nx">item</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">newObj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">removeTime</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">removeAttrsAndId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå¯¹ layout çš„ find å‡½æ•°è¿”å›çš„æ•°æ®è°ƒç”¨è¿›è¡Œå¤„ç†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * layout controller
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">removeTime</span><span class="p">,</span> <span class="nx">removeAttrsAndId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../../utils/index&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">createCoreController</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@strapi/strapi&#39;</span><span class="p">).</span><span class="nx">factories</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">createCoreController</span><span class="p">(</span><span class="s1">&#39;api::layout.layout&#39;</span><span class="p">,</span> <span class="p">({</span> <span class="nx">strapi</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">populate</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">removeTime</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†è®¿é—® http://localhost:1337/api/layoutsï¼Œå¯ä»¥åªåŒ…å«äº†éœ€è¦çš„æ•°æ®ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_29.png" alt="" width="700" />  
<h4 id="å¢åŠ è·¨åŸŸé™åˆ¶">å¢åŠ è·¨åŸŸé™åˆ¶</h4>
<p>Strapi çš„æ¥å£é»˜è®¤ä¸åšè·¨åŸŸé™åˆ¶ï¼Œè¿™æ ·æ‰€æœ‰çš„åŸŸåéƒ½å¯ä»¥è°ƒç”¨ï¼Œå®‰å…¨æ€§æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚</p>
<p>åœ¨ config/middlewares.js ä¸­åŠ ä¸Šè·¨åŸŸçš„é™åˆ¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::errors&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::security&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;strapi::cors&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">enabled</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">headers</span><span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">origin</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">,</span> <span class="s1">&#39;http://localhost:1337&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::poweredBy&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::logger&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::query&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::body&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::session&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::favicon&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;strapi::public&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bff-æ¥å£å®šä¹‰">BFF æ¥å£å®šä¹‰</h3>
<p>æ¥å£é…ç½®å¥½ä»¥åè¿˜ä¸èƒ½ç›´æ¥åœ¨é¡µé¢ä¸­è°ƒç”¨ï¼Œéœ€è¦é…ç½®ä¸€å±‚ BFF å±‚ï¼Œå³æœåŠ¡äºå‰ç«¯çš„æ•°æ®å±‚ã€‚</p>
<p>å› ä¸ºé€šå¸¸é…ç½®çš„æ•°æ®æ˜¯ç«™åœ¨ç»“æ„ä½“çš„è§’åº¦çš„ï¼Œå¹¶ä¸ä¸€å®šå¯ä»¥ç”±å‰ç«¯è°ƒç”¨ï¼Œå¾€å¾€è¿˜éœ€è¦å¤æ‚çš„æ•°æ®å¤„ç†ã€‚</p>
<p>ä¸ºäº†æé«˜æ•°æ®å±‚çš„å¤ç”¨ç¨‹åº¦ï¼Œå¢åŠ  BFF å±‚ï¼Œå°†æ¥å£åŒ…ä¸€å±‚ï¼Œè¿›è¡Œç›¸å…³å¤„ç†åï¼Œå‰ç«¯é¡µé¢åªè°ƒç”¨å®šä¹‰çš„ BFF å±‚æ¥å£ï¼Œä¸ç›´æ¥ä¸é…ç½®çš„æ¥å£äº§ç”Ÿäº¤äº’ã€‚</p>
<p>åœ¨å®šä¹‰æ¥å£å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ Nextjs æ¥å£çš„è·¯ç”±æ˜¯æ€ä¹ˆé…ç½®çš„?</p>
<p>ä¸é™æ€é¡µé¢ç±»ä¼¼ï¼ŒNextjs æ¥å£ä¹Ÿé‡‡ç”¨æ–‡ä»¶çº¦å®šå¼è·¯ç”±çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œå¯ä»¥åˆ†ä¸ºé¢„å®šä¹‰è·¯ç”±ã€åŠ¨æ€è·¯ç”±å’Œå…¨æ•è·è·¯ç”±ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// ./pages/api/home/test.js =&gt; api/home/test é¢„å®šä¹‰è·¯ç”±
</span></span><span class="line"><span class="cl">// ./pages/api/home/[testId].js =&gt; api/home/test, api/home/1, api/home/23 åŠ¨æ€è·¯ç”±
</span></span><span class="line"><span class="cl">// ./pages/api/home/[...testId].js =&gt; api/home/test, api/home/test/12 å…¨æ•è·è·¯ç”±
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä¸€ä¸ªç›¸åŒçš„è·¯ç”±ï¼Œæ¯”å¦‚ api/home/testï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ¥åŒ¹é…ä¸‰è€…ï¼Œä¼šæŒ‰ç…§é¢„å®šä¹‰è·¯ç”± &gt; åŠ¨æ€è·¯ç”± &gt; å…¨æ•è·è·¯ç”±çš„é¡ºåºæ¥åŒ¹é…ã€‚</p>
<p>é¢„å®šä¹‰è·¯ç”±æ˜¯ç²¾å‡†åŒ¹é…ï¼Œåä¸¤è€…åªæ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œè™½ç„¶ä¹Ÿæ»¡è¶³åŒ¹é…åœºæ™¯ï¼Œä½†æ˜¯åªæ˜¯ä½œä¸ºå…œåº•ï¼Œä¼˜å…ˆä¼šä»¥é¢„å®šä¹‰è·¯ç”±ä¸ºå‡†ã€‚</p>
<p>ä¸‹é¢æ¥å¼€å‘ BFF å±‚ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£å±‚ pages/api/layout.tsã€‚</p>
<p>å› ä¸ºä¼šç»å¸¸ç”¨åˆ°æœ¬åœ°åŸŸå å’Œ CMS åŸŸåï¼Œæ‰€ä»¥æ‹¿ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å®ƒä»¬ï¼Œåç»­æ ¹æ®ç¯å¢ƒåŒºåˆ†ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<p>utils/index.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">LOCALDOMAIN</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:3000&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">CMSDOMAIN</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:1337&#39;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£… axios å’Œ lodashã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i axios 
</span></span><span class="line"><span class="cl">npm i lodash
</span></span><span class="line"><span class="cl">npm i --save-dev @types/lodash
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨è¿‡ Express çš„äººåº”è¯¥çŸ¥é“ä¸­é—´ä»¶çš„æ¦‚å¿µï¼ŒExpress æ˜¯åŸºäºè·¯ç”±å’Œä¸­é—´ä»¶çš„æ¡†æ¶ï¼Œé€šè¿‡é“¾å¼è°ƒç”¨çš„æ–¹å¼æ¥å¯¹æ¥å£è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„å¤„ç†ã€‚</p>
<p>å¼€æºç¤¾åŒºæœ‰å¼€å‘æä¾›äº† next-connect çš„ä¾èµ–æ¥è¡¥å…¨è¿™éƒ¨åˆ†çš„èƒ½åŠ›ï¼Œå…ˆæ¥å®‰è£…ä¸€ä¸‹ä¾èµ–ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install next-connect
</span></span></code></pre></td></tr></table>
</div>
</div><p>pages/api/layout.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">nextConnect</span> <span class="kr">from</span> <span class="s1">&#39;next-connect&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextApiRequest</span><span class="p">,</span> <span class="nx">NextApiResponse</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">CMSDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">isEmpty</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;lodash&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getLayoutData</span> <span class="o">=</span> <span class="nx">nextConnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// .use(any middleware)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">.</span><span class="kr">get</span><span class="p">((</span><span class="nx">req</span>: <span class="kt">NextApiRequest</span><span class="p">,</span> <span class="nx">res</span>: <span class="kt">NextApiResponse</span><span class="p">&lt;</span><span class="nt">ILayoutProps</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">CMSDOMAIN</span><span class="si">}</span><span class="sb">/api/layouts`</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">copy_right</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link_lists</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">public_number</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">qr_code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">qr_code_image</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">site_number</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="o">?</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">      <span class="nx">res</span><span class="o">?</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">navbarData</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">footerData</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">linkList</span>: <span class="kt">link_lists?.data?.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">title</span>: <span class="kt">item.title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">list</span>: <span class="kt">item?.links?.data?.map</span><span class="p">((</span><span class="nx">_item</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">label</span>: <span class="kt">_item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">link</span>: <span class="kt">isEmpty</span><span class="p">(</span><span class="nx">_item</span><span class="p">.</span><span class="nx">link</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="nx">_item</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">};</span>
</span></span><span class="line"><span class="cl">              <span class="p">}),</span>
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span><span class="line"><span class="cl">          <span class="p">}),</span>
</span></span><span class="line"><span class="cl">          <span class="nx">qrCode</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">image</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">CMSDOMAIN</span><span class="si">}${</span><span class="nx">qr_code_image</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">text</span>: <span class="kt">qr_code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="nx">copyRight</span>: <span class="kt">copy_right</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">siteNumber</span>: <span class="kt">site_number</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">publicNumber</span>: <span class="kt">public_number</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">getLayoutData</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>NextApiResponse ç±»å‹æ˜¯ Nextjs æä¾›çš„ response ç±»å‹ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ³›å‹ï¼Œæ¥ä½œä¸ºæ•´ä¸ªæ¥å£å’Œåç»­è¯·æ±‚çš„è¿”å›ï¼Œå¯ä»¥æŠŠéœ€è¦çš„æ•°æ®ç±»å‹ä½œä¸ºæ³›å‹ä¼ è¿›å»ï¼Œä¿è¯æ•´ä½“ä»£ç æœ‰ ts çš„ lintã€‚</li>
<li>è¿”å›æ•°æ®ç”¨çš„æ˜¯ jsonï¼Œé’ˆå¯¹æ•°æ®çš„å“åº”ï¼ŒNextjs æä¾›ä¸‹é¢çš„å“åº” Apiï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰ç”¨ä¸åŒçš„å“åº” Apiã€‚</li>
</ul>
<p>res.status(code) - è®¾ç½®çŠ¶æ€ç çš„åŠŸèƒ½ã€‚code å¿…é¡»æ˜¯æœ‰æ•ˆçš„ HTTP çŠ¶æ€ç ã€‚<br>
res.json(body) - å‘é€ JSON å“åº”ã€‚body å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„å¯¹è±¡ã€‚<br>
res.send(body) - å‘é€ HTTP å“åº”ã€‚body å¯ä»¥æ˜¯ a stringï¼Œan object æˆ– a Bufferã€‚
res.redirect([status,] path) - é‡å®šå‘åˆ°æŒ‡å®šçš„è·¯å¾„æˆ– URLã€‚status å¿…é¡»æ˜¯æœ‰æ•ˆçš„ HTTP çŠ¶æ€ç ã€‚å¦‚æœæœªæŒ‡å®šï¼Œstatus é»˜è®¤ä¸º â€œ307â€ â€œä¸´æ—¶é‡å®šå‘â€ã€‚<br>
res.revalidate(urlPath) - ä½¿ç”¨ . æŒ‰éœ€é‡æ–°éªŒè¯é¡µé¢ getStaticPropsã€‚urlPath å¿…é¡»æ˜¯ä¸€ä¸ª stringã€‚</p>
<p>æ”¹é€  layout éƒ¨åˆ†çš„æ•°æ®æ³¨å…¥ï¼Œæ¢ç”¨æ¥å£æ•°æ®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">LOCALDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="nx">A</span> <span class="nx">Demo</span> <span class="k">for</span> <span class="err">å®˜ç½‘å¼€å‘å®æˆ˜</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/layout`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®¿é—® http://localhost:3000ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_31.png" alt="" width="700" />  
<h2 id="ä¸»é¢˜åŒ–åŠŸèƒ½">ä¸»é¢˜åŒ–åŠŸèƒ½</h2>
<p>ä»¥ <a href="https://douyinfe.com/" target="_blank" rel="noopener noreffer ">æŠ–éŸ³å‰ç«¯æŠ€æœ¯å®˜ç½‘</a> ä¸ºä¾‹ï¼Œå®ƒçš„å®˜ç½‘æœ‰åŒ…å«é»˜è®¤çš„æ ·å¼ï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_32.png" alt="" width="700" />  
<p>ä¹Ÿæœ‰æš—é»‘è‰²è°ƒçš„å±•ç¤ºï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_33.png" alt="" width="700" />  
<h3 id="åŸºç¡€è‰²è°ƒå˜é‡æŠ½ç¦»">åŸºç¡€è‰²è°ƒå˜é‡æŠ½ç¦»</h3>
<p>ä¸»é¢˜åŒ–åŠŸèƒ½å¯¹ DOM çš„ç»“æ„å˜åŒ–ä¸å¤§ï¼ŒåŸºæœ¬æ˜¯é’ˆå¯¹è‰²è°ƒè¿›è¡Œåˆ‡æ¢ã€‚</p>
<p>é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œå¦‚æœå®šä¹‰ä¸¤å¥—å˜é‡ï¼Œæ˜¯ä¸æ˜¯å°±å®Œæˆäº†å¯¹ä¸¤å¥—ä¸»é¢˜çš„é…ç½®ï¼Ÿæ ¹æ®ä¸åŒçš„ä¸»é¢˜ï¼Œåœ¨ html æ ‡ç­¾ä¸Šæ¥å›ºå®šä¸¤ä¸ªå±æ€§æ¥åŒºåˆ†ï¼Œæ–¹æ¡ˆå°±ç¡®å®šäº†ã€‚</p>
<p>åœ¨å…¨å±€æ ·å¼ä¸­å®šä¹‰ä¸¤å¥—ä¹‹å‰ä½¿ç”¨åˆ°çš„è‰²è°ƒï¼ŒåŒ…æ‹¬å­—ä½“å’ŒèƒŒæ™¯ç­‰é¢œè‰²ï¼ŒæŠŠä¹‹å‰å®šä¹‰çš„ç»„ä»¶æ ·å¼æŠ½å‡ºæ¥æ”¾åœ¨è¿™é‡Œå°±å¯ä»¥ï¼Œä¿è¯æ‰€æœ‰çš„è‰²è°ƒéƒ½é€šè¿‡å˜é‡çš„æ–¹å¼æ¥å¼•ç”¨ã€‚</p>
<p>styles/global.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;dark&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#34a8eb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="mh">#f4f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥å°±æ˜¯æŠŠè¿™äº›å®šä¹‰çš„å˜é‡å»æ›¿æ¢åŸæ¥æ ·å¼ä¸­ç»™çš„å›ºå®šè‰²å€¼ã€‚</p>
<p>components/footer/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">70</span><span class="kt">px</span> <span class="mi">145</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">footer-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.topArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.footerTitle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">36</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">36</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.linkListArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.linkArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-left</span><span class="o">:</span> <span class="mi">160</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">40</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.links</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.link</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.disabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">not-allowed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.bottomArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.codeArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.numArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">flex-end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nt">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.publicLogo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-right</span><span class="o">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>components/layout/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.layout</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-height</span><span class="o">:</span> <span class="nf">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">vh</span> <span class="o">-</span> <span class="mi">560</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>components/navbar/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.navBar</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">navbar-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">backdrop-filter</span><span class="o">:</span> <span class="nf">blur</span><span class="p">(</span><span class="mi">8</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">64</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">sticky</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="mi">32</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.logoIcon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">4</span><span class="mf">.375</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">navbar-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-size</span><span class="o">:</span> <span class="mi">4</span><span class="mf">.375</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.themeIcon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">theme-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å›¾ç‰‡ä¸»é¢˜åŒ–é…ç½®">å›¾ç‰‡ä¸»é¢˜åŒ–é…ç½®</h3>
<p>å¯¹äºå›¾ç‰‡çš„ä¸»é¢˜åŒ–ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é’ˆå¯¹ä¸€èˆ¬å›ºå®šä¸å˜çš„å›¾ç‰‡ï¼Œé‡‡ç”¨åŒæ ·å®šä¹‰çš„æ–¹å¼ã€‚</p>
<p>styles/global.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;dark&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#34a8eb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/logo_dark.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--theme-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/theme_dark.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="mh">#f4f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/logo_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--theme-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/theme_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦ä¸€ç§æ˜¯é…ç½®çš„å›¾ç‰‡ï¼Œå¯èƒ½ä¼šé¢‘ç¹å˜åŒ–ï¼Œè¿™ç§åªéœ€è¦åœ¨ Strapi ä¸­å†åŠ ä¸€ä¸ªå­—æ®µå­˜ä¸åŒä¸»é¢˜çš„å›¾ç‰‡ï¼Œç„¶ååœ¨é¡µé¢é€»è¾‘ä¸­æ ¹æ®ä¸åŒçš„ä¸»é¢˜å»åˆ‡æ¢å°±å¯ä»¥ã€‚</p>
<h3 id="ä¸»é¢˜æ•°æ®æ³¨å…¥">ä¸»é¢˜æ•°æ®æ³¨å…¥</h3>
<p>é’ˆå¯¹å½“å‰çš„ä¸»é¢˜ï¼Œè‚¯å®šæœ‰ä¸ªåœ°æ–¹éœ€è¦è¿›è¡Œç¼“å­˜ï¼Œåº”è¯¥ä½¿ç”¨å“ªç§å®¢æˆ·ç«¯ç¼“å­˜æœºåˆ¶å‘¢ï¼Ÿ</p>
<p>ä¸»é¢˜åŒ–åŠŸèƒ½å¾€å¾€æ˜¯å› ä¸ºç”¨æˆ·æ›´å–œæ¬¢è¿™ç§è‰²è°ƒï¼Œç”¨ localStorage è¦æ›´åˆé€‚ï¼Œå› ä¸ºç›¸æ¯” sessionStorage åªèƒ½ä¿å­˜å½“å‰ä¼šè¯çš„ç‰¹ç‚¹ï¼ŒlocalStorage å¯ä»¥é•¿æœŸä¿ç•™ï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨æ¸…é™¤ï¼Œä¿è¯ä¸‹ä¸€æ¬¡è®¿é—®æ—¶ä¹Ÿå¯ä»¥ä¿è¯æ˜¯ä¹‹å‰çš„ä¸»é¢˜ã€‚</p>
<p>é‚£ä¹ˆåº”è¯¥æ€ä¹ˆå»æ³¨å…¥è¿™ä¸ªç¼“å­˜å‘¢ï¼Œå¦‚æœéšå¿ƒæ‰€æ¬²åœ°å»è¿›è¡Œç¼“å­˜æ³¨å…¥æ“ä½œï¼Œé‚£é¡µé¢ä¸­å¯èƒ½ä¼šåˆ†æ•£å„ç§ç¼“å­˜çš„é€»è¾‘ï¼Œä¸ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œä¹Ÿä¸åˆ©äºç»Ÿä¸€çš„ç»´æŠ¤å’Œç›¸å…³äº‹ä»¶çš„ç»‘å®šï¼Œæ‰€ä»¥éœ€è¦åœ¨ä¸€å¤„åœ°æ–¹èšé›†ä¸»é¢˜ç›¸å…³çš„é€»è¾‘ï¼Œç„¶åå†åˆ†åˆ«æ³¨å…¥ç»™æ¯ä¸ªé¡µé¢å¯¹åº”çš„ç¼–è¾‘æ–¹æ³•ã€‚</p>
<p>è¿™é‡Œéœ€è¦ç”¨åˆ° React çš„ useContextï¼Œå®ƒå…·æœ‰æ¥å—ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†ä¸Šä¸‹æ–‡è¿›è¡Œæ³¨å…¥çš„èƒ½åŠ›ã€‚</p>
<p>æ–°å»º constants/enum</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">enum</span> <span class="nx">Themes</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">light</span> <span class="o">=</span> <span class="s1">&#39;light&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dark</span> <span class="o">=</span> <span class="s1">&#39;dark&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–°å»º stores/theme.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createContext</span><span class="p">,</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Themes</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IThemeContextProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">theme</span>: <span class="kt">Themes</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTheme</span><span class="o">:</span> <span class="p">(</span><span class="nx">theme</span>: <span class="kt">Themes</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IThemeContextProviderProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">ThemeContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">&lt;</span><span class="nt">IThemeContextProps</span><span class="p">&gt;({}</span> <span class="kr">as</span> <span class="nx">IThemeContextProps</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ThemeContextProvider</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">IThemeContextProviderProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span><span class="nx">children</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">theme</span><span class="p">,</span> <span class="nx">setTheme</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Themes</span><span class="p">&gt;(</span><span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">Themes</span> <span class="o">||</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setTheme</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ThemeContext.Provider</span> <span class="na">value</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">theme</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setTheme</span><span class="o">:</span> <span class="p">(</span><span class="nx">currentTheme</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setTheme</span><span class="p">(</span><span class="nx">currentTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">,</span> <span class="nx">currentTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="nx">currentTheme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ThemeContext.Provider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">ThemeContextProvider</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ThemeContext æ˜¯æš´éœ²å‡ºçš„å˜é‡ï¼Œåœ¨å…¨å±€æ³¨å…¥åï¼Œæ¯ä¸ªè·¯ç”±é¡µé¢éƒ½å¯ä»¥é€šè¿‡å®ƒæ¥è·å–å®šä¹‰çš„ theme å’Œ setTheme è¿›è¡Œç›¸å…³çš„ä¸šåŠ¡æ“ä½œã€‚</p>
<p>ThemeContextProvider åˆ™æ˜¯æ³¨å…¥å™¨ï¼Œç”¨äºç»™éœ€è¦çš„ DOM è¿›è¡Œä¸Šä¸‹æ–‡çš„æ³¨å…¥ã€‚</p>
<p>åœ¨å…¨å±€é¡µé¢æ³¨å…¥ contextã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ThemeContextProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">LOCALDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="nx">A</span> <span class="nx">Demo</span> <span class="k">for</span> <span class="err">å®˜ç½‘å¼€å‘å®æˆ˜</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/layout`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ navbar åŠ ä¸€ä¸ªä¸»é¢˜åŒ–åˆ‡æ¢çš„å…¥å£ã€‚</p>
<p>components/navbar/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">FC</span><span class="p">,</span> <span class="nx">useContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Themes</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">INavBarProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">NavBar</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">INavBarProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setTheme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">navBar</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://localhost:3000/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logoIcon</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeIcon</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setTheme</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span> <span class="o">?</span> <span class="nx">Themes.dark</span> : <span class="kt">Themes.light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}}/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>components/navbar/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.navBar</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">navbar-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">backdrop-filter</span><span class="o">:</span> <span class="nf">blur</span><span class="p">(</span><span class="mi">8</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">64</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">sticky</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="mi">32</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.logoIcon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">4</span><span class="mf">.375</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">navbar-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-size</span><span class="o">:</span> <span class="mi">4</span><span class="mf">.375</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.themeIcon</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">theme-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¯ä»¥å®ç°ä¸»é¢˜åŒ–çš„åŠŸèƒ½äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_34.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_35.png" alt="" width="700" />  
<h3 id="å¤šè¿›ç¨‹åœºæ™¯ä¸‹ä¸»é¢˜åŒæ­¥">å¤šè¿›ç¨‹åœºæ™¯ä¸‹ä¸»é¢˜åŒæ­¥</h3>
<p>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼Œæ¯ä¸ªå¼€å¯çš„é¡µé¢éƒ½å¯¹åº”åˆ°ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°é¿å…é¡µé¢ä¹‹é—´çš„æ•°æ®å…±äº«åŠä¸€ä¸ªæŠ¥é”™é¡µé¢å¸¦å´©æ‰€æœ‰é¡µé¢çš„æƒ…å†µã€‚</p>
<p>å¦‚æœç”¨æˆ·å¼€äº†å¤šä¸ªé¡µé¢æ¥è®¿é—®ç«™ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªé¡µé¢çš„ä¸»é¢˜åˆ‡æ¢ï¼Œå¦ä¸€ä¸ªé¡µé¢æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œè¿™æ ·ä¸€ä¸ªæµè§ˆå™¨ä¸‹ä¼šæœ‰å¤šä¸ªä¸»é¢˜çš„é¡µé¢ï¼Œå¯¹ç”¨æˆ·ä½“éªŒä¸Šæ¥è¯´æ˜¯ä¸å¤ªå¥½çš„ã€‚</p>
<p>å‡ºäºè¿½æ±‚æè‡´è€ƒè™‘ï¼Œä¼˜åŒ–ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ç›‘å¬æµè§ˆå™¨çš„ç¼“å­˜ä¿®æ”¹äº‹ä»¶ï¼Œç„¶åå†æ¬¡æ‰§è¡Œåˆå§‹åŒ–çš„æ“ä½œå°±å¥½äº†ã€‚</p>
<p>stores/theme.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createContext</span><span class="p">,</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Themes</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IThemeContextProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">theme</span>: <span class="kt">Themes</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTheme</span><span class="o">:</span> <span class="p">(</span><span class="nx">theme</span>: <span class="kt">Themes</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IThemeContextProviderProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">ThemeContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">&lt;</span><span class="nt">IThemeContextProps</span><span class="p">&gt;({}</span> <span class="kr">as</span> <span class="nx">IThemeContextProps</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ThemeContextProvider</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">IThemeContextProviderProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span><span class="nx">children</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">theme</span><span class="p">,</span> <span class="nx">setTheme</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Themes</span><span class="p">&gt;(</span><span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">debugger</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">checkTheme</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">Themes</span> <span class="o">||</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setTheme</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆå§‹åŒ–å…ˆæ‰§è¡Œä¸€é
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">checkTheme</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ç›‘å¬æµè§ˆå™¨ç¼“å­˜äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="nx">checkTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è§£ç»‘
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="nx">checkTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ThemeContext.Provider</span> <span class="na">value</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">theme</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setTheme</span><span class="o">:</span> <span class="p">(</span><span class="nx">currentTheme</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setTheme</span><span class="p">(</span><span class="nx">currentTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">,</span> <span class="nx">currentTheme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="nx">currentTheme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ThemeContext.Provider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">ThemeContextProvider</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨å°è¯•æ‰“å¼€ä¸¤ä¸ªé¡µé¢ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªï¼Œå‘ç°å¦ä¸€ä¸ªä¹Ÿä¼šåŒæ­¥æ›´æ–°ä¸ºä¸€æ ·çš„ä¸»é¢˜äº†ã€‚</p>
<h3 id="é—ªçƒåœºæ™¯ä¼˜åŒ–">é—ªçƒåœºæ™¯ä¼˜åŒ–</h3>
<p>è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå› ä¸ºåœ¨æœåŠ¡å™¨ç«¯æ˜¯è·å–ä¸åˆ°å½“å‰çš„ä¸»é¢˜çš„ï¼Œé€šè¿‡ useEffect é’©å­æ¥è·å–ä¸»é¢˜è¿›è¡Œæ ·å¼çš„æ¸²æŸ“ï¼Œè¿™æ ·å…¶å®ä¼šæœ‰ä¸€ä¸ªä¸»é¢˜åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œåœ¨ä½ç½‘é€Ÿæˆ–æ˜¯å¿«é€Ÿåˆ‡æ¢åœºæ™¯ä¸‹ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„é—ªçƒï¼Œå¯ä»¥åœ¨é’©å­å¤„è®¾ç½®æ–­ç‚¹æŸ¥çœ‹ï¼ˆå½“å‰ç¼“å­˜æ˜¯é»‘è‰²ä¸»é¢˜ï¼‰ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_36.png" alt="" width="700" />  
<p>å¯ä»¥çœ‹åˆ°èµ°åˆ°é’©å­çš„æ—¶å€™ï¼Œæ˜¯è¿˜æ²¡åŠæ³•è¿›è¡Œå¯¹åº”ä¸»é¢˜æ ·å¼æ¸²æŸ“çš„ï¼Œåº”è¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>åªéœ€è¦åœ¨ HTML ä¸­å¼•å…¥å¯¹åº”çš„ scriptï¼Œç¡®ä¿å¯ä»¥åœ¨äº¤äº’ä¹‹å‰è¿›è¡Œä¸»é¢˜çš„åˆå§‹åŒ–å°±è¡Œäº†ã€‚</p>
<p>Nextjs æœ‰æä¾›è¿™ä¸ªèƒ½åŠ›ï¼Œä¿®æ”¹ _document.tsxï¼Œç„¶åå¼•å…¥å¯¹åº”çš„å†…éƒ¨è„šæœ¬ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Html</span><span class="p">,</span> <span class="nx">Head</span><span class="p">,</span> <span class="nx">Main</span><span class="p">,</span> <span class="nx">NextScript</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/document&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Script</span> <span class="kr">from</span> <span class="s1">&#39;next/script&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Document() {</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Main</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">NextScript</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Script</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;theme-script&#34;</span> <span class="na">strategy</span><span class="o">=</span><span class="s">&#34;beforeInteractive&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="sb">`const item = localStorage.getItem(&#39;theme&#39;) || &#39;light&#39;;
</span></span></span><span class="line"><span class="cl"><span class="sb">             localStorage.setItem(&#39;theme&#39;, item);
</span></span></span><span class="line"><span class="cl"><span class="sb">             document.getElementsByTagName(&#39;html&#39;)[0].dataset.theme = item;
</span></span></span><span class="line"><span class="cl"><span class="sb">            `</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>id æ˜¯ç”¨äº Nextjs æ£€ç´¢ï¼ŒbeforeInteractive è¡¨æ˜è¿™ä¸ªè„šæœ¬çš„æ‰§è¡Œç­–ç•¥æ˜¯åœ¨äº¤äº’ä¹‹å‰ï¼Œä¼šè¢«é»˜è®¤æ”¾åˆ° head ä¸­ã€‚</p>
<p>ç°åœ¨å†æ¥è¯•è¯•æ•ˆæœï¼Œå‘ç°èµ°åˆ°é’©å­çš„æ—¶å€™å·²ç»å¯ä»¥æ­£å¸¸å»åˆå§‹åŒ–äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_37.png" alt="" width="700" />  
<h2 id="å¸§åŠ¨ç”»åŠŸèƒ½">å¸§åŠ¨ç”»åŠŸèƒ½</h2>
<p>ä»¥ <a href="https://douyinfe.com/" target="_blank" rel="noopener noreffer ">æŠ–éŸ³å‰ç«¯æŠ€æœ¯å®˜ç½‘</a> çš„é¦–é¡µåŠ è½½åŠ¨ç”»ä¸ºä¾‹ï¼Œçœ‹çœ‹è¿™ä¸ªåŠ¨ç”»ä¸‹ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<p>é¦–å…ˆæ‰“å¼€æ§åˆ¶å°çš„ networkï¼Œä½¿ç”¨ performance æ¥å½•åˆ¶é¦–é¡µåŠ è½½çš„è¿‡ç¨‹ï¼Œä¸ºäº†èƒ½æ›´æ¸…æ™°æŸ¥çœ‹ï¼Œé€‚å½“é™ä½ CPU çš„æ€§èƒ½ï¼Œè°ƒæ•´ä¸º 4 x slowdownã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_38.png" alt="" width="700" />  
<p>ç‚¹å‡»æ§åˆ¶å°å·¦ä¸Šè§’çš„ âšªï¼Œç„¶ååˆ·æ–°é¡µé¢ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„é€å¸§åˆ—è¡¨ï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_39.png" alt="" width="700" />  
<p>ä»ä¸‹é¢çš„åŠ è½½å›¾ä¸­å¯ä»¥åˆ¤æ–­å‡ºï¼Œè¿™ä¸ªåŠ¨ç”»æ€»çš„æ‰§è¡Œæ—¶é•¿ä¸º 1.36 sï¼Œç„¶åä¸Šé¢çš„åˆ—è¡¨ä¸­æœ‰å…·ä½“é¡µé¢åŠ è½½è¿‡ç¨‹çš„å¸§åŠ¨ç”»å˜åŒ–å›¾ï¼Œé€šè¿‡æŒ‰å¸§æŸ¥çœ‹ï¼Œå¯ä»¥å¤§æ¦‚çœ‹å‡ºè¿™ä¸ªåŠ¨ç”»çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_40.png" alt="" width="700" />  
<p>æŒ‰ç…§ä»å°åºåˆ—åˆ°å¤§åºåˆ—çš„é¡ºåºï¼Œæ¯ä¸ªå…ƒç´ åˆ†åˆ«æ‰§è¡Œäº†ä»ä¸‹å¾€ä¸Šçš„å¹³ç§»æ“ä½œï¼Œä»¥åŠä¸€ä¸ªé€æ˜åº¦ä» 0 åˆ° 1 çš„è¿‡ç¨‹ï¼ŒåŠ ä¸Šä¸Šé¢çœ‹åˆ°æ¯ä¸ªåŠ¨ç”»çš„æ—¶é•¿åˆ†æéƒ½æ˜¯ 1.3sï¼Œæ‰€ä»¥åªæ˜¯å¯¹æ¯ä¸ªå…ƒç´ æ¨è¿Ÿäº†ä¸åŒçš„åŠ¨ç”»å¹³ç§»æ—¶é—´ï¼Œä½†æ˜¯å®ƒä»¬äº«æœ‰ç›¸åŒçš„åŠ¨ç”»æ—¶é•¿ï¼Œé’ˆå¯¹è¿™ä¸ªåœºæ™¯åº”è¯¥æ€ä¹ˆå»å®ç°å‘¢ï¼Ÿ</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_41.png" alt="" width="700" />  
<p>é’ˆå¯¹ç°åœ¨çš„é¦–é¡µï¼ŒæŠŠ dom å…ƒç´ ç®€å•æ‹†åˆ†ä¸º 8 ä¸ªåŒºåŸŸï¼Œæ€»åŠ¨ç”»æ—¶é•¿å®šæˆ 1sï¼Œå…¶ä¸­ 1s çš„æ—¶é—´å¯ä»¥åˆ†ä¸º 9 ä¸ªæ—¶é—´å¸§ï¼Œæ¯ä¸ªåŒºåŸŸä»å¯¹åº”åºåˆ—çš„æ—¶é—´å¸§å¼€å§‹æ‰§è¡Œç›¸åŒçš„åŠ¨ç”»æ•ˆæœï¼Œæœ€åæŠŠæ‰€æœ‰çš„å¸§è¿èµ·æ¥å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¸§åŠ¨ç”»ã€‚</p>
<p>å®šä¹‰å¯¹åº”çš„æ ·å¼è¿›è¡Œç»‘å®šï¼Œä»¥ fadeInDown1 ä¸¾ä¾‹ï¼Œ@keyframes æŒ‡å‘åŠ¨ç”»çš„é€å¸§çŠ¶æ€ï¼Œå…¶ä¸­ 0% å’Œ 11 % éƒ½æ˜¯ä¸€æ ·çš„å†…å®¹ï¼Œè¿™æ—¶å€™åŒºåŸŸå¤„äº y è½´ 40px çš„ä½ç½®ï¼Œç„¶åæœ«å°¾çŠ¶æ€æ˜¯æ— åŒºåŸŸçŠ¶æ€å’Œ 1 é€æ˜åº¦ï¼Œè¿™ä¸ªåŠ¨ç”»çš„æ•ˆæœä¼šä½¿å¾—åŠ¨ç”»ä»æ•´ä½“æ—¶é—´çš„ 11% å¼€å§‹æ‰§è¡Œï¼Œåˆ° 100 % å®Œæˆæœ€ç»ˆçš„å˜åŒ–ã€‚</p>
<p>è¿™ä¸ª 11% æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿä¸Šé¢æåˆ°ä¸ºæ¯ä¸ªåŠ¨ç”»å»¶è¿Ÿä¸€ä¸ªå¸§é¢‘ç‡æ‰§è¡Œï¼Œ8 ä¸ªåŒºåŸŸï¼Œå…± 9 å¸§ï¼Œæ‰€ä»¥ 1 å¸§çš„å æ¯”ä¸º 11% çš„æ€»åŠ¨ç”»æ—¶é•¿ï¼Œæ¯ä¸ªåŠ¨ç”»çš„èµ·å§‹æ—¶é—´ï¼ˆç¬¬äºŒä¸ªçŠ¶æ€å€¼ï¼‰éƒ½æ¯”ä¸Šä¸€ä¸ªé«˜å‡º 1 å¸§çš„æ¯”ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥å°†æ•´ä½“å¸§åŠ¨ç”»ä¸²è”èµ·æ¥äº†ã€‚</p>
<p>styles/Home.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.withAnimation</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown1</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown2</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown3</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">2</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown4</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown5</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">4</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown6</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">5</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown7</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">6</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown8</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">11</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">22</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown3</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">33</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown4</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">44</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown5</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">55</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown6</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">66</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown7</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">77</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeInDown8</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">88</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">40</span><span class="kt">px</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¹é€ é¦–é¡µ (index.tsx) Dom ç±»ï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ªåŠ¨ç”»ç±»æ¥å­˜æ”¾åŠ¨ç”»ç›¸å…³çš„æ ·å¼ï¼Œé¿å…å¯¹åŸºç¡€æ ·å¼é€ æˆæ±¡æŸ“ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRef</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}[];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">list</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">mainRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">([</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">])}</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">mainRef</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Home</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Hello SSR!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæŸ¥çœ‹ä¸€ä¸‹æ•ˆæœã€‚</p>
<iframe width="700" height="315" src="/images/ssr/b.webm" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<h3 id="ä¸»åŠ¨è§¦å‘åŠ¨ç”»é‡æ–°æ’­æ”¾">ä¸»åŠ¨è§¦å‘åŠ¨ç”»é‡æ–°æ’­æ”¾</h3>
<p>åœ¨åˆ‡æ¢ä¸»é¢˜æ—¶ï¼Œå¸Œæœ›èƒ½å†æ‰§è¡Œä¸€æ¬¡åŠ è½½åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡ requestAnimationFrame æ¥å®ç°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå›è°ƒï¼Œå¼ºåˆ¶æµè§ˆå™¨åœ¨é‡ç»˜å‰è°ƒç”¨æŒ‡å®šçš„å‡½æ•°æ¥è¿›è¡ŒåŠ¨ç”»çš„æ›´æ–°ã€‚</p>
<p>ä½¿ç”¨è¿™ä¸ªæ¥æ”¹é€ ä¸€ä¸‹é¦–é¡µï¼ŒåŠ ä¸€ä¸ª useEffect çš„é’©å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRef</span><span class="p">,</span> <span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ThemeContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}[];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">list</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">mainRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">theme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">theme</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">([</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">])}</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">mainRef</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Home</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Hello SSR!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">label</span><span class="o">:</span> <span class="s2">&#34;æ–‡ç« 6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">info</span><span class="o">:</span> <span class="s2">&#34;A test for article6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">link</span><span class="o">:</span> <span class="s2">&#34;http://localhost:3000/article/6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ¯æ¬¡ theme å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¸»åŠ¨ç§»é™¤å¯¹åº”çš„åŠ¨ç”»ç±»ï¼Œå†é€šè¿‡ requestAnimationFrame å¯¹åŠ¨ç”»ç±»è¿›é‡æ–°ç»‘å®šï¼Œè¾¾åˆ°ä¸»åŠ¨è§¦å‘åŠ¨ç”»åˆ·æ–°çš„æ•ˆæœï¼Œç°åœ¨æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆæˆå“ã€‚</p>
<iframe width="700" height="315" src="/images/ssr/a.webm" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>  
<h2 id="å¤šåª’ä½“é€‚é…">å¤šåª’ä½“é€‚é…</h2>
<p>ä¹‹å‰çš„é¡µé¢åªç»˜åˆ¶äº† pc ç«¯çš„æ ·å¼ï¼Œé€šå¸¸å®˜ç½‘éœ€è¦æ”¯æŒ pcã€ ipadã€ ç§»åŠ¨ç«¯ç­‰å¤šç§è®¾å¤‡çš„è®¿é—®ï¼Œç°åœ¨éœ€è¦å¯¹å¤šåª’ä½“è®¾å¤‡çš„æ ·å¼è¿›è¡Œå…¼å®¹é€‚é…ã€‚</p>
<h3 id="px-è½¬-rem">Px è½¬ Rem</h3>
<p>åœ¨é€‚é…ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ rem å’Œ pxï¼Œpx æ˜¯ç›¸å¯¹å±å¹•åˆ†è¾¨ç‡çš„åƒç´ å•ä½ï¼Œ rem æ˜¯ç›¸å¯¹ HTML æ ¹å…ƒç´ å­—ä½“å¤§å°è€Œç¡®å®šçš„ç›¸å¯¹å•ä½ï¼Œå¯¹äºå¤šåª’ä½“çš„é€‚é…ï¼Œå¸¸ç”¨ rem è¿›è¡Œå¼€å‘ã€‚</p>
<p>æ‰€ä»¥éœ€è¦å¯¹ä¹‹å‰çš„æ ·å¼è¿›è¡Œä¸€ä¸‹æ›¿æ¢ï¼Œå°† px å•ä½æ›¿æ¢ä¸º remï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡ webstorm çš„ <a href="https://github.com/sunqian1991/px2rwd-intellij-plugin" target="_blank" rel="noopener noreffer ">px2rwd-intellij-plugin</a> æ’ä»¶æ¥ååŠ©å®Œæˆï¼Œå¯ä»¥å‚ç…§ä¸‹å›¾å®‰è£…ï¼Œé»˜è®¤çš„çš„æ ¹å­—ä½“ä¸º 16pxï¼Œæ ¹æ®ç›¸å…³è¯´æ˜æ‰©å±•é…ç½®è°ƒæ•´å³å¯ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_42.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_43.png" alt="" width="700" />  
<p>å®‰è£…å®Œæˆåï¼Œç§»æ­¥åˆ°æ ·å¼é—®é¢˜ï¼Œè¾“å…¥ 16 pxï¼Œå¯ä»¥çœ‹åˆ°ä¼šæœ‰å¯¹åº” rem æç¤ºï¼Œå°†æ‰€æœ‰çš„ px å•ä½æ›¿æ¢å³å¯ã€‚</p>
<h3 id="css-å¤šåª’ä½“è®¾å¤‡é€‚é…">CSS å¤šåª’ä½“è®¾å¤‡é€‚é…</h3>
<p>é€šè¿‡ç¼–å†™ä¸åŒçš„åª’ä½“è®¾å¤‡æ ·å¼æ¥è¿›è¡Œé€‚é…ï¼Œè¿™ç§å¸¸ç”¨äº dom ç»“æ„å˜åŒ–ä¸å¤§ï¼Œå¯ä»¥å¤ç”¨ dom çš„åŸºç¡€ä¸Šï¼Œè°ƒæ•´æ ·å¼å°±èƒ½é€‚é…çš„åœºæ™¯ã€‚ä¸ºåŠ å¼ºå¤ç”¨ï¼Œå¯ä»¥å®šä¹‰å‡ ä¸ªå¸¸ç”¨çš„è®¾å¤‡åœºæ™¯ã€‚</p>
<p>pages/media.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="c1">// æå°åˆ†è¾¨ç‡ç§»åŠ¨ç«¯è®¾å¤‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">@mixin</span><span class="nf"> media-mini-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">25</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">@content</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ä»‹äºæå°åˆ†è¾¨ç‡å’Œæ­£å¸¸åˆ†è¾¨ç‡ä¹‹é—´çš„ç§»åŠ¨ç«¯è®¾å¤‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">@mixin</span><span class="nf"> media-between-mini-and-normal-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">min-width</span><span class="o">:</span> <span class="mi">25</span><span class="mf">.876</span><span class="kt">rem</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">47</span><span class="mf">.9375</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">@content</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ç§»åŠ¨ç«¯è®¾å¤‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">@mixin</span><span class="nf"> media-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">47</span><span class="mf">.9375</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">@content</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ipad
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">@mixin</span><span class="nf"> media-ipad</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">min-width</span><span class="o">:</span> <span class="mi">47</span><span class="mf">.9375</span><span class="kt">rem</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">75</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">@content</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å¤§éƒ¨åˆ†åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥å¼•å…¥è¿™äº›å®šä¹‰è¿›è¡Œé€‚é…ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-ipad</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥ footer ç»„ä»¶ä¸¾ä¾‹ï¼Œæ”¹é€ ä¸€ä¸‹å®ƒä¹‹å‰çš„æ ·å¼ã€‚</p>
<p>components/footer/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="k">@import</span> <span class="s2">&#34;./pages/media.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">4</span><span class="mf">.375</span><span class="kt">rem</span> <span class="mi">9</span><span class="mf">.0625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">footer-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.topArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">flex-wrap</span><span class="o">:</span> <span class="ni">wrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.footerTitle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.linkListArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.linkArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">word-break</span><span class="o">:</span> <span class="ni">keep-all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.links</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">font-size</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">word-break</span><span class="o">:</span> <span class="ni">keep-all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.link</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="nc">.disabled</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="na">cursor</span><span class="o">:</span> <span class="ni">not-allowed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.linkArea</span><span class="nd">:first-of-type</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.bottomArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.codeArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.numArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">flex-end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nt">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.publicLogo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-right</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">min-width</span><span class="o">:</span> <span class="mi">48</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">54</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.topArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.footerTitle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@media</span> <span class="ni">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="na">max-width</span><span class="o">:</span> <span class="mi">48</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.topArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.footerTitle</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.linkListArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.linkArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin-left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.bottomArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.codeArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.text</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="na">margin</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.numArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// @include media-ipad {
</span></span></span><span class="line"><span class="cl"><span class="c1">// }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°æ•ˆæœï¼š</p>
<iframe width="700" height="315" src="/images/ssr/c.webm" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<h3 id="context-æ³¨å…¥è®¾å¤‡ä¿¡æ¯">Context æ³¨å…¥è®¾å¤‡ä¿¡æ¯</h3>
<p>å¯¹äºé¡µé¢çš„æ ·å¼é€‚é…ï¼ŒCSS media å·²ç»å¯ä»¥è¦†ç›–ç»å¤§éƒ¨åˆ†çš„åœºæ™¯ï¼Œä½†å°éƒ¨åˆ†çš„åœºæ™¯ä»ç„¶æ— æ³•è¦†ç›–ï¼Œæ¯”å¦‚åœ¨ä¸€äº›åª’ä½“è®¾å¤‡ä¸‹ï¼Œä¸å†é‡‡ç”¨åŸæœ¬çš„ dom ç»“æ„ï¼Œæ¢ç”¨åˆ«çš„äº¤äº’å½¢å¼ï¼Œå°±æ²¡åŠæ³•ç›´æ¥ç”¨æ ·å¼è¦†ç›–äº†ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡åœ¨å®¢æˆ·ç«¯åˆ¤æ–­å½“å‰çš„è®¾å¤‡ï¼Œé€‰ç”¨ä¸åŒçš„äº¤äº’ã€‚</p>
<p>åº”è¯¥æ€ä¹ˆåœ¨å®¢æˆ·ç«¯åˆ¤æ–­å½“å‰çš„è®¾å¤‡å‘¢ï¼Ÿ</p>
<p>å¯ä»¥å®šä¹‰ä¸€ä¸ª contextï¼Œç”¨äºåˆ¤æ–­å½“å‰çš„è®¾å¤‡ï¼Œç„¶åæ³¨å…¥ç»™æ¯ä¸ªé¡µé¢ã€‚åˆ¤æ–­è®¾å¤‡çš„æ–¹å¼å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡é¡µå®½æ¥åˆ¤æ–­å°±å¯ã€‚</p>
<p>constants/enum.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">enum</span> <span class="nx">Environment</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pc</span> <span class="o">=</span> <span class="s1">&#39;pc&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ipad</span> <span class="o">=</span> <span class="s1">&#39;ipad&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mobile</span> <span class="o">=</span> <span class="s1">&#39;mobile&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">none</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>stores/userAgent.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">createContext</span><span class="p">,</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Environment</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IUserAgentContextProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">userAgent</span>: <span class="kt">Environment</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IUserAgentProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">UserAgentContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">&lt;</span><span class="nt">IUserAgentContextProps</span><span class="p">&gt;({}</span> <span class="kr">as</span> <span class="nx">IUserAgentContextProps</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">UserAgentProvider</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">IUserAgentProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">userAgent</span><span class="p">,</span> <span class="nx">setUserAgent</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Environment</span><span class="p">&gt;(</span><span class="nx">Environment</span><span class="p">.</span><span class="nx">none</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘å¬æœ¬åœ°ç¼“å­˜æ¥åŒæ­¥ä¸åŒé¡µé¢é—´çš„ä¸»é¢˜ï¼ˆå½“å‰é¡µé¢æ— æ³•ç›‘å¬åˆ°ï¼Œç›´æ¥åœ¨é¡¶éƒ¨æ è¿›è¡Œäº†ç±»çš„åˆ‡æ¢)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">checkUserAgent</span> <span class="o">=</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">switch</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="nx">width</span> <span class="o">&lt;</span> <span class="nx">768</span>:
</span></span><span class="line"><span class="cl">          <span class="kt">setUserAgent</span><span class="p">(</span><span class="nx">Environment</span><span class="p">.</span><span class="nx">mobile</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="nx">width</span> <span class="o">&gt;=</span> <span class="mi">768</span> <span class="o">&amp;&amp;</span> <span class="nx">width</span> <span class="o">&lt;</span> <span class="nx">1200</span>:
</span></span><span class="line"><span class="cl">          <span class="kt">setUserAgent</span><span class="p">(</span><span class="nx">Environment</span><span class="p">.</span><span class="nx">ipad</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="nx">width</span> <span class="o">&gt;=</span> <span class="nx">1200</span>:
</span></span><span class="line"><span class="cl">          <span class="kt">setUserAgent</span><span class="p">(</span><span class="nx">Environment</span><span class="p">.</span><span class="nx">pc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">          <span class="nx">setUserAgent</span><span class="p">(</span><span class="nx">Environment</span><span class="p">.</span><span class="nx">none</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">checkUserAgent</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="nx">checkUserAgent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="nx">checkUserAgent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="k">typeof</span> <span class="nb">document</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">UserAgentContext.Provider</span> <span class="na">value</span><span class="o">=</span><span class="p">{{</span> <span class="nx">userAgent</span> <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">UserAgentContext.Provider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">UserAgentProvider</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Environment.noneï¼šè®¾ç½®ä¸€ä¸ªç©ºæ€ï¼Œä¸ºäº†é¿å…æœªå–åˆ°é¡µå®½æ—¶ï¼Œé”™è¯¯èµ‹å€¼éå½“å‰é¡µé¢çš„è®¾å¤‡åˆ†è¾¨ç‡çš„å€¼ï¼Œå¯¼è‡´å¯èƒ½ä¼šå‡ºç°åˆ†è¾¨ç‡æ ·å¼çš„çŸ­æš‚åˆ‡æ¢é€ æˆçš„è§†è§‰å†²çªã€‚</li>
<li>typeof document !== &ldquo;undefined&rdquo; &amp;&amp; document.body.offsetWidthï¼š é™¤é’©å­æ–¹æ³•é‡Œï¼ˆæ¯”å¦‚ useEffectï¼‰ä»¥å¤–çš„é€»è¾‘ï¼Œéƒ½æ˜¯ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„ï¼Œåœ¨æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰ BOM çš„æ³¨å…¥çš„ï¼Œæ‰€ä»¥éœ€è¦å¯¹ BOM çš„è°ƒç”¨è¿›è¡Œåˆ¤ç©ºã€‚</li>
</ul>
<p>æŠŠè¿™ä¸ª context åŒæ ·æ³¨å…¥åˆ°å…¥å£æ–‡ä»¶ã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ navbar ç»„ä»¶ç®€å•è°ƒç”¨è¯•è¯•ã€‚</p>
<p>components/navbar/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s2">&#34;./index.module.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ThemeContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/theme&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">UserAgentContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/userAgent&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Themes</span><span class="p">,</span> <span class="nx">Environment</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/constants/enum&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">INavBarProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">NavBar</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">INavBarProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setTheme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">userAgent</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">UserAgentContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">navBar</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://localhost:3000/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logoIcon</span><span class="p">}&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">pc</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="err">å½“å‰æ˜¯</span><span class="nx">pc</span><span class="err">ç«¯æ ·å¼</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">ipad</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="err">å½“å‰æ˜¯</span><span class="nx">Ipad</span><span class="err">ç«¯æ ·å¼</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">mobile</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;</span><span class="err">å½“å‰æ˜¯ç§»åŠ¨ç«¯æ ·å¼</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span>
</span></span><span class="line"><span class="cl">          <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeIcon</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&#34;theme&#34;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">setTheme</span><span class="p">(</span><span class="nx">Themes</span><span class="p">.</span><span class="nx">dark</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">setTheme</span><span class="p">(</span><span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°æ•ˆæœï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_44.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_45.png" alt="" width="700" />  
<h3 id="æœåŠ¡ç«¯åˆ¤å®šè®¾å¤‡ä¿¡æ¯">æœåŠ¡ç«¯åˆ¤å®šè®¾å¤‡ä¿¡æ¯</h3>
<p>å®¢æˆ·ç«¯åˆ¤å®šè®¾å¤‡å­˜åœ¨ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œå› ä¸º HTML æ–‡æœ¬çš„ç”Ÿæˆæ˜¯åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯åˆ¤æ–­è®¾å¤‡ä¿¡æ¯ä¼šå­˜åœ¨ä¸€ä¸ªåˆå§‹æ€åˆ°å®é™…è®¾å¤‡æ•°æ®çŸ­æš‚åˆ‡æ¢çš„é—®é¢˜ï¼Œè€Œä¸”å¦‚æœä¸åŒè®¾å¤‡å±•ç¤ºçš„å†…å®¹ä¸åŒï¼Œè¿˜æœ‰å¯èƒ½ä¼šå½±å“åˆ°å®é™…çš„ SEO ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯åˆ¤æ–­å½“å‰çš„è®¿é—®è®¾å¤‡å‘¢ï¼Ÿ</p>
<p>è™½ç„¶æœåŠ¡å™¨ç«¯æ‹¿ä¸åˆ°å½“å‰è®¿é—®çš„å®¢æˆ·ç«¯é¡µå®½ç­‰æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯åœ¨æœåŠ¡å™¨ç«¯è¯·æ±‚çš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­æœ‰ä¸€ä¸ª user-agent è¯·æ±‚å¤´ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­å½“å‰çš„è®¾å¤‡æ˜¯ pc ç«¯è¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œé€šè¿‡è¿™ä¸ªæ¥åˆ¤æ–­ï¼Œå°±å¯ä»¥åœ¨ HTML æ–‡æœ¬è¿”å›å‰ï¼Œå°±æ‹¿åˆ°å®é™…çš„è®¾å¤‡ DOMã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_46.png" alt="" width="700" />  
<p>å…ˆæ¥å®šä¹‰ä¸€ä¸‹åˆ¤æ–­è®¾å¤‡çš„é€šç”¨æ–¹æ³•ã€‚</p>
<p>utils/index.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getIsMobile</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">req</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="sr">/mobile|android|iphone|ipad|phone/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;user-agent&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååœ¨å…¥å£æ–‡ä»¶çš„æ³¨å…¥å‡½æ•°é‡Œï¼Œé¢å¤–æ³¨å…¥ä¸€ä¸ªè®¾å¤‡ä¿¡æ¯ï¼Œå¦‚æœæ˜¯ç§»åŠ¨ç«¯ï¼Œå°±ç»™æ ‡é¢˜åŠ ä¸€ä¸ªâ€œï¼ˆç§»åŠ¨ç«¯ï¼‰â€ï¼Œ å¦‚æœæ˜¯ pc ç«¯ï¼Œå°±åŠ ä¸€ä¸ª â€œï¼ˆpc ç«¯ï¼‰â€ã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ThemeContextProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">UserAgentProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/userAgent&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">LOCALDOMAIN</span><span class="p">,</span> <span class="nx">getIsMobile</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">appWithTranslation</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="nx">isMobile</span>: <span class="kt">boolean</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span><span class="p">,</span> <span class="nx">isMobile</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;{</span><span class="sb">`A Demo for å®˜ç½‘å¼€å‘å®æˆ˜ (</span><span class="si">${</span>
</span></span><span class="line"><span class="cl">          <span class="nx">isMobile</span> <span class="o">?</span> <span class="s2">&#34;ç§»åŠ¨ç«¯&#34;</span> <span class="o">:</span> <span class="s2">&#34;pcç«¯&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="si">}</span><span class="sb">)`</span><span class="p">}&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/layout`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isMobile</span>: <span class="kt">getIsMobile</span><span class="p">(</span><span class="nx">context</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">appWithTranslation</span><span class="p">(</span><span class="nx">MyApp</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä¸šåŠ¡åŠŸèƒ½å®ç°">ä¸šåŠ¡åŠŸèƒ½å®ç°</h2>
<p>å®˜ç½‘ä½œä¸ºä¸€ä¸ªå“ç‰Œå½¢è±¡çš„è½½ä½“ï¼Œè‚¯å®šéœ€è¦å¤§é‡çš„æ–‡ç« æˆ–ä¿¡æ¯ï¼Œæ¥è¿›è¡Œæ–‡åŒ–ä»·å€¼è§‚çš„ä¼ è¾“ï¼Œæ–‡ç« çš„å†…å®¹ä¸€å¤šï¼Œè‡ªç„¶éœ€è¦ä¸ºå®ƒå®ç°å¯¹åº”çš„åˆ†é¡µã€‚</p>
<h3 id="æ–‡ç« é¡µåˆ†é¡µ">æ–‡ç« é¡µåˆ†é¡µ</h3>
<h4 id="æ ·å¼å®ç°">æ ·å¼å®ç°</h4>
<p>åˆ†é¡µçš„ç»„ä»¶ä½¿ç”¨ semi-design (å…¶å®ƒUIæ¡†æ¶æ–¹æ³•ç±»ä¼¼) æ¥å®ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install @douyinfe/semi-ui --save
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»™é¦–é¡µæ–‡ç« å—ä¸‹é¢åŠ ä¸€ä¸ªåˆ†é¡µã€‚</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Pagination</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@douyinfe/semi-ui&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">paginationArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Pagination</span> <span class="na">total</span><span class="o">=</span><span class="p">{</span><span class="nx">articles</span><span class="o">?</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="na">pageSize</span><span class="o">=</span><span class="p">{</span><span class="mi">6</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Nextjs å¸Œæœ›å¯ä»¥è‡ªä¸»å¯¼å…¥ä¾èµ–ä¸­çš„æ ·å¼ï¼Œè€Œä¸æ˜¯éšç€ä¾èµ–ç›´æ¥å¯¼å…¥æ ·å¼ï¼Œé¿å…å¯¹å…¨å±€æ ·å¼é€ æˆå½±å“ã€‚</p>
<p>Semi çš„ä¾èµ–é»˜è®¤æ˜¯åœ¨å…¥å£æ–‡ä»¶ç»Ÿä¸€å¯¼å…¥çš„ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒSemi æä¾›äº† semi-next æ’ä»¶æ¥å¯¹å…¥å£æ–‡ä»¶æ ·å¼è¿›è¡Œå»é™¤ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i @douyinfe/semi-next
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…å¥½ semi-next åï¼Œåˆ° nextjs çš„é…ç½®æ–‡ä»¶ï¼Œç”¨ semi-next åŒ…è£¹ä¸€å±‚é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé»˜è®¤å¯¼å…¥æ ·å¼çš„å»é™¤ã€‚</p>
<p>next.config.js</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/** @type {import(&#39;next&#39;).NextConfig} */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">semi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@douyinfe/semi-next&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">({});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">nextConfig</span> <span class="o">=</span> <span class="nx">semi</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">reactStrictMode</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">swcMinify</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">images</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">domains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">nextConfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å…¨å±€æ ·å¼ä¸­æ‰‹åŠ¨å¯¼å…¥ Semi çš„æ ·å¼ã€‚</p>
<p>styles/global.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">@</span><span class="k">import</span> <span class="s2">&#34;~@douyinfe/semi-ui/dist/css/semi.min.css&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é’ˆå¯¹åˆ†é¡µç»„ä»¶è¦†ç›–ä¸€ä¸‹ä¸»é¢˜åŒ–çš„æ ·å¼ï¼Œæ ·å¼è¦†ç›–æ˜¯é€šè¿‡ global æ ·å¼å»åšã€‚</p>
<p>styles/Home.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="k">@import</span> <span class="s2">&#34;./pages/media.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@mixin</span><span class="nf"> initStatus</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">transform</span><span class="o">:</span> <span class="nf">translate3d</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="mf">.5</span><span class="kt">rem</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@mixin</span><span class="nf"> finalStatus</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">-webkit-transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">transform</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.container</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">padding</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">flex</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">home-background-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-size</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">width</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">height</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.headerWebp</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">home-background-icon-webp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.top</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="nt">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="nt">a</span><span class="nd">:hover</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="nt">a</span><span class="nd">:focus</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="nt">a</span><span class="nd">:active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">underline</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.15</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">margin</span><span class="o">:</span> <span class="mi">4</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.grid</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">align-items</span><span class="o">:</span> <span class="ni">flex-start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">justify-content</span><span class="o">:</span> <span class="ni">flex-start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">flex-wrap</span><span class="o">:</span> <span class="ni">wrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">max-width</span><span class="o">:</span> <span class="mi">62</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">transition</span><span class="o">:</span> <span class="mi">2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">min-height</span><span class="o">:</span> <span class="mi">36</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">padding</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">text-align</span><span class="o">:</span> <span class="ni">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">color</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">text-decoration</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">border</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.0625</span><span class="kt">rem</span> <span class="ni">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">footer-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="na">border-radius</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">transition</span><span class="o">:</span> <span class="ni">color</span> <span class="mi">0</span><span class="mf">.15</span><span class="kt">s</span> <span class="ni">ease</span><span class="o">,</span> <span class="n">border-color</span> <span class="mi">0</span><span class="mf">.15</span><span class="kt">s</span> <span class="ni">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">max-width</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">width</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">height</span><span class="o">:</span> <span class="mi">13</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span><span class="nd">:hover</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span><span class="nd">:focus</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span><span class="nd">:active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="na">border-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span> <span class="nt">h2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nc">.card</span> <span class="nt">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.paginationArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">width</span><span class="o">:</span> <span class="mi">62</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">justify-content</span><span class="o">:</span> <span class="ni">flex-end</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">padding</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nd">:global</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.semi-page-item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.semi-page-item</span><span class="nd">:hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">semi-page-hover-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.semi-page-item-active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">semi-page-active-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">semi-page-active-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nc">.semi-page-item-active</span><span class="nd">:hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">semi-page-active-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">semi-page-active-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.withAnimation</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown1</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown2</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown3</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">2</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown4</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown5</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">4</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown6</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">5</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown7</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.card</span><span class="nd">:nth-of-type</span><span class="o">(</span><span class="nt">6</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">animation</span><span class="o">:</span> <span class="n">fadeInDown8</span> <span class="mi">1</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">11</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">22</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown3</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">33</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown4</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">44</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown5</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">55</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown6</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">66</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown7</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">77</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">@keyframes</span> <span class="nt">fadeInDown8</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">88</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> initStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">@include</span><span class="nd"> finalStatus</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-ipad</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.container</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.grid</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">width</span><span class="o">:</span> <span class="mi">95</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="ni">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.container</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">line-height</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.4375</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.description</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">font-size</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="mi">2</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.grid</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">width</span><span class="o">:</span> <span class="mi">95</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">margin</span><span class="o">:</span> <span class="ni">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nc">.card</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">height</span><span class="o">:</span> <span class="mi">10</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="nt">h2</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="nt">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">font-size</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°æ•ˆæœï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_47.png" alt="" width="700" />  
<h4 id="æ¥å£å±‚å®ç°">æ¥å£å±‚å®ç°</h4>
<p>è®¾è®¡ä¸‰ä¸ªç»“æ„ä½“ï¼ŒArticleInfoã€ArticleIntroduction å’Œ Homeï¼Œå…¶ä¸­ Home å°±æ˜¯é¦–é¡µé‚£ä¸¤ä¸ªåŸºç¡€æ–‡æ¡ˆï¼ŒArticleIntroduction æ˜¯æ–‡ç« ç›¸å…³çš„ç®€ä»‹ï¼Œlink æŒ‡å‘ ArticleInfo å¯¹åº”å…ƒç´ çš„ id å³å¯ã€‚</p>
<p>è¿™é‡Œæ–‡ç« å†…å®¹å•ç‹¬æ”¾åœ¨ ArticleInfoï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œæ˜¯å› ä¸ºè€ƒè™‘åˆ°æ–‡ç« å†…å®¹å¾€å¾€å¾ˆå¤šï¼Œå¦‚æœæ”¾åœ¨ ArticleIntroduction ä¸­è¿›è¡Œåˆ†é¡µï¼Œcdn æ‹‰å–çš„æ—¶é—´éšç€æ–‡ç« çš„å¢å¤šï¼Œå¯èƒ½ä¼šè¶Šæ¥è¶Šé•¿ã€‚</p>
<p>å¯åŠ¨ä¸€ä¸‹ CMS çš„é¡¹ç›®ï¼Œé…ç½®å¯¹åº”çš„ç»“æ„ä½“ï¼Œå¡«ä¸Šæ•°æ®ã€‚</p>
<p>Home:</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_48.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_51.png" alt="" width="700" />  
<p>ArticleIntroduction:</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_49.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_52.png" alt="" width="700" />  
<p>ArticleInfo:</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_50.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_53.png" alt="" width="700" />  
<p>å…¶ä¸­å¯Œæ–‡æœ¬åŒºåŸŸçš„é…ç½®éœ€è¦ç€é‡å…³æ³¨ä¸€ä¸‹ï¼Œå…¶ä¸­åŒ…å«äº†æ–‡æœ¬ã€æ ‡é¢˜å’Œå›¾ç‰‡ï¼Œè¿™ä¸ªå…¶å®å’Œå¹³å¸¸ç”¨çš„ä¸€äº›æ–‡æœ¬ç¼–è¾‘å™¨è¿˜æ˜¯å¾ˆåƒçš„ï¼Œç‚¹å‡» preview mode å¤„å¯ä»¥çœ‹åˆ°æ•ˆæœï¼ŒæŒ‰ç…§å¹³æ—¶å†™ç¬”è®°çš„ä¹ æƒ¯ï¼Œç”¨ markdown è¯­è¨€å»é…ç½®æ–‡ç« å°±å¯ä»¥äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_54.png" alt="" width="700" />  
<p>æŒ‰ç…§ä¹‹å‰çš„é…ç½®ï¼Œç»™è¿™äº›ç»“æ„ä½“å¼€ä¸€ä¸‹ findã€findone ç­‰é…ç½®ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_55.png" alt="" width="700" />  
<p>éšä¾¿å¼€ä¸€ä¸ªæ¨¡å—çœ‹çœ‹ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_56.png" alt="" width="700" />  
<p>å¥½åƒæœ‰ time ç­‰ç›¸å…³æ•°æ®ï¼Œå‚ç…§ä¸Šæ¬¡ï¼ŒæŠŠå¯¹åº”ç”¨ä¸ä¸Šçš„æ•°æ®æ¸…æ‰ã€‚</p>
<p>home controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * home controller
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">removeTime</span><span class="p">,</span> <span class="nx">removeAttrsAndId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../../utils/index&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">createCoreController</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@strapi/strapi&#39;</span><span class="p">).</span><span class="nx">factories</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">createCoreController</span><span class="p">(</span><span class="s1">&#39;api::home.home&#39;</span><span class="p">,</span> <span class="p">({</span> <span class="nx">strapi</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="kr">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">populate</span><span class="o">:</span> <span class="s1">&#39;deep&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">removeTime</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_57.png" alt="" width="700" />  
<p>éœ€è¦å¯¹ ArticleIntroduce åšä¸€ä¸ªåˆ†é¡µçš„æ“ä½œï¼ŒStrapi ä¸­é’ˆå¯¹åˆ†é¡µçš„æ“ä½œæä¾›äº† pagination[page] å’Œ pagination[pageSize] ä¸¤ä¸ªå‚æ•°ï¼Œç±»ä¼¼ä¸‹é¢çš„æ•ˆæœã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/api/articles?pagination[page]=1&amp;pagination[pageSize]=10 // æŒ‰10ä¸ª/é¡µåˆ†é¡µï¼Œè¿”å›ç¬¬ä¸€é¡µçš„æ•°æ®
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸¤ä¸ªå‚æ•°å¤ªé•¿äº†ï¼Œå®šä¹‰ä¸¤ä¸ªè‡ªå·±çš„å‚æ•°ï¼ŒpageNo, pageSizeï¼Œç„¶ååœ¨å®ƒçš„åŸºç¡€ä¸Šé­”æ”¹ä¸€ä¸‹å°±å¯ä»¥ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<p>article-introduction controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">removeTime</span><span class="p">,</span> <span class="nx">removeAttrsAndId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;../../../utils/index.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> *  article-introduction controller
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">createCoreController</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@strapi/strapi&#34;</span><span class="p">).</span><span class="nx">factories</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">createCoreController</span><span class="p">(</span><span class="s2">&#34;api::article-introduction.article-introduction&#34;</span><span class="p">,</span> <span class="p">({</span> <span class="nx">strapi</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="kr">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">pageNo</span><span class="p">,</span> <span class="nx">pageSize</span><span class="p">,</span> <span class="p">...</span><span class="nx">params</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">pageNo</span> <span class="o">&amp;&amp;</span> <span class="nx">pageSize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">ctx</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="p">...</span><span class="nx">params</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;pagination[page]&#34;</span><span class="o">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">pageNo</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;pagination[pageSize]&#34;</span><span class="o">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">pageSize</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">removeTime</span><span class="p">(</span><span class="nx">data</span><span class="p">)),</span> <span class="nx">meta</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_58.png" alt="" width="700" />  
<p>article-info controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">removeTime</span><span class="p">,</span> <span class="nx">removeAttrsAndId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;../../../utils/index.js&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> *  article-info controller
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">createCoreController</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@strapi/strapi&#34;</span><span class="p">).</span><span class="nx">factories</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">createCoreController</span><span class="p">(</span><span class="s2">&#34;api::article-info.article-info&#34;</span><span class="p">,</span> <span class="p">({</span> <span class="nx">strapi</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="kr">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">removeTime</span><span class="p">(</span><span class="nx">data</span><span class="p">)),</span> <span class="nx">meta</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="kr">async</span> <span class="nx">findOne</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">super</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">removeAttrsAndId</span><span class="p">(</span><span class="nx">removeTime</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_59.png" alt="" width="700" />  
<p>æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ BFF å±‚çš„ä»£ç ï¼Œä¸‰ä¸ªç»“æ„ä½“åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæ¥å£å±‚ã€‚</p>
<p>pages/api/home.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextApiRequest</span><span class="p">,</span> <span class="nx">NextApiResponse</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">nextConnect</span> <span class="kr">from</span> <span class="s1">&#39;next-connect&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">CMSDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getHomeData</span> <span class="o">=</span> <span class="nx">nextConnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="kr">get</span><span class="p">((</span><span class="nx">req</span>: <span class="kt">NextApiRequest</span><span class="p">,</span> <span class="nx">res</span>: <span class="kt">NextApiResponse</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">CMSDOMAIN</span><span class="si">}</span><span class="sb">/api/homes`</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">getHomeData</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥æ˜¯æ–‡ç« ç®€ä»‹çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ¥å—åˆ†é¡µçš„ä¸¤ä¸ªå…¥å‚è¿›è¡Œå¯¹åº”çš„åˆ†é¡µã€‚</p>
<p>pages/api/articleIntroduction.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextApiRequest</span><span class="p">,</span> <span class="nx">NextApiResponse</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">nextConnect</span> <span class="kr">from</span> <span class="s1">&#39;next-connect&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">CMSDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IArticleIntroduction</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">articleId</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IArticleIntroductionProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span>: <span class="kt">IArticleIntroduction</span><span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="nx">total</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ArticleIntroductionData</span> <span class="o">=</span> <span class="nx">nextConnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">post</span><span class="p">((</span><span class="nx">req</span>: <span class="kt">NextApiRequest</span><span class="p">,</span> <span class="nx">res</span>: <span class="kt">NextApiResponse</span><span class="p">&lt;</span><span class="nt">IArticleIntroductionProps</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">pageNo</span><span class="p">,</span> <span class="nx">pageSize</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">CMSDOMAIN</span><span class="si">}</span><span class="sb">/api/article-introductions`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">pageNo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">pageSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">meta</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">list</span>: <span class="kt">Object.values</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="nx">total</span>: <span class="kt">meta.pagination.total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">ArticleIntroductionData</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>list éœ€è¦ç”¨ Object.values åŒ…ä¸€å±‚ dataï¼Œå› ä¸ºé’ˆå¯¹æ²¡æœ‰ relation çš„å¤šä¸ªå…ƒç´ ï¼ŒStrapi æ˜¯é€šè¿‡ object ç±»å‹è¿”å›ï¼Œæ‰€ä»¥éœ€è¦å¤„ç†ä¸€å±‚è½¬æˆéœ€è¦çš„æ•°ç»„æ ¼å¼ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_60.png" alt="" width="700" />  
<p>æœ€åä¸€ä¸ªæ¥å£æ˜¯æ–‡ç« è¯¦æƒ…æ¥å£ï¼Œæ¥å£åŒ…å«ä¸€ä¸ª id çš„å…¥å‚ï¼Œå¯ä»¥æ”¯æŒå¯¹æ•°æ®è¿›è¡Œå•æŸ¥ï¼Œç›´æ¥è°ƒç”¨ Strapi çš„ findOne æ¥å£å®ç°å°±å¥½ã€‚</p>
<p>pages/api/articleInfo.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">nextConnect</span> <span class="kr">from</span> <span class="s1">&#39;next-connect&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextApiRequest</span><span class="p">,</span> <span class="nx">NextApiResponse</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">CMSDOMAIN</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">IArticleProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/article/[articleId]&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">getArticleInfoData</span> <span class="o">=</span> <span class="nx">nextConnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="kr">get</span><span class="p">((</span><span class="nx">req</span>: <span class="kt">NextApiRequest</span><span class="p">,</span> <span class="nx">res</span>: <span class="kt">NextApiResponse</span><span class="p">&lt;</span><span class="nt">IArticleProps</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="p">{</span> <span class="nx">articleId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">CMSDOMAIN</span><span class="si">}</span><span class="sb">/api/article-infos/</span><span class="si">${</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">getArticleInfoData</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ°è¿™é‡Œ BFF å±‚å°±å®šä¹‰å¥½äº†ï¼Œæ¥ä¸‹æ¥æ”¹é€ ä¸€ä¸‹é¦–é¡µï¼Œæ¥å…¥ä¸€ä¸‹æ¥å£æ›¿æ¢åŸå…ˆçš„é™æ€æ•°æ®ã€‚</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">Home</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span>: <span class="kt">homeData</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/home`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span>: <span class="kt">articleData</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntro`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageNo</span>: <span class="kt">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span>: <span class="kt">homeData.title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span>: <span class="kt">homeData.description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span>: <span class="kt">articleData.list.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntro</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">total</span>: <span class="kt">articleData.total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åçœ‹çœ‹æ•ˆæœï¼Œæ•°æ®å·²ç»æ³¨å…¥è¿›å»äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_61.png" alt="" width="700" />  
<p>æŠŠå®¢æˆ·ç«¯çš„åˆ†é¡µäº‹ä»¶ç»‘å®šä¸€ä¸‹ã€‚</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span><span class="nx">NextPage</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Pagination</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@douyinfe/semi-ui&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LOCALDOMAIN</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/utils&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">IArticleIntroduction</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/pages/api/articleIntroduction&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}[];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">total</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">articles</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">content</span><span class="p">,</span> <span class="nx">setContent</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">articles</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">mainRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">theme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">theme</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span>
</span></span><span class="line"><span class="cl">        <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">([</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">])}</span>
</span></span><span class="line"><span class="cl">        <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">mainRef</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span>
</span></span><span class="line"><span class="cl">                <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}</span>
</span></span><span class="line"><span class="cl">              <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">})}</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">paginationArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Pagination</span>
</span></span><span class="line"><span class="cl">              <span class="na">total</span><span class="o">=</span><span class="p">{</span><span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="na">pageSize</span><span class="o">=</span><span class="p">{</span><span class="mi">6</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="na">onPageChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">pageNo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">                  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntro`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">pageNo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="p">})</span>
</span></span><span class="line"><span class="cl">                  <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">setContent</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                      <span class="nx">list</span>: <span class="kt">data.list.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntro</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">};</span>
</span></span><span class="line"><span class="cl">                      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">                      <span class="nx">total</span>: <span class="kt">data.total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">});</span>
</span></span><span class="line"><span class="cl">                  <span class="p">});</span>
</span></span><span class="line"><span class="cl">              <span class="p">}}</span>
</span></span><span class="line"><span class="cl">            <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">/// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥ç»™å¯¹åº”çš„æ–‡ç« é¡µé¢ç»‘å®šä¸€ä¸‹æ¥å£æ•°æ®ã€‚</p>
<p>pages/article/[articleId].tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="nx">Article</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">articleId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleInfo`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">articleId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Article</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_62.png" alt="" width="700" />  
<p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸‹ï¼Œå†…å®¹æ˜¯ Markdownï¼ŒMarkdown è½¬ HTML å¯ä»¥ä½¿ç”¨ showdownï¼Œè¿™æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºè½¬æ¢ markdown ä¸º HTML çš„åº“ï¼Œå®‰è£…ä¾èµ–ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install showdown --save
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå¯¹é¡µé¢çš„ content è¿›è¡Œä¸€ä¸‹è½¬æ¢ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LOCALDOMAIN</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">showdown</span> <span class="o">=</span> <span class="kr">require</span><span class="p">(</span><span class="s1">&#39;showdown&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IArticleProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">author</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">createTime</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">content</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Article</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IArticleProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">author</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">createTime</span><span class="p">,</span> <span class="nx">content</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">converter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">showdown</span><span class="p">.</span><span class="nx">Converter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">article</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">info</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="err">ä½œè€…ï¼š</span><span class="p">{</span><span class="nx">author</span><span class="p">}</span> <span class="o">|</span> <span class="err">åˆ›å»ºæ—¶é—´</span><span class="o">:</span> <span class="p">{</span><span class="nx">createTime</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span> <span class="na">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{{</span><span class="nx">__html</span>: <span class="kt">converter.makeHtml</span><span class="p">(</span><span class="nx">content</span><span class="p">)}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Article</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">articleId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleInfo`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">articleId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Article</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_63.png" alt="" width="700" />  
<h2 id="å›½é™…åŒ–åŠŸèƒ½">å›½é™…åŒ–åŠŸèƒ½</h2>
<p>å®˜ç½‘ä¸ä¸€å®šæ˜¯ç»™ä¸€ä¸ªå›½å®¶çš„äººçœ‹çš„ï¼Œå¯èƒ½å…¬å¸æˆ–æ˜¯å›¢é˜Ÿçš„ä¸šåŠ¡æ˜¯é’ˆå¯¹å¤šä¸ªåœ°åŒºçš„ï¼Œè¯­è¨€ä¸åº”è¯¥æˆä¸ºä»·å€¼è§‚ä¼ è¾“çš„é˜»ç¢ï¼Œæ‰€ä»¥å¦‚æœæ˜¯å¤šåœ°åŒºä¸šåŠ¡çº¿çš„å…¬å¸ï¼Œå®ç°å¤šè¯­è¨€ä¹Ÿæ˜¯å¾ˆå¿…è¦çš„ã€‚</p>
<p>å®‰è£…ç›¸å…³ä¾èµ–åŒ…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install i18next next-i18next react-i18next
</span></span></code></pre></td></tr></table>
</div>
</div><p>next-i18next åŒ…æä¾›äº† appWithTranslationä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Œéœ€è¦ç”¨è¿™ä¸ªé«˜é˜¶ç»„ä»¶åŒ…è£…æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ThemeContextProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">UserAgentProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/userAgent&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">LOCALDOMAIN</span><span class="p">,</span> <span class="nx">getIsMobile</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">appWithTranslation</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="nx">isMobile</span>: <span class="kt">boolean</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span><span class="p">,</span> <span class="nx">isMobile</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;{</span><span class="sb">`A Demo for å®˜ç½‘å¼€å‘å®æˆ˜ (</span><span class="si">${</span>
</span></span><span class="line"><span class="cl">          <span class="nx">isMobile</span> <span class="o">?</span> <span class="s2">&#34;ç§»åŠ¨ç«¯&#34;</span> <span class="o">:</span> <span class="s2">&#34;pcç«¯&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="si">}</span><span class="sb">)`</span><span class="p">}&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/layout`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isMobile</span>: <span class="kt">getIsMobile</span><span class="p">(</span><span class="nx">context</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">appWithTranslation</span><span class="p">(</span><span class="nx">MyApp</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨ä¸º next-i18next åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ next-i18next.config.js å¹¶æ·»åŠ å¦‚ä¸‹é…ç½®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">i18n</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">defaultLocale</span><span class="o">:</span> <span class="s1">&#39;zh-CN&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">locales</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;en_US&#39;</span><span class="p">,</span> <span class="s1">&#39;zh-CN&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ns</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="s1">&#39;footer&#39;</span><span class="p">,</span> <span class="s1">&#39;common&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>locales: åŒ…å«ç½‘ç«™ä¸Šéœ€è¦çš„è¯­è¨€ç¯å¢ƒçš„æ•°ç»„ã€‚</p>
</li>
<li>
<p>defaultLocale: è¦æ˜¾ç¤ºçš„é»˜è®¤è¯­è¨€ç¯å¢ƒã€‚</p>
</li>
</ul>
<p>ç°åœ¨å°†åˆ›å»ºçš„ i18next é…ç½®å¯¼å…¥åˆ° next.config.js ä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/** @type {import(&#39;next&#39;).NextConfig} */</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">semi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@douyinfe/semi-next&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">({});</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">i18n</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./next-i18next.config&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">nextConfig</span> <span class="o">=</span> <span class="nx">semi</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">reactStrictMode</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">swcMinify</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">i18n</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">images</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">domains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">webpack</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">config</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">alias</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">nextConfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨å¼€å§‹åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ è¯­è¨€ç¯å¢ƒï¼Œåœ¨ public ç›®å½•ä¸‹æ–°å»º locales ç›®å½•ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_64.png" alt="" width="300" />  
<p>public/locales/en_US/main.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;IpadStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;Currently Ipad style&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;PCStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;Currently it is PC style&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;MobileStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;Currently in mobile style&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>public/locales/zh_CN/main.json</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;IpadStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;å½“å‰æ˜¯Ipadç«¯æ ·å¼&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;PCStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;å½“å‰æ˜¯pcç«¯æ ·å¼&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;MobileStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;å½“å‰æ˜¯ç§»åŠ¨ç«¯æ ·å¼&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»ä¼¼äºä¸»é¢˜åŒ–æ³¨å…¥ï¼Œé’ˆå¯¹è¯­è¨€ä¹Ÿå…ˆæ¥å®šä¹‰ä¸€å¥—æ³¨å…¥å™¨ï¼ˆContext)ï¼Œé€šè¿‡ç¼“å­˜çš„æ–¹å¼ç»Ÿä¸€ç®¡ç†ï¼Œç„¶åè¿›è¡Œå…¨å±€çš„æ³¨å…¥ã€‚</p>
<p>constants/enum</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">enum</span> <span class="nx">Language</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ch</span> <span class="o">=</span> <span class="s2">&#34;zh-CN&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">en</span> <span class="o">=</span> <span class="s2">&#34;en_US&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>stores/language.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createContext</span><span class="p">,</span> <span class="nx">FC</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Language</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">ILanguageContextProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">language</span>: <span class="kt">Language</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setLanguage</span><span class="o">:</span> <span class="p">(</span><span class="nx">language</span>: <span class="kt">Language</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">ILanguageContextProviderProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">LanguageContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">&lt;</span><span class="nt">ILanguageContextProps</span><span class="p">&gt;({}</span> <span class="kr">as</span> <span class="nx">ILanguageContextProps</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">LanguageContextProvider</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">ILanguageContextProviderProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span><span class="nx">children</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">language</span><span class="p">,</span> <span class="nx">setLanguage</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">Language</span><span class="p">&gt;(</span><span class="nx">Language</span><span class="p">.</span><span class="nx">ch</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">checkLanguage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">Language</span> <span class="o">||</span> <span class="nx">Language</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setLanguage</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">lang</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆå§‹åŒ–å…ˆæ‰§è¡Œä¸€é
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">checkLanguage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ç›‘å¬æµè§ˆå™¨ç¼“å­˜äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="nx">checkLanguage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è§£ç»‘
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="nx">checkLanguage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">LanguageContext.Provider</span> <span class="na">value</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">language</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setLanguage</span><span class="o">:</span> <span class="p">(</span><span class="nx">currentLanguage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setLanguage</span><span class="p">(</span><span class="nx">currentLanguage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">,</span> <span class="nx">currentLanguage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">lang</span> <span class="o">=</span> <span class="nx">currentLanguage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">LanguageContext.Provider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">LanguageContextProvider</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¼å…¥ serverSideTranslationsï¼Œåœ¨ getServerSideProps ä¸­è¿›è¡Œé“å…·ä¼ é€’ã€‚</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span><span class="nx">NextPage</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Pagination</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@douyinfe/semi-ui&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useTranslation</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">serverSideTranslations</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next/serverSideTranslations&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LOCALDOMAIN</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/utils&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">IArticleIntroduction</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/pages/api/articleIntroduction&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LanguageContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/language&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRouter</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next/router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">total</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">articles</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">i18n</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTranslation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">locale</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">content</span><span class="p">,</span> <span class="nx">setContent</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">articles</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">mainRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">theme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">language</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">LanguageContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">theme</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i18n</span><span class="o">?</span><span class="p">.</span><span class="nx">changeLanguage</span><span class="p">(</span><span class="nx">locale</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">language</span><span class="p">,</span> <span class="nx">locale</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">([</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">])}</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">mainRef</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">paginationArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Pagination</span> <span class="na">total</span><span class="o">=</span><span class="p">{</span><span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="na">pageSize</span><span class="o">=</span><span class="p">{</span><span class="mi">6</span><span class="p">}</span> <span class="na">onPageChange</span><span class="o">=</span><span class="p">{</span><span class="nx">pageNo</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntroduction`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">pageNo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">list</span>: <span class="kt">listData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">setContent</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">list</span>: <span class="kt">listData?.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntroduction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">})),</span>
</span></span><span class="line"><span class="cl">                <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getServerSideProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">({</span> <span class="nx">locale</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">locale</span>: <span class="kt">string</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/home`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span>: <span class="kt">listData</span><span class="p">,</span> <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntroduction`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageNo</span>: <span class="kt">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...(</span><span class="k">await</span> <span class="nx">serverSideTranslations</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s1">&#39;footer&#39;</span><span class="p">,</span> <span class="s1">&#39;header&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span><span class="p">])),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">list</span>: <span class="kt">listData?.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntroduction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}))</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ pages/_document.tsx ä¸­è¿›è¡Œäº¤äº’å‰æ³¨å…¥:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Document</span><span class="p">,</span> <span class="p">{</span><span class="nx">Html</span><span class="p">,</span> <span class="nx">Head</span><span class="p">,</span> <span class="nx">Main</span><span class="p">,</span> <span class="nx">NextScript</span><span class="p">,</span> <span class="nx">DocumentContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/document&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Script</span> <span class="kr">from</span> <span class="s1">&#39;next/script&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Language</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyDocument</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Main</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">NextScript</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Script</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;theme-script&#34;</span> <span class="na">strategy</span><span class="o">=</span><span class="s">&#34;beforeInteractive&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="sb">`const theme = localStorage.getItem(&#39;theme&#39;) || &#39;light&#39;;
</span></span></span><span class="line"><span class="cl"><span class="sb">           localStorage.setItem(&#39;theme&#39;, theme);
</span></span></span><span class="line"><span class="cl"><span class="sb">           document.getElementsByTagName(&#39;html&#39;)[0].dataset.theme = theme;
</span></span></span><span class="line"><span class="cl"><span class="sb">           const language = localStorage.getItem(&#39;language&#39;) || &#39;zh-CN&#39;;
</span></span></span><span class="line"><span class="cl"><span class="sb">           localStorage.setItem(&#39;language&#39;, language);
</span></span></span><span class="line"><span class="cl"><span class="sb">           document.getElementsByTagName(&#39;html&#39;)[0].lang = language;
</span></span></span><span class="line"><span class="cl"><span class="sb">           `</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getServerSideProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">DocumentContext</span> <span class="o">&amp;</span> <span class="p">{</span><span class="nx">locale</span>: <span class="kt">string</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">initialProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Document</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">initialProps</span><span class="p">,</span> <span class="nx">locale</span>: <span class="kt">context?.locale</span> <span class="o">||</span> <span class="nx">Language</span><span class="p">.</span><span class="nx">ch</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyDocument</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹å¯¼èˆªç»„ä»¶ï¼Œæ·»åŠ è¯­è¨€ç¯å¢ƒåˆ‡æ¢å™¨ã€‚</p>
<p>components/NavBar/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">FC</span><span class="p">,</span> <span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Link</span> <span class="kr">from</span> <span class="s2">&#34;next/link&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useTranslation</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">UserAgentContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/userAgent&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Environment</span><span class="p">,</span> <span class="nx">Language</span><span class="p">,</span> <span class="nx">Themes</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LanguageContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/language&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRouter</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next/router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">INavBarProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">NavBar</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">INavBarProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">t</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTranslation</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">locales</span><span class="p">,</span> <span class="nx">locale</span>: <span class="kt">activeLocale</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">otherLocales</span> <span class="o">=</span> <span class="nx">locales</span><span class="o">?</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">locale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">locale</span> <span class="o">!==</span> <span class="nx">activeLocale</span> <span class="o">&amp;&amp;</span> <span class="nx">locale</span> <span class="o">!==</span> <span class="s2">&#34;default&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setTheme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setLanguage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">LanguageContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">userAgent</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">UserAgentContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setLanguage</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">locale</span> <span class="kr">as</span> <span class="nx">Language</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">router</span><span class="p">.</span><span class="nx">locale</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">navBar</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://localhost:3000/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logoIcon</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">pc</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;PCStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">ipad</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;IpadStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">mobile</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;MobileStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">otherLocales</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">locale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="p">{</span> <span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">asPath</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">locale</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Link</span> <span class="na">href</span><span class="o">=</span><span class="p">{{</span> <span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span> <span class="p">}}</span> <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="nx">asPath</span><span class="p">}</span> <span class="na">locale</span><span class="o">=</span><span class="p">{</span><span class="nx">locale</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">locale</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">})}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeIcon</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setTheme</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span> <span class="o">?</span> <span class="nx">Themes.dark</span> : <span class="kt">Themes.light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}}/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™é‡Œè·å¾—äº† i18next é…ç½®æ–‡ä»¶ä¸­æåˆ°çš„è¯­è¨€ç¯å¢ƒï¼Œç„¶åæ˜ å°„æ¯ä¸ªåŒºåŸŸè®¾ç½®é¡¹ç›®å¹¶å•å‡»æ¯ä¸ªå°†é“¾æ¥å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;Link href={{ pathname, query }} as={asPath} locale={locale}&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„é“¾æ¥ä¼šå°†åº”ç”¨ç¨‹åºçš„åŒºåŸŸè®¾ç½® URL æ›´æ”¹ä¸ºé€‰æ‹©çš„ç›¸åº”åŒºåŸŸè®¾ç½®ã€‚</p>
<p>useTranslation ä» next-i18next åŒ…ä¸­å¯¼å…¥é’©å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import { useTranslation } from &#34;next-i18next&#34;;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥è·å–åœ¨ locales ç›®å½• t() ä¸­çš„ locale æ–‡ä»¶ä¸­æ·»åŠ çš„è¯­è¨€å­—ç¬¦ä¸²ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°†ä»é€‰æ‹©çš„ç›¸åº”è¯­è¨€ç¯å¢ƒï¼ˆen_US æˆ– zh_CNï¼‰ä¸­è·å–å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">const { t } = useTranslation();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">return (
</span></span><span class="line"><span class="cl">    &lt;&gt;
</span></span><span class="line"><span class="cl">      &lt;span className={styles.text}&gt;{t(&#39;MobileStyle&#39;)}&lt;/span&gt;
</span></span><span class="line"><span class="cl">    &lt;/&gt;
</span></span><span class="line"><span class="cl">  );
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°æ•ˆæœï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_65.png" alt="" width="700" />  
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_66.png" alt="" width="700" />  
<h2 id="è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶">è‡ªå®šä¹‰å¼¹çª—ç»„ä»¶</h2>
<p>ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„æ¸å…¥æ¸å‡ºåŠ¨ç”»ï¼Œå¹³å¸¸ç»„ä»¶åº“çš„å¼¹çª—ç»„ä»¶å¹¶ä¸å®¹æ˜“åœ¨åŸæœ‰åŸºç¡€ä¸Šè¦†ç›–è‡ªå®šä¹‰åŠ¨ç”»ï¼Œæ‰€ä»¥æ¥å¼€å‘ä¸€ä¸ªè‡ªå·±çš„è‡ªå®šä¹‰åŠ¨ç”»å¼¹çª—ç»„ä»¶ã€‚</p>
<h3 id="é™æ€æ ·å¼">é™æ€æ ·å¼</h3>
<p>ä¸å¹³å¸¸ç»„ä»¶ä¸åŒï¼Œå¼¹çª—ç»„ä»¶è‡³å°‘éœ€è¦æš´éœ²ä¸€ä¸ª open æ–¹æ³•ç»™å¤–éƒ¨è¿›è¡Œè°ƒç”¨ï¼Œè¿™å°±éœ€è¦ç”¨åˆ° forwardRefï¼Œå®ƒå¯ä»¥å°† ref ä¸­çš„æ–¹æ³•æš´éœ²ç»™å¤–éƒ¨è¿›è¡Œç›¸å…³çš„è°ƒç”¨ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª popupç»„ä»¶ï¼Œç„¶åå†™ä¸€ä¸‹å®ƒçš„é™æ€æ ·å¼ï¼Œå…¶ä¸­ IPopupRef æ˜¯å¼¹çª—æš´éœ²çš„ ref ç±»å‹ï¼Œè€Œ IPopupProps æ˜¯ç»„ä»¶æœ¬èº«çš„ç±»å‹ï¼ŒuseImperativeHandle æ˜¯ç»„ä»¶ ref æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨çš„æ–¹æ³•å®šä¹‰ï¼Œæš´éœ²å›å»çš„å›è°ƒæ–¹æ³•ç±»å‹éœ€è¦å’Œ ref ç±»å‹ç›¸åŒã€‚</p>
<p>component/popup/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">forwardRef</span><span class="p">,</span> <span class="nx">useImperativeHandle</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IPopupRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IPopupProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Popup</span> <span class="o">=</span> <span class="nx">forwardRef</span><span class="p">&lt;</span><span class="nt">IPopupRef</span><span class="err">,</span> <span class="na">IPopupProps</span><span class="p">&gt;(({</span><span class="nx">children</span><span class="p">},</span> <span class="nx">ref</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">setVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">boolean</span><span class="p">&gt;(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useImperativeHandle</span><span class="p">(</span><span class="nx">ref</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">open</span><span class="o">:</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}));</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">visible</span> <span class="o">?</span> <span class="p">(&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popup</span><span class="p">]</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">enter</span><span class="p">]</span><span class="o">:</span> <span class="nx">enter</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leave</span><span class="p">]</span><span class="o">:</span> <span class="nx">leave</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">mask</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popupContent</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">closeBtn</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">setVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Popup</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå†™ä¸€ä¸‹é™æ€çš„æ ·å¼ï¼Œç›¸å…³çš„å…¨å±€ä¸»é¢˜åŒ–å˜é‡ä¹Ÿå®šä¹‰ä¸€ä¸‹ã€‚</p>
<p>components/popup/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="k">@import</span> <span class="s2">&#34;./pages/media.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.popup</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">10000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.mask</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">z-index</span><span class="o">:</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.popupContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">border-radius</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-content-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">z-index</span><span class="o">:</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-width</span><span class="o">:</span> <span class="mi">25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-height</span><span class="o">:</span> <span class="mi">25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.closeBtn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">width</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">height</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-color</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-close-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-position</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-size</span><span class="o">:</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">top</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">right</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">z-index</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.closeBtn</span><span class="nd">:hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-close-hover-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.popup</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.dialogContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.closeBtn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">width</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">height</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">top</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.3125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">right</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-ipad</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.dialog</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.dialogContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.titleArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">padding</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.5625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>styles/globals.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;dark&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#ffffff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#34a8eb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/logo_dark.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--theme-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/theme_dark.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-close-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/close.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-close-hover-background-color</span><span class="p">:</span> <span class="mh">#353535</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-content-background-color</span><span class="p">:</span> <span class="mh">#1f1f1f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#333333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--primary-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--footer-background-color</span><span class="p">:</span> <span class="mh">#f4f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--secondary-color</span><span class="p">:</span> <span class="mh">#666666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#0070f3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--navbar-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/logo_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--theme-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/theme_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-close-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/close_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-close-hover-background-color</span><span class="p">:</span> <span class="mh">#f5f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--popup-content-background-color</span><span class="p">:</span> <span class="mh">#f4f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ navbar åŠ ä¸€ä¸ªå…¥å£ã€‚</p>
<p>component/navbar/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">FC</span><span class="p">,</span> <span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Link</span> <span class="kr">from</span> <span class="s2">&#34;next/link&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Popup</span> <span class="kr">from</span> <span class="s1">&#39;@/components/popup&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">IPopupRef</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/popup&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useTranslation</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">UserAgentContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/userAgent&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Environment</span><span class="p">,</span> <span class="nx">Language</span><span class="p">,</span> <span class="nx">Themes</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/constants/enum&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LanguageContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/language&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRouter</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next/router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">INavBarProps</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">NavBar</span>: <span class="kt">FC</span><span class="p">&lt;</span><span class="nt">INavBarProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">t</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTranslation</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">popupRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">IPopupRef</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">locales</span><span class="p">,</span> <span class="nx">locale</span>: <span class="kt">activeLocale</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">otherLocales</span> <span class="o">=</span> <span class="nx">locales</span><span class="o">?</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">locale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">locale</span> <span class="o">!==</span> <span class="nx">activeLocale</span> <span class="o">&amp;&amp;</span> <span class="nx">locale</span> <span class="o">!==</span> <span class="s2">&#34;default&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setTheme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">setLanguage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">LanguageContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">userAgent</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">UserAgentContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setLanguage</span><span class="p">(</span><span class="nx">router</span><span class="p">.</span><span class="nx">locale</span> <span class="kr">as</span> <span class="nx">Language</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">router</span><span class="p">.</span><span class="nx">locale</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">navBar</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://localhost:3000/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logoIcon</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">pc</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;PCStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">ipad</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;IpadStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">userAgent</span> <span class="o">===</span> <span class="nx">Environment</span><span class="p">.</span><span class="nx">mobile</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">text</span><span class="p">}&gt;{</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;MobileStyle&#39;</span><span class="p">)}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popupText</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="nx">popupRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">open</span><span class="p">()}&gt;</span><span class="err">å¼¹çª—ç¤ºèŒƒ</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">language</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">otherLocales</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">locale</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="p">{</span> <span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">asPath</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">locale</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Link</span> <span class="na">href</span><span class="o">=</span><span class="p">{{</span> <span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span> <span class="p">}}</span> <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="nx">asPath</span><span class="p">}</span> <span class="na">locale</span><span class="o">=</span><span class="p">{</span><span class="nx">locale</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">locale</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">})}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">themeIcon</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">setTheme</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">Themes</span><span class="p">.</span><span class="nx">light</span> <span class="o">?</span> <span class="nx">Themes.dark</span> : <span class="kt">Themes.light</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}}/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Popup</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">popupRef</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="err">è¿™æ˜¯ä¸€ä¸ªå¼¹çª—</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Popup</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ•ˆæœå®ç°ï¼š</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_67.png" alt="" width="700" />  
<h3 id="é®ç½©å±‚æ»šåŠ¨ç©¿é€">é®ç½©å±‚æ»šåŠ¨ç©¿é€</h3>
<p>è¿™æ—¶å€™å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æœ‰é®ç½©å±‚çš„æ—¶å€™ï¼Œæœ€å¤–å±‚ä»ç„¶æ˜¯å¯ä»¥æ»šåŠ¨çš„ï¼Œè¿™ä¸ªé—®é¢˜ç§°ä½œä¸ºæ»šåŠ¨ç©¿é€ç°è±¡ï¼Œå…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæœ€å¤–å±‚çš„åŒºåŸŸï¼ˆbody) ä»ç„¶æ˜¯å¯ä»¥äº§ç”Ÿæ»šåŠ¨çš„ï¼Œä»…ä»…æ˜¯ç»™äº† 100vh çš„é®ç½©å±‚ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½é˜»æ­¢æ»šåŠ¨çš„äº§ç”Ÿã€‚</p>
<p>è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨é®ç½©å±‚çš„æ—¶å€™ï¼Œåœ¨ body æ‰‹åŠ¨åŠ ä¸Šä¸€ä¸ªç±»æ¥é™åˆ¶å®ƒçš„é«˜åº¦å³å¯ã€‚</p>
<p>components/popup/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// ...
</span></span><span class="line"><span class="cl">useEffect(() =&gt; {
</span></span><span class="line"><span class="cl">document.body.className = visible ? &#34;forbidScroll&#34; : &#34;&#34;;
</span></span><span class="line"><span class="cl">}, [visible]);
</span></span></code></pre></td></tr></table>
</div>
</div><p>styles/globals.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">forbidScroll</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨å¯ä»¥å‘ç°å·²ç»ä¸ä¼šå†æ»šåŠ¨äº†ã€‚</p>
<h3 id="æŒ‡å®šæ¸²æŸ“ä½ç½®">æŒ‡å®šæ¸²æŸ“ä½ç½®</h3>
<p>æ‰“å¼€æ§åˆ¶å°çš„ Elementsï¼Œé€šè¿‡é€‰å–å…ƒç´ é€‰ä¸­å¼¹çª—ï¼Œå¯ä»¥çœ‹åˆ°æ¸²æŸ“çš„ä½ç½®æ˜¯åœ¨å¯¹åº”ç»„ä»¶è°ƒç”¨çš„ dom ä¸‹çš„ã€‚</p>
<p>è¿™æ ·å…¶å®ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¢«åµŒå¥—åœ¨åˆ«çš„ dom ä¸‹ï¼ŒåŒ…æ‹¬æ ·å¼ã€äº‹ä»¶åœ¨å†…çš„å¾ˆå¤šæƒ…å†µï¼Œå¼¹çª—ç»„ä»¶å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ï¼Œä½œä¸ºä¸€ä¸ªé€šç”¨çš„ç»„ä»¶æ˜¯ä¸å¸Œæœ›å¼¹çª—çš„å±•ç°å› ä¸ºå¤–ç•Œçš„æƒ…å†µè€Œæœ‰æ‰€å˜åŒ–çš„ï¼Œæ‰€ä»¥ä¸åº”è¯¥æŠŠå®ƒæ¸²æŸ“åœ¨çˆ¶çº§åŒºåŸŸä¸‹ã€‚</p>
<p>åœ¨ React 16ï¼Œæœ‰æä¾›ä¸€ä¸ª apiï¼ŒReactDom.createPortalï¼Œ å®ƒæä¾›äº†å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„èƒ½åŠ›ï¼Œé€šè¿‡è¿™ä¸ª api å¯ä»¥å°†å¼¹çª—ç»„ä»¶æ¸²æŸ“åˆ° body ä¸‹ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºéœ€è¦ä½¿ç”¨åˆ° BOM çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œåˆ¤ç©ºã€‚</p>
<p>component/popup/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">forwardRef</span><span class="p">,</span> <span class="nx">useImperativeHandle</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createPortal</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IPopupRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IPopupProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Popup</span> <span class="o">=</span> <span class="nx">forwardRef</span><span class="p">&lt;</span><span class="nt">IPopupRef</span><span class="err">,</span> <span class="na">IPopupProps</span><span class="p">&gt;(({</span><span class="nx">children</span><span class="p">},</span> <span class="nx">ref</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">setVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">boolean</span><span class="p">&gt;(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useImperativeHandle</span><span class="p">(</span><span class="nx">ref</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">open</span><span class="o">:</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}));</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">visible</span> <span class="o">?</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">createPortal</span><span class="p">((&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popup</span><span class="p">]</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})}&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">mask</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popupContent</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">closeBtn</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nx">setVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="p">}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Popup</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¥çœ‹ä¸€ä¸‹æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æ¸²æŸ“åˆ°æœ€å¤–å±‚äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_68.png" alt="" width="700" />  
<h3 id="åŠ¨ç”»å®ç°">åŠ¨ç”»å®ç°</h3>
<p>åº”è¯¥æ€ä¹ˆä¸ºå¼¹çª—å®ç°åŠ¨ç”»å‘¢ï¼Ÿ</p>
<p>æ¸å…¥æ¸å‡ºçš„åŠ¨ç”»å…³é”®åœ¨äºç±»çš„åˆ‡æ¢ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­éœ€è¦å¯¹ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ç±»è¿›è¡Œå¼‚æ­¥åˆ‡æ¢ï¼Œå› ä¸º react state æ˜¯å¯¹æœ€ç»ˆç»“æœè¿›è¡Œåˆ‡æ¢çš„ï¼Œè¿™æ ·æ²¡åŠæ³•èµ·åˆ°ç±»å‹å˜åŒ–çš„æ•ˆæœã€‚</p>
<p>ç°åœ¨æ¥å®ç°è¿™ä¸ªæ•ˆæœï¼ŒåŠ¨ç”»çš„æ•ˆæœå°±å®ç°ä¸€ä¸ªæ™®é€šçš„æ¸å…¥æ¸å‡ºå°±å¯ä»¥äº†ã€‚</p>
<p>component/popup/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">forwardRef</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useImperativeHandle</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">createPortal</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;./index.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IPopupRef</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IPopupProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Popup</span> <span class="o">=</span> <span class="nx">forwardRef</span><span class="p">&lt;</span><span class="nt">IPopupRef</span><span class="err">,</span> <span class="na">IPopupProps</span><span class="p">&gt;(({</span><span class="nx">children</span><span class="p">},</span> <span class="nx">ref</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">setVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">boolean</span><span class="p">&gt;(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">enter</span><span class="p">,</span> <span class="nx">setEnter</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">boolean</span><span class="p">&gt;(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">leave</span><span class="p">,</span> <span class="nx">setLeave</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">boolean</span><span class="p">&gt;(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useImperativeHandle</span><span class="p">(</span><span class="nx">ref</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">open</span><span class="o">:</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setEnter</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setEnter</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">visible</span> <span class="o">?</span> <span class="nx">maskClass</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">timer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setEnter</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setEnter</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setLeave</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">setLeave</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">timer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">visible</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">visible</span> <span class="o">?</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">createPortal</span><span class="p">((&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popup</span><span class="p">]</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">enter</span><span class="p">]</span><span class="o">:</span> <span class="nx">enter</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leave</span><span class="p">]</span><span class="o">:</span> <span class="nx">leave</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})}&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">mask</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">popupContent</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">closeBtn</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nx">setLeave</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="nx">setLeave</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="nx">setVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">       <span class="p">}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Popup</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>components/popup/index.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="k">@import</span> <span class="s2">&#34;./pages/media.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.popup</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">position</span><span class="o">:</span> <span class="ni">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">z-index</span><span class="o">:</span> <span class="mi">10000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.mask</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">z-index</span><span class="o">:</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.popupContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">border-radius</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">flex-direction</span><span class="o">:</span> <span class="ni">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-content-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">z-index</span><span class="o">:</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-width</span><span class="o">:</span> <span class="mi">25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">min-height</span><span class="o">:</span> <span class="mi">25</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.closeBtn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">width</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">height</span><span class="o">:</span> <span class="mi">2</span><span class="mf">.125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-color</span><span class="o">:</span> <span class="ni">inherit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-close-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-position</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-size</span><span class="o">:</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">top</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">right</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">cursor</span><span class="o">:</span> <span class="ni">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">z-index</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nc">.closeBtn</span><span class="nd">:hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">popup-close-hover-background-color</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-mobile</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.popup</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.dialogContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.closeBtn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">width</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">height</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.6875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">top</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.3125</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="na">right</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@include</span><span class="nd"> media-ipad</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.dialog</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nc">.dialogContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nc">.titleArea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="na">padding</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.5</span><span class="kt">rem</span> <span class="mi">1</span><span class="mf">.5625</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeIn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">scale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">fadeOut</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">scale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">maskFadeIn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">@keyframes</span> <span class="nt">maskFadeOut</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">0</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">100</span><span class="err">%</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.enter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.mask</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">maskFadeIn</span> <span class="mi">0</span><span class="mf">.2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.popupContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeIn</span> <span class="mi">0</span><span class="mf">.2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.leave</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nc">.mask</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">maskFadeOut</span> <span class="mi">0</span><span class="mf">.2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nc">.popupContent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">animation</span><span class="o">:</span> <span class="n">fadeOut</span> <span class="mi">0</span><span class="mf">.2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">transform</span><span class="o">:</span> <span class="nf">scale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ç°æ•ˆæœï¼š</p>
<iframe width="700" height="315" src="/images/ssr/d.mp4" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<h2 id="å›¾ç‰‡ä¼˜åŒ–">å›¾ç‰‡ä¼˜åŒ–</h2>
<p>å®˜ç½‘äº¤äº’ä¸­ï¼Œé€šå¸¸ä¼šæœ‰ä¸€äº›é«˜åˆ†è¾¨ç‡å›¾ç‰‡ç”¨äºå±•ç¤ºï¼Œè¿™äº›å›¾ç‰‡é€šå¸¸ä½“ç§¯å¤§ã€åŠ è½½æ—¶é—´é•¿ï¼Œä¸”å é¡µé¢åŒºåŸŸè¾ƒå¤§ï¼Œå¦‚æœåœ¨ç½‘é€Ÿè¾ƒå¿«çš„æƒ…å†µä¸‹å¯èƒ½å°šå¯ï¼Œä½†æ˜¯åœ¨ä½ç½‘é€Ÿï¼Œç±»ä¼¼ fast 3Gï¼Œslow 3G çš„åœºæ™¯ä¸‹ï¼Œå‡ ç™¾ kbï¼Œç”šè‡³å‡  mb çš„å›¾ç‰‡èµ„æºåŠ è½½æ˜¯éš¾ä»¥å¿å—çš„ï¼ŒåŠ ä¸ŠåŒºåŸŸå¤§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°é¡µé¢å†…å®¹å·²ç»åŠ è½½å®Œæˆï¼Œä½†æ˜¯å›¾ç‰‡åŒºåŸŸé•¿æ—¶é—´ç•™ç™½çš„é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆé«˜åˆ†è¾¨ç‡å›¾åœ¨ä½ç½‘é€Ÿä¸‹åŠ è½½æ—¶ï¼Œåº”è¯¥å¦‚ä½•å‡å°‘åŠ è½½æ—¶é—´ï¼Œè¾¾åˆ°é¦–å±ä¼˜åŒ–çš„ç›®çš„ã€‚</p>
<h3 id="é™æ€æ ·å¼-1">é™æ€æ ·å¼</h3>
<p>é¦–å…ˆåˆ‡ä¸¤ä¸ªå¤§å›¾ï¼ŒåŠ åœ¨é¦–é¡µçš„ä½ç½®ï¼Œå¤§å°æ§åˆ¶åœ¨ 500kb ä¸Šä¸‹çš„æ¸…æ™°åº¦ï¼ˆ500px * 500px 2x) å³å¯ï¼Œè¿™ç§åœ¨å¿«é€Ÿ 3g çš„ç½‘é€Ÿä¸‹ï¼Œé€šå¸¸éœ€è¦è¯·æ±‚å‡ åç§’å·¦å³å¯ä»¥å®Œå…¨åŠ è½½ï¼Œå¯ä»¥ç”¨æ¥è¯´æ˜è¿™ä¸ªåœºæ™¯ã€‚</p>
<p>styles/globals.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;dark&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--home-background-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/home_bg_dark.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--home-background-icon</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/home_bg_light.png&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">header</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>styles/Home.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">home-background-icon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-size</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-repeat</span><span class="o">:</span> <span class="ni">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">width</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="na">height</span><span class="o">:</span> <span class="mi">18</span><span class="mf">.75</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å›¾ç‰‡çš„å¤§å°å¤§è‡´åœ¨ 700kbï¼Œ æ­£å¸¸ 4g ç½‘ç»œä¸‹çš„åŠ è½½æ—¶é•¿ä¸º 12ms å·¦å³ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_70.png" alt="" width="700" />   
<p>æŠŠç½‘é€Ÿåˆ‡æ¢è‡³ fast 3gï¼Œçœ‹çœ‹è¿™ä¸ªå›¾ç‰‡çš„åŠ è½½æ—¶é•¿éœ€è¦å¤šä¹…ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_69.png" alt="" width="700" />   
<p>å¯ä»¥çœ‹åˆ°éœ€è¦ 4sï¼Œè¿œè¿œè¶…è¿‡å…¶ä»–é™æ€èµ„æºï¼Œè¿™æ„å‘³ç€é¡µé¢å…ƒç´ åŠ è½½å‡ºæ¥åï¼Œç”¨æˆ·éœ€è¦å†ç­‰å¥½å‡ ç§’å›¾ç‰‡æ‰èƒ½ç¼“ç¼“åŠ è½½å‡ºæ¥ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å®é™…ä¸šåŠ¡å¼€å‘ä¸­æœ‰å¤§æ¦‚è¿™å‡ ä¸ªæ–¹æ¡ˆã€‚</p>
<p>è¿™æ˜¯ MDN 2020 å¹´ç½‘ç»œä¿¡æ¯æ¥å£ææ¡ˆä¸­æå‡ºçš„æœ€æ–° BOM å±æ€§ï¼Œé€šè¿‡è¿™ä¸ª BOM æ¥è·å–å½“å‰çš„æµé‡çŠ¶æ€ï¼Œæ ¹æ®ä¸åŒçš„æµé‡çŠ¶æ€è¿›è¡Œå›¾ç‰‡æ¸…æ™°åº¦çš„é€‰æ‹©ã€‚</p>
<p>åœ¨è¾ƒä½ç½‘é€Ÿä¸‹çš„åœºæ™¯ï¼Œé€‰æ‹©ä¼˜å…ˆåŠ è½½ 0.5x æˆ–æ˜¯ 1x çš„å›¾ç‰‡ï¼ŒåŒæ—¶ä¹ŸåŠ è½½ 2x çš„å¤§å›¾ï¼Œé€šè¿‡éšè— DOM çš„æ–¹å¼éšæ€§åŠ è½½ï¼Œç„¶åç›‘å¬ 2x èµ„æºçš„ onload äº‹ä»¶ï¼Œåœ¨èµ„æºåŠ è½½å®Œæˆæ—¶ï¼Œè¿›è¡Œç±»çš„åˆ‡æ¢å³å¯ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_69.png" alt="" width="700" />   
<h3 id="navigatorconnectioneffectivetype">navigator.connection.effectiveType</h3>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_71.png" alt="" width="700" />   
<p>è¿™ç§æ–¹æ¡ˆåœ¨ä½ç½‘é€Ÿä¸‹çš„æ•ˆæœæ˜¯æ‰€æœ‰æ–¹æ¡ˆä¸­æœ€å¥½çš„ï¼Œç”¨æˆ·çš„æ„ŸçŸ¥è§†è§’æ˜¯ï¼Œåªéœ€è¦ç­‰å¾… 0.5x åˆ° 1x çš„æ¨¡ç³Šå›¾åŠ è½½æ—¶é•¿ï¼Œä¸ä¼šæœ‰åŒºåŸŸçš„å¤§é¢ç§¯ç•™ç™½ï¼ŒåŒæ—¶æœ€åä¹Ÿå¯ä»¥ä½“éªŒåˆ°é«˜æ¸…å›¾çš„äº¤äº’ã€‚</p>
<p>ä¸è¿‡è¿™ç§æ–¹æ¡ˆæ¯•ç«Ÿè¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§å±æ€§ï¼Œå…¼å®¹æ€§å„æ–¹é¢å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œåªæœ‰è¾ƒå°‘çš„æµè§ˆå™¨æ”¯æŒè¿™ä¸ªå±æ€§ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼š</p>
<ul>
<li>è€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œnavigator.connection.effectiveType çš„ä½¿ç”¨éœ€è¦è¿›è¡Œåˆ¤ç©ºå¤„ç†ï¼Œé¿å…å› ä¸º navigator.connection is not defined çš„æŠ¥é”™é˜»å¡é¡µé¢æ¸²æŸ“ï¼Œå¯ä»¥å†™æˆ navigator?.connection?.effectiveType æ¥è¿›è¡Œè°ƒç”¨ã€‚</li>
<li>å› ä¸ºæ˜¯ BOMï¼Œæ¨¡æ¿é¡µé¢ä¼šåŒæ—¶æ‰§è¡Œåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰ BOM ç­‰å±æ€§çš„æ³¨å…¥çš„ï¼Œå¦‚æœæ˜¯åœ¨ hook ä»¥å¤–çš„åœ°æ–¹è°ƒç”¨ï¼Œéœ€è¦å¯¹ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œåˆ¤ç©ºï¼Œé‡‡ç”¨typeof navigator !== &ldquo;undefined&rdquo; &amp;&amp; navigator?.connection?.effectiveTypeçš„æ–¹å¼è°ƒç”¨ã€‚</li>
</ul>
<h3 id="responsive-images--picture">responsive images / picture</h3>
<p>æµè§ˆå™¨æœ‰æä¾›å“åº”å¼å›¾ç‰‡çš„èƒ½åŠ›ï¼Œåˆ†åˆ«æ˜¯ img srcset å’Œ pictureï¼Œå®ƒä»¬éƒ½æ”¯æŒæ ¹æ®ä¸åŒçš„åƒç´ åœºæ™¯è‡ªåŠ¨é€‰å–ä¸åŒçš„å…ƒç´ æ¥è¿›è¡Œé€‚é…ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸¤ä¸ª MDN çš„ä½¿ç”¨ä¾‹å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">img</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;elva-fairy-480w.jpg 480w, elva-fairy-800w.jpg 800w&#34;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&#34;(max-width: 600px) 480px,800px&#34;</span>
</span></span><span class="line"><span class="cl">     <span class="na">src</span><span class="o">=</span><span class="s">&#34;elva-fairy-800w.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;Elva dressed as a fairy&#34;</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/1999/html&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">srcset</span><span class="o">=</span><span class="s">&#34;/media/cc0-images/surfer-240-200.jpg&#34;</span> <span class="na">media</span><span class="o">=</span><span class="s">&#34;(min-width: 800px)&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/media/cc0-images/painted-hand-298-332.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">picture</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>img srcset æ ¹æ®åƒç´ æ¯”æ¥é€‰å–é€‚åˆçš„é™æ€èµ„æºåŠ è½½ï¼Œè€Œå¯¹äº pictureï¼Œ user agent ä¼šæ£€æŸ¥æ¯ä¸ª <source> çš„ srcsetã€media å’Œ type å±æ€§ï¼Œæ¥é€‰æ‹©æœ€åŒ¹é…é¡µé¢å½“å‰å¸ƒå±€ã€æ˜¾ç¤ºè®¾å¤‡ç‰¹å¾ç­‰çš„å…¼å®¹å›¾åƒã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆå…¼å®¹æ€§å¾ˆå¼ºï¼Œä¸è¿‡ç¼ºé™·ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé’ˆå¯¹ PC ç«¯çš„ç¡®æ˜¯éœ€è¦é«˜æ¸…å›¾ä¸”ä½ç½‘é€Ÿçš„åœºæ™¯ï¼Œå®ƒæ²¡åŠæ³•åšä»»ä½•å¤„ç†ã€‚</p>
<p>å¦‚æœåœ¨ä½åƒç´ åœºæ™¯ä¸‹ï¼Œä½åˆ†è¾¨ç‡çš„å›¾ä¹Ÿæ²¡åŠæ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯æŸæ‰‹æ— ç­–çš„ï¼Œå®ƒçš„æœ¬è´¨è¿˜æ˜¯æ ¹æ®ä¸åŒé¡µå®½æ¥è°ƒæ•´èµ„æºçš„åˆ†è¾¨ç‡ï¼Œæ²¡åŠæ³•æ”¹å˜é«˜åˆ†è¾¨ç‡èµ„æºåŠ è½½æ—¶é—´é•¿çš„ç°çŠ¶ã€‚</p>
<p>ä¸è¿‡è¿™ä¸¤ç§æ–¹æ¡ˆåœ¨ C ç«¯ä¸­ä¹Ÿæœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå¯¹äºå¤šåª’ä½“è®¾å¤‡ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒé¡µå®½è®¾å¤‡é€‰å–ä¸åŒåˆ†è¾¨ç‡çš„èµ„æºï¼Œå¯¹æ€§èƒ½ä¹Ÿæ˜¯æœ‰å¾ˆå¤§æé«˜çš„ã€‚</p>
<h3 id="webpæ¨è">webp(æ¨è)</h3>
<p>Webp æ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ç§æ–°çš„æ ¼å¼ï¼Œå®ƒå¯ä»¥é€šè¿‡ jpgã€png ç­‰ä¸»æµèµ„æºæ ¼å¼è½¬æ¢ï¼Œè¾¾åˆ°æ— æŸç”»è´¨çš„æ•ˆæœï¼Œå¹¶ä¸”ç›¸æ¯”æ­£å¸¸çš„å›¾ç‰‡èµ„æºï¼Œå‹ç¼©ä½“ç§¯ä¼šå‡å°‘åˆ° 40% ä»¥ä¸Šï¼Œå¤§é‡ä¸»æµæµè§ˆå™¨å·²ç»æ”¯æŒäº†webpï¼Œå¹¶ä¸”æœ€è¿‘ IOS14 åŠä»¥ä¸Šè®¾å¤‡çš„ safari æµè§ˆå™¨ä¹Ÿå·²ç»æ–°å¢å¯¹ webp çš„æ”¯æŒï¼Œåªæœ‰å°‘éƒ¨åˆ† IOS ä½ç‰ˆæœ¬è¿˜ä¸å…¼å®¹ã€‚</p>
<p>é¦–å…ˆï¼Œé’ˆå¯¹é™æ€æ ·å¼éƒ¨åˆ†çš„èµ„æºè¿›è¡Œ webp ç›¸å…³çš„è½¬æ¢ï¼Œè½¬æ¢çš„æ–¹å¼å¾ˆç®€å•ï¼Œå¯ä»¥åœ¨ google ä¸Šæœç´¢ png to webpï¼Œæœ‰å¾ˆå¤šå¼€æºå…è´¹çš„è½¬æ¢å™¨å¸®åŠ©è¿›è¡Œèµ„æºçš„è½¬æ¢ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_72.png" alt="" width="700" />   
<p>èµ„æºå‹ç¼©åï¼Œå¯ä»¥çœ‹åˆ° webp å¯¹åº”çš„å¤§å°ä¸º 456kbï¼Œç›¸æ¯”å½“åˆçš„ 700kb å‡å°‘äº†è¿‘ 40%ï¼Œæ¥ä¸‹æ¥æŠŠå®ƒåŠ åˆ°ä»£ç ä¸­ï¼Œè¯•éªŒä¸€ä¸‹ 3g åœºæ™¯ä¸‹å®é™…åŠ è½½çš„æ—¶é—´å¯ä»¥ä¼˜åŒ–å¤šå°‘ã€‚</p>
<p>styles/globals.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;dark&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="err">//</span> <span class="err">...</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--home-background-icon-webp</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/home_bg_dark.webp&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">html</span><span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="o">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="err">//</span> <span class="err">...</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--home-background-icon-webp</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s1">&#39;../public/home_bg_light.webp&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºä¸€äº›æµè§ˆå™¨è¿˜ä¸æ”¯æŒ webpï¼Œæ‰€ä»¥éœ€è¦å¯¹å®ƒçš„å…¼å®¹æ€§è¿›è¡Œåˆ¤æ–­ï¼Œåœ¨èµ„æºè¯·æ±‚çš„è¯·æ±‚å¤´ accept å­—æ®µä¸­ï¼ŒåŒ…å«äº†å½“å‰æµè§ˆå™¨æ‰€æ”¯æŒçš„é™æ€èµ„æºç±»å‹ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå­—æ®µæ¥è¿›è¡Œåˆ¤æ–­ã€‚</p>
<p>utils/index.ts</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getIsSupportWebp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">req</span> <span class="o">||</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">headers</span><span class="p">.</span><span class="nx">accept</span><span class="o">?</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;image/webp&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ _app.tsx ä¸­å¯¹æ‰€æœ‰çš„ç»„ä»¶è¿›è¡Œ isSupportWebp çš„æ³¨å…¥ï¼Œè¿™æ ·æ¯ä¸ªé¡µé¢æ¨¡æ¿éƒ½å¯ä»¥æ‹¿åˆ°è¿™ä¸ªå­—æ®µã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">AppProps</span><span class="p">,</span> <span class="nx">AppContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ThemeContextProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">UserAgentProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/userAgent&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">LanguageContextProvider</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/language&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">LOCALDOMAIN</span><span class="p">,</span> <span class="nx">getIsMobile</span><span class="p">,</span> <span class="nx">getIsSupportWebp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/utils&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">ILayoutProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">appWithTranslation</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Layout</span> <span class="kr">from</span> <span class="s1">&#39;@/components/layout&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;@/styles/globals.css&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">IDeviceInfoProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isMobile</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isSupportWebp</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">AppProps</span> <span class="o">&amp;</span> <span class="nx">ILayoutProps</span> <span class="o">&amp;</span> <span class="nx">IDeviceInfoProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span><span class="p">,</span> <span class="nx">navbarData</span><span class="p">,</span> <span class="nx">footerData</span><span class="p">,</span> <span class="nx">isMobile</span><span class="p">,</span> <span class="nx">isSupportWebp</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;{</span><span class="sb">`A Demo for å®˜ç½‘å¼€å‘å®æˆ˜ (</span><span class="si">${</span>
</span></span><span class="line"><span class="cl">          <span class="nx">isMobile</span> <span class="o">?</span> <span class="s2">&#34;ç§»åŠ¨ç«¯&#34;</span> <span class="o">:</span> <span class="s2">&#34;pcç«¯&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="si">}</span><span class="sb">)`</span><span class="p">}&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;A Demo for å®˜ç½‘å¼€å‘å®æˆ˜&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/favicon.ico&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;user-scalable=no&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;initial-scale=1,maximum-scale=1&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">LanguageContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">navbarData</span><span class="o">=</span><span class="p">{</span><span class="nx">navbarData</span><span class="p">}</span> <span class="na">footerData</span><span class="o">=</span><span class="p">{</span><span class="nx">footerData</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="na">isMobile</span><span class="o">=</span><span class="p">{</span><span class="nx">isMobile</span><span class="p">}</span> <span class="na">isSupportWebp</span><span class="o">=</span><span class="p">{</span><span class="nx">isSupportWebp</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">UserAgentProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">ThemeContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">LanguageContextProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span>: <span class="kt">AppContext</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">App</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/layout`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isMobile</span>: <span class="kt">getIsMobile</span><span class="p">(</span><span class="nx">context</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isSupportWebp</span>: <span class="kt">getIsSupportWebp</span><span class="p">(</span><span class="nx">context</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">appWithTranslation</span><span class="p">(</span><span class="nx">MyApp</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ index.tsx ä¸­å¼•å…¥å¯¹åº”çš„ webp èµ„æºã€‚</p>
<p>pages/index.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useContext</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="kr">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span><span class="nx">NextPage</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">Pagination</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@douyinfe/semi-ui&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">classNames</span> <span class="kr">from</span> <span class="s1">&#39;classnames&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">ThemeContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/stores/theme&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useTranslation</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">serverSideTranslations</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next-i18next/serverSideTranslations&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/Home.module.scss&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LOCALDOMAIN</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/utils&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">IDeviceInfoProps</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/pages/_app&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">IArticleIntroduction</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/pages/api/articleIntroduction&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">LanguageContext</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/stores/language&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">useRouter</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next/router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">IHomeProps</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">total</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">list</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">label</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">info</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">link</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Home</span>: <span class="kt">NextPage</span><span class="p">&lt;</span><span class="nt">IHomeProps</span> <span class="err">&amp;</span> <span class="na">IDeviceInfoProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">articles</span><span class="p">,</span> <span class="nx">isSupportWebp</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">i18n</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTranslation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">locale</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">content</span><span class="p">,</span> <span class="nx">setContent</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">articles</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">mainRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLDivElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">theme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">ThemeContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">language</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">LanguageContext</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mainRef</span><span class="p">.</span><span class="nx">current</span><span class="o">?</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">theme</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i18n</span><span class="o">?</span><span class="p">.</span><span class="nx">changeLanguage</span><span class="p">(</span><span class="nx">locale</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">language</span><span class="p">,</span> <span class="nx">locale</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">([</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">withAnimation</span><span class="p">])}</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">mainRef</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">classNames</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">header</span><span class="p">]</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">headerWebp</span><span class="p">]</span><span class="o">:</span> <span class="nx">isSupportWebp</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">})}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;{</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="p">}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">list</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="p">}</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;blank&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;noopener=yes,noreferrer=yes&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">label</span><span class="p">}&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;{</span><span class="nx">item</span><span class="o">?</span><span class="p">.</span><span class="nx">info</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">paginationArea</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Pagination</span> <span class="na">total</span><span class="o">=</span><span class="p">{</span><span class="nx">content</span><span class="o">?</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="na">pageSize</span><span class="o">=</span><span class="p">{</span><span class="mi">6</span><span class="p">}</span> <span class="na">onPageChange</span><span class="o">=</span><span class="p">{</span><span class="nx">pageNo</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntroduction`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">pageNo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="nx">list</span>: <span class="kt">listData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">setContent</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">list</span>: <span class="kt">listData?.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntroduction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">})),</span>
</span></span><span class="line"><span class="cl">                <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">          <span class="p">}}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getServerSideProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">({</span> <span class="nx">locale</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">locale</span>: <span class="kt">string</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/home`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">list</span>: <span class="kt">listData</span><span class="p">,</span> <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/api/articleIntroduction`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageNo</span>: <span class="kt">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageSize</span>: <span class="kt">6</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...(</span><span class="k">await</span> <span class="nx">serverSideTranslations</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s1">&#39;footer&#39;</span><span class="p">,</span> <span class="s1">&#39;header&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span><span class="p">])),</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">articles</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">total</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">list</span>: <span class="kt">listData?.map</span><span class="p">((</span><span class="nx">item</span>: <span class="kt">IArticleIntroduction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">label</span>: <span class="kt">item.label</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">info</span>: <span class="kt">item.info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">link</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">LOCALDOMAIN</span><span class="si">}</span><span class="sb">/article/</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">articleId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}))</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>styles/Home.module.scss</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.headerWebp</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="na">background-image</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">home-background-icon-webp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæ¥çœ‹çœ‹æ•ˆæœï¼Œfast 3g ä¸‹å¯¹åº”èµ„æºçš„åŠ è½½æ—¶é—´ ä» 4s å‡å°‘åˆ°äº† 3sï¼Œä¼˜åŒ–äº†è¿‘ 25%ï¼</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_73.png" alt="" width="700" />   
<p>ä¸ºä»€ä¹ˆ webp å¯ä»¥åœ¨ä¿è¯æ— æŸç”»è´¨çš„å‰æä¸‹ï¼Œç¼©å°è¿™ä¹ˆå¤šä½“ç§¯å‘¢ï¼Ÿ</p>
<p>å¾ˆæœ‰æ„æ€çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå½“å¤„äºæå¿«ç½‘é€Ÿçš„æƒ…å†µä¸‹ï¼Œwebp ç›¸æ¯”åŒç”»è´¨çš„ png çš„åŠ è½½æ—¶é—´åè€Œä¼šæ›´é•¿ï¼Œå³ä½¿å®ƒç›¸æ¯”å…¶ä»–ç±»å‹çš„èµ„æºï¼Œä½“ç§¯ä¸Šç¼©å°äº†æ•´æ•´ 40% ä»¥ä¸Šã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„ç°è±¡å‘¢ï¼Ÿ</p>
<p>webp çš„ä½ä½“ç§¯å¹¶ä¸æ˜¯æ¯«æ— ä»£ä»·çš„ï¼Œwebp åœ¨å‹ç¼©è¿‡ç¨‹ä¸­è¿›è¡Œäº†åˆ†å—ã€å¸§å†…é¢„æµ‹ã€é‡åŒ–ç­‰æ“ä½œï¼Œè¿™äº›æ“ä½œæ˜¯å‡å°‘ webp ä½“ç§¯çš„æ ¸å¿ƒåŸå› ï¼Œä¸è¿‡ä½œä¸ºäº¤æ¢çš„æ˜¯ï¼Œç›¸æ¯” jpgã€png ç­‰èµ„æºï¼Œå®ƒå…·å¤‡æ›´é•¿çš„è§£ææ—¶é•¿ï¼Œä¸è¿‡è¿™ä¸ªæ˜¯ä¸å—ç½‘é€Ÿç­‰å½±å“çš„ï¼Œå› ä¸ºæ˜¯æµè§ˆå™¨å†…ç½®çš„èƒ½åŠ›ã€‚</p>
<p>æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨æå¿«ç½‘é€Ÿçš„æƒ…å†µä¸‹ï¼Œwebp çš„åŠ è½½æ—¶é—´æœ‰æ—¶ä¼šå‘ˆç°ä¸ºè´Ÿä¼˜åŒ–çš„åŸå› ï¼Œå› ä¸ºå‡å°‘çš„èµ„æºè¯·æ±‚æ—¶é—´ä¸è¶³å¤ŸæŠµæ¶ˆæ‰é¢å¤–çš„è§£ææ—¶é—´ï¼Œä¸è¿‡è¿™ä¸ªæ—¶é—´å·®å€¼å¹¶ä¸é•¿ï¼Œå‡ æ¯«ç§’åœ¨ç”¨æˆ·ä½“éªŒçš„è¿‡ç¨‹ä¸­æ˜¯æ— ä¼¤å¤§é›…çš„ã€‚</p>
<p>ä½†æ˜¯åœ¨ä½ç½‘é€Ÿçš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªä¼˜åŒ–æ¯”ä¾‹æ˜¯æé«˜çš„ï¼Œå› ä¸º 40% çš„ä½“ç§¯å¤§å°ï¼Œå¯¹äºä½ç½‘é€Ÿåœºæ™¯ä¸‹ï¼Œè¯·æ±‚æ—¶é—´å°†ä¼šæ˜¯è´¨çš„æé«˜ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œå‡ æ¯«ç§’çš„è§£ææ—¶é•¿å°±æ— å…³ç´§è¦äº†ã€‚</p>
<h2 id="ios-300ms-delay">IOS 300ms delay</h2>
<p>å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œäº‹ä»¶è§¦å‘å¤§éƒ¨åˆ†éƒ½æ˜¯ç«‹åˆ»å“åº”ï¼Œä½†æ˜¯åœ¨ IOS ä¸­ï¼Œç§»åŠ¨ç«¯çš„è§¦æ‘¸äº‹ä»¶ä¼šæœ‰ 300ms çš„å»¶è¿Ÿã€‚</p>
<p>IOS æµè§ˆå™¨æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥é€šè¿‡åŒå‡»æ¥å¯¹å±å¹•é¡µé¢è¿›è¡Œç¼©æ”¾ï¼Œè¿™æ˜¯å¯¼è‡´ 300ms å»¶è¿Ÿçš„æ ¸å¿ƒåŸå› ã€‚</p>
<p>å› ä¸ºå½“ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨æ²¡åŠæ³•åˆ¤å®šç”¨æˆ·æ˜¯æƒ³åŒå‡»ç¼©æ”¾ï¼Œè¿˜æ˜¯è¿›è¡Œç‚¹å‡»äº‹ä»¶è§¦å‘ï¼Œæ‰€ä»¥ IOS Safari ä¼šç»Ÿä¸€ç­‰å¾… 300msï¼Œæ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¼šå†æ¬¡ç‚¹å‡»å±å¹•ã€‚</p>
<h3 id="meta-ç¦ç”¨ç¼©æ”¾æ¨è">Meta ç¦ç”¨ç¼©æ”¾(æ¨è)</h3>
<p>300ms å»¶è¿Ÿçš„åˆè¡·æ˜¯ä¸ºäº†è§£å†³ç‚¹å‡»å’Œç¼©æ”¾æ²¡åŠæ³•åŒºåˆ†çš„é—®é¢˜ï¼Œé’ˆå¯¹ä¸éœ€è¦ç¼©æ”¾çš„é¡µé¢ï¼Œé€šè¿‡ç¦ç”¨ç¼©æ”¾æ¥è§£å†³ã€‚</p>
<p>äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†ç§»åŠ¨ç«¯é¡µé¢éƒ½æ˜¯å¯ä»¥é¿å…ç¼©æ”¾çš„ï¼Œé€šè¿‡äº¤äº’ç­‰æ ·å¼çš„å…¼å®¹å³å¯ã€‚</p>
<p>pages/_app.tsx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// ./pages/_app.tsx
</span></span><span class="line"><span class="cl">// headåŠ è¿™ä¸¤è¡Œå³å¯
</span></span><span class="line"><span class="cl">// ...
</span></span><span class="line"><span class="cl">&lt; meta name=&#34;viewport&#34; content=&#34;user-scalable=no&#34; &gt;
</span></span><span class="line"><span class="cl">&lt; meta name=&#34;viewport&#34; content=&#34;initial-scale=1,maximum-scale=1&#34; &gt; 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ›´æ”¹è§†å£å°ºå¯¸">æ›´æ”¹è§†å£å°ºå¯¸</h3>
<p>Chrome æµè§ˆå™¨å¯¹åŒ…å« width=device-width æˆ–è€…æ¯” viewport æ›´å°çš„é¡µé¢ç¦ç”¨åŒå‡»ç¼©æ”¾ï¼Œåªéœ€è¦åŠ ä¸Šä¸‹é¢çš„ meta å¤´ï¼Œå°±å¯ä»¥åœ¨ IOS ä¸­çš„ chrome æµè§ˆå™¨è§£å†³ 300ms delay çš„é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„æ˜¯ï¼Œå¹¶ä¸ä¼šå®Œå…¨ç¦ç”¨ç¼©æ”¾ã€‚ä½†æ˜¯ IOS é»˜è®¤çš„ Safari æµè§ˆå™¨æ²¡æœ‰æ”¯æŒè¿™ä¸ªèƒ½åŠ›ï¼Œæ‰€ä»¥å¯ä»¥åŠ ä¸Šè¿™ä¸ª meta å¤´æ¥å…¼å®¹è§†å£å°ºå¯¸ï¼Œä½†å¹¶ä¸ä½œä¸ºè¿™ä¸ªçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width&#34;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="touch-action">Touch-action</h3>
<p>åœ¨ W3C è‰æ¡ˆä¸­ï¼Œæœ‰æå‡ºä¸€ä¸ª touch-action css å±æ€§ï¼Œé€šè¿‡è®¾ç½® touch-action: none å¯ä»¥ç§»é™¤ç›®æ ‡å…ƒç´ çš„ 300ms delayï¼Œå¦‚æœè¿™ä¸ªæ—¥åå¯ä»¥è¢«ä¸»æµæµè§ˆå™¨æ”¯æŒï¼Œæ›´æ¨èç”¨è¿™ç§æ–¹å¼é’ˆå¯¹åŒºåŸŸè¿›è¡Œçµæ´»çš„é™åˆ¶ã€‚</p>
<h3 id="fastclick">fastclick</h3>
<p>è¿™æ˜¯ä¸€ä¸ªè€ç‰Œçš„è§£å†³ 300ms å»¶è¿Ÿçš„è½»é‡ JS åº“ï¼Œå¯ä»¥é€šè¿‡ npm å®‰è£…ä¸”ä½¿ç”¨æ–¹å¼ç®€å•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FastClick</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸å»ºè®®ä½¿ç”¨ fastclick çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>å¯¹ TS å…¼å®¹æ€§å¤ªå·®ï¼Œfastclick åŸºäº JSï¼Œè™½ç„¶æœ‰ ts for fastclick çš„ä¾èµ–ï¼Œä½†æ˜¯ä¸è¢«åŸä½œè€…è®¤å¯ï¼Œå¹¶ä¸”ç±»å‹å®šä¹‰å­˜åœ¨é—®é¢˜ï¼Œç›´æ¥å¼•å…¥ä¾èµ–å­˜åœ¨é—®é¢˜ï¼Œéœ€è¦è‡ªè¡Œè¿›å…¥æ¨¡å—å®šä¹‰ä¸­ä¿®æ”¹ã€‚</li>
<li>åŒ…ä½“è¿‡å¤§ï¼Œä¸”åŒ…å…«å¹´æ²¡å†ç»´æŠ¤ã€‚</li>
<li>ä¸èƒ½ç›´æ¥ç”¨äº SSRï¼Œé‡Œé¢æœ‰ç›´æ¥ç”¨åˆ° BOMï¼Œåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ—¶å€™ä¼šæœ‰ç›¸å…³æŠ¥é”™ï¼Œæ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½çš„æ’ä»¶å¯ä»¥å…¼å®¹è¿™ä¸ªé—®é¢˜ã€‚</li>
</ul>
<h2 id="æ©¡çš®ç­‹é—®é¢˜">æ©¡çš®ç­‹é—®é¢˜</h2>
<p>IOSä¸Šï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨æˆ–åº•éƒ¨ä»å¯å‘ä¸‹æˆ–å‘ä¸Šæ‹–æ‹½ï¼Œå¹¶ä¼´éšä¸€ä¸ªå¼¹æ€§çš„æ•ˆæœã€‚è¯¥æ•ˆæœè¢«ç§°ä¸ºâ€œrubber bandâ€â€”â€”æ©¡çš®ç­‹ã€‚</p>
<p>IOS å’Œå®‰å“ä¸åŒï¼Œå³ä½¿é¡µé¢æ²¡æœ‰è®¾ç½®æ»šåŠ¨ï¼Œä»ç„¶å¯ä»¥æ‹‰æ‰¯ï¼Œç»™äººä¸€ç§æ©¡çš®ç­‹çš„æ„Ÿè§‰ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ•ˆæœã€‚</p>
<iframe width="700" height="315" src="/images/ssr/e.mp4" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h3 id="overflow-ç»™å®šå®½é«˜">overflow ç»™å®šå®½é«˜</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="nt">html</span><span class="o">,</span> <span class="nt">body</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¦ç”¨-touchmove-äº‹ä»¶">ç¦ç”¨ touchmove äº‹ä»¶</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span> 
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">{</span><span class="nx">passive</span><span class="o">:</span> <span class="kc">false</span><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç›‘å¬æ»šåŠ¨ç¦æ­¢">ç›‘å¬æ»šåŠ¨ç¦æ­¢</h3>
<p>IOS æ©¡çš®ç­‹çš„åŸç†è¿˜æ˜¯é€šè¿‡æ»šåŠ¨ï¼Œåªä¸è¿‡ä¸å®‰å“ä¸åŒçš„æ˜¯ï¼Œå½“åˆ°è¾¹ç•ŒçŠ¶æ€æ—¶ï¼Œä»å…è®¸æ»šåŠ¨ï¼Œå¦‚æœæ›¿ IOS ç¦ç”¨è¾¹ç•Œçš„æƒ…å†µï¼Œç†è®ºä¸Šå°±å¯ä»¥å®ç°å¯¹æ©¡çš®ç­‹æ•ˆæœçš„ç¦ç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">useForbidIosScroll</span> <span class="o">=</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">startEvent</span>: <span class="kt">TouchEvent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">cancelEvent</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span>: <span class="kt">TouchEvent</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æœ‰ä¸ªç‘•ç–µå°±æ˜¯ï¼Œå¦‚æœæ˜¯å¤§æƒ¯æ€§çš„é‚£ç§æ»šåŠ¨ï¼Œæµè§ˆå™¨è¯¥äº‹ä»¶å¹¶ä¸æ¥å—ä½ ç¦ç”¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„åŠ¨ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// å¯¼è‡´å¦‚æœçŒ›åœ°æ»‘åŠ¨ä¼šå‡ºé¡µé¢è¾¹ç•Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">cancelable</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">checkScroll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span>: <span class="kt">TouchEvent</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">startY</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">startEvent</span><span class="o">?</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">endY</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="o">?</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¸‹æ»‘ä¸”æ»‘åŠ¨åˆ°åº•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">startY</span> <span class="o">&gt;</span> <span class="nx">endY</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">&gt;=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">cancelEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¸Šæ»‘ä¸”æ»‘åŠ¨åˆ°é¡¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">startY</span> <span class="o">&lt;</span> <span class="nx">endY</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">cancelEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span>: <span class="kt">TouchEvent</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">startEvent</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">end</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span>: <span class="kt">TouchEvent</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">checkScroll</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="nx">start</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="p">{</span> <span class="nx">passive</span>: <span class="kt">false</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="nx">start</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="nx">end</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ•ˆæœå…¶å®å¹¶ä¸æ˜¯å¾ˆç†æƒ³ï¼Œå³ä½¿è„šæœ¬å·²ç»èµ°åˆ°ä¸­æ–­çš„é€»è¾‘ï¼Œæ»šåŠ¨çš„è¡Œä¸ºåœ¨åˆ°è¾¾è¾¹ç•Œçš„æ—¶å€™ä»ç„¶ä¸ä¼šä¸­æ­¢ã€‚</p>
<p>åˆ°è°·æ­Œæµè§ˆå™¨å¼€å‘è€…æ–‡æ¡£é‡Œå¯ä»¥æŸ¥çœ‹åˆ°ï¼Œæµè§ˆå™¨çš„äº‹ä»¶å…¶å®åˆ†ä¸ºä¸¤ç§ï¼Œcancelableï¼ˆå¯æš‚åœï¼‰å’Œ uncancelableï¼ˆä¸å¯æš‚åœï¼‰ï¼Œèƒ½å¤Ÿé€šè¿‡é˜»æ­¢é»˜è®¤äº‹ä»¶çš„å’Œé˜»æ­¢å†’æ³¡çš„éƒ½æ˜¯å¯æš‚åœçš„äº‹ä»¶ï¼Œæ»šåŠ¨äº‹ä»¶å’Œé¼ æ ‡æ»šè½®äº‹ä»¶ï¼Œåœ¨è§¦å‘çš„ç¬é—´ï¼Œå°±å·²ç»å†³å®šäº†è¦æ»šåŠ¨åˆ°ç»ˆç‚¹å†åœæ­¢ï¼Œä½ åªèƒ½æš‚åœå¯èƒ½ä¼šå½±å“æ»šåŠ¨çš„å‰æçš„å¯¼çº¿äº‹ä»¶ï¼Œè¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæ»šåŠ¨äº‹ä»¶å°±å·²ç»æ˜¯èµ·æºçš„æ“ä½œï¼Œä¸å­˜åœ¨é—´æ¥è§¦å‘ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</p>
<h3 id="ç®€å•æ–¹æ¡ˆæ¨è">ç®€å•æ–¹æ¡ˆ(æ¨è)</h3>
<p>æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„æ–¹æ¡ˆï¼Œå¹¶ä¸”å¯ä»¥å®Œç¾è§£å†³ï¼Œç»™ body è¿›è¡Œéšè—ï¼Œç„¶åå¯¹æ ¹èŠ‚ç‚¹è®¾ç½® 100 é¡µå®½çš„é«˜åº¦ï¼Œå°†å¤–éƒ¨ body çš„æ»šåŠ¨ç§»åŠ¨åˆ°é¡µé¢å†…ï¼Œè¿™æ ·å¤–ç•Œçš„æ»šåŠ¨ç›¸å…³çš„é—®é¢˜éƒ½ä¼šè§£å†³ï¼Œå› ä¸ºé¡µé¢é‡‡ç”¨çš„å®é™…æ˜¯å†…éƒ¨æ»šåŠ¨ã€‚</p>
<p>styles/globals.css</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">forbidScroll</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">body</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">#</span><span class="nn">__next</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>çœ‹çœ‹æ”¹åçš„æ•ˆæœï¼Œå‘ç°æ©¡çš®ç­‹çš„åŠŸèƒ½å·²ç»ç¦ç”¨äº†ï¼Œå› ä¸ºç°åœ¨é¡µé¢é‡‡ç”¨çš„æ˜¯é¡µé¢å†…éƒ¨ div çš„æ»šåŠ¨ï¼Œå¤–éƒ¨ body çš„æ»šåŠ¨ç›¸å…³çš„é—®é¢˜ä¹Ÿéšä¹‹è§£å†³ã€‚</p>
<iframe width="700" height="315" src="/images/ssr/f.mp4" title="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<h2 id="å‰ç«¯å‹åŠ›æµ‹è¯•">å‰ç«¯å‹åŠ›æµ‹è¯•</h2>
<p>é€šå¸¸åœ¨ä¸Šçº¿å‰ä¼šå¯¹è¿™äº›å°æµé‡ç¯å¢ƒè¿›è¡Œé¢„ä¼°æµé‡çš„å‹æµ‹ï¼Œæ¥é¢„ä¼°ç›®å‰çš„å°æµé‡é›†ç¾¤æœåŠ¡å™¨èƒ½å¦æ‰¿è½½å¯¹åº”çš„æµé‡ï¼Œè¿›è€Œè¯„ä¼°ä¸€ä¸‹ä½¿ç”¨å¤šå°‘æœåŠ¡å™¨é›†ç¾¤éƒ¨ç½²æœåŠ¡ï¼Œæ‰èƒ½è¶³å¤Ÿæ‰¿è½½æµé‡ï¼Œåˆä¸è‡³äºæµªè´¹æœåŠ¡å™¨èµ„æºã€‚</p>
<p>åŸºäºæœ¬åœ°æœåŠ¡å‹æµ‹ï¼Œå¯¹äºå®é™…ä¸Šçº¿ï¼Œéœ€è¦å…ˆéƒ¨ç½²åœ¨æµ‹è¯•æœåŠ¡å™¨ï¼Œç„¶åå¯¹æµ‹è¯•ç¯å¢ƒå†…ç½‘åŸŸåè¿›è¡Œå‹æµ‹ï¼Œè¿›è€Œåˆ¤æ–­èƒ½å¦æ‰¿å—é¢„ä¼°çš„QPSï¼Œä»è€Œå¯¹æœåŠ¡é›†ç¾¤è¿›è¡Œæ‰©å®¹ç­‰æ“ä½œã€‚</p>
<h3 id="webbench">WebBench</h3>
<p>WebBench æ˜¯ä¸€ä¸ªåœ¨ Linux ä¸‹ä½¿ç”¨çš„éå¸¸ç®€å•çš„ç½‘ç«™å‹æµ‹å·¥å…·ã€‚å®ƒä½¿ç”¨ fork() æ¨¡æ‹Ÿå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è®¿é—®è®¾å®šçš„ URLï¼Œæµ‹è¯•ç½‘ç«™åœ¨å‹åŠ›ä¸‹å·¥ä½œçš„æ€§èƒ½ï¼Œæœ€å¤šå¯ä»¥æ¨¡æ‹Ÿ 3 ä¸‡ä¸ªå¹¶å‘è¿æ¥å»æµ‹è¯•ç½‘ç«™çš„è´Ÿè½½èƒ½åŠ›ã€‚</p>
<p>WebBench ä¸èƒ½æ”¯æŒ Windowsï¼Œåªèƒ½åœ¨ Linux ç­‰ç±» UNIX ç³»ç»Ÿä¸‹ä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆéœ€è¦å®‰è£…ä¸€ä¸‹ brewï¼Œè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ macOS å’Œ Linux çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå®‰è£…å®Œåœ¨ç»ˆç«¯é‡Œç›´æ¥è¾“å…¥ brew çœ‹ä¸‹æœ‰æ²¡æœ‰æ­£å¸¸è¾“å‡ºå³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/bin/bash -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åè£…ä¸€ä¸‹ wgetï¼Œå®ƒæ˜¯ Linux ä¸‹çš„ä¸€ä¸ªå®‰è£…æ–‡ä»¶çš„å·¥å…·ï¼Œå¯¹åº”çš„å®‰è£…åŒ…å¯ä»¥é€šè¿‡å®ƒä¸‹è½½ä¸‹æ¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">brew install wget
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åæ¥è£…ä¸€ä¸‹ WebBenchã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget http://www.ha97.com/code/webbench-1.5.tar.gz
</span></span><span class="line"><span class="cl">tar zxvf webbench-1.5.tar.gz // è§£å‹
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> webbench-1.5
</span></span><span class="line"><span class="cl">make
</span></span><span class="line"><span class="cl">make install
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…å®Œä»¥åï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ WebBench éªŒè¯ä¸€ä¸‹ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_74.png" alt="" width="700" />   
<p>éœ€è¦å…³æ³¨çš„å‚æ•°æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>-c: å¹¶å‘é‡ã€‚</li>
<li>-t: è¿è¡Œæ—¶é—´ã€‚</li>
</ul>
<p>å¯¹æœåŠ¡ç®€å•å‹æµ‹è¯•éªŒä¸‹çœ‹çœ‹ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_75.png" alt="" width="700" />   
<p>å¯ä»¥çœ‹åˆ° 200 å¹¶å‘å°±ä¼šå‡ºç°å¤§è§„æ¨¡è¯·æ±‚å¼‚å¸¸çš„æƒ…å†µï¼Œä¸è¿‡è¿™ä¸ªç»“æœç®—æ¯”è¾ƒç®€é™‹çš„ï¼ŒåŠ ä¸Šå¯¹ç¯å¢ƒå’Œå®‰è£…æ­¥éª¤ä¸Šç›¸å¯¹è‹›åˆ»ä¸€äº›ï¼Œæ‰€ä»¥å¹¶ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆã€‚</p>
<h3 id="wrk">wrk</h3>
<p>wrk æ˜¯ä¸€æ¬¾é’ˆå¯¹ HTTP åè®®çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨å•æœºå¤šæ ¸ CPU çš„æ¡ä»¶ä¸‹ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é«˜æ€§èƒ½ I/O æœºåˆ¶ï¼Œå¦‚ epollã€kqueue ç­‰ï¼Œé€šè¿‡å¤šçº¿ç¨‹å’Œäº‹ä»¶æ¨¡å¼ï¼Œå¯¹ç›®æ ‡æœºå™¨äº§ç”Ÿå¤§é‡çš„è´Ÿè½½ã€‚</p>
<p>wrk æ”¯æŒå¤§å¤šæ•°ç±» UNIX ç³»ç»Ÿï¼Œä¸æ”¯æŒ Windowsã€‚ä¸åŒçš„ç±» UNIX ç³»ç»Ÿå®‰è£…æ–¹å¼ä¹Ÿç•¥æœ‰å·®å¼‚ã€‚</p>
<p>è£…ä¸€ä¸‹ wrkã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">brew install wrk
</span></span></code></pre></td></tr></table>
</div>
</div><p>è£…å®Œå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œä¸€ä¸‹ wrk -véªŒè¯ä¸€ä¸‹ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_76.png" alt="" width="700" />   
<p>ä¸Šé¢æ‰§è¡Œå®Œä»¥åå¯ä»¥çœ‹åˆ°å®ƒåˆ—å‡ºäº† wrk ç›¸å…³çš„å‚æ•°ï¼Œå…¶ä¸­å¸¸ç”¨åˆ°çš„æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>-c: ä¿æŒæ‰“å¼€çŠ¶æ€çš„ HTTP è¿æ¥æ€»æ•°ã€‚</li>
<li>-d: æµ‹è¯•æ—¶é•¿ã€‚</li>
<li>-t: ä½¿ç”¨çº¿ç¨‹ã€‚</li>
</ul>
<p>å…¶ä¸­è¿æ¥æ•°ï¼ˆcï¼‰ä¼šå¹³åˆ†ç»™æ¯ä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚è®¾ç½® -c200 -t8ï¼Œé‚£ä¹ˆå°†å¯ç”¨ 8 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¤„ç† 200/8 ä¸ªè¯·æ±‚ï¼Œå¯ä»¥å¯¹ bing æœç´¢ç®€å•è¯•éªŒä¸€ä¸‹ï¼Œå…·ä½“å‚æ•°å…¶å®å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_77.png" alt="" width="700" />   
<p>è¿™ä¸ªæ–¹æ¡ˆæ›´å¤šæ˜¯ç»™åç«¯åŒå­¦æµ‹ååç‡ç”¨çš„ï¼ŒåŒ…æ‹¬çº¿ç¨‹ç­‰å‚æ•°ï¼Œå…·ä½“çš„å€¼ä¸å¥½è¡¡é‡ï¼Œå¯¹å‰ç«¯ä¸ç®—é‚£ä¹ˆå‹å¥½ã€‚</p>
<h3 id="autocannon">autocannon</h3>
<p>ä¸€ä¸ªç”¨ Node ç¼–å†™çš„ HTTP/1.1 åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œå—åˆ° wrk å’Œ wrk2 çš„æå¤§å¯å‘ï¼Œæ”¯æŒ HTTP ç®¡é“å’Œ HTTPSã€‚autocannon å¯ä»¥äº§ç”Ÿæ¯” wrk å’Œ wrk2 æ›´å¤šçš„è´Ÿè½½ã€‚</p>
<p>autocannon å¯ä»¥åŒæ—¶æ”¯æŒ Windowsã€Mac å’Œ Linux çš„ç¯å¢ƒï¼Œè€Œä¸”ä½œä¸ºä¸€ä¸ª npm åŒ…ï¼Œä½¿ç”¨ä¸Šæ¯”è¾ƒç¬¦åˆå‰ç«¯çš„å¼€å‘ä¹ æƒ¯ï¼Œå®‰è£…æ›´ä¸ºæ–¹ä¾¿ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆè½»é‡ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i autocannon -g
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒæä¾›äº†ä¸€äº›å‚æ•°æ¥å¯¹åº”ä¸åŒå‹æµ‹æŒ‡æ•°ï¼Œå¸¸ç”¨çš„æœ‰ 3 ä¸ªï¼š</p>
<ul>
<li>-c: è¦ä½¿ç”¨çš„å¹¶å‘è¿æ¥æ•°ã€‚é»˜è®¤å€¼ï¼š10ã€‚</li>
<li>-p: ä½¿ç”¨æµæ°´çº¿è¯·æ±‚çš„æ•°é‡ã€‚é»˜è®¤å€¼ï¼š1ã€‚</li>
<li>-d: è¿è¡Œç§’æ•°ã€‚é»˜è®¤å€¼ï¼š10ã€‚</li>
</ul>
<p>é¦–å…ˆæµ‹è¯•ä¸€ä¸‹é»˜è®¤å€¼çš„æ•ˆæœã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">autocannon http://127.0.0.1:3000
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™ä¸ª 10s çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¦‚æœåˆ‡å› client å¯ä»¥çœ‹åˆ°æœåŠ¡åœ¨é£å¿«è¯·æ±‚ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_80.png" alt="" width="700" />   
<p>æœ€åå¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªæ•°æ®ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_79.png" alt="" width="700" />   
<p>ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæŒ‡æ ‡å¯¹åº”ä»€ä¹ˆï¼Œå…ˆçœ‹æ¯åˆ—çš„æŒ‡æ ‡ï¼š</p>
<ul>
<li>2.5% / 50% / 97.5% / 99%ï¼šæ•´ä¸ªè¿‡ç¨‹ç™¾åˆ†æ¯”æ‰€å¯¹åº”çš„å€¼ã€‚</li>
<li>Avg: å¹³å‡å€¼ã€‚</li>
<li>Stdev: æ ‡å‡†å·®ã€‚</li>
<li>Max: æœ€å¤§å€¼ã€‚</li>
</ul>
<p>å¯¹äºæ¯è¡Œçš„æŒ‡æ ‡å«ä¹‰æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>Latency: è€—æ—¶(æ¯«ç§’)ã€‚</li>
<li>Req/Sec: QPSï¼Œååé‡ï¼Œæ¯ç§’è¯·æ±‚æ•°ã€‚</li>
<li>Bytes/Sec: æ¯ç§’è¯·æ±‚å­—èŠ‚æ•°ã€‚</li>
</ul>
<p>è¿™äº›æŒ‡æ ‡é€šå¸¸åœ¨å¯¹å…·ä½“æ¥å£æˆ–æ˜¯é¡µé¢ case by case çš„æ€§èƒ½åˆ†æä¸­ä¼šæœ‰ä½¿ç”¨ï¼ŒæœåŠ¡å™¨èµ„æºåˆ¤å®šåªéœ€è¦å…³æ³¨è¯·æ±‚æ—¶é—´æ˜¯å¦è¿‡é•¿ï¼Œæˆ–æ˜¯æ˜¯å¦å­˜åœ¨å¤§é¢ç§¯æŠ¥é”™å³å¯ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°å¤§éƒ¨åˆ†æ•°å€¼æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ç­‰ä¿¡æ¯ã€‚</p>
<p>æ¥ä¸‹æ¥æŠŠå¹¶å‘é‡æé«˜åˆ° 200ï¼Œå†æ¥çœ‹ä¸‹æ•ˆæœã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">autocannon -c <span class="m">200</span> http://127.0.0.1:3000
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_81.png" alt="" width="700" />   
<p>ä»æ•°æ®ä¸Šçœ‹ï¼Œå‘ç°æ‰€æœ‰çš„æ•°æ®éƒ½æ¸… 0 äº†ï¼Œè¯´æ˜åœ¨è¿™ä¸ªå¹¶å‘é‡ä¸‹å•æœåŠ¡å™¨çš„è®¡ç®—æ”¯æ’‘ä¸ä¸‹å»ï¼Œæœ€ä¸‹é¢çš„è¯·æ±‚æ•°æ®ä¸­ä¹Ÿæœ‰æ˜¾ç¤º 200 ä¸ªé”™è¯¯ï¼Œ 200 ä¸ªè¶…æ—¶ã€‚</p>
<p>è¿™æ—¶å€™åˆ‡å› client çš„ç»ˆç«¯å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å·²ç»å´©æ‰äº†ï¼Œæ²¡åŠæ³•æ‰¿è½½ 200 çš„å¹¶å‘é‡ï¼Œå¦‚æœä¸šåŠ¡éœ€è¦ï¼Œè¿™æ—¶å€™å°±éœ€è¦è€ƒè™‘ç»™æœåŠ¡å™¨é›†ç¾¤è¿›è¡Œæ‰©å®¹æ“ä½œäº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_82.png" alt="" width="700" />   
<h2 id="æé«˜æœç´¢å¼•æ“æ’å">æé«˜æœç´¢å¼•æ“æ’å</h2>
<h3 id="æŠ€æœ¯ä¼˜åŒ–">æŠ€æœ¯ä¼˜åŒ–</h3>
<h4 id="è¯­ä¹‰åŒ–æ ‡ç­¾">è¯­ä¹‰åŒ–æ ‡ç­¾</h4>
<p>å†™ toB é¡¹ç›®æ—¶ï¼Œå¯èƒ½ä¼šç›´æ¥ç”¨ div æ ‡ç­¾ä½œä¸ºå—çº§åŒºåŸŸçš„æ ‡ç­¾ï¼Œä½†æ˜¯å¯¹äº SEO è€Œè¨€ï¼Œè¿™æ ·çš„çˆ¬å–å’Œå…³é”®è¯æ£€ç´¢æ•ˆæœæ˜¯æå·®çš„ï¼Œæœç´¢å¼•æ“çš„ç´¢å¼•å™¨åœ¨å¯¹ç«™ç‚¹è¿›è¡Œåˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ ¹æ®è¯­ä¹‰åŒ–æ ‡ç­¾æ¥å†³å®šä¸åŒä¿¡æ¯çš„é‡è¦ç¨‹åº¦ï¼Œä»¥æ­¤æ¥åŒ¹é…å¯¹åº”çš„å…³é”®è¯è¿›è¡Œæ¨èã€‚</p>
<p>å…¶ä¸­æœ€éœ€è¦å…³æ³¨çš„ï¼Œä¹Ÿæœ€å¸¸ç”¨çš„å°±æ˜¯ç«™ç‚¹çš„ H æ ‡ç­¾ï¼Œæœ‰å‡ ä¸ªéœ€è¦ç€é‡æ³¨æ„çš„ä½¿ç”¨äº‹é¡¹ï¼š</p>
<ul>
<li>H æ ‡ç­¾åªé’ˆå¯¹ç”¨æˆ·å¯è§å†…å®¹è¿›è¡Œè®¾ç½®ï¼Œå›¾ç‰‡ã€é“¾æ¥ã€å†™ç»™ robots å¯è¯»æ–‡å­—å‡ä¸åœ¨ H æ ‡ç­¾ä½¿ç”¨èŒƒå›´ä¹‹å†…ã€‚</li>
<li>H1 æ˜¯ä¸€ä¸ªé¡µé¢ä¸­æƒé‡æœ€é«˜ï¼Œå…³é”®è¯ä¼˜å…ˆçº§æœ€é«˜çš„æ–‡æ¡ˆï¼Œä¸€ä¸ªé¡µé¢åªèƒ½ä½¿ç”¨ä¸€ä¸ªã€‚</li>
<li>é¡µé¢ä¸­é€šå¸¸åªä½¿ç”¨ H1 ~ H3ï¼Œå‰©ä¸‹çš„æ ‡é¢˜ä¼˜å…ˆçº§å¤ªä½ï¼Œéƒ¨åˆ†æœç´¢å¼•æ“ä¸ä¼šè¿›è¡Œè¯†åˆ«ã€‚</li>
<li>H æ ‡ç­¾é€šå¸¸ä¸ä½¿ç”¨åœ¨æ–‡å­— logoã€ æ ‡ç­¾æ ã€ä¾§è¾¹æ ç­‰æ¯é¡µå›ºå®šå­˜åœ¨çš„éƒ¨åˆ†ã€‚å› ä¸ºè¿™éƒ¨åˆ†ä¸å±äºè¿™ä¸€é¡µçš„é‡ç‚¹ï¼Œå³ä¸æ˜¯â€œä¸ä¼—ä¸åŒâ€ çš„åŒºåŸŸã€‚</li>
</ul>
<h4 id="meta">Meta</h4>
<p>å½±å“ SEO æœ‰ä¸‰ä¸ªé‡è¦å…ƒç´ ï¼Œé€šå¸¸ç§° TDKï¼ˆå³ titleï¼Œdescriptionï¼Œkeywordsï¼‰ï¼Œé™¤è¿™äº›éƒ¨åˆ†å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„ meta æ ‡ç­¾ï¼Œè¿™äº›éƒ½éœ€è¦åŠ åˆ°æ¨¡æ¿é¡µé¢ä¸­ã€‚</p>
<ul>
<li>Title: å°±æ˜¯å¸¸ç”¨çš„ title æ ‡ç­¾ã€‚</li>
<li>Description: é¡µé¢æè¿°ï¼ŒSEO çš„å…³é”®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPC ç«¯ä¸‹é¡µé¢æè¿°ä¸è¦è¶…è¿‡ 155 ä¸ªå­—ç¬¦ï¼Œç§»åŠ¨ç«¯ä¸è¦è¶…è¿‡ 120 ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¿‡é•¿ï¼Œé¡µé¢æè¿°ä¼šè¢«æˆªæ–­ï¼Œåè€Œä¼šå½±å“æœ€ç»ˆçš„ SEOã€‚</li>
<li>Keywords: å…³é”®è¯ï¼Œè¿™ä¸ªçš„è®¾å®šéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</li>
</ul>
<ol>
<li>æ¯ä¸ªé¡µé¢é€šå¸¸è®¾ç½®æ¯”è¾ƒé‡è¦çš„3ã€4ä¸ªå…³é”®è¯ï¼Œä¸è¦å †ç Œï¼Œä¸è¦è¿‡é•¿ï¼Œæ›´ä¸è¦åªå› ä¸ºçƒ­é—¨ï¼Œå°±åŠ å®Œå…¨ä¸ç›¸å…³çš„å†…å®¹è¿›æ¥è¹­çƒ­åº¦ã€‚</li>
<li>å…³é”®è¯æŒ‰ç…§ç”±é«˜åˆ°ä½çš„é¡ºåºæ¥æ’ï¼Œç”¨é€—å·åˆ†éš”ã€‚</li>
<li>æ¯ä¸ªå…³é”®è¯éƒ½è¦æ˜¯ç‹¬ç‰¹çš„ï¼Œä¸è¦æ¯ä¸ªå…³é”®è¯æ„æ€éƒ½å·®ä¸å¤šã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;keywords&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>robotsï¼ˆé‡è¦ï¼‰: æ˜¯å¦å¼€å¯æœç´¢å¼•æ“æŠ“å–ï¼Œnoindex å¯¹åº”æ˜¯å¦å¼€å¯æŠ“å–ï¼Œnofollow å¯¹åº”ä¸è¿½è¸ªç½‘é¡µçš„é“¾æ¥ï¼Œéœ€è¦å¼€å¯ã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;index, follow&#34;</span> <span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>Applicable-device: å‘Šè¯‰ Googleï¼Œä½ è¿™ä¸ªç«™ç‚¹é€‚é…äº†å“ªäº›è®¾å¤‡ï¼Œä¸åŠ å°±æ˜¯é»˜è®¤ PC ç«¯ï¼Œå°†ä¼šå½±å“ç§»åŠ¨ç«¯æœç´¢ä½ ç«™ç‚¹çš„æ¨é€ã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;applicable-device&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;pc,mobile&#34;</span> <span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="6">
<li>Format-detection: åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œç½‘é¡µçš„æ•°å­—ä¼šè¢«è®¤ä¸ºæ˜¯ç”µè¯å·ç ï¼ˆåœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œæ˜¾ç¤ºçš„æ ¼å¼å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚åœ¨ iphone æ‰‹æœºä¸­ä¼šæœ‰ä¸‹åˆ’çº¿ï¼‰ï¼Œç‚¹å‡»æ•°å­—ä¼šè¢«å½“ä½œç”µè¯å·ç æ‹¨æ‰“æˆ–è€…æ·»åŠ åˆ°è”ç³»äººï¼Œæ‰€ä»¥éœ€è¦ç¦ç”¨ã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;format-detection&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;telephone=no&#34;</span> <span class="p">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="sitemap">Sitemap</h4>
<p>ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æä¾›ä¸æ‚¨ç½‘ç«™ä¸­çš„ç½‘é¡µã€è§†é¢‘æˆ–å…¶ä»–æ–‡ä»¶æœ‰å…³çš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥è¯´æ˜è¿™äº›å†…å®¹ä¹‹é—´çš„å…³ç³»ã€‚Google ç­‰æœç´¢å¼•æ“ä¼šè¯»å–æ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°æŠ“å–æ‚¨çš„ç½‘ç«™ã€‚ç«™ç‚¹åœ°å›¾ä¼šå‘Šè¯‰ Google æ‚¨è®¤ä¸ºç½‘ç«™ä¸­çš„å“ªäº›ç½‘é¡µå’Œæ–‡ä»¶æ¯”è¾ƒé‡è¦ï¼Œè¿˜ä¼šæä¾›ä¸è¿™äº›æ–‡ä»¶æœ‰å…³çš„é‡è¦ä¿¡æ¯ã€‚æ›´å¤šå†…å®¹è¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h3 id="å†…å®¹ä¼˜åŒ–">å†…å®¹ä¼˜åŒ–</h3>
<p>å†…å®¹æ˜¯ SEO çš„æ ¸å¿ƒï¼Œæ²¡æœ‰é«˜è´¨é‡çš„å†…å®¹ï¼Œåªé€šè¿‡è¹­çƒ­é—¨å…³é”®è¯ï¼Œåªä¼šæœ‰é€‚å¾—å…¶åçš„æ•ˆæœã€‚æ¨èé˜…è¯» Google SEO å¼€å‘è€…æ–‡æ¡£ï¼Œå…¶ä¸­å¯¹äºå†…å®¹çš„éƒ¨åˆ†æœ‰éå¸¸è¯¦ç»†çš„è¯´æ˜ï¼Œæ¶µæ‹¬å¦‚ä½•è®©ä½ çš„å†…å®¹æœ‰è¶£ï¼Œæ€ä¹ˆæ»¡è¶³è¯»è€…çš„éœ€æ±‚ï¼Œä»¥åŠå¦‚ä½•å…·å¤‡æƒå¨æ€§å’Œèƒ½è§£å†³ç”¨æˆ·çš„é—®é¢˜ç­‰ã€‚</p>
<h4 id="sem">SEM</h4>
<p>æœç´¢å¼•æ“è¥é”€çš„åŸºæœ¬æ€æƒ³æ˜¯è®©ç”¨æˆ·å‘ç°ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ï¼ˆæœç´¢å¼•æ“ï¼‰æœç´¢ç‚¹å‡»è¿›å…¥ç½‘ç«™/ç½‘é¡µè¿›ä¸€æ­¥äº†è§£ä»–æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚ç®€å•æ¥è¯´ SEM æ‰€åšçš„å°±æ˜¯ä»¥æœ€å°çš„æŠ•å…¥åœ¨æœç´¢å¼•æ“ä¸­è·æœ€å¤§çš„è®¿é—®é‡å¹¶äº§ç”Ÿå•†ä¸šä»·å€¼ã€‚SEMçš„æ–¹æ³•åŒ…æ‹¬SEOã€ä»˜è´¹æ’åã€ç²¾å‡†å¹¿å‘Šä»¥åŠä»˜è´¹æ”¶å½•ç­‰ã€‚</p>
<h2 id="ç½‘ç«™æœåŠ¡éƒ¨ç½²">ç½‘ç«™æœåŠ¡éƒ¨ç½²</h2>
<p>ç«™ç‚¹åº”ç”¨æƒ³è¦éƒ¨ç½²å¤–ç½‘ï¼Œéœ€è¦æå‰å‡†å¤‡èµ„æºå’Œæµç¨‹ï¼Œå¤§ä½“å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>äº‘æœåŠ¡å™¨ï¼šå¯ä»¥ç†è§£ä¸ºåœ¨äº‘ç«¯ä¸Šçš„ä¸€å°ç”µè„‘ï¼ŒæŠŠæœåŠ¡æŒ‚è½½åˆ°å¯¹åº”çš„ç«¯å£ä¸‹ï¼Œå³å¯é€šè¿‡äº‘æœåŠ¡å™¨å…¬ç½‘ IP + ç«¯å£çš„æ–¹å¼è¿›è¡Œè®¿é—®ã€‚</li>
<li>åŸŸåï¼šå¯ä»¥ç†è§£æˆæ˜¯äº‘æœåŠ¡å™¨å…¬ç½‘ IP çš„ä¸€ä¸ªä»£å·ï¼Œå› ä¸º IP åœ°å€ä¸æ–¹ä¾¿è®°å¿†ï¼Œæ‰€ä»¥é‡‡ç”¨æ³¨å†ŒåŸŸåå¹¶æŠŠæœåŠ¡å™¨ IP è§£æåˆ°å¯¹åº”åŸŸåä¸‹è¿›è¡Œè®¿é—®ï¼Œé€šå¸¸åŸŸåå’Œç«™ç‚¹çš„å†…å®¹ä¹Ÿæœ‰ä¸€å®šçš„è”ç³»ï¼Œç›¸å½“äºæ˜¯å“ç‰Œæ ‡è¯†çš„ä¸€ä¸ªä½“ç°ï¼Œä¸€ä¸ªå¥½çš„åŸŸåå¯ä»¥æˆä¸ºå†…å®¹å’Œæ–‡åŒ–çš„è‰¯å¥½åŠ©åŠ›ï¼Œç»™ç”¨æˆ·ç•™ä¸‹ä¸é”™çš„å°è±¡ã€‚</li>
<li>åŸŸå ICP å¤‡æ¡ˆï¼šICP è¯æ˜¯æŒ‡å„åœ°é€šä¿¡ç®¡ç†éƒ¨é—¨æ ¸å‘çš„ã€Šä¸­åäººæ°‘å…±å’Œå›½ç”µä¿¡ä¸ä¿¡æ¯æœåŠ¡ä¸šåŠ¡ç»è¥è®¸å¯è¯ã€‹ã€‚æ²¡æœ‰å¤‡æ¡ˆé€šè¿‡è¿™ä¸ªæ˜¯ä¸å¯ä»¥ä¸Šçº¿çš„ï¼ŒICP å¤‡æ¡ˆæˆåŠŸåï¼Œè‹¥åŸŸåæœ‰ç½‘ç«™æˆ–è½åœ°é¡µï¼Œåˆ™éœ€è¦åœ¨ç½‘ç«™åº•éƒ¨æ‚¬æŒ‚å·¥ä¿¡éƒ¨ä¸‹å‘çš„ ICP å¤‡æ¡ˆå·ï¼Œå¹¶ç”Ÿæˆé“¾æ¥æŒ‡å‘å·¥ä¿¡éƒ¨ç½‘ç«™ã€‚å¦‚æœæœªåœ¨ç½‘ç«™åº•éƒ¨æ·»åŠ  ICP å¤‡æ¡ˆå·ï¼Œè¢«ç›¸å…³éƒ¨é—¨æ ¸æŸ¥å‡ºæ¥å°†å¤„ä»¥äº”åƒå…ƒä»¥ä¸Šä¸€ä¸‡å…ƒä»¥ä¸‹ç½šæ¬¾ï¼Œæˆ–æ³¨é”€å¤‡æ¡ˆå·ç­‰å¤„ç½šã€‚</li>
<li>å…¬å®‰å¤‡æ¡ˆï¼šæ ¹æ®ã€Šè®¡ç®—æœºä¿¡æ¯ç½‘ç»œå›½é™…è”ç½‘å®‰å…¨ä¿æŠ¤ç®¡ç†åŠæ³•ã€‹è§„å®šï¼Œç½‘ç«™åœ¨å·¥ä¿¡éƒ¨å¤‡æ¡ˆæˆåŠŸåï¼Œéœ€åœ¨ç½‘ç«™å¼€é€šä¹‹æ—¥èµ· 30 æ—¥å†…ç™»å½• å…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœåŠ¡å¹³å° æäº¤å…¬å®‰è”ç½‘å¤‡æ¡ˆç”³è¯·ã€‚å…¬å®‰è”ç½‘å¤‡æ¡ˆå®¡æ ¸é€šè¿‡åï¼Œéœ€è¦å¤åˆ¶ç½‘ç«™å…¬å®‰æœºå…³å¤‡æ¡ˆå·å’Œå¤‡æ¡ˆç¼–å· HTML ä»£ç ï¼Œä¸‹è½½å¤‡æ¡ˆç¼–å·å›¾æ ‡ï¼Œå¹¶ç¼–è¾‘ç½‘é¡µæºä»£ç å°†å…¬å®‰è”ç½‘å¤‡æ¡ˆä¿¡æ¯æ”¾ç½®åœ¨ç½‘é¡µåº•éƒ¨ã€‚</li>
<li>åŸŸåè§£æï¼šæŠŠåŸŸåæŒ‡å‘æˆ‘ä»¬æœåŠ¡å™¨å…¬ç½‘ IP çš„è¿‡ç¨‹ï¼Œç»è¿‡è¿™ä¸ªæ­¥éª¤ï¼Œå°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨äº†ã€‚</li>
<li>æœåŠ¡éƒ¨ç½²ï¼šåœ¨å®Œæˆä¸Šé¢æ­¥éª¤åï¼Œéœ€è¦æŠŠæœåŠ¡éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨çš„å¯¹åº”ç«¯å£ï¼Œå¹¶è§£æåˆ°åŸŸåä¸Šï¼Œç„¶åç”¨æˆ·å°±å¯ä»¥é€šè¿‡è®¿é—®æ³¨å†Œçš„åŸŸåè®¿é—®æœåŠ¡äº†ã€‚</li>
</ul>
<h3 id="æœåŠ¡éƒ¨ç½²">æœåŠ¡éƒ¨ç½²</h3>
<p>å¯¹äºæœåŠ¡éƒ¨ç½²ï¼Œæ¨èä½¿ç”¨ pm2 æ¥è¿›è¡Œéƒ¨ç½²ï¼Œå½“ç„¶ç›´æ¥ä½¿ç”¨ node ç„¶åæ‰§è¡Œ npm run start æ•ˆæœä¸Šä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>pm2 å…·å¤‡æ—¥å¿—ï¼Œé‡å¯ç­‰ä¸€å¥—å®Œæ•´èƒ½åŠ›ï¼Œå¯ä»¥æ›´å®¹æ˜“å®šä½ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥æ˜¯éƒ¨ç½² node æœåŠ¡çš„ä¸»æµå·¥å…·ï¼Œç°åœ¨åœ¨æœ¬åœ°ä»¥ç°åœ¨çš„é¡¹ç›®ç¤ºèŒƒä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œå®‰è£…ä¸€ä¸‹ pm2ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install pm2 -g
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…å®Œæˆååœ¨ç»ˆç«¯è¾“å…¥ pm2 è¯•è¯•ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_83.png" alt="" width="700" />   
<p>ç„¶ååˆ†åˆ«åˆ‡åˆ° client å’Œ server çš„ç›®å½•ä¸‹æ‰§è¡Œä¸€ä¸‹ npm run buildï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†æ„å»ºçº¿ä¸Šç¯å¢ƒå¯åŠ¨æ‰€éœ€è¦çš„äº§ç‰©ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_84.png" alt="" width="700" />   
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_85.png" alt="" width="700" />   
<p>å®‰è£…å®Œå°è¯•é‡æ–°æ„å»ºä¸€ä¸‹ï¼Œå¹¶ä¸”åœ¨å¯¹åº”ç›®å½•ä¸‹æ‰§è¡Œ npm run startï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œå°±å¯ä»¥å°è¯•ä½¿ç”¨ pm2 æ¥å¯åŠ¨æœåŠ¡äº†ã€‚</p>
<p>server:<br>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_89.png" alt="" width="700" /><br>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_86.png" alt="" width="700" /></p>
<p>client:<br>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_88.png" alt="" width="700" />
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_87.png" alt="" width="700" /></p>
<p>åœ¨è¿™ä¹‹å‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹åŸç†ï¼Œpm2 å¯ä»¥é€šè¿‡æ‰§è¡Œ pm2 start ${è„šæœ¬æ–‡ä»¶} &ndash;name ${æœåŠ¡å} çš„æ–¹å¼å¯åŠ¨ï¼Œä¸è¿‡è¦æ³¨æ„ï¼Œå› ä¸ºæ‰§è¡Œè·¯å¾„çš„ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ npm çš„ç»å¯¹è·¯å¾„æ‰§è¡Œç¡®ä¿æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>é¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤çœ‹ä¸€ä¸‹ npm çš„ç›®å½•ä½ç½®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">which npm
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_90.png" alt="" width="700" />   
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_91.png" alt="" width="700" />   
<p>ç„¶ååˆ‡åˆ°å¯¹åº”é¡¹ç›®ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª shell è„šæœ¬ï¼Œç„¶åå†™å…¥ ${npmç›®å½•} run start å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vi server.sh
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_92.png" alt="" width="700" />   
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_93.png" alt="" width="700" />   
<p>ç±»ä¼¼è¿™æ ·ï¼Œç„¶ååœ¨å¯¹åº” shell è„šæœ¬æ ¹ç›®å½•åˆ†åˆ«æ‰§è¡Œ pm2 start server.shï¼Œä¸ºäº†åŒºåˆ†è¿˜å¯ä»¥ç»™å®ƒä»¬åŠ ä¸Š &ndash;name åç§°çš„å‚æ•°ï¼Œæ‰§è¡Œå®Œä»¥åï¼Œå†æ‰§è¡Œ pm2 listï¼Œå¦‚æœçœ‹åˆ°æœåŠ¡ onlineï¼Œå°±å¯ä»¥äº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_94.png" alt="" width="700" />   
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_95.png" alt="" width="700" />   
<p>è¿™æ—¶å€™ç›´æ¥è®¿é—® http://127.0.0.1:3000ï¼Œä¹Ÿæ˜¯å¯ä»¥æ‰“å¼€å®˜ç½‘çš„ã€‚</p>
<p>å¦‚æœæƒ³è¦æœåŠ¡å™¨å¼€æœºçš„æ—¶å€™è‡ªå¯åŠ¨ï¼Œåªéœ€è¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä¿å­˜å½“å‰æœåŠ¡å¹¶ä¸”ç”Ÿæˆè‡ªå¯åŠ¨è„šæœ¬å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pm2 save
</span></span><span class="line"><span class="cl">pm2 startup
</span></span></code></pre></td></tr></table>
</div>
</div><p>è‡³äºå…³é—­å’Œé‡å¯æœåŠ¡ï¼Œä½¿ç”¨ stop å’Œ restart å³å¯ï¼Œç±»ä¼¼ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_97.png" alt="" width="700" />   
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯åŠ¨çš„è¿‡ç¨‹å¯èƒ½å¹¶ä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œå¯èƒ½ä¼šæœ‰ä¸€äº›æŠ¥é”™ï¼Œé‚£è¿™æ—¶å€™æœåŠ¡çš„ status å°±ä¼šæ˜¾ç¤º erroredï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡è¾“å‡ºæ—¥å¿—çš„æ–¹å¼æ¥æ’æŸ¥ï¼Œä»¥ server (client) çš„æœåŠ¡ä¸¾ä¾‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pm2 log server --lines <span class="m">50</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ—¥å¿—é»˜è®¤è¾“å‡ºæ˜¯ 15 è¡Œï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯ä¸å¤Ÿçš„ï¼Œå¯èƒ½é”™è¯¯æ ˆéƒ½ä¸è¶³å¤Ÿæ˜¾ç¤ºå®Œæˆï¼Œè¿™è¾¹åŠ ä¸Šè¡Œæ•°çš„å‚æ•°ï¼Œè°ƒæ•´ä¸º 50 è¡Œã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_98.png" alt="" width="700" />   
<p>å°±å¯ä»¥çœ‹åˆ°å’Œå¹³æ—¶å¼€å‘ä¸€æ ·çš„ç»ˆç«¯ç»“æœäº†ï¼Œè¿™æ—¶å€™å¦‚æœæœ‰ä¸€äº›æŠ¥é”™å¯ä»¥é€šè¿‡é”™è¯¯æ ˆçš„ä¿¡æ¯æ¥å¿«é€Ÿå®šä½ï¼Œå¹¶ä¸” pm2 æä¾›äº†æŒç»­ç›‘å¬çš„èƒ½åŠ›ï¼Œç±»ä¼¼å¹³æ—¶å¼€å‘ä¸­çš„çƒ­æ›´æ–°ï¼Œåªéœ€è¦åœ¨ start å‘½ä»¤ååŠ ä¸Š &ndash;watch çš„å‚æ•°å°±å¯ä»¥å¯åŠ¨ï¼Œè¿™æ ·å½“ä»£ç å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œéƒ¨ç½²ä¹Ÿä¼šåŒæ­¥è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>ä¸è¿‡è¿™æ—¶å€™è®¿é—®è¿˜æ˜¯ä½¿ç”¨ 3000 ç«¯å£ï¼Œè¿™æ ·æ˜¾å¾—å¥‡æ€ªï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨è®¿é—®ç™¾åº¦çš„æ—¶å€™ä¸å¯èƒ½è®¿é—® <a href="https://www.baidu.com" target="_blank" rel="noopener noreffer ">www.baidu.com</a>:3000å§ã€‚</p>
<p>é¦–å…ˆå®‰è£…ä¸€ä¸‹ nginxï¼ŒåŒæ ·å¯ä»¥é€šè¿‡ nginx -v çš„æ–¹å¼æ¥åˆ¤æ–­æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">brew install nginx
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åéœ€è¦ä¿®æ”¹ä¸€ä¸‹å¯¹åº”çš„é…ç½®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vi /usr/local/etc/nginx/nginx.conf
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_99.png" alt="" width="700" />   
<p>æ”¹è¿™ä¸¤ä¸ªéƒ¨åˆ†å°±å¥½ï¼Œlisten æ˜¯ç›‘å¬çš„ç«¯å£å·ï¼Œproxy_pass æ˜¯å¸Œæœ›è½¬å‘çš„ç›®æ ‡æœåŠ¡ï¼Œè¿™æ ·å°±ä¼šå°† 80 ç«¯å£çš„æœåŠ¡éƒ½è½¬å‘åˆ° 3000 ç«¯å£ä¸Šï¼Œç”¨æˆ·å°±å¯ä»¥ç›´æ¥é€šè¿‡åŸŸåè¿›è¡Œè®¿é—®äº†ã€‚</p>
<p>ä¿®æ”¹å®Œæˆåï¼Œæ‰§è¡Œä¸€ä¸‹ nginxï¼Œæ²¡æœ‰æŠ¥é”™çš„è¯å°±å·²ç»å¯åŠ¨äº†ã€‚</p>
<p>å°è¯•ä¸€ä¸‹ç›´æ¥è®¿é—® http://127.0.0.1/ ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¯ä»¥äº†ï¼Œåˆ°è¿™é‡ŒæœåŠ¡éƒ¨ç½²çš„éƒ¨åˆ†å°±å…¨éƒ¨å®Œæˆäº†ã€‚</p>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_100.png" alt="" width="700" />   
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ssr/img_101.jpg" alt="" width="400" /></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2023-03-16&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/3cdcd1134458a3aee56c0ebb827558b9e495b21f" target="_blank" title="commit by OweQian(1510106069@qq.com) 3cdcd1134458a3aee56c0ebb827558b9e495b21f: feat: update">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>3cdcd11</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/ssr/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E7%AC%AC%E4%B8%80%E6%8A%80%E8%83%BD/">ç¬¬ä¸€æŠ€èƒ½</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/draw/" class="prev" rel="prev" title="âœ æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>âœ æ²¹ç”»æ£’ç”»æˆé•¿ä¹‹æ—…</a>
            <a href="/souldance/" class="next" rel="next" title="ğŸ¶ ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ">ğŸ¶ ä½ éœ€è¦ä¸€é¦– BGMï¼Œæ¥æ’‘èµ·ä½ çš„å†…å¿ƒæˆ<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.109.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">OweQian</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":50},"comment":{"giscus":{"category":"General","categoryId":"DIC_kwDOIjhAhM4CTN5c","darkTheme":"dark","emitMetadata":"0","inputPosition":"top","lang":"zh-CN","lazyLoading":false,"lightTheme":"dark","mapping":"pathname","reactionsEnabled":"1","repo":"OweQian/oweqian.github.io","repoId":"R_kgDOIjhAhA"}},"search":{"algoliaAppID":null,"algoliaIndex":null,"algoliaSearchKey":null,"highlightTag":"em","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-GT3XCV7DP0', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-GT3XCV7DP0" async></script></body>
</html>
