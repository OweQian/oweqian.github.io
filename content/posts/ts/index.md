---
title: "â€ğŸ’» Typescript ä½¿ç”¨æ‰‹å†Œ"
date: 2023-03-28T10:20:47+08:00
weight: 3
tags: ["ç¬¬ä¸€æŠ€èƒ½"]
categories: ["ç¬¬ä¸€æŠ€èƒ½"]
---

é¡¹ç›®åœ°å€ï¼š [TSHandbook](https://github.com/OweQian/TSHandbook.git)  

<!--more-->

## ç±»å‹ä¸–ç•Œ

### åŸå§‹ç±»å‹ 

number / string / boolean / null / undefined / symbol / bigint 

```ts
const name: string = 'wangxiaobia';
const age: number = 18;
const male: boolean = false;
const undef: undefined = undefined;
const nul: null = null;
const bigIntVar1: bigint = 9007199254740991n;
const symbolVar: symbol = Symbol('unique');
```

#### null å’Œ undefined  

null ä¸ undefined éƒ½æ˜¯æœ‰å…·ä½“æ„ä¹‰çš„ç±»å‹ã€‚åœ¨æ²¡æœ‰å¼€å¯ strictNullChecks æ£€æŸ¥çš„æƒ…å†µä¸‹ï¼Œä¼šè¢«è§†ä½œå…¶ä»–ç±»å‹çš„å­ç±»å‹ï¼Œæ¯”å¦‚ string ç±»å‹ä¼šè¢«è®¤ä¸ºåŒ…å«äº† null ä¸ undefined ç±»å‹ï¼š  

```ts
const temp1: null = null;
const temp2: undefined = undefined;
const temp3: string = null;
const temp4: string = undefined;
```

#### void 

æè¿°ä¸€ä¸ªå†…éƒ¨æ²¡æœ‰ returnï¼Œæˆ–æ²¡æœ‰æ˜¾ç¤º return ä¸€ä¸ªå€¼çš„å‡½æ•°çš„è¿”å›å€¼ã€‚  

```ts
function func1 () {};
function func2 () { return };
function func3 () {
  return undefined;
}
```

func1 ä¸ func2 çš„è¿”å›å€¼ç±»å‹ä¼šè¢«éšå¼æ¨å¯¼ä¸º voidï¼Œæ˜¾å¼è¿”å›äº† undefined å€¼çš„ func3 å…¶è¿”å›å€¼ç±»å‹è¢«æ¨å¯¼ä¸ºäº† undefinedã€‚ä½†åœ¨å®é™…çš„ä»£ç æ‰§è¡Œä¸­ï¼Œfunc1 ä¸ func2 çš„è¿”å›å€¼å‡æ˜¯ undefinedã€‚  

è™½ç„¶ func3 çš„è¿”å›å€¼ç±»å‹ä¼šè¢«æ¨å¯¼ä¸º undefinedï¼Œä½†ä»å¯ä»¥ä½¿ç”¨ void ç±»å‹è¿›è¡Œæ ‡æ³¨ï¼Œå› ä¸ºåœ¨ç±»å‹å±‚é¢ func1ã€func2ã€func3 éƒ½è¡¨ç¤ºâ€œæ²¡æœ‰è¿”å›ä¸€ä¸ªæœ‰æ„ä¹‰çš„å€¼â€ã€‚  

void è¡¨ç¤ºä¸€ä¸ªç©ºç±»å‹ï¼Œè€Œ null ä¸ undefined éƒ½æ˜¯ä¸€ä¸ªå…·æœ‰æ„ä¹‰çš„å®é™…ç±»å‹ã€‚è€Œ undefinedï¼ˆnullï¼‰ èƒ½å¤Ÿè¢«èµ‹å€¼ç»™ void ç±»å‹çš„å˜é‡ï¼Œä½†éœ€è¦åœ¨å…³é—­ strictNullChecks é…ç½®çš„æƒ…å†µä¸‹æ‰èƒ½æˆç«‹ã€‚   

```ts
const voidVar1: void = null;
const voidVar2: void = undefined;
```

### æ•°ç»„ç±»å‹ 

æœ‰ä¸¤ç§æ–¹å¼æ¥å£°æ˜ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼š  

```ts
const arr1: string[] = [];
const arr2: Array<string> = [];
```

è¿™ä¸¤ç§æ–¹å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œæ›´å¤šçš„ä»¥å‰è€…ä¸ºä¸»ã€‚   

### å…ƒç»„ç±»å‹

ç”¨æ¥ä»£æ›¿æ•°ç»„ï¼Œå·²çŸ¥æ•°ç»„é•¿åº¦å’Œæˆå‘˜ç±»å‹ï¼Œåœ¨è¶Šç•Œè®¿é—®æ—¶ï¼ˆæ•°ç»„ä¸ä¼šç»™å‡ºï¼‰å¯ä»¥ç»™å‡ºç±»å‹æŠ¥é”™ã€‚  

```ts
const arr3: [string, string, string] = ['wang', 'xiao', 'bai'];
arr3[18]; 
```

æ­¤æ—¶å°†ä¼šäº§ç”Ÿä¸€ä¸ªç±»å‹é”™è¯¯ï¼šé•¿åº¦ä¸ºâ€œ3â€çš„å…ƒç»„ç±»å‹â€œ[string, string, string]â€åœ¨ç´¢å¼•â€œ18â€œå¤„æ²¡æœ‰å…ƒç´ ã€‚  

å…ƒç»„å†…éƒ¨ä¹Ÿå¯ä»¥å£°æ˜å¤šä¸ªä¸å…¶ä½ç½®å¼ºç»‘å®šçš„ï¼Œä¸åŒç±»å‹çš„å…ƒç´ ï¼š  

```ts
const arr4: [string, number, boolean] = ['wang', 18, true];
```

æ”¯æŒåœ¨æŸä¸€ä¸ªä½ç½®ä¸Šçš„å¯é€‰æˆå‘˜ï¼š  

```ts
const arr5: [string, number?, boolean?] = ['wang'];
```

TypeScript 4.0 ä¸­çš„å…·åå…ƒç»„ï¼ˆLabeled Tuple Elementsï¼‰ï¼Œæ”¯æŒä¸ºå…ƒç»„ä¸­çš„å…ƒç´ æ‰“ä¸Šç±»ä¼¼å±æ€§çš„æ ‡è®°ï¼š  

```ts
const arr6: [name: string, age: number, male: boolean] = ['wang', 18, false];
```

å…·åå…ƒç»„ä¹Ÿæ”¯æŒå¯é€‰å…ƒç´ çš„ä¿®é¥°ç¬¦ï¼š  

```ts
const arr7: [name: string, age?: number, male?: boolean] = ['wang'];
```

### å¯¹è±¡ç±»å‹

interface æ¥æè¿°å¯¹è±¡ç±»å‹ï¼Œå®ƒä»£è¡¨äº†è¿™ä¸ªå¯¹è±¡å¯¹å¤–æä¾›çš„æ¥å£ç»“æ„ã€‚   

```ts
interface IDescription {
  name: string;
  age: number;
  male: boolean;
}

const obj1: IDescription = {
  name: 'wangxiaobai',
  age: 18,
  male: false,
}
```

æ¯ä¸€ä¸ªå±æ€§çš„å€¼å¿…é¡»ä¸€ä¸€å¯¹åº”åˆ°æ¥å£çš„å±æ€§ç±»å‹ï¼Œä¸èƒ½æœ‰å¤šçš„å±æ€§ï¼Œä¹Ÿä¸èƒ½æœ‰å°‘çš„å±æ€§ã€‚  

#### ä¿®é¥°æ¥å£å±æ€§  

åœ¨æ¥å£ä¸­ç”¨ ? æ¥æ ‡è®°ä¸€ä¸ªå±æ€§ä¸ºå¯é€‰ï¼š  

```ts
interface IDescription {
  name: string;
  age: number;
  male?: boolean;
  func?: Function;
}

const obj2: IDescription = {
  name: 'wangxiaobai',
  age: 18,
}
```

å®šä¹‰ä¸€ä¸ªå¯é€‰çš„å¸ƒå°”ç±»å‹å±æ€§ï¼Œå½“ä½ è®¿é—® obj2.male æ—¶ï¼Œå®ƒçš„ç±»å‹æ˜¯ boolean | undefinedã€‚  

å®šä¹‰ä¸€ä¸ªå¯é€‰çš„å‡½æ•°ç±»å‹å±æ€§ï¼Œè¿›è¡Œè°ƒç”¨ï¼šobj2.func() ï¼Œæ­¤æ—¶å°†ä¼šäº§ç”Ÿä¸€ä¸ªç±»å‹æŠ¥é”™ï¼šä¸èƒ½è°ƒç”¨å¯èƒ½æ˜¯æœªå®šä¹‰çš„æ–¹æ³•ã€‚  

å¯é€‰å±æ€§æ ‡è®°ä¸ä¼šå½±å“ä½ å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œèµ‹å€¼ã€‚   

```ts
obj2.male = false;
obj2.func = () => {};
```

åœ¨æ¥å£ä¸­ç”¨ readonly æ¥æ ‡è®°ä¸€ä¸ªå±æ€§ä¸ºåªè¯»ï¼Œé˜²æ­¢å±æ€§è¢«å†æ¬¡èµ‹å€¼ã€‚  

```ts
interface IDescriptionProps {
  readonly name: string;
  age: number;
}

const obj3: IDescriptionProps = {
  name: 'wangxiaobai',
  age: 18,
};

obj3.name = 'OweQian';
```

æ­¤æ—¶ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ— æ³•åˆ†é…åˆ° "name" ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§ã€‚   

ps: åœ¨æ•°ç»„å’Œå…ƒç»„å±‚é¢ä¹Ÿå­˜åœ¨ç€åªè¯»çš„ä¿®é¥°ã€‚  

* åªèƒ½å°†æ•´ä¸ªæ•°ç»„/å…ƒç»„æ ‡è®°ä¸ºåªè¯»ï¼Œè€Œä¸èƒ½åƒå¯¹è±¡é‚£æ ·æ ‡è®°æŸä¸ªå±æ€§ä¸ºåªè¯»ã€‚  
* ä¸€æ—¦è¢«æ ‡è®°ä¸ºåªè¯»ï¼Œé‚£è¿™ä¸ªåªè¯»æ•°ç»„/å…ƒç»„çš„ç±»å‹ä¸Šï¼Œå°†ä¸å†å…·æœ‰ pushã€pop ç­‰æ–¹æ³•ã€‚  

#### objectã€Objectã€{} 

åœ¨ TS ä¸­ï¼ŒObject åŒ…å«äº†æ‰€æœ‰çš„ç±»å‹:  

```ts
const temp1: Object = undefined;
const temp2: Object = null;
const temp3: Object = void 0;
const temp4: Object = 'wangxiaobai';
const temp5: Object = 18;
const temp6: Object = () => {};
const temp7: Object = { name: 'wangxiaobai' };
const temp8: Object = [];
```

å¯¹äº undefinedã€nullã€void 0 ï¼Œéœ€è¦å…³é—­ strictNullChecksã€‚  

å’Œ Object ç±»ä¼¼çš„è¿˜æœ‰ Booleanã€Numberã€Stringã€Symbolï¼Œè¿™å‡ ä¸ªè£…ç®±ç±»å‹ï¼ˆBoxed Typesï¼‰ï¼ŒåŒæ ·åŒ…å«äº†ä¸€äº›è¶…å‡ºé¢„æœŸçš„ç±»å‹ã€‚  

ä»¥ String ä¸ºä¾‹ï¼Œå®ƒåŒæ ·åŒ…æ‹¬ undefinedã€nullã€voidï¼Œä»¥åŠä»£è¡¨çš„æ‹†ç®±ç±»å‹ï¼ˆUnboxed Typesï¼‰stringï¼Œä½†å¹¶ä¸åŒ…æ‹¬å…¶ä»–è£…ç®±ç±»å‹å¯¹åº”çš„æ‹†ç®±ç±»å‹ï¼Œå¦‚ boolean ä¸åŸºæœ¬å¯¹è±¡ç±»å‹ã€‚  

```ts
const temp9: String = undefined;
const temp10: String = null;
const temp11: String = void 0;
const temp12: String = 'wangxiaobai';

// ä»¥ä¸‹ä¸æˆç«‹ï¼Œå› ä¸ºä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„æ‹†ç®±ç±»å‹
const temp13: String = 18; // X
const temp14: String = { name: 'wangxiaobai' }; // X
const temp15: String = () => {}; // X
const temp16: String = []; // X
```

ä»»ä½•æƒ…å†µä¸‹ï¼Œä½ éƒ½ä¸åº”è¯¥ä½¿ç”¨è¿™äº›è£…ç®±ç±»å‹ã€‚  

object ç±»å‹çš„å¼•å…¥å°±æ˜¯ä¸ºäº†è§£å†³ Object ç±»å‹çš„é”™è¯¯ä½¿ç”¨ï¼Œå®ƒä»£è¡¨æ‰€æœ‰éåŸå§‹ç±»å‹çš„ç±»å‹ï¼Œå³æ•°ç»„ã€å‡½æ•°ã€å¯¹è±¡ç±»å‹ã€‚  

```ts
const temp17: object = undefined;
const temp18: object = null;
const temp19: object = void 0;

const temp20: object = 'wangxiaobai'; // X
const temp21: object = 18; // X

const temp22: object = { name: 'wangxiaobai' };
const temp23: object = () => {};
const temp24: object = [];
```

{} æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ç±»å‹ï¼Œå®ƒä»£è¡¨å†…éƒ¨æ— å±æ€§å®šä¹‰çš„ç©ºå¯¹è±¡ï¼Œè¿™ç±»ä¼¼äº Objectã€‚  

```ts
const temp25: {} = undefined;
const temp26: {} = null;
const temp27: {} = void 0;
const temp28: {} = 'wangxiaobai';
const temp29: {} = 18;
const temp30: {} = () => {};
const temp31: {} = { name: 'wangxiaobai' };
const temp32: {} = [];
```

æ— æ³•å¯¹å˜é‡è¿›è¡Œä»»ä½•èµ‹å€¼æ“ä½œã€‚  

```ts
temp31.age = 18; // X ç±»å‹â€œ{}â€ä¸Šä¸å­˜åœ¨å±æ€§â€œageâ€
```

æ€»ç»“ï¼š  

* åœ¨ä»»ä½•æ—¶å€™éƒ½ä¸è¦ä½¿ç”¨ Object ä»¥åŠç±»ä¼¼çš„è£…ç®±ç±»å‹ã€‚   
* å½“ä½ ä¸ç¡®å®šæŸä¸ªå˜é‡çš„å…·ä½“ç±»å‹ï¼Œä½†èƒ½ç¡®å®šä¸æ˜¯åŸå§‹ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ objectã€‚  
* å¯ä»¥ä½¿ç”¨ Record<string, unknown> æˆ– Record<string, any> è¡¨ç¤ºå¯¹è±¡ã€‚  
* å¯ä»¥ä½¿ç”¨ any[] æˆ– unknown[] è¡¨ç¤ºæ•°ç»„ã€‚  
* å¯ä»¥ä½¿ç”¨ (...args: any[]) => any è¡¨ç¤ºå‡½æ•°ã€‚  
* é¿å…ä½¿ç”¨ {}ã€‚  

### å­—é¢é‡ç±»å‹ä¸è”åˆç±»å‹

å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå®ƒæè¿°äº†å“åº”çš„æ¶ˆæ¯ç»“æ„ï¼š   

```ts
interface IResponseProps {
  code: number;
  status: string;
  data: any;
}
```

è¿™é‡Œçš„ code ä¸ status å®é™…å€¼ä¼šæ¥è‡ªäºä¸€ç»„ç¡®å®šå€¼çš„é›†åˆï¼Œæ¯”å¦‚ code å¯èƒ½æ˜¯ 10000 / 10001 / 50000ï¼Œstatus å¯èƒ½æ˜¯ "success" / "failure"ã€‚   

ä¸Šé¢çš„ç±»å‹åªç»™å‡ºäº†ä¸€ä¸ªå®½æ³›çš„ number / stringï¼Œæ—¢ä¸èƒ½åœ¨è®¿é—® code æ—¶è·å¾—ç²¾ç¡®çš„æç¤ºï¼Œä¹Ÿå¤±å»äº† TypeScript ç±»å‹å³æ–‡æ¡£çš„åŠŸèƒ½ã€‚  

å¯ä»¥ä½¿ç”¨å­—é¢é‡ç±»å‹åŠ ä¸Šè”åˆç±»å‹è¿›è¡Œæ”¹å†™ï¼š  

```ts
interface IResponseProps {
  code: 10000 | 10001 | 50000;
  status: 'success' | 'failure';
  data: any;
}
```

è¿™æ—¶å°±èƒ½åœ¨è®¿é—®æ—¶è·å¾—ç²¾ç¡®åœ°ç±»å‹æ¨å¯¼äº†ã€‚  

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_01.png" alt="" width="700" />  

å¯¹äº declare var res: Resï¼Œå®ƒæ˜¯å¿«é€Ÿç”Ÿæˆä¸€ä¸ªç¬¦åˆæŒ‡å®šç±»å‹ï¼Œä½†æ²¡æœ‰å®é™…å€¼çš„å˜é‡ï¼ŒåŒæ—¶å®ƒä¹Ÿä¸å­˜åœ¨äºè¿è¡Œæ—¶ä¸­ã€‚   

#### å­—é¢é‡ç±»å‹

"success" ä¸æ˜¯ä¸€ä¸ªå€¼å—ï¼Ÿä¸ºä»€ä¹ˆå®ƒå¯ä»¥ä½œä¸ºç±»å‹ï¼Ÿåœ¨ TypeScript ä¸­ï¼Œè¿™å«åšå­—é¢é‡ç±»å‹ï¼ˆLiteral Typesï¼‰ï¼Œå®ƒä»£è¡¨ç€æ¯”åŸå§‹ç±»å‹æ›´ç²¾ç¡®çš„ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŸå§‹ç±»å‹çš„å­ç±»å‹ã€‚  

å­—é¢é‡ç±»å‹ä¸»è¦åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹å’Œå¯¹è±¡å­—é¢é‡ç±»å‹ã€‚   

```ts
const name: 'wangxiaobai' = 'wangxiaobai';
const age: 18 = 18;
const male: false = false;
```

ä¸ºä»€ä¹ˆè¯´å­—é¢é‡ç±»å‹æ¯”åŸå§‹ç±»å‹æ›´ç²¾ç¡®ï¼Ÿ  

```ts
// æŠ¥é”™ï¼ä¸èƒ½å°†ç±»å‹â€œ"wangxiaobai18"â€åˆ†é…ç»™ç±»å‹â€œ"wangxiaobai"â€ã€‚
const str1: 'wangxiaobai' = 'wangxiaobai18';
const str2: string = 'wangxiaobai';
const str3: string = 'wangxiaobai3';
```

åŸå§‹ç±»å‹çš„å€¼å¯ä»¥åŒ…æ‹¬ä»»æ„çš„åŒç±»å‹å€¼ï¼Œè€Œå­—é¢é‡ç±»å‹è¦æ±‚çš„æ˜¯å€¼çº§åˆ«çš„å­—é¢é‡ä¸€è‡´ã€‚  

å•ç‹¬ä½¿ç”¨å­—é¢é‡ç±»å‹æ¯”è¾ƒå°‘è§ï¼Œå› ä¸ºå•ä¸ªå­—é¢é‡ç±»å‹å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ã€‚å®ƒé€šå¸¸å’Œè”åˆç±»å‹ï¼ˆå³è¿™é‡Œçš„ |ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œè¡¨è¾¾ä¸€ç»„å­—é¢é‡ç±»å‹ï¼š   

```ts
interface ITempProps {
  bool: true | false;
  num: 1 | 2 | 3;
  str: 'wang' | 'xiao' | 'bai'
}
```

#### è”åˆç±»å‹

å®ƒä»£è¡¨äº†ä¸€ç»„ç±»å‹çš„å¯ç”¨é›†åˆï¼Œåªè¦æœ€ç»ˆèµ‹å€¼çš„ç±»å‹å±äºè”åˆç±»å‹çš„æˆå‘˜ä¹‹ä¸€ï¼Œå°±å¯ä»¥è®¤ä¸ºç¬¦åˆè¿™ä¸ªè”åˆç±»å‹ã€‚  

è”åˆç±»å‹å¯¹å…¶æˆå‘˜å¹¶æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œé™¤äº†ä¸Šé¢è¿™æ ·å¯¹åŒä¸€ç±»å‹å­—é¢é‡çš„è”åˆï¼Œè¿˜å¯ä»¥å°†å„ç§ç±»å‹æ··åˆåˆ°ä¸€èµ·ã€‚   

```ts
interface ITempMixedProps {
  mixed: true | string | 18 | {} | (() => {}) | (1 | 2)
}
```

è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š  

* è”åˆç±»å‹ä¸­çš„å‡½æ•°ç±»å‹éœ€è¦ä½¿ç”¨æ‹¬å· () åŒ…è£¹èµ·æ¥  
* å‡½æ•°ç±»å‹å¹¶ä¸å­˜åœ¨å­—é¢é‡ç±»å‹ï¼Œå› æ­¤è¿™é‡Œçš„ (() => {}) å°±æ˜¯ä¸€ä¸ªåˆæ³•çš„å‡½æ•°ç±»å‹  
* å¯ä»¥åœ¨è”åˆç±»å‹ä¸­è¿›ä¸€æ­¥åµŒå¥—è”åˆç±»å‹ï¼Œä½†è¿™äº›åµŒå¥—çš„è”åˆç±»å‹æœ€ç»ˆéƒ½ä¼šè¢«å±•å¹³åˆ°ç¬¬ä¸€çº§ä¸­  

å¸¸ç”¨åœºæ™¯ä¹‹ä¸€æ˜¯é€šè¿‡å¤šä¸ªå¯¹è±¡ç±»å‹çš„è”åˆï¼Œæ¥å®ç°æ‰‹åŠ¨çš„äº’æ–¥å±æ€§ï¼Œå³è¿™ä¸€å±æ€§å¦‚æœæœ‰å­—æ®µ 1ï¼Œé‚£å°±æ²¡æœ‰å­—æ®µ 2ã€‚  

```ts
interface ITempProps {
  user:
    | {
    vip: true;
    expires: string;
  }
  | {
    vip: false;
    promotion: string;
  }
}

declare var temp: ITempProps;

if (temp.user.vip) {
  console.log(temp.user.expires);
}
```

user å±æ€§ä¼šæ»¡è¶³æ™®é€šç”¨æˆ·ä¸ VIP ç”¨æˆ·ä¸¤ç§ç±»å‹ï¼Œè¿™é‡Œ vip å±æ€§çš„ç±»å‹åŸºäºå¸ƒå°”å­—é¢é‡ç±»å‹å£°æ˜ã€‚  

åœ¨å®é™…ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡åˆ¤æ–­æ­¤å±æ€§ä¸º trueï¼Œç¡®ä¿æ¥ä¸‹æ¥çš„ç±»å‹æ¨å¯¼éƒ½ä¼šå°†å…¶ç±»å‹æ”¶çª„åˆ° VIP ç”¨æˆ·çš„ç±»å‹ï¼ˆå³è”åˆç±»å‹çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼‰ã€‚  

å¯ä»¥é€šè¿‡ç±»å‹åˆ«åæ¥å¤ç”¨ä¸€ç»„å­—é¢é‡è”åˆç±»å‹ï¼š  

```ts
type Code = 10000 | 10001 | 50000;
type Status = 'success' | 'failure';
```

é™¤äº†åŸå§‹ç±»å‹çš„å­—é¢é‡ç±»å‹ä»¥å¤–ï¼Œå¯¹è±¡ç±»å‹ä¹Ÿæœ‰ç€å¯¹åº”çš„å­—é¢é‡ç±»å‹ã€‚  

#### å¯¹è±¡å­—é¢é‡ç±»å‹

å¯¹è±¡å­—é¢é‡ç±»å‹å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å€¼ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªå¯¹è±¡çš„å€¼å…¨éƒ½ä¸ºå­—é¢é‡å€¼ã€‚  

```ts
interface ITempProps {
  obj: {
    name: 'wangxiaobai';
    age: 18
  }
}

const temp: ITempProps = {
  obj: {
    name: 'wangxiaobai',
    age: 18
  }
}
```

å¦‚æœè¦å®ç°ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ç±»å‹ï¼Œæ„å‘³ç€å®Œå…¨çš„å®ç°è¿™ä¸ªç±»å‹æ¯ä¸€ä¸ªå±æ€§çš„æ¯ä¸€ä¸ªå€¼ã€‚  

æ— è®ºæ˜¯åŸå§‹ç±»å‹è¿˜æ˜¯å¯¹è±¡ç±»å‹çš„å­—é¢é‡ç±»å‹ï¼Œå®ƒä»¬çš„æœ¬è´¨éƒ½æ˜¯ç±»å‹è€Œä¸æ˜¯å€¼ã€‚åœ¨ç¼–è¯‘æ—¶åŒæ ·ä¼šè¢«æ“¦é™¤ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¢«å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ç±»å‹ç©ºé—´è€Œéå€¼ç©ºé—´ã€‚

### æšä¸¾ç±»å‹

```ts
enum PageUrl {
  Home_Page_Url = 'home',
  Setting_Page_Url = 'setting',
  Share_Page_Url = 'share',
}

const home = PageUrl.Home_Page_Url;
```

ä½¿ç”¨æšä¸¾æ‹¥æœ‰äº†æ›´å¥½çš„ç±»å‹æç¤ºï¼Œå¹¶ä¸”è¿™äº›å¸¸é‡è¢«çœŸæ­£åœ°çº¦æŸåœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸‹ã€‚  

å¦‚æœæ²¡æœ‰å£°æ˜æšä¸¾çš„å€¼ï¼Œå®ƒä¼šé»˜è®¤ä½¿ç”¨æ•°å­—æšä¸¾ï¼Œå¹¶ä¸”ä» 0 å¼€å§‹ï¼Œä»¥ 1 é€’å¢ã€‚  

```ts
enum Items {
  Foo,
  Bar,
  Baz,
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒItems.Fooã€Items.Barã€Items.Baz çš„å€¼ä¾æ¬¡æ˜¯ 0ã€1ã€2ã€‚

å¦‚æœåªä¸ºæŸä¸€ä¸ªæˆå‘˜æŒ‡å®šäº†æšä¸¾å€¼ï¼Œé‚£ä¹ˆä¹‹å‰æœªèµ‹å€¼æˆå‘˜ä»ç„¶ä¼šä½¿ç”¨ä» 0 é€’å¢çš„æ–¹å¼ï¼Œä¹‹åçš„æˆå‘˜åˆ™ä¼šå¼€å§‹ä»æšä¸¾å€¼é€’å¢ã€‚  

```ts
enum Items {
  // 0
  Foo,
  Bar = 18,
  // 19
  Baz,
}
```

åœ¨æ•°å­—å‹æšä¸¾ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å»¶è¿Ÿæ±‚å€¼çš„æšä¸¾å€¼ï¼Œæ¯”å¦‚å‡½æ•°ã€‚  

```ts
const returnNum = () => 100 + 18;
enum Items {
  Foo = returnNum(),
  Bar = 18,
  Baz,
}
```

ä½†è¦æ³¨æ„ï¼Œå»¶è¿Ÿæ±‚å€¼çš„æšä¸¾å€¼æ˜¯æœ‰æ¡ä»¶çš„ã€‚å¦‚æœä½¿ç”¨äº†å»¶è¿Ÿæ±‚å€¼ï¼Œé‚£ä¹ˆæ²¡æœ‰ä½¿ç”¨å»¶è¿Ÿæ±‚å€¼çš„æšä¸¾æˆå‘˜å¿…é¡»æ”¾åœ¨ä½¿ç”¨å¸¸é‡æšä¸¾å€¼å£°æ˜çš„æˆå‘˜ä¹‹åï¼Œæˆ–è€…æ”¾åœ¨ç¬¬ä¸€ä½ã€‚   

```ts
enum Items {
  Baz,
  Foo = returnNum(),
  Bar = 18,
}
```

ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨å­—ç¬¦ä¸²æšä¸¾å€¼å’Œæ•°å­—æšä¸¾å€¼ã€‚   

```ts
enum Mixed {
  Num = 18,
  Str = 'wangxiaobai'
}
```

æšä¸¾å’Œå¯¹è±¡çš„é‡è¦å·®å¼‚åœ¨äºï¼Œå¯¹è±¡æ˜¯å•å‘æ˜ å°„çš„ï¼Œåªèƒ½ä»é”®æ˜ å°„åˆ°é”®å€¼ã€‚è€Œæšä¸¾æ˜¯åŒå‘æ˜ å°„çš„ï¼Œå¯ä»¥ä»æšä¸¾æˆå‘˜æ˜ å°„åˆ°æšä¸¾å€¼ï¼Œä¹Ÿå¯ä»¥ä»æšä¸¾å€¼æ˜ å°„åˆ°æšä¸¾æˆå‘˜ã€‚    

```ts
enum Items {
  Foo,
  Bar,
  Baz,
}

const fooValue = Items.Foo; // 0
const fooKey = Items[0]; // 'Foo'
```

è¦äº†è§£è¿™ä¸€ç°è±¡çš„æœ¬è´¨ï¼Œéœ€è¦æ¥çœ‹ä¸€çœ‹æšä¸¾çš„ç¼–è¯‘äº§ç‰©ï¼Œå¦‚ä»¥ä¸Šçš„æšä¸¾ä¼šè¢«ç¼–è¯‘ä¸ºä»¥ä¸‹ JavaScript ä»£ç ï¼š   

```javascript
"use strict";
var Items;
(function (Items) {
  Items[Items["Foo"] = 0] = "Foo";
  Items[Items["Bar"] = 1] = "Bar";
  Items[Items["Baz"] = 2] = "Baz";
})(Items || (Items = {}));
```

obj[k] = v çš„è¿”å›å€¼å³æ˜¯ vï¼Œå› æ­¤è¿™é‡Œçš„ obj[obj[k] = v] = k æœ¬è´¨ä¸Šå°±æ˜¯è¿›è¡Œäº† obj[k] = v ä¸ obj[v] = k è¿™æ ·ä¸¤æ¬¡èµ‹å€¼ã€‚  

ä»…æœ‰å€¼ä¸ºæ•°å­—çš„æšä¸¾æˆå‘˜æ‰èƒ½å¤Ÿè¿›è¡Œè¿™æ ·çš„åŒå‘æšä¸¾ï¼Œå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ä»ç„¶åªä¼šè¿›è¡Œå•æ¬¡æ˜ å°„ï¼š  

```ts
enum Items {
  Foo,
  Bar = 'BarValue',
  Baz = 'BazValue'
}
```

```javascript
// ç¼–è¯‘ç»“æœï¼Œåªä¼šè¿›è¡Œ é”®-å€¼ çš„å•å‘æ˜ å°„
"use strict";
var Items;
(function (Items) {
  Items[Items["Foo"] = 0] = "Foo";
  Items["Bar"] = "BarValue";
  Items["Baz"] = "BazValue";
})(Items || (Items = {}));
```

#### å¸¸é‡æšä¸¾

å¸¸é‡æšä¸¾å’Œæšä¸¾ç›¸ä¼¼ï¼Œåªæ˜¯å…¶å£°æ˜å¤šäº†ä¸€ä¸ª constã€‚   

```ts
const enum Items {
  Foo,
  Bar,
  Baz,
}

const fooValue = Items.Foo;
```

å®ƒå’Œæ™®é€šæšä¸¾çš„å·®å¼‚ä¸»è¦åœ¨è®¿é—®æ€§ä¸ç¼–è¯‘äº§ç‰©ã€‚å¯¹äºå¸¸é‡æšä¸¾ï¼Œåªèƒ½é€šè¿‡æšä¸¾æˆå‘˜è®¿é—®æšä¸¾å€¼ï¼ˆè€Œä¸èƒ½é€šè¿‡å€¼è®¿é—®æˆå‘˜ï¼‰ã€‚åŒæ—¶ï¼Œåœ¨ç¼–è¯‘äº§ç‰©ä¸­å¹¶ä¸ä¼šå­˜åœ¨ä¸€ä¸ªé¢å¤–çš„è¾…åŠ©å¯¹è±¡ï¼ˆå¦‚ä¸Šé¢çš„ Items å¯¹è±¡ï¼‰ï¼Œå¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ä¼šè¢«ç›´æ¥å†…è”æ›¿æ¢ä¸ºæšä¸¾çš„å€¼ã€‚   

ä»¥ä¸Šçš„ä»£ç ä¼šè¢«ç¼–è¯‘ä¸ºå¦‚ä¸‹å½¢å¼ï¼š

```javascript
const fooValue = 0 /* Foo */; // 0
```

### å‡½æ•°ç±»å‹

#### ç±»å‹ç­¾å

å‡½æ•°ç±»å‹æ˜¯ä¸ºäº†æè¿°äº†å‡½æ•°å…¥å‚ç±»å‹ä¸å‡½æ•°è¿”å›å€¼ç±»å‹ï¼Œå®ƒä»¬åŒæ ·ä½¿ç”¨ : çš„è¯­æ³•è¿›è¡Œç±»å‹æ ‡æ³¨ã€‚   

```ts
function foo(name: string): number {
return name.length;
}
```

åœ¨å‡½æ•°ç±»å‹ä¸­åŒæ ·å­˜åœ¨ç±»å‹æ¨å¯¼ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥ä¸å†™è¿”å›å€¼å¤„çš„ç±»å‹ï¼Œå®ƒä¹Ÿèƒ½è¢«æ­£ç¡®æ¨å¯¼ä¸º number ç±»å‹ã€‚    

function name () {} è¿™ä¸€å£°æ˜å‡½æ•°çš„æ–¹å¼ä¸ºå‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰ã€‚é™¤äº†å‡½æ•°å£°æ˜ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰ï¼Œå³ const foo = function(){} çš„å½¢å¼å£°æ˜ä¸€ä¸ªå‡½æ•°ã€‚      

åœ¨è¡¨è¾¾å¼ä¸­è¿›è¡Œç±»å‹å£°æ˜çš„æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š   

```ts
const foo = function (name: string): number {
return name.length
}
```

è¿˜å¯ä»¥åƒå¯¹å˜é‡è¿›è¡Œç±»å‹æ ‡æ³¨é‚£æ ·ï¼Œå¯¹ foo è¿™ä¸ªå˜é‡è¿›è¡Œç±»å‹å£°æ˜ï¼š   

```ts
const foo: (name: string) => number = function (name) {
return name.length
}
```

è¿™é‡Œçš„ (name: string) => number æ˜¯ TypeScript ä¸­çš„å‡½æ•°ç±»å‹ç­¾åï¼Œæœ‰ç‚¹ç±»ä¼¼ ES6 ä¸­çš„ç®­å¤´å‡½æ•°ã€‚  

è€Œå®é™…çš„ç®­å¤´å‡½æ•°çš„ç±»å‹æ ‡æ³¨ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š  

```ts
// æ–¹å¼ä¸€
const foo = (name: string): number => {
	return name.length
}

// æ–¹å¼äºŒ
const foo: (name: string) => number = (name) => {
	return name.length
}
```

åœ¨æ–¹å¼äºŒçš„å£°æ˜æ–¹å¼ä¸­ï¼Œä½ ä¼šå‘ç°å‡½æ•°ç±»å‹å£°æ˜æ··åˆç®­å¤´å‡½æ•°å£°æ˜æ—¶ï¼Œä»£ç çš„å¯è¯»æ€§éå¸¸å·®ã€‚  

ä¸€èˆ¬ä¸æ¨èè¿™ä¹ˆä½¿ç”¨ï¼Œè¦ä¹ˆç›´æ¥åœ¨å‡½æ•°ä¸­è¿›è¡Œå‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹å£°æ˜ï¼Œè¦ä¹ˆä½¿ç”¨ç±»å‹åˆ«åå°†å‡½æ•°å£°æ˜æŠ½ç¦»å‡ºæ¥ï¼š   

```ts
type FuncFoo = (name: string) => number

const foo: FuncFoo = (name) => {
	return name.length
}
```

å¦‚æœåªæ˜¯ä¸ºäº†æè¿°è¿™ä¸ªå‡½æ•°çš„ç±»å‹ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ interface æ¥è¿›è¡Œå‡½æ•°å£°æ˜ï¼š  

```ts
interface FuncFooStruct {
	(name: string): number
}
```

è¿™æ—¶çš„ interface è¢«ç§°ä¸º Callable Interfaceã€‚  

#### void ç±»å‹

åœ¨ TypeScript ä¸­ï¼Œä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼ï¼ˆå³æ²¡æœ‰è°ƒç”¨ return è¯­å¥ï¼‰çš„å‡½æ•°ï¼Œå…¶è¿”å›ç±»å‹åº”å½“è¢«æ ‡è®°ä¸º void è€Œä¸æ˜¯ undefinedï¼Œå³ä½¿å®ƒå®é™…çš„å€¼æ˜¯ undefinedã€‚

```ts
// æ²¡æœ‰è°ƒç”¨ return è¯­å¥
function foo(): void { }
```

åœ¨ TypeScript ä¸­ï¼Œundefined ç±»å‹æ˜¯ä¸€ä¸ªå®é™…çš„ã€æœ‰æ„ä¹‰çš„ç±»å‹å€¼ï¼Œè€Œ void ä»£è¡¨ç€ç©ºçš„ã€æ²¡æœ‰æ„ä¹‰çš„ç±»å‹å€¼ã€‚    

ç›¸æ¯”ä¹‹ä¸‹ï¼Œvoid ç±»å‹å°±åƒæ˜¯ JavaScript ä¸­çš„ null ä¸€æ ·ã€‚å› æ­¤åœ¨æ²¡æœ‰å®é™…è¿”å›å€¼æ—¶ï¼Œä½¿ç”¨ void ç±»å‹èƒ½æ›´å¥½åœ°è¯´æ˜è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿›è¡Œè¿”å›æ“ä½œã€‚   

ä½†å½“å‡½æ•°ä¸­æœ‰ return è¯­å¥ä½†æ²¡æœ‰æ˜¾ç¤ºè¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œå…¶å®æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ undefinedï¼š   

```ts
function bar(): undefined {
	return;
}
```

è¿™ä¸ªå‡½æ•°è¿›è¡Œäº†è¿”å›æ“ä½œï¼Œä½†æ²¡æœ‰è¿”å›å®é™…çš„å€¼ã€‚   

#### å¯é€‰å‚æ•°

å‡½æ•°å­˜åœ¨ä¸€äº›å¯é€‰å‚æ•°çš„æƒ…å†µï¼Œå½“ä¸ä¼ å…¥å‚æ•°æ—¶å‡½æ•°ä¼šä½¿ç”¨æ­¤å‚æ•°çš„é»˜è®¤å€¼ã€‚æ­£å¦‚åœ¨å¯¹è±¡ç±»å‹ä¸­ä½¿ç”¨ ? æè¿°ä¸€ä¸ªå¯é€‰å±æ€§ä¸€æ ·ï¼Œåœ¨å‡½æ•°ç±»å‹ä¸­ä¹Ÿä½¿ç”¨ ? æè¿°ä¸€ä¸ªå¯é€‰å‚æ•°ï¼š   

```ts
// åœ¨å‡½æ•°é€»è¾‘ä¸­æ³¨å…¥å¯é€‰å‚æ•°é»˜è®¤å€¼
function foo1(name: string, age?: number): number {
	const inputAge = age ?? 18;
	return name.length + inputAge
}

// ç›´æ¥ä¸ºå¯é€‰å‚æ•°å£°æ˜é»˜è®¤å€¼
function foo2(name: string, age: number = 18): number {
  const inputAge = age || 18;
  return name.length + inputAge
}
```

å¯é€‰å‚æ•°å¿…é¡»ä½äºå¿…é€‰å‚æ•°ä¹‹åã€‚è¿™é‡Œçš„å¯é€‰å‚æ•°ç±»å‹ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¦‚è¿™é‡ŒåŸå§‹ç±»å‹çš„æƒ…å†µå¯ä»¥ç›´æ¥ä»æä¾›çš„é»˜è®¤å€¼ç±»å‹æ¨å¯¼å‡ºæ¥ã€‚ä½†å¯¹äºè”åˆç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„å¤æ‚æƒ…å†µï¼Œè¿˜æ˜¯éœ€è¦è€è€å®å®åœ°è¿›è¡Œæ ‡æ³¨ã€‚    

#### rest å‚æ•°

rest å‚æ•°çš„ç±»å‹æ ‡æ³¨ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç”±äºå…¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™é‡Œä¹Ÿåº”å½“ä½¿ç”¨æ•°ç»„ç±»å‹è¿›è¡Œæ ‡æ³¨ï¼š   

å¯¹äº any ç±»å‹ï¼Œä½ å¯ä»¥ç®€å•ç†è§£ä¸ºå®ƒåŒ…å«äº†ä¸€åˆ‡å¯èƒ½çš„ç±»å‹ã€‚   

```ts
function foo(arg1: string, ...rest: any[]) { }
```

ä¹Ÿå¯ä»¥ä½¿ç”¨å…ƒç»„ç±»å‹è¿›è¡Œæ ‡æ³¨ï¼š   

```ts
function foo(arg1: string, ...rest: [number, boolean]) { }

foo('wangxiaobai', 18, true)
```

#### é‡è½½

åœ¨æŸäº›é€»è¾‘è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œå‡½æ•°å¯èƒ½æœ‰å¤šç»„å…¥å‚ç±»å‹å’Œè¿”å›å€¼ç±»å‹ï¼š   

```ts
function func(foo: number, bar?: boolean): string | number {
	if (bar) {
		return String(foo);
	} else {
		return foo * 18;
	}
}
```

åœ¨è¿™ä¸ªå®ä¾‹ä¸­ï¼Œå‡½æ•°çš„è¿”å›ç±»å‹åŸºäºå…¶å…¥å‚ bar çš„å€¼ï¼Œå¹¶ä¸”ä»å…¶å†…éƒ¨é€»è¾‘ä¸­çŸ¥é“ï¼Œå½“ bar ä¸º trueï¼Œè¿”å›å€¼ä¸º string ç±»å‹ï¼Œå¦åˆ™ä¸º number ç±»å‹ã€‚è€Œè¿™é‡Œçš„ç±»å‹ç­¾åå®Œå…¨æ²¡æœ‰ä½“ç°è¿™ä¸€ç‚¹ï¼ŒåªçŸ¥é“å®ƒçš„è¿”å›å€¼æ˜¯ä¸ªè”åˆç±»å‹ã€‚   

è¦æƒ³å®ç°ä¸å…¥å‚å…³è”çš„è¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ TypeScript æä¾›çš„å‡½æ•°é‡è½½ç­¾åï¼ˆOverload Signatureï¼‰ï¼Œå°†ä»¥ä¸Šçš„ä¾‹å­ä½¿ç”¨é‡è½½æ”¹å†™ï¼š   

```ts
function func(foo: number, bar: true): string;
function func(foo: number, bar?: false): number;
function func(foo: number, bar?: boolean): string | number {
	if (bar) {
		return String(foo);
	} else {
		return foo * 18;
	}
}

const res1 = func(18); // number
const res2 = func(18, true); // string
const res3 = func(18, false); // number
```

è¿™é‡Œçš„ä¸‰ä¸ª function func å…¶å®å…·æœ‰ä¸åŒçš„æ„ä¹‰ï¼š  

* function func(foo: number, bar: true): stringï¼Œé‡è½½ç­¾åä¸€ï¼Œä¼ å…¥ bar çš„å€¼ä¸º true æ—¶ï¼Œå‡½æ•°è¿”å›å€¼ä¸º string ç±»å‹ã€‚
* function func(foo: number, bar?: false): numberï¼Œé‡è½½ç­¾åäºŒï¼Œä¸ä¼ å…¥ barï¼Œæˆ–ä¼ å…¥ bar çš„å€¼ä¸º false æ—¶ï¼Œå‡½æ•°è¿”å›å€¼ä¸º number ç±»å‹ã€‚
* function func(foo: number, bar?: boolean): string | numberï¼Œå‡½æ•°çš„å®ç°ç­¾åï¼Œä¼šåŒ…å«é‡è½½ç­¾åçš„æ‰€æœ‰å¯èƒ½æƒ…å†µã€‚

åŸºäºé‡è½½ç­¾åå°±å®ç°äº†å°†å…¥å‚ç±»å‹å’Œè¿”å›å€¼ç±»å‹çš„å¯èƒ½æƒ…å†µè¿›è¡Œå…³è”ï¼Œè·å¾—äº†æ›´ç²¾ç¡®çš„ç±»å‹æ ‡æ³¨èƒ½åŠ›ã€‚   

è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œæ‹¥æœ‰å¤šä¸ªé‡è½½å£°æ˜çš„å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œæ˜¯æŒ‰ç…§é‡è½½çš„å£°æ˜é¡ºåºå¾€ä¸‹æŸ¥æ‰¾çš„ã€‚   

å› æ­¤åœ¨ç¬¬ä¸€ä¸ªé‡è½½å£°æ˜ä¸­ï¼Œä¸ºäº†ä¸é€»è¾‘ä¸­ä¿æŒä¸€è‡´ï¼Œå³åœ¨ bar ä¸º true æ—¶è¿”å› string ç±»å‹ï¼Œè¿™é‡Œéœ€è¦å°†ç¬¬ä¸€ä¸ªé‡è½½å£°æ˜çš„ bar å£°æ˜ä¸ºå¿…é€‰çš„å­—é¢é‡ç±»å‹ã€‚   

ä½ å¯ä»¥è¯•ç€ä¸ºç¬¬ä¸€ä¸ªé‡è½½å£°æ˜çš„ bar å‚æ•°ä¹ŸåŠ ä¸Šå¯é€‰ç¬¦å·ï¼Œç„¶åå°±ä¼šå‘ç°ç¬¬ä¸€ä¸ªå‡½æ•°è°ƒç”¨é”™è¯¯åœ°åŒ¹é…åˆ°äº†ç¬¬ä¸€ä¸ªé‡è½½å£°æ˜ã€‚   

#### å¼‚æ­¥å‡½æ•°ã€Generator å‡½æ•°ç­‰ç±»å‹ç­¾å

å¯¹äºå¼‚æ­¥å‡½æ•°ã€Generator å‡½æ•°ã€å¼‚æ­¥ Generator å‡½æ•°çš„ç±»å‹ç­¾åï¼Œå…¶å‚æ•°ç­¾ååŸºæœ¬ä¸€è‡´ï¼Œè€Œè¿”å›å€¼ç±»å‹åˆ™ç¨å¾®æœ‰äº›åŒºåˆ«ï¼š   

```ts
async function asyncFunc(): Promise<void> {}

function* genFunc(): Iterable<void> {}

async function* asyncGenFunc(): AsyncIterable<void> {}
```

å¯¹äºå¼‚æ­¥å‡½æ•°ï¼ˆå³æ ‡è®°ä¸º async çš„å‡½æ•°ï¼‰ï¼Œå…¶è¿”å›å€¼å¿…å®šä¸ºä¸€ä¸ª Promise ç±»å‹ï¼Œè€Œ Promise å†…éƒ¨åŒ…å«çš„ç±»å‹åˆ™é€šè¿‡æ³›å‹çš„å½¢å¼ä¹¦å†™ï¼Œå³ Promise<T>ã€‚   

### Class

#### ç±»ä¸ç±»æˆå‘˜çš„ç±»å‹ç­¾å  

ç±»çš„ä¸»è¦ç»“æ„æœ‰æ„é€ å‡½æ•°ã€å±æ€§ã€æ–¹æ³•å’Œè®¿é—®ç¬¦ï¼ˆAccessorï¼‰ã€‚   

å±æ€§çš„ç±»å‹æ ‡æ³¨ç±»ä¼¼äºå˜é‡ï¼Œè€Œæ„é€ å‡½æ•°ã€æ–¹æ³•ã€å­˜å–å™¨çš„ç±»å‹ç¼–æ ‡æ³¨ç±»ä¼¼äºå‡½æ•°ï¼š  

```ts
class Foo {
  prop: string;

  constructor(inputProps: string) {
    this.prop = inputProps;
  }

  print (addon: string): string {
    return `${this.prop} and ${addon}`;
  }

  get PropA(): string {
    return `${this.prop}+A`;
  }

  set PropA(value: string) {
    this.prop = `${value}`;
  }
}
```

setter æ–¹æ³•ä¸å…è®¸è¿›è¡Œè¿”å›å€¼çš„ç±»å‹æ ‡æ³¨ï¼Œå¯ä»¥ç†è§£ä¸º setter çš„è¿”å›å€¼å¹¶ä¸ä¼šè¢«æ¶ˆè´¹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåªå…³æ³¨è¿‡ç¨‹çš„å‡½æ•°ã€‚ç±»çš„æ–¹æ³•åŒæ ·å¯ä»¥è¿›è¡Œå‡½æ•°é‚£æ ·çš„é‡è½½ã€‚  

ç±»ä¹Ÿå¯ä»¥é€šè¿‡ç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼çš„æ–¹å¼åˆ›å»ºã€‚ä¸Šé¢çš„å†™æ³•å³æ˜¯ç±»å£°æ˜ï¼Œè€Œä½¿ç”¨ç±»è¡¨è¾¾å¼çš„è¯­æ³•åˆ™æ˜¯è¿™æ ·çš„ï¼š  

```ts
const Foo = class {
  prop: string;

  constructor(inputProps: string) {
    this.prop = inputProps;
  }

  print (addon: string): string {
    return `${this.prop} and ${addon}`;
  }

  get PropA(): string {
    return `${this.prop}+A`;
  }

  set PropA(value: string) {
    this.prop = `${value}`;
  }
}
```

##### ä¿®é¥°ç¬¦

åœ¨ TypeScript ä¸­èƒ½å¤Ÿä¸º Class æˆå‘˜æ·»åŠ è¿™äº›ä¿®é¥°ç¬¦ï¼špublic / private / protected / readonlyã€‚   

é™¤ readonly ä»¥å¤–ï¼Œå…¶ä»–ä¸‰ä½éƒ½å±äºè®¿é—®æ€§ä¿®é¥°ç¬¦ï¼Œè€Œ readonly å±äºæ“ä½œæ€§ä¿®é¥°ç¬¦ï¼ˆå°±å’Œ interface ä¸­çš„ readonly æ„ä¹‰ä¸€è‡´ï¼‰ã€‚   

è¿™äº›ä¿®é¥°ç¬¦åº”ç”¨çš„ä½ç½®åœ¨æˆå‘˜å‘½åå‰ï¼š  

```ts
class Foo {
  private prop: string;

  constructor(inputProps: string) {
    this.prop = inputProps;
  }

  protected print (addon: string): string {
    return `${this.prop} and ${addon}`;
  }

  public get PropA(): string {
    return `${this.prop}+A`;
  }

  public set PropA(value: string) {
    this.prop = `${value}`;
  }
}
```

é€šå¸¸ä¸ä¼šä¸ºæ„é€ å‡½æ•°æ·»åŠ ä¿®é¥°ç¬¦ï¼Œè€Œæ˜¯è®©å®ƒä¿æŒé»˜è®¤çš„ publicã€‚  

* publicï¼šæ­¤ç±»æˆå‘˜åœ¨ç±»ã€ç±»çš„å®ä¾‹ã€å­ç±»ä¸­éƒ½èƒ½è¢«è®¿é—®ã€‚  
* privateï¼šæ­¤ç±»æˆå‘˜ä»…èƒ½åœ¨ç±»çš„å†…éƒ¨è¢«è®¿é—®ã€‚  
* protectedï¼šæ­¤ç±»æˆå‘˜ä»…èƒ½åœ¨ç±»ä¸å­ç±»ä¸­è¢«è®¿é—®ã€‚  

å½“ä½ ä¸æ˜¾å¼ä½¿ç”¨è®¿é—®æ€§ä¿®é¥°ç¬¦ï¼Œæˆå‘˜çš„è®¿é—®æ€§é»˜è®¤ä¼šè¢«æ ‡è®°ä¸º publicã€‚ç®€å•èµ·è§ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å¯¹å‚æ•°åº”ç”¨è®¿é—®æ€§ä¿®é¥°ç¬¦ï¼š   

```ts
class Foo {
  constructor(public arg1: string, private arg2: boolean) {
  }
}

new Foo('wangxiaobai', false);
```

æ­¤æ—¶ï¼Œå‚æ•°ä¼šè¢«ç›´æ¥ä½œä¸ºç±»çš„æˆå‘˜ï¼ˆå³å®ä¾‹çš„å±æ€§ï¼‰ï¼Œå…å»åç»­çš„æ‰‹åŠ¨èµ‹å€¼ã€‚   

##### é™æ€æˆå‘˜

åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ static å…³é”®å­—æ¥æ ‡è¯†ä¸€ä¸ªæˆå‘˜ä¸ºé™æ€æˆå‘˜ï¼š   

```ts
class Foo {
  static staticHandler () {}
  public instanceHandler () {}
}
```

ä¸åŒäºå®ä¾‹æˆå‘˜ï¼Œåœ¨ç±»çš„å†…éƒ¨é™æ€æˆå‘˜æ— æ³•é€šè¿‡ this æ¥è®¿é—®ï¼Œéœ€è¦é€šè¿‡ Foo.staticHandler è¿™ç§å½¢å¼è¿›è¡Œè®¿é—®ã€‚   

å¯ä»¥æŸ¥çœ‹ç¼–è¯‘åˆ° ES5 åŠä»¥ä¸‹ target çš„ JavaScript ä»£ç ï¼ˆES6 ä»¥ä¸Šå°±åŸç”Ÿæ”¯æŒé™æ€æˆå‘˜äº†ï¼‰ï¼Œæ¥è¿›ä¸€æ­¥äº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼š   

```javascript
var Foo = /** @class */ (function () {
	function Foo() {
	}
	Foo.staticHandler = function () { };
	Foo.prototype.instanceHandler = function () { };
		return Foo;
	}());
```

ä»ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé™æ€æˆå‘˜ç›´æ¥è¢«æŒ‚è½½åœ¨å‡½æ•°ä½“ä¸Šï¼Œè€Œå®ä¾‹æˆå‘˜æŒ‚è½½åœ¨åŸå‹ä¸Šï¼Œè¿™å°±æ˜¯äºŒè€…çš„æœ€é‡è¦å·®å¼‚ï¼šé™æ€æˆå‘˜ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œå®ƒå§‹ç»ˆåªå±äºå½“å‰å®šä¹‰çš„è¿™ä¸ªç±»ï¼ˆä»¥åŠå…¶å­ç±»ï¼‰ã€‚è€ŒåŸå‹å¯¹è±¡ä¸Šçš„å®ä¾‹æˆå‘˜åˆ™ä¼šæ²¿ç€åŸå‹é“¾è¿›è¡Œä¼ é€’ï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿè¢«ç»§æ‰¿ã€‚  

è€Œå¯¹äºé™æ€æˆå‘˜å’Œå®ä¾‹æˆå‘˜çš„ä½¿ç”¨æ—¶æœºï¼Œå…¶å®å¹¶ä¸éœ€è¦éå¸¸åˆ»æ„åœ°åˆ’åˆ†ã€‚æ¯”å¦‚ç”¨ç±» + é™æ€æˆå‘˜æ¥æ”¶æ•›å˜é‡ä¸ utils æ–¹æ³•ï¼š   

```ts
class Utils {
  static identifier = 'wangxiaobai'

  static studyWithU () {

  }

  static makeUHappy () {
    Utils.studyWithU()
  }
}

Utils.makeUHappy()
```

#### ç»§æ‰¿ã€å®ç°ã€æŠ½è±¡ç±»

è¯´åˆ° Classï¼Œé‚£ä¸€å®šç¦»ä¸å¼€ç»§æ‰¿ã€‚TypeScript ä¸­ä¹Ÿä½¿ç”¨ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š  

```ts
class Base {}

class Derived extends Base {}
```

å¯¹äºè¿™é‡Œçš„ä¸¤ä¸ªç±»ï¼Œæ¯”è¾ƒä¸¥è°¨çš„ç§°å‘¼æ˜¯åŸºç±»ï¼ˆBaseï¼‰ä¸æ´¾ç”Ÿç±»ï¼ˆDerivedï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœå«çˆ¶ç±»ä¸å­ç±»ä¹Ÿæ²¡é—®é¢˜ã€‚å…³äºåŸºç±»ä¸æ´¾ç”Ÿç±»ï¼Œéœ€è¦äº†è§£çš„ä¸»è¦æ˜¯æ´¾ç”Ÿç±»å¯¹åŸºç±»æˆå‘˜çš„è®¿é—®ä¸è¦†ç›–æ“ä½œã€‚  

åŸºç±»ä¸­çš„å“ªäº›æˆå‘˜èƒ½å¤Ÿè¢«æ´¾ç”Ÿç±»è®¿é—®ï¼Œå®Œå…¨æ˜¯ç”±å…¶è®¿é—®æ€§ä¿®é¥°ç¬¦å†³å®šçš„ã€‚æ´¾ç”Ÿç±»ä¸­å¯ä»¥è®¿é—®åˆ°ä½¿ç”¨ public æˆ– protected ä¿®é¥°ç¬¦çš„åŸºç±»æˆå‘˜ã€‚   

é™¤äº†è®¿é—®ä»¥å¤–ï¼ŒåŸºç±»ä¸­çš„æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è¢«è¦†ç›–ï¼Œä½†ä»ç„¶å¯ä»¥é€šè¿‡ super è®¿é—®åˆ°åŸºç±»ä¸­çš„æ–¹æ³•ï¼š   

```ts
class Base {
  print () {}
}

class Derived extends Base {
  print() {
    super.print();
    // ...
  }
}
```

åœ¨æ´¾ç”Ÿç±»ä¸­è¦†ç›–åŸºç±»æ–¹æ³•æ—¶ï¼Œå¹¶ä¸èƒ½ç¡®ä¿æ´¾ç”Ÿç±»çš„è¿™ä¸€æ–¹æ³•èƒ½è¦†ç›–åŸºç±»æ–¹æ³•ï¼Œä¸‡ä¸€åŸºç±»ä¸­ä¸å­˜åœ¨è¿™ä¸ªæ–¹æ³•å‘¢ï¼Ÿ  

æ‰€ä»¥ï¼ŒTypeScript 4.3 æ–°å¢äº† override å…³é”®å­—ï¼Œæ¥ç¡®ä¿æ´¾ç”Ÿç±»å°è¯•è¦†ç›–çš„æ–¹æ³•ä¸€å®šåœ¨åŸºç±»ä¸­å­˜åœ¨å®šä¹‰ï¼š  

```ts
class Base {
  printWithLove() {}
}

class Derived extends Base {
  override print() {
    super.print();
  }
}
```

åœ¨è¿™é‡Œ TypeScript å°†ä¼šç»™å‡ºé”™è¯¯ï¼Œå› ä¸ºå°è¯•è¦†ç›–çš„æ–¹æ³•å¹¶æœªåœ¨åŸºç±»ä¸­å£°æ˜ã€‚é€šè¿‡è¿™ä¸€å…³é”®å­—å°±èƒ½ç¡®ä¿é¦–å…ˆè¿™ä¸ªæ–¹æ³•åœ¨åŸºç±»ä¸­å­˜åœ¨ï¼ŒåŒæ—¶æ ‡è¯†è¿™ä¸ªæ–¹æ³•åœ¨æ´¾ç”Ÿç±»ä¸­è¢«è¦†ç›–äº†ã€‚   

é™¤äº†åŸºç±»ä¸æ´¾ç”Ÿç±»ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼šæŠ½è±¡ç±»ã€‚   

æŠ½è±¡ç±»æ˜¯å¯¹ç±»ç»“æ„ä¸æ–¹æ³•çš„æŠ½è±¡ï¼Œç®€å•æ¥è¯´ï¼Œä¸€ä¸ªæŠ½è±¡ç±»æè¿°äº†ä¸€ä¸ªç±»ä¸­åº”å½“æœ‰å“ªäº›æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ç­‰ï¼‰ï¼Œä¸€ä¸ªæŠ½è±¡æ–¹æ³•æè¿°äº†è¿™ä¸€æ–¹æ³•åœ¨å®é™…å®ç°ä¸­çš„ç»“æ„ï¼ŒæŠ½è±¡æ–¹æ³•å…¶å®æè¿°çš„å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„å…¥å‚ç±»å‹ä¸è¿”å›å€¼ç±»å‹ã€‚  

æŠ½è±¡ç±»ä½¿ç”¨ abstract å…³é”®å­—å£°æ˜ï¼š  

```ts
abstract class AbsFoo {
  abstract absProp: string;
  abstract get absGetter (): string;
  abstract absMethod (name: string): string;
}
```

æ³¨æ„ï¼ŒæŠ½è±¡ç±»ä¸­çš„æˆå‘˜ä¹Ÿéœ€è¦ä½¿ç”¨ abstract å…³é”®å­—æ‰èƒ½è¢«è§†ä¸ºæŠ½è±¡ç±»æˆå‘˜ï¼Œå¦‚è¿™é‡Œçš„æŠ½è±¡æ–¹æ³•ã€‚   

å®ç°ï¼ˆimplementsï¼‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼š   

```ts
class Foo implements AbsFoo {
  absProp: string = 'wangxiaobai';

  get absGetter(): string {
    return 'wangxiaobai';
  }

  absMethod(name: string): string {
    return name;
  }
}
```

æ­¤æ—¶ï¼Œå¿…é¡»å®Œå…¨å®ç°è¿™ä¸ªæŠ½è±¡ç±»çš„æ¯ä¸€ä¸ªæŠ½è±¡æˆå‘˜ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ TypeScript ä¸­æ— æ³•å£°æ˜é™æ€çš„æŠ½è±¡æˆå‘˜ã€‚   

å¯¹äºæŠ½è±¡ç±»ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯æè¿°ç±»çš„ç»“æ„ã€‚interface ä¸ä»…å¯ä»¥å£°æ˜å‡½æ•°ç»“æ„ï¼Œä¹Ÿå¯ä»¥å£°æ˜ç±»çš„ç»“æ„ï¼š  

```ts
interface IFooStruct {
  absProp: string;
  get absGetter (): string;
  absMethod (name: string): string;
}

class Foo implements IFooStruct {
  absProp: string = 'wangxiaobai';

  get absGetter(): string {
    return 'wangxiaobai';
  }

  absMethod(name: string): string {
    return name;
  }
}
```

åœ¨è¿™é‡Œè®©ç±»å»å®ç°äº†ä¸€ä¸ªæ¥å£ã€‚è¿™é‡Œæ¥å£çš„ä½œç”¨å’ŒæŠ½è±¡ç±»ä¸€æ ·ï¼Œéƒ½æ˜¯æè¿°è¿™ä¸ªç±»çš„ç»“æ„ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Newable Interface æ¥æè¿°ä¸€ä¸ªç±»çš„ç»“æ„ï¼ˆç±»ä¼¼äºæè¿°å‡½æ•°ç»“æ„çš„ Callable Interfaceï¼‰ï¼š   

```ts
class Foo { }

interface FooStruct {
	new(): Foo
}

declare const NewableFoo: FooStruct;

const foo = new NewableFoo();
```

### å†…ç½®ç±»å‹

#### any 

TypeScript ä¸­æä¾›äº†ä¸€ä¸ªå†…ç½®ç±»å‹ anyï¼Œè¡¨ç¤ºä»»æ„ç±»å‹ã€‚    

```
log(message?: any, ...optionalParams: any[]): void
```

ä¸€ä¸ªè¢«æ ‡è®°ä¸º any ç±»å‹çš„å‚æ•°å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„å€¼ã€‚é™¤äº† message æ˜¯ any ä»¥å¤–ï¼ŒoptionalParams ä½œä¸ºä¸€ä¸ª rest å‚æ•°ï¼Œä¹Ÿä½¿ç”¨ any[] è¿›è¡Œäº†æ ‡è®°ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹çš„ä»»æ„æ•°é‡ç±»å‹æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚    

é™¤äº†æ˜¾å¼çš„æ ‡è®°ä¸€ä¸ªå˜é‡æˆ–å‚æ•°ä¸º anyï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½ çš„å˜é‡ / å‚æ•°ä¹Ÿä¼šè¢«éšå¼åœ°æ¨å¯¼ä¸º anyã€‚æ¯”å¦‚ä½¿ç”¨ let å£°æ˜ä¸€ä¸ªå˜é‡ä½†ä¸æä¾›åˆå§‹å€¼ï¼Œä»¥åŠä¸ä¸ºå‡½æ•°å‚æ•°æä¾›ç±»å‹æ ‡æ³¨ï¼š   

````ts
// any
let foo;

// fooã€bar å‡ä¸º any
function func(foo, bar){}
````

ä»¥ä¸Šçš„å‡½æ•°å£°æ˜åœ¨ tsconfig ä¸­å¯ç”¨äº† noImplicitAny æ—¶ä¼šæŠ¥é”™ï¼Œä½ å¯ä»¥æ˜¾å¼ä¸ºè¿™ä¸¤ä¸ªå‚æ•°æŒ‡å®š any ç±»å‹ï¼Œæˆ–è€…æš‚æ—¶å…³é—­è¿™ä¸€é…ç½®ï¼ˆä¸æ¨èï¼‰ã€‚   

any ç±»å‹çš„å˜é‡å‡ ä¹æ— æ‰€ä¸èƒ½ï¼Œå®ƒå¯ä»¥åœ¨å£°æ˜åå†æ¬¡æ¥å—ä»»æ„ç±»å‹çš„å€¼ï¼ŒåŒæ—¶å¯ä»¥è¢«èµ‹å€¼ç»™ä»»æ„å…¶å®ƒç±»å‹çš„å˜é‡ï¼š   

```ts
// è¢«æ ‡è®°ä¸º any ç±»å‹çš„å˜é‡å¯ä»¥æ‹¥æœ‰ä»»æ„ç±»å‹çš„å€¼
let anyVar: any = 'wangxiaobai';

anyVar = false;
anyVar = 'wangxiaobai';
anyVar = {
site: 'github.io'
};

anyVar = () => { }

// æ ‡è®°ä¸ºå…·ä½“ç±»å‹çš„å˜é‡ä¹Ÿå¯ä»¥æ¥å—ä»»ä½• any ç±»å‹çš„å€¼
const val1: string = anyVar;
const val2: number = anyVar;
const val3: () => {} = anyVar;
const val4: {} = anyVar;
```

å¯ä»¥åœ¨ any ç±»å‹å˜é‡ä¸Šä»»æ„åœ°è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬èµ‹å€¼ã€è®¿é—®ã€æ–¹æ³•è°ƒç”¨ç­‰ç­‰ï¼Œæ­¤æ—¶å¯ä»¥è®¤ä¸ºç±»å‹æ¨å¯¼ä¸æ£€æŸ¥æ˜¯è¢«å®Œå…¨ç¦ç”¨çš„ï¼š   

```ts
let anyVar: any = null;

anyVar.foo.bar.baz();
anyVar[0][1][2].prop1;
```

any ç±»å‹çš„ä¸»è¦æ„ä¹‰ï¼Œæ˜¯ä¸ºäº†è¡¨ç¤ºä¸€ä¸ªæ— æ‹˜æ— æŸçš„â€œä»»æ„ç±»å‹â€ï¼Œå®ƒèƒ½å…¼å®¹æ‰€æœ‰ç±»å‹ï¼Œä¹Ÿèƒ½å¤Ÿè¢«æ‰€æœ‰ç±»å‹å…¼å®¹ã€‚    

æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨ any ç±»å‹è·³è¿‡ç±»å‹æ£€æŸ¥ã€‚å½“ç„¶ï¼Œè¿è¡Œæ—¶å‡ºäº†é—®é¢˜å°±éœ€è¦ä½ è‡ªå·±è´Ÿè´£äº†ã€‚   

any çš„æœ¬è´¨æ˜¯ç±»å‹ç³»ç»Ÿä¸­çš„é¡¶çº§ç±»å‹ï¼Œå³ Top Typeã€‚  

any ç±»å‹çš„ä¸‡èƒ½æ€§ä¹Ÿå¯¼è‡´ç»å¸¸æ»¥ç”¨å®ƒï¼Œæ­¤æ—¶çš„ TypeScript å°±å˜æˆäº†ä»¤äººè¯Ÿç—…çš„ AnyScriptã€‚ä¸ºäº†é¿å…è¿™ä¸€æƒ…å†µï¼Œè®°ä½ä»¥ä¸‹ä½¿ç”¨å° tipsï¼š   

* å¦‚æœæ˜¯ç±»å‹ä¸å…¼å®¹æŠ¥é”™å¯¼è‡´ä½ ä½¿ç”¨ anyï¼Œè€ƒè™‘ç”¨ç±»å‹æ–­è¨€æ›¿ä»£ã€‚  
* å¦‚æœæ˜¯ç±»å‹å¤ªå¤æ‚å¯¼è‡´ä¸æƒ³å…¨éƒ¨å£°æ˜è€Œä½¿ç”¨ anyï¼Œè€ƒè™‘å°†è¿™ä¸€å¤„çš„ç±»å‹å»æ–­è¨€ä¸ºä½ éœ€è¦çš„æœ€ç®€ç±»å‹ã€‚  
* å¦‚æœä½ æ˜¯æƒ³è¡¨è¾¾ä¸€ä¸ªæœªçŸ¥ç±»å‹ï¼Œæ›´åˆç†çš„æ–¹å¼æ˜¯ä½¿ç”¨ unknownã€‚   

#### unknown ç±»å‹å’Œ

unknown ç±»å‹ä»£è¡¨æœªçŸ¥ç±»å‹ï¼Œè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å†æ¬¡èµ‹å€¼ä¸ºä»»æ„å…¶å®ƒç±»å‹ï¼Œä½†åªèƒ½èµ‹å€¼ç»™ any ä¸ unknown ç±»å‹çš„å˜é‡ï¼š   

```ts
let unknownVar: unknown = 'wangxiaobai';

unknownVar = false;
unknownVar = 'wangxiaobai';
unknownVar = {
site: 'github.io'
};

unknownVar = () => { }

const val1: string = unknownVar; // Error
const val2: number = unknownVar; // Error
const val3: () => {} = unknownVar; // Error
const val4: {} = unknownVar; // Error

const val5: any = unknownVar;
const val6: unknown = unknownVar;
```

unknown å’Œ any çš„ä¸€ä¸ªä¸»è¦å·®å¼‚åœ¨èµ‹å€¼ç»™åˆ«çš„å˜é‡æ—¶ï¼Œany å°±åƒæ˜¯ â€œæˆ‘èº«åŒ–ä¸‡åƒæ— å¤„ä¸åœ¨â€ï¼Œæ‰€æœ‰ç±»å‹éƒ½æŠŠå®ƒå½“è‡ªå·±äººã€‚     

è€Œ unknown å°±åƒæ˜¯ â€œæˆ‘è™½ç„¶èº«åŒ–ä¸‡åƒï¼Œä½†æˆ‘åšä¿¡æˆ‘åœ¨æœªæ¥çš„æŸä¸€åˆ»ä¼šå¾—åˆ°ä¸€ä¸ªç¡®å®šçš„ç±»å‹â€ï¼Œåªæœ‰ any å’Œ unknown è‡ªå·±æŠŠå®ƒå½“è‡ªå·±äººã€‚      

ç®€å•åœ°è¯´ï¼Œany æ”¾å¼ƒäº†æ‰€æœ‰çš„ç±»å‹æ£€æŸ¥ï¼Œè€Œ unknown å¹¶æ²¡æœ‰ã€‚è¿™ä¸€ç‚¹ä¹Ÿä½“ç°åœ¨å¯¹ unknown ç±»å‹çš„å˜é‡è¿›è¡Œå±æ€§è®¿é—®æ—¶ï¼š     

```ts
let unknownVar: unknown;

unknownVar.foo(); // æŠ¥é”™ï¼šå¯¹è±¡ç±»å‹ä¸º unknown
```

è¦å¯¹ unknown ç±»å‹è¿›è¡Œå±æ€§è®¿é—®ï¼Œéœ€è¦è¿›è¡Œç±»å‹æ–­è¨€ï¼Œå³â€œè™½ç„¶è¿™æ˜¯ä¸€ä¸ªæœªçŸ¥çš„ç±»å‹ï¼Œä½†æˆ‘è·Ÿä½ ä¿è¯å®ƒåœ¨è¿™é‡Œå°±æ˜¯è¿™ä¸ªç±»å‹ï¼â€ï¼š     

```ts
let unknownVar: unknown;

(unknownVar as { foo: () => {} }).foo();
```

åœ¨ç±»å‹æœªçŸ¥çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ unknown æ ‡æ³¨ã€‚è¿™ç›¸å½“äºä½ ä½¿ç”¨é¢å¤–çš„å¿ƒæ™ºè´Ÿæ‹…ä¿è¯äº†ç±»å‹åœ¨å„å¤„çš„ç»“æ„ï¼Œåç»­é‡æ„ä¸ºå…·ä½“ç±»å‹æ—¶ä¹Ÿå¯ä»¥è·å¾—æœ€åˆå§‹çš„ç±»å‹ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜ä¿è¯äº†ç±»å‹æ£€æŸ¥çš„å­˜åœ¨ã€‚    

#### never ç±»å‹

```ts
type UnionWithNever = 'wangxiaobai' | 18 | true | void | never;  
```

å°†é¼ æ ‡æ‚¬æµ®åœ¨ç±»å‹åˆ«åä¹‹ä¸Šï¼Œä½ ä¼šå‘ç°è¿™é‡Œæ˜¾ç¤ºçš„ç±»å‹æ˜¯ "wangxiaobai" | 18 | true | voidã€‚   

never ç±»å‹è¢«ç›´æ¥æ— è§†æ‰äº†ï¼Œè€Œ void ä»ç„¶å­˜åœ¨ã€‚è¿™æ˜¯å› ä¸ºï¼Œvoid ä½œä¸ºç±»å‹è¡¨ç¤ºä¸€ä¸ªç©ºç±»å‹ï¼Œå°±åƒæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ä½¿ç”¨ void æ¥ä½œä¸ºè¿”å›å€¼ç±»å‹æ ‡æ³¨ä¸€æ ·ï¼Œvoid ç±»å‹å°±åƒ JS ä¸­çš„ null ä¸€æ ·ä»£è¡¨â€œè¿™é‡Œæœ‰ç±»å‹ï¼Œä½†æ˜¯ä¸ªç©ºç±»å‹â€ã€‚   

è€Œ never æ‰æ˜¯ä¸€ä¸ª â€œä»€ä¹ˆéƒ½æ²¡æœ‰â€ çš„ç±»å‹ï¼Œå®ƒç”šè‡³ä¸åŒ…æ‹¬ç©ºçš„ç±»å‹ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œnever ç±»å‹ä¸æºå¸¦ä»»ä½•çš„ç±»å‹ä¿¡æ¯ï¼Œå› æ­¤ä¼šåœ¨è”åˆç±»å‹ä¸­è¢«ç›´æ¥ç§»é™¤ã€‚   

void å’Œ never çš„ç±»å‹å…¼å®¹æ€§ï¼š   

```ts
declare let v1: never;
declare let v2: void;

v1 = v2; // X ç±»å‹ void ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ never

v2 = v1;
```

åœ¨ç¼–ç¨‹è¯­è¨€çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œnever ç±»å‹è¢«ç§°ä¸º Bottom Typeï¼Œæ˜¯æ•´ä¸ªç±»å‹ç³»ç»Ÿå±‚çº§ä¸­æœ€åº•å±‚çš„ç±»å‹ã€‚   

å’Œ nullã€undefined ä¸€æ ·ï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ï¼Œä½†åªæœ‰ never ç±»å‹çš„å˜é‡èƒ½å¤Ÿèµ‹å€¼ç»™å¦ä¸€ä¸ª never ç±»å‹å˜é‡ã€‚   

å®ƒä¸»è¦è¢«ç±»å‹æ£€æŸ¥æ‰€ä½¿ç”¨ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ never ç¡®å®æ˜¯ç¬¦åˆé€»è¾‘çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªåªè´Ÿè´£æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ï¼š   

```ts
function justThrow(): never {
	throw new Error()
}
```

åœ¨ç±»å‹æµçš„åˆ†æä¸­ï¼Œä¸€æ—¦ä¸€ä¸ªè¿”å›å€¼ç±»å‹ä¸º never çš„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆä¸‹æ–¹çš„ä»£ç éƒ½ä¼šè¢«è§†ä¸ºæ— æ•ˆçš„ä»£ç ï¼ˆå³æ— æ³•æ‰§è¡Œåˆ°ï¼‰ï¼š   

```ts
function justThrow(): never {
	throw new Error()
}

function foo (input:number){
	if(input > 1){
		justThrow();
		// ç­‰åŒäº return è¯­å¥åçš„ä»£ç ï¼Œå³ Dead Code
		const name = 'wangxiaobai';
	}
}
```

#### ç±»å‹æ–­è¨€

ç±»å‹æ–­è¨€èƒ½å¤Ÿæ˜¾å¼å‘ŠçŸ¥ç±»å‹æ£€æŸ¥ç¨‹åºå½“å‰è¿™ä¸ªå˜é‡çš„ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œç±»å‹åˆ†æåœ°ä¿®æ­£ã€ç±»å‹ã€‚   

å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªå°†å˜é‡çš„å·²æœ‰ç±»å‹æ›´æ”¹ä¸ºæ–°æŒ‡å®šç±»å‹çš„æ“ä½œï¼Œå®ƒçš„åŸºæœ¬è¯­æ³•æ˜¯ as NewTypeï¼Œä½ å¯ä»¥å°† any / unknown ç±»å‹æ–­è¨€åˆ°ä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼š   

```ts
let unknownVar: unknown;

(unknownVar as { foo: () => {} }).foo();
```

è¿˜å¯ä»¥ as åˆ° any æ¥ä¸ºæ‰€æ¬²ä¸ºï¼Œè·³è¿‡æ‰€æœ‰çš„ç±»å‹æ£€æŸ¥ï¼š   

```ts
const str: string = 'wangxiaobai';

(str as any).func().foo().prop;
```

ä¹Ÿå¯ä»¥åœ¨è”åˆç±»å‹ä¸­æ–­è¨€ä¸€ä¸ªå…·ä½“çš„åˆ†æ”¯ï¼š   

```ts
function foo(union: string | number) {
	if ((union as string).includes('wangxiaobai')) { }
	if ((union as number).toFixed() === '18') { }
}
```

ç±»å‹æ–­è¨€çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œåœ¨ TypeScript ç±»å‹åˆ†æä¸æ­£ç¡®æˆ–ä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œå°†å…¶æ–­è¨€ä¸ºæ­¤å¤„çš„æ­£ç¡®ç±»å‹ï¼š   

```ts
interface IFoo {
	name: string;
}

declare const obj: {
	foo: IFoo
}

const {
	foo = {} as IFoo
} = obj
```

è¿™é‡Œä» {} å­—é¢é‡ç±»å‹æ–­è¨€ä¸ºäº† IFoo ç±»å‹ï¼Œå³ä¸ºè§£æ„èµ‹å€¼é»˜è®¤å€¼è¿›è¡Œäº†é¢„æœŸçš„ç±»å‹æ–­è¨€ã€‚å½“ç„¶ï¼Œæ›´ä¸¥è°¨çš„æ–¹å¼åº”è¯¥æ˜¯å®šä¹‰ä¸º Partial<IFoo> ç±»å‹ï¼Œå³ IFoo çš„å±æ€§å‡ä¸ºå¯é€‰çš„ã€‚     

é™¤äº†ä½¿ç”¨ as è¯­æ³•ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <> è¯­æ³•ã€‚å®ƒè™½ç„¶ä¹¦å†™æ›´ç®€æ´ï¼Œä½†æ•ˆæœä¸€è‡´ã€‚å¯ä»¥é€šè¿‡ TypeScript ESLint æä¾›çš„ consistent-type-assertions è§„åˆ™æ¥çº¦æŸæ–­è¨€é£æ ¼ã€‚  

ç±»å‹æ–­è¨€åº”å½“æ˜¯åœ¨è¿«ä¸å¾—å·±çš„æƒ…å†µä¸‹ä½¿ç”¨çš„ã€‚è™½ç„¶è¯´å¯ä»¥ç”¨ç±»å‹æ–­è¨€çº æ­£ä¸æ­£ç¡®çš„ç±»å‹åˆ†æï¼Œä½†ç±»å‹åˆ†æåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹è¿˜æ˜¯å¯ä»¥æ™ºèƒ½åœ°æ»¡è¶³éœ€æ±‚çš„ã€‚   

æ€»çš„æ¥è¯´ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œè¿˜æ˜¯ as any è¿™ä¸€ç§æ“ä½œæ›´å¤šã€‚ä½†è¿™ä¹Ÿæ˜¯è®©ä½ çš„ä»£ç ç¼–ç¨‹ AnyScript çš„ç½ªé­ç¥¸é¦–ä¹‹ä¸€ï¼Œè¯·åŠ¡å¿…å°å¿ƒä½¿ç”¨ã€‚   

#### åŒé‡æ–­è¨€

å¦‚æœåœ¨ä½¿ç”¨ç±»å‹æ–­è¨€æ—¶ï¼ŒåŸç±»å‹ä¸æ–­è¨€ç±»å‹ä¹‹é—´å·®å¼‚è¿‡å¤§ï¼ŒTypeScript ä¼šç»™ä½ ä¸€ä¸ªç±»å‹æŠ¥é”™ï¼š   

```ts
const str: string = 'wangxiaobai';

// ä» X ç±»å‹ åˆ° Y ç±»å‹çš„æ–­è¨€å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œblabla
(str as { handler: () => {} }).handler()
```

æ­¤æ—¶å®ƒä¼šæé†’ä½ å…ˆæ–­è¨€åˆ° unknown ç±»å‹ï¼Œå†æ–­è¨€åˆ°é¢„æœŸç±»å‹ï¼š    

```ts
const str: string = 'wangxiaobai';

(str as unknown as { handler: () => {} }).handler();

// ä½¿ç”¨å°–æ‹¬å·æ–­è¨€
(<{ handler: () => {} }>(<unknown>str)).handler();
```

è¿™æ˜¯å› ä¸ºä½ çš„æ–­è¨€ç±»å‹å’ŒåŸç±»å‹çš„å·®å¼‚å¤ªå¤§ï¼Œéœ€è¦å…ˆæ–­è¨€åˆ°ä¸€ä¸ªé€šç”¨çš„ç±»ï¼Œå³ any / unknownã€‚è¿™ä¸€é€šç”¨ç±»å‹åŒ…å«äº†æ‰€æœ‰å¯èƒ½çš„ç±»å‹ï¼Œå› æ­¤æ–­è¨€åˆ°å®ƒå’Œä»å®ƒæ–­è¨€åˆ°å¦ä¸€ä¸ªç±»å‹å·®å¼‚ä¸å¤§ã€‚   

#### éç©ºæ–­è¨€

éç©ºæ–­è¨€å…¶å®æ˜¯ç±»å‹æ–­è¨€çš„ç®€åŒ–ï¼Œå®ƒä½¿ç”¨ ! è¯­æ³•ï¼Œå³ obj!.func()!.prop çš„å½¢å¼æ ‡è®°å‰é¢çš„ä¸€ä¸ªå£°æ˜ä¸€å®šæ˜¯éç©ºçš„ï¼ˆå®é™…ä¸Šå°±æ˜¯å‰”é™¤äº† null å’Œ undefined ç±»å‹ï¼‰ã€‚     

```ts
declare const foo: {
	func?: () => ({
		prop?: number | null;
	})
};

foo.func().prop.toFixed();
```

æ­¤æ—¶ï¼Œfunc åœ¨ foo ä¸­ä¸ä¸€å®šå­˜åœ¨ï¼Œprop åœ¨ func è°ƒç”¨ç»“æœä¸­ä¸ä¸€å®šå­˜åœ¨ï¼Œä¸”å¯èƒ½ä¸º nullï¼Œä¼šæ”¶è·ä¸¤ä¸ªç±»å‹æŠ¥é”™ã€‚å¦‚æœåšæŒè°ƒç”¨ï¼Œæƒ³è¦è§£å†³æ‰ç±»å‹æŠ¥é”™å°±å¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€ï¼š    

```ts
foo.func!().prop!.toFixed();
```

å…¶åº”ç”¨ä½ç½®ç±»ä¼¼äºå¯é€‰é“¾ï¼š   

```ts
foo.func?.().prop?.toFixed();
```

ä¸åŒçš„æ˜¯ï¼Œéç©ºæ–­è¨€çš„è¿è¡Œæ—¶ä»ç„¶ä¼šä¿æŒè°ƒç”¨é“¾ï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶å¯èƒ½ä¼šæŠ¥é”™ã€‚è€Œå¯é€‰é“¾åˆ™ä¼šåœ¨æŸä¸€ä¸ªéƒ¨åˆ†æ”¶åˆ° undefined æˆ– null æ—¶ç›´æ¥çŸ­è·¯æ‰ï¼Œä¸ä¼šå†å‘ç”Ÿåé¢çš„è°ƒç”¨ã€‚   

éç©ºæ–­è¨€çš„å¸¸è§åœºæ™¯è¿˜æœ‰ document.querySelectorã€Array.find æ–¹æ³•ç­‰ï¼š   

```ts
const element = document.querySelector('#id')!;
const target = [1, 2, 3, 18].find(item => item === 18)!;
```

ä¸Šé¢çš„éç©ºæ–­è¨€å®é™…ä¸Šç­‰ä»·äºä»¥ä¸‹çš„ç±»å‹æ–­è¨€æ“ä½œï¼š   

```ts
((foo.func as () => ({
prop?: number;
}))().prop as number).toFixed();
```

éç©ºæ–­è¨€æ˜¯ä¸æ˜¯ç®€å•å¤šäº†ï¼Ÿå¯ä»¥é€šè¿‡ non-nullable-type-assertion-style è§„åˆ™æ¥æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦å­˜åœ¨ç±»å‹æ–­è¨€èƒ½å¤Ÿè¢«ç®€å†™ä¸ºéç©ºæ–­è¨€çš„æƒ…å†µã€‚    

ç±»å‹æ–­è¨€è¿˜æœ‰ä¸€ç§ç”¨æ³•æ˜¯ä½œä¸ºä»£ç æç¤ºçš„è¾…åŠ©å·¥å…·ï¼Œæ¯”å¦‚å¯¹äºä»¥ä¸‹è¿™ä¸ªç¨å¾®å¤æ‚çš„æ¥å£ï¼š    

```ts
interface IStruct {
	foo: string;
	bar: {
		barPropA: string;
		barPropB: number;
		barMethod: () => void;
		baz: {
			handler: () => Promise<void>;
		};
	};
}
```

å‡è®¾ä½ æƒ³è¦åŸºäºè¿™ä¸ªç»“æ„éšä¾¿å®ç°ä¸€ä¸ªå¯¹è±¡ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨ç±»å‹æ ‡æ³¨ï¼š   

```ts
const obj: IStruct = {};
```

è¿™ä¸ªæ—¶å€™ç­‰å¾…ä½ çš„æ˜¯ä¸€å †ç±»å‹æŠ¥é”™ï¼Œä½ å¿…é¡»è§„è§„çŸ©çŸ©åœ°å®ç°æ•´ä¸ªæ¥å£ç»“æ„æ‰å¯ä»¥ã€‚ä½†å¦‚æœä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œå°±å¯ä»¥åœ¨ä¿ç•™ç±»å‹æç¤ºçš„å‰æä¸‹ï¼Œä¸é‚£ä¹ˆå®Œæ•´åœ°å®ç°è¿™ä¸ªç»“æ„ï¼š   

```ts
// è¿™ä¸ªä¾‹å­æ˜¯ä¸ä¼šæŠ¥é”™çš„
const obj = <IStruct>{
	bar: {
		baz: {},
	},
};
```

ç±»å‹æç¤ºä»ç„¶å­˜åœ¨ï¼š

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_02.png" alt="" width="700" />  

åœ¨ä½ é”™è¯¯åœ°å®ç°ç»“æ„æ—¶ä»ç„¶å¯ä»¥ç»™åˆ°ä½ æŠ¥é”™ä¿¡æ¯ï¼š

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_03.png" alt="" width="700" />  

## ç±»å‹å·¥å…·

ç±»å‹å·¥å…·å°±æ˜¯å¯¹ç±»å‹è¿›è¡Œå¤„ç†çš„å·¥å…·ï¼Œåˆ†ä¸ºç±»å‹åˆ›å»ºä¸ç±»å‹å®‰å…¨ä¿æŠ¤ä¸¤ç±»ã€‚  

### ç±»å‹åˆ›å»º  

åŸºäºå·²æœ‰çš„ç±»å‹åˆ›å»ºæ–°çš„ç±»å‹ï¼Œè¿™äº›ç±»å‹å·¥å…·åŒ…æ‹¬ç±»å‹åˆ«åã€äº¤å‰ç±»å‹ã€ç´¢å¼•ç±»å‹ä¸æ˜ å°„ç±»å‹ã€‚   

#### ç±»å‹åˆ«å

å¯¹ä¸€ç»„ç±»å‹æˆ–ä¸€ä¸ªç‰¹å®šç±»å‹ç»“æ„è¿›è¡Œå°è£…ï¼Œä»¥ä¾¿äºåœ¨å…¶å®ƒåœ°æ–¹è¿›è¡Œå¤ç”¨ã€‚   

ä½¿ç”¨ type å…³é”®å­—è¿›è¡Œå£°æ˜ï¼š  

```ts
type A = string;
```

æŠ½ç¦»ä¸€ç»„è”åˆç±»å‹ï¼š  

```ts
type StatusCode = 200 | 301 | 400 | 500 | 502;
type PossibleDataTypes = string | number | (() => unknown);

const status: StatusCode = 502;
```

æŠ½ç¦»ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š  

```ts
type Handler = (e: Event) => void;

const clickHandler: Handler = (e) => { };
const moveHandler: Handler = (e) => { };
const dragHandler: Handler = (e) => { };
```

å£°æ˜ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œå°±åƒæ¥å£é‚£æ ·ï¼š   

```ts
type ObjType = {
	name: string;
	age: number;
}
```

åœ¨ç±»å‹åˆ«åä¸­ï¼Œç±»å‹åˆ«åè¿˜å¯ä»¥å£°æ˜è‡ªå·±èƒ½å¤Ÿæ¥å—æ³›å‹ã€‚ä¸€æ—¦æ¥å—äº†æ³›å‹ï¼Œå®ƒå°±å«å·¥å…·ç±»å‹ï¼š  

```ts
type Factory<T> = T | number | string;
```

å®ƒçš„åŸºæœ¬åŠŸèƒ½ä»ç„¶æ˜¯åˆ›å»ºç±»å‹ï¼ŒåŸºäºä¼ å…¥çš„æ³›å‹è¿›è¡Œå„ç§ç±»å‹æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚    

```ts
const foo: Factory<boolean> = true;
```

ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨å·¥å…·ç±»å‹æ¥åšç±»å‹æ ‡æ³¨ï¼Œè€Œæ˜¯å†åº¦å£°æ˜ä¸€ä¸ªæ–°çš„ç±»å‹åˆ«åï¼š  

```ts
type FactoryWithBool = Factory<boolean>;

const foo: FactoryWithBool = true;
```

æ³›å‹å‚æ•°çš„åç§°ï¼ˆä¸Šé¢çš„ T ï¼‰ä¹Ÿä¸æ˜¯å›ºå®šçš„ã€‚é€šå¸¸ä½¿ç”¨å¤§å†™çš„ T / K / U / V / M / O ...è¿™ç§å½¢å¼ã€‚  

å£°æ˜ä¸€ä¸ªç®€å•ã€æœ‰å®é™…æ„ä¹‰çš„å·¥å…·ç±»å‹ï¼š  

```ts
type MaybeNull<T> = T | null;
```

è¿™ä¸ªå·¥å…·ç±»å‹ä¼šæ¥å—ä¸€ä¸ªç±»å‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…æ‹¬ null çš„è”åˆç±»å‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶å°±å¯ä»¥ç¡®ä¿ä½ å¤„ç†äº†å¯èƒ½ä¸ºç©ºå€¼çš„å±æ€§è¯»å–ä¸æ–¹æ³•è°ƒç”¨ï¼š   

```ts
type MaybeNull<T> = T | null;

function process(input: MaybeNull<{ handler: () => {} }>) {
  input?.handler();
}
```

ç±»ä¼¼çš„è¿˜æœ‰ MaybePromiseã€MaybeArrayã€‚  

```ts
type MaybeArray<T> = T | T[];

function ensureArray<T>(input: MaybeArray<T>): T[] {
  return Array.isArray(input) ? input : [input];
}
```

å¦å¤–ï¼Œç±»å‹åˆ«åä¸­å¯ä»¥æ¥å—ä»»æ„ä¸ªæ³›å‹ï¼Œä»¥åŠä¸ºæ³›å‹æŒ‡å®šçº¦æŸã€é»˜è®¤å€¼ç­‰ã€‚    

#### äº¤å‰ç±»å‹ 

å®ƒå’Œè”åˆç±»å‹çš„ä½¿ç”¨ä½ç½®ä¸€æ ·ï¼Œåªä¸è¿‡ç¬¦å·æ˜¯ &ï¼Œå³æŒ‰ä½ä¸è¿ç®—ç¬¦ã€‚   

ä½ éœ€è¦ç¬¦åˆè¿™é‡Œçš„æ‰€æœ‰ç±»å‹ï¼Œæ‰å¯ä»¥è¯´å®ç°äº†è¿™ä¸ªäº¤å‰ç±»å‹ï¼Œå³ A & Bï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ A ä¸ B ä¸¤ä¸ªç±»å‹æ‰è¡Œã€‚   

å£°æ˜ä¸€ä¸ªäº¤å‰ç±»å‹ï¼š   

```ts
interface NameStruct {
  name: string;
}

interface AgeStruct {
  age: number;
}

type ProfileStruct = NameStruct & AgeStruct;

const profile: ProfileStruct = {
  name: 'wangxiaobai',
  age: 18
}
```

ProfileStruct æ˜¯ä¸€ä¸ªåŒæ—¶åŒ…å« NameStruct å’Œ AgeStruct ä¸¤ä¸ªæ¥å£æ‰€æœ‰å±æ€§çš„ç±»å‹ã€‚  

```ts
type StrAndNum = string & number; // never
```

åŸå§‹ç±»å‹çš„åˆå¹¶å˜æˆäº† neverã€‚å®é™…ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ never è¿™ä¸€ BottomType çš„å®é™…æ„ä¹‰ä¹‹ä¸€ï¼Œæè¿°æ ¹æœ¬ä¸å­˜åœ¨çš„ç±»å‹ã€‚   

å¯¹äºå¯¹è±¡ç±»å‹çš„äº¤å‰ç±»å‹ï¼Œå…¶å†…éƒ¨çš„åŒåå±æ€§ç±»å‹åŒæ ·ä¼šæŒ‰ç…§äº¤å‰ç±»å‹è¿›è¡Œåˆå¹¶ï¼š   

```ts
type Struct1 = {
  primitiveProp: string;
  objectProp: {
    name: string;
  }
}

type Struct2 = {
  primitiveProp: number;
  objectProp: {
    age: number;
  }
}

type Composed = Struct1 & Struct2;

type PrimitivePropType = Composed['primitiveProp']; // never
type ObjectPropType = Composed['objectProp']; // { name: string; age: number; }
```

ä¸¤ä¸ªè”åˆç±»å‹ç»„æˆçš„äº¤å‰ç±»å‹ï¼Œå„å®ç°ä¸¤è¾¹è”åˆç±»å‹ä¸­çš„ä¸€ä¸ªå°±è¡Œäº†ï¼Œä¹Ÿå°±æ˜¯ä¸¤è¾¹è”åˆç±»å‹çš„äº¤é›†ï¼š   

```ts
type UnionIntersection1 = (1 | 2 | 3) & (1 | 2); // 1 | 2
type UnionIntersection2 = (string | number | symbol) & string; // string
```

#### ç´¢å¼•ç±»å‹

ç´¢å¼•ç±»å‹åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼šç´¢å¼•ç­¾åç±»å‹ã€ç´¢å¼•ç±»å‹æŸ¥è¯¢ä¸ç´¢å¼•ç±»å‹è®¿é—®ã€‚  

##### ç´¢å¼•ç±»å‹ç­¾å

æŒ‡çš„æ˜¯åœ¨æ¥å£æˆ–ç±»å‹åˆ«åä¸­ï¼Œé€šè¿‡ä»¥ä¸‹è¯­æ³•æ¥å¿«é€Ÿå£°æ˜ä¸€ä¸ªé”®å€¼ç±»å‹ä¸€è‡´çš„ç±»å‹ç»“æ„ï¼š   

```ts
interface AllStringTypes {
  [key: string]: string;
}

type AllStringTypes = {
  [key: string]: string;
}
```

å³ä½¿ä½ è¿˜æ²¡å£°æ˜å…·ä½“çš„å±æ€§ï¼Œå¯¹äºè¿™äº›ç±»å‹ç»“æ„çš„å±æ€§è®¿é—®ä¹Ÿå°†å…¨éƒ¨è¢«è§†ä¸º string ç±»å‹ï¼š   

```ts
interface AllStringTypes {
  [key: string]: string;
}

type PropType1 = AllStringTypes['wangxiaobai']; // string
type PropType2 = AllStringTypes['18']; // string
```

è¿™ä¹Ÿæ„å‘³ç€åœ¨å®ç°è¿™ä¸ªç±»å‹ç»“æ„çš„å˜é‡ä¸­åªèƒ½å£°æ˜å­—ç¬¦ä¸²ç±»å‹çš„é”®ï¼š   

```ts
interface AllStringTypes {
  [key: string]: string;
}

const foo: AllStringTypes = {
  wangxiaobai: '18'
}
```

ç´¢å¼•ç­¾åç±»å‹ä¹Ÿå¯ä»¥å’Œå…·ä½“çš„é”®å€¼å¯¹ç±»å‹å£°æ˜å¹¶å­˜ï¼Œä½†è¿™æ—¶è¿™äº›å…·ä½“çš„é”®å€¼ç±»å‹ä¹Ÿéœ€è¦ç¬¦åˆç´¢å¼•ç­¾åç±»å‹çš„å£°æ˜ï¼š   

```ts
interface AllStringTypes {
	// ç±»å‹â€œnumberâ€çš„å±æ€§â€œpropAâ€ä¸èƒ½èµ‹ç»™â€œstringâ€ç´¢å¼•ç±»å‹â€œbooleanâ€ã€‚
	propA: number;
	[key: string]: boolean;
}
```

è¿™é‡Œçš„ç¬¦åˆå³æŒ‡å­ç±»å‹ï¼Œå› æ­¤è‡ªç„¶ä¹ŸåŒ…æ‹¬è”åˆç±»å‹ï¼š    

```ts
interface StringOrBooleanTypes {
	propA: number;
	propB: boolean;
	[key: string]: number | boolean;
}
```

ç´¢å¼•ç­¾åç±»å‹çš„ä¸€ä¸ªå¸¸è§åœºæ™¯æ˜¯åœ¨é‡æ„ JavaScript ä»£ç æ—¶ï¼Œä¸ºå†…éƒ¨å±æ€§è¾ƒå¤šçš„å¯¹è±¡å£°æ˜ä¸€ä¸ª any çš„ç´¢å¼•ç­¾åç±»å‹ï¼Œä»¥æ­¤æ¥æš‚æ—¶æ”¯æŒå¯¹ç±»å‹æœªæ˜ç¡®å±æ€§çš„è®¿é—®ï¼Œå¹¶åœ¨åç»­ä¸€ç‚¹ç‚¹è¡¥å…¨ç±»å‹ï¼š   

```ts
interface AnyTypeHere {
	[key: string]: any;
}

const foo: AnyTypeHere['wangxiaobai'] = 'any value';
```

##### ç´¢å¼•ç±»å‹æŸ¥è¯¢  

ç´¢å¼•ç±»å‹æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯ keyof æ“ä½œç¬¦ã€‚å®ƒå¯ä»¥å°†å¯¹è±¡ä¸­çš„æ‰€æœ‰é”®è½¬æ¢ä¸ºå¯¹åº”å­—é¢é‡ç±»å‹ï¼Œç„¶åå†ç»„åˆæˆè”åˆç±»å‹ã€‚   

```ts
interface Foo {
  wangxiaobai: 1,
  18: 2
}

type FooKeys = keyof Foo; // "wangxiaobai" | '18'
```

##### ç´¢å¼•ç±»å‹è®¿é—®

åœ¨ Typescript ä¸­å¯ä»¥é€šè¿‡ç±»ä¼¼ obj[expression] çš„æ–¹å¼æ¥åŠ¨æ€è®¿é—®ä¸€ä¸ªå¯¹è±¡å±æ€§ï¼Œåªä¸è¿‡è¿™é‡Œçš„ expression è¦æ¢æˆç±»å‹ã€‚   

```ts
interface NumberRecord {
  [key: string]: number;
}

type PropType = NumberRecord[string]; // number
```

æ›´ç›´è§‚çš„ä¾‹å­æ˜¯é€šè¿‡å­—é¢é‡ç±»å‹æ¥è¿›è¡Œç´¢å¼•ç±»å‹è®¿é—®ï¼š   

```ts
interface Foo {
  propA: number;
  propB: boolean;
}

type PropAType = Foo['propA']; // number
type PropBType = Foo['propB']; // boolean
```

è¿™é‡Œçš„ 'propA' å’Œ 'propB' éƒ½æ˜¯å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª JavaScript å­—ç¬¦ä¸²å€¼ã€‚ç´¢å¼•ç±»å‹æŸ¥è¯¢çš„æœ¬è´¨å…¶å®å°±æ˜¯ï¼Œé€šè¿‡é”®çš„å­—é¢é‡ç±»å‹ï¼ˆ'propA'ï¼‰è®¿é—®è¿™ä¸ªé”®å¯¹åº”çš„é”®å€¼ç±»å‹ï¼ˆnumberï¼‰ã€‚     

```ts
interface Foo {
  propA: number;
  propB: boolean;
  propC: string;
}

type PropTypeUnion = Foo[keyof Foo]; // string | number | boolean
```

ä½¿ç”¨å­—é¢é‡è”åˆç±»å‹è¿›è¡Œç´¢å¼•ç±»å‹è®¿é—®æ—¶ï¼Œå…¶ç»“æœå°±æ˜¯å°†è”åˆç±»å‹æ¯ä¸ªåˆ†æ”¯å¯¹åº”çš„ç±»å‹è¿›è¡Œè®¿é—®åçš„ç»“æœï¼Œé‡æ–°ç»„è£…æˆè”åˆç±»å‹ã€‚   

#### æ˜ å°„ç±»å‹

æ˜ å°„ç±»å‹çš„ä¸»è¦ä½œç”¨å³æ˜¯åŸºäºé”®åæ˜ å°„åˆ°é”®å€¼ç±»å‹ã€‚   

```ts
type Stringify<T> = {
  [K in keyof T]: string;
};
```

è¿™ä¸ªå·¥å…·ç±»å‹ä¼šæ¥å—ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨ keyof è·å¾—è¿™ä¸ªå¯¹è±¡ç±»å‹çš„é”®åç»„æˆå­—é¢é‡è”åˆç±»å‹ï¼Œç„¶åé€šè¿‡æ˜ å°„ç±»å‹ï¼ˆå³è¿™é‡Œçš„ in å…³é”®å­—ï¼‰å°†è¿™ä¸ªè”åˆç±»å‹çš„æ¯ä¸€ä¸ªæˆå‘˜æ˜ å°„å‡ºæ¥ï¼Œå¹¶å°†å…¶é”®å€¼ç±»å‹è®¾ç½®ä¸º stringã€‚   

```ts
interface Foo {
  prop1: string;
  prop2: number;
  prop3: boolean;
  prop4: () => void;
}

type StringifiedFoo = Stringify<Foo>;

// ç­‰ä»·äº
interface StringifiedFoo {
  prop1: string;
  prop2: string;
  prop3: string;
  prop4: string;
}
```

é”®å€¼ç±»å‹ä¹Ÿèƒ½æ‹¿åˆ°ï¼š  

```ts
type Clone<T> = {
  [K in keyof T]: T[K];
};
```

è¿™é‡Œçš„ T[K] å…¶å®å°±æ˜¯ä¸Šé¢è¯´åˆ°çš„ç´¢å¼•ç±»å‹è®¿é—®ï¼Œä½¿ç”¨é”®çš„å­—é¢é‡ç±»å‹è®¿é—®åˆ°äº†é”®å€¼çš„ç±»å‹ï¼Œè¿™é‡Œå°±ç›¸å½“äºå…‹éš†äº†ä¸€ä¸ªæ¥å£ã€‚   

è¿™é‡Œåªæœ‰ K in å±äºæ˜ å°„ç±»å‹çš„è¯­æ³•ï¼Œkeyof T å±äº keyof æ“ä½œç¬¦ï¼Œ[K in keyof T] çš„ [] å±äºç´¢å¼•ç­¾åç±»å‹ï¼ŒT[K] å±äºç´¢å¼•ç±»å‹è®¿é—®ã€‚  

### ç±»å‹å®‰å…¨  

#### ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ï¼štypeof 

TypeScript æ–°å¢äº†ç”¨äºç±»å‹æŸ¥è¯¢çš„ typeof ï¼Œå³ Type Query Operatorï¼Œè¿™ä¸ª typeof è¿”å›çš„æ˜¯ä¸€ä¸ªç±»å‹ï¼š   

```ts
const str = 'wangxiaobai';

const obj = { name: 'wangxiaobai' };

const nullVar = null;
const undefinedVar = undefined;

const func = (input: string) => {
  return input.length > 10;
}

type Str = typeof str; // "wangxiaobai"
type Obj = typeof obj; // { name: string; }
type Null = typeof nullVar; // null
type Undefined = typeof undefined; // undefined
type Func = typeof func; // (input: string) => boolean
```

å¯ä»¥ç›´æ¥åœ¨ç±»å‹æ ‡æ³¨ä¸­ä½¿ç”¨ typeofï¼Œä¹Ÿå¯ä»¥åœ¨å·¥å…·ç±»å‹ä¸­ä½¿ç”¨ typeofã€‚   

```ts
const func = (input: string) => {
  return input.length > 10;
}

const func2: typeof func = (name: string) => {
  return name === 'wangxiaobai'
}
```

å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œtypeof è¿”å›çš„ç±»å‹å°±æ˜¯å½“ä½ æŠŠé¼ æ ‡æ‚¬æµ®åœ¨å˜é‡åä¸Šæ—¶å‡ºç°çš„æ¨å¯¼åçš„ç±»å‹ï¼Œå¹¶ä¸”æ˜¯æœ€çª„çš„æ¨å¯¼ç¨‹åº¦ï¼ˆå³åˆ°å­—é¢é‡ç±»å‹çš„çº§åˆ«ï¼‰ã€‚   

ä¸ºäº†æ›´å¥½åœ°é¿å…è¿™ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯éš”ç¦»ç±»å‹å±‚å’Œé€»è¾‘å±‚ï¼Œç±»å‹æŸ¥è¯¢æ“ä½œç¬¦åæ˜¯ä¸å…è®¸ä½¿ç”¨è¡¨è¾¾å¼çš„ï¼š    

```ts
const isInputValid = (input: string) => {
  return input.length > 10;
}

// ä¸å…è®¸è¡¨è¾¾å¼
let isValid: typeof isInputValid('wangxiaobai');

```

#### ç±»å‹å®ˆå«

TypeScript æä¾›äº†éå¸¸å¼ºå¤§çš„ç±»å‹æ¨å¯¼èƒ½åŠ›ï¼Œå®ƒä¼šéšç€ä½ çš„ä»£ç é€»è¾‘ä¸æ–­å°è¯•æ”¶çª„ç±»å‹ï¼Œè¿™ä¸€èƒ½åŠ›ç§°ä¹‹ä¸ºç±»å‹çš„æ§åˆ¶æµåˆ†æï¼ˆä¹Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºç±»å‹æ¨å¯¼ï¼‰ã€‚    

```ts
function foo (input: string | number) {
  if(typeof input === 'string') {}
  if(typeof input === 'number') {}
  // ...
}
```

åœ¨ç±»å‹æ§åˆ¶æµåˆ†æä¸‹ï¼Œæ¯æµè¿‡ä¸€ä¸ª if åˆ†æ”¯ï¼Œåç»­è”åˆç±»å‹çš„åˆ†æ”¯å°±å°‘äº†ä¸€ä¸ªï¼Œå› ä¸ºè¿™ä¸ªç±»å‹å·²ç»åœ¨è¿™ä¸ªåˆ†æ”¯å¤„ç†è¿‡äº†ï¼Œä¸ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªåˆ†æ”¯ï¼š    

```ts
declare const strOrNumOrBool: string | number | boolean;

if (typeof strOrNumOrBool === 'string') {
  // ä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼
  strOrNumOrBool.charAt(1);
} else if (typeof strOrNumOrBool === 'number') {
  // ä¸€å®šæ˜¯æ•°å­—ï¼
  strOrNumOrBool.toFixed();
} else if (typeof strOrNumOrBool === 'boolean') {
  // ä¸€å®šæ˜¯å¸ƒå°”å€¼ï¼
  strOrNumOrBool === true;
} else {
  // è¦æ˜¯èµ°åˆ°è¿™é‡Œå°±è¯´æ˜æœ‰é—®é¢˜ï¼
  const _exhaustiveCheck: never = strOrNumOrBool;
  throw new Error(`Unknown input type: ${_exhaustiveCheck}`);
}
```

è¿™é‡Œå®é™…ä¸Šé€šè¿‡ if æ¡ä»¶ä¸­çš„è¡¨è¾¾å¼è¿›è¡Œäº†ç±»å‹ä¿æŠ¤ï¼Œå³å‘ŠçŸ¥äº†æµè¿‡è¿™é‡Œçš„åˆ†æç¨‹åºæ¯ä¸ª if è¯­å¥ä»£ç å—ä¸­å˜é‡ä¼šæ˜¯ä½•ç±»å‹ã€‚   

è¿™æ˜¯ç¼–ç¨‹è¯­è¨€ç±»å‹èƒ½åŠ›ä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ï¼šä¸å®é™…é€»è¾‘ç´§å¯†å…³è”çš„ç±»å‹ï¼Œå†åè¿‡æ¥è®©ç±»å‹ä¸ºé€»è¾‘ä¿é©¾æŠ¤èˆªã€‚  

å¦‚æœ if æ¡ä»¶ä¸­çš„è¡¨è¾¾å¼è¢«æå–å‡ºæ¥äº†ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ    

```ts
function isString(input: unknown): boolean {
  return typeof input === 'string';
}

function foo(input: string | number) {
  if (isString(input)) {
    // ç±»å‹â€œstring | numberâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œreplaceâ€ã€‚
    (input).replace('wangxiaobai', 'wangxiaobai18')
  }
  if (typeof input === 'number') { }
  // ...
}
```

å¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œåªæ˜¯æŠŠé€»è¾‘æå–åˆ°äº†å¤–é¢è€Œå·²ï¼Œå¦‚æœ isString è¿”å›äº† trueï¼Œé‚£ input è‚¯å®šä¹Ÿæ˜¯ string ç±»å‹å•Šï¼Ÿ    

æƒ³è±¡ç±»å‹æ§åˆ¶æµåˆ†æï¼Œåˆšæµè¿› if (isString(input)) å°±æˆ›ç„¶è€Œæ­¢äº†ã€‚å› ä¸º isString è¿™ä¸ªå‡½æ•°åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œå†…éƒ¨çš„åˆ¤æ–­é€»è¾‘å¹¶ä¸åœ¨å‡½æ•° foo ä¸­ã€‚è¿™é‡Œçš„ç±»å‹æ§åˆ¶æµåˆ†æåšä¸åˆ°è·¨å‡½æ•°ä¸Šä¸‹æ–‡æ¥è¿›è¡Œç±»å‹çš„ä¿¡æ¯æ”¶é›†ã€‚     

##### åŸºäº is çš„ç±»å‹ä¿æŠ¤

å°†åˆ¤æ–­é€»è¾‘å°è£…èµ·æ¥æå–åˆ°å‡½æ•°å¤–éƒ¨è¿›è¡Œå¤ç”¨å¾ˆå¸¸è§ã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç±»å‹æ§åˆ¶æµåˆ†æçš„èƒ½åŠ›ä¸è¶³ï¼Œ TypeScript å¼•å…¥äº† is å…³é”®å­—æ¥æ˜¾å¼åœ°æä¾›ç±»å‹ä¿¡æ¯ï¼š    

```ts
function isString(input: unknown): input is string {
  return typeof input === 'string';
}

function foo(input: string | number) {
  if (isString(input)) {
    // æ­£ç¡®äº†
    (input).replace('wangxiaobai', 'wangxiaobai18')
  }
  if (typeof input === 'number') { }
  // ...
}
```

isString å‡½æ•°ç§°ä¸ºç±»å‹å®ˆå«ï¼Œåœ¨å®ƒçš„è¿”å›å€¼ä¸­ä¸å†ä½¿ç”¨ boolean ä½œä¸ºç±»å‹æ ‡æ³¨ï¼Œè€Œæ˜¯ä½¿ç”¨ input is string è¿™ä¹ˆä¸ªå¥‡æ€ªçš„æ­é…ï¼š   

* input: å‡½æ•°çš„æŸä¸ªå‚æ•°ã€‚   
* is string: å³ is å…³é”®å­— + é¢„æœŸç±»å‹ï¼Œå³å¦‚æœè¿™ä¸ªå‡½æ•°æˆåŠŸè¿”å›ä¸º trueï¼Œé‚£ä¹ˆ is å…³é”®å­—å‰è¿™ä¸ªå…¥å‚çš„ç±»å‹ï¼Œå°±ä¼šè¢«è¿™ä¸ªç±»å‹å®ˆå«è°ƒç”¨æ–¹åç»­çš„ç±»å‹æ§åˆ¶æµåˆ†ææ”¶é›†åˆ°ã€‚   

ä½†ç±»å‹å®ˆå«å‡½æ•°ä¸­å¹¶ä¸ä¼šå¯¹åˆ¤æ–­é€»è¾‘å’Œå®é™…ç±»å‹çš„å…³è”è¿›è¡Œæ£€æŸ¥ï¼š   

```ts
function isString(input: unknown): input is number {
  return typeof input === 'string';
}

function foo(input: string | number) {
  if (isString(input)) {
    // æŠ¥é”™ï¼Œåœ¨è¿™é‡Œå˜æˆäº† number ç±»å‹
    (input).replace('wangxiaobai', 'wangxiaobai18')
  }
  if (typeof input === 'number') { }
  // ...
}
```

ç±»å‹å®ˆå«æœ‰äº›ç±»ä¼¼ç±»å‹æ–­è¨€ï¼Œä½†ç±»å‹å®ˆå«æ›´å®½å®¹ï¼Œä¹Ÿæ›´ä¿¡ä»»ä½ ä¸€äº›ã€‚ä½ æŒ‡å®šä»€ä¹ˆç±»å‹ï¼Œå®ƒå°±æ˜¯ä»€ä¹ˆç±»å‹ã€‚   

é™¤äº†ä½¿ç”¨ç®€å•çš„åŸå§‹ç±»å‹ä»¥å¤–ï¼Œè¿˜å¯ä»¥åœ¨ç±»å‹å®ˆå«ä¸­ä½¿ç”¨å¯¹è±¡ç±»å‹ã€è”åˆç±»å‹ç­‰ï¼š        

```ts
export type Falsy = false | '' | 0 | null | undefined;

export const isFalsy = (val: unknown): val is Falsy => !val;

// ä¸åŒ…æ‹¬ä¸å¸¸ç”¨çš„ symbol å’Œ bigint
export type Primitive = string | number | boolean | undefined;

export const isPrimitive = (val: unknown): val is Primitive => ['string', 'number', 'boolean' , 'undefined'].includes(typeof val);
```

##### åŸºäº in ä¸ instanceof çš„ç±»å‹ä¿æŠ¤

Typescript ä¸­çš„ in æ“ä½œç¬¦ï¼Œå¯ä»¥é€šè¿‡ key in object çš„æ–¹å¼æ¥åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨äº object æˆ–å…¶åŸå‹é“¾ä¸Šï¼ˆè¿”å› true è¯´æ˜å­˜åœ¨ï¼‰ã€‚    

```ts
interface Foo {
  foo: string;
  fooOnly: boolean;
  shared: number;
}

interface Bar {
  bar: string;
  barOnly: boolean;
  shared: number;
}

function handle(input: Foo | Bar) {
  if ('foo' in input) {
    input.fooOnly;
  } else {
    input.barOnly;
  }
}
```

è¿™é‡Œçš„ foo / barã€fooOnly / barOnlyã€shared å±æ€§ä»¬å…¶å®æœ‰ç€ä¸åŒçš„æ„ä¹‰ã€‚   

ä½¿ç”¨ foo å’Œ bar æ¥åŒºåˆ† input è”åˆç±»å‹ï¼Œç„¶åå°±å¯ä»¥åœ¨å¯¹åº”çš„åˆ†æ”¯ä»£ç å—ä¸­æ­£ç¡®è®¿é—®åˆ° Foo å’Œ Bar ç‹¬æœ‰çš„ç±»å‹ fooOnly / barOnlyã€‚   

ä½†æ˜¯ï¼Œå¦‚æœç”¨ shared æ¥åŒºåˆ†ï¼Œå°±ä¼šå‘ç°åœ¨åˆ†æ”¯ä»£ç å—ä¸­ input ä»ç„¶æ˜¯åˆå§‹çš„è”åˆç±»å‹ï¼š   

```ts
function handle(input: Foo | Bar) {
  if ('shared' in input) {
    // ç±»å‹â€œFoo | Barâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œfooOnlyâ€ã€‚ç±»å‹â€œBarâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œfooOnlyâ€ã€‚
    input.fooOnly;
  } else {
    // ç±»å‹â€œneverâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œbarOnlyâ€ã€‚
    input.barOnly;
  }
}
```

Foo ä¸ Bar éƒ½æ»¡è¶³ 'shared' in input è¿™ä¸ªæ¡ä»¶ã€‚å› æ­¤åœ¨ if åˆ†æ”¯ä¸­ï¼Œ Foo ä¸ Bar éƒ½ä¼šè¢«ä¿ç•™ï¼Œé‚£åœ¨ else åˆ†æ”¯ä¸­å°±åªå‰©ä¸‹ never ç±»å‹ã€‚    

å¯è¾¨è¯†å±æ€§å¯ä»¥æ˜¯ç»“æ„å±‚é¢çš„ï¼Œæ¯”å¦‚ç»“æ„ A çš„å±æ€§ prop æ˜¯æ•°ç»„ï¼Œè€Œç»“æ„ B çš„å±æ€§ prop æ˜¯å¯¹è±¡ï¼Œæˆ–è€…ç»“æ„ A ä¸­å­˜åœ¨å±æ€§ prop è€Œç»“æ„ B ä¸­ä¸å­˜åœ¨ã€‚    

å®ƒç”šè‡³å¯ä»¥æ˜¯å…±åŒå±æ€§çš„å­—é¢é‡ç±»å‹å·®å¼‚ï¼š

```ts
function ensureArray(input: number | number[]): number[] {
  if (Array.isArray(input)) {
    return input;
  } else {
    return [input];
  }
}

interface Foo {
  kind: 'foo';
  diffType: string;
  fooOnly: boolean;
  shared: number;
}

interface Bar {
  kind: 'bar';
  diffType: number;
  barOnly: boolean;
  shared: number;
}

function handle1(input: Foo | Bar) {
  if (input.kind === 'foo') {
    input.fooOnly;
  } else {
    input.barOnly;
  }
}
```

å¯¹äºåŒåä½†ä¸åŒç±»å‹çš„å±æ€§ï¼Œéœ€è¦ä½¿ç”¨å­—é¢é‡ç±»å‹çš„åŒºåˆ†ï¼Œå¹¶ä¸èƒ½ä½¿ç”¨ç®€å•çš„ typeofï¼š    

```ts
function handle2(input: Foo | Bar) {
  // æŠ¥é”™ï¼Œå¹¶æ²¡æœ‰èµ·åˆ°åŒºåˆ†çš„ä½œç”¨ï¼Œåœ¨ä¸¤ä¸ªä»£ç å—ä¸­éƒ½æ˜¯ Foo | Bar
  if (typeof input.diffType === 'string') {
    input.fooOnly;
  } else {
    input.barOnly;
  }
}
```

Typescript ä¸­çš„ instanceofï¼Œåˆ¤æ–­çš„æ˜¯åŸå‹çº§åˆ«çš„å…³ç³»ï¼Œå¦‚ foo instanceof Base ä¼šæ²¿ç€ foo çš„åŸå‹é“¾æŸ¥æ‰¾ Base.prototype æ˜¯å¦å­˜åœ¨å…¶ä¸Šã€‚   

```ts
class FooBase {}

class BarBase {}

class Foo extends FooBase {
  fooOnly() {}
}
class Bar extends BarBase {
  barOnly() {}
}

function handle(input: Foo | Bar) {
  if (input instanceof FooBase) {
    input.fooOnly();
  } else {
    input.barOnly();
  }
}
```

#### ç±»å‹æ–­è¨€å®ˆå«

æ–­è¨€å®ˆå«å’Œç±»å‹å®ˆå«æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºï¼Œåœ¨åˆ¤æ–­æ¡ä»¶ä¸é€šè¿‡æ—¶ï¼Œæ–­è¨€å®ˆå«éœ€è¦æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œç±»å‹å®ˆå«åªéœ€è¦å‰”é™¤æ‰é¢„æœŸçš„ç±»å‹ã€‚    

è¿™é‡Œçš„æŠ›å‡ºé”™è¯¯å¯èƒ½è®©ä½ æƒ³åˆ°äº† never ç±»å‹ï¼Œä½†å®é™…æƒ…å†µè¦æ›´å¤æ‚ä¸€äº›ï¼Œæ–­è¨€å®ˆå«å¹¶ä¸ä¼šå§‹ç»ˆéƒ½æŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥å®ƒçš„è¿”å›å€¼ç±»å‹å¹¶ä¸èƒ½ç®€å•åœ°ä½¿ç”¨ never ç±»å‹ã€‚    

ä¸ºæ­¤ï¼ŒTypeScript 3.7 ç‰ˆæœ¬å¼•å…¥äº† asserts å…³é”®å­—æ¥è¿›è¡Œæ–­è¨€åœºæ™¯ä¸‹çš„ç±»å‹å®ˆå«ï¼š   

```ts
let name: any = 'wangxiaobai';

function assertIsNumber(val: any): asserts val is number {
  if (typeof val !== 'number') {
    throw new Error('Not a number!');
  }
}

assertIsNumber(name);

// number ç±»å‹ï¼
name.toFixed();
```

è¿™ç§æƒ…å†µä¸‹æ— éœ€å†ä¸ºæ–­è¨€å®ˆå«ä¼ å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œæ˜¯å¯ä»¥å°†è¿™ä¸ªåˆ¤æ–­ç”¨çš„è¡¨è¾¾å¼æ”¾è¿›æ–­è¨€å®ˆå«çš„å†…éƒ¨ï¼Œæ¥è·å¾—æ›´ç‹¬ç«‹åœ°ä»£ç é€»è¾‘ã€‚   

## æ³›å‹  

TypeScript æ˜¯ä¸€é—¨å¯¹ç±»å‹è¿›è¡Œç¼–ç¨‹çš„è¯­è¨€ï¼Œæ³›å‹å°±æ˜¯è¿™é—¨è¯­è¨€é‡Œçš„ï¼ˆå‡½æ•°ï¼‰å‚æ•°ã€‚  

### ç±»å‹åˆ«åä¸­çš„æ³›å‹  

ç±»å‹åˆ«åå¦‚æœå£°æ˜äº†æ³›å‹å‘ä½ï¼Œå®ƒå°±ç­‰ä»·äºä¸€ä¸ªæ¥å—å‚æ•°çš„å‡½æ•°ï¼š  

```ts
type Factory<T> = T | number | string;
```

è¿™ä¸ªç±»å‹åˆ«åçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒT å°±æ˜¯å®ƒçš„å˜é‡ï¼Œè¿”å›å€¼åˆ™æ˜¯ä¸€ä¸ªåŒ…å« T çš„è”åˆç±»å‹ã€‚   

ç±»å‹åˆ«åä¸­çš„æ³›å‹å¤§å¤šæ˜¯ç”¨æ¥è¿›è¡Œå·¥å…·ç±»å‹å°è£…ã€‚   

```ts
type Stringify<T> = {
  [K in keyof T]: string;
};

type Clone<T> = {
  [K in keyof T]: T[K];
};
```

Stringify ä¼šå°†ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ‰€æœ‰å±æ€§ç±»å‹ç½®ä¸º string ï¼Œè€Œ Clone åˆ™ä¼šè¿›è¡Œç±»å‹çš„å®Œå…¨å¤åˆ¶ã€‚   

```ts
type Partial<T> = {
    [P in keyof T]?: T[P];
};
```

å·¥å…·ç±»å‹ Partial ä¼šå°†ä¼ å…¥çš„å¯¹è±¡ç±»å‹å¤åˆ¶ä¸€ä»½ï¼Œä½†ä¼šé¢å¤–æ·»åŠ ä¸€ä¸ª?ï¼Œå®ƒä¼šå°†æ‰€æœ‰å±æ€§è½¬å˜ä¸ºå¯é€‰å±æ€§ã€‚  

```ts
interface IFoo {
  prop1: string;
  prop2: number;
  prop3: boolean;
  prop4: () => void;
}

type PartialIFoo = Partial<IFoo>;

// ç­‰ä»·äº
interface PartialIFoo {
  prop1?: string;
  prop2?: number;
  prop3?: boolean;
  prop4?: () => void;
}
```

ç±»å‹åˆ«åä¸æ³›å‹çš„ç»“åˆä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·ï¼šæ¡ä»¶ç±»å‹ã€‚   

```ts
type IsEqual<T> = T extends true ? 1 : 2;

type A = IsEqual<true>; // 1
type B = IsEqual<false>; // 2
type C = IsEqual<'wangxiaobai'>; // 2
```

åœ¨æ¡ä»¶ç±»å‹å‚ä¸çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸æ³›å‹ä¼šè¢«ä½œä¸ºæ¡ä»¶ç±»å‹ä¸­çš„åˆ¤æ–­æ¡ä»¶ï¼ˆT extends Conditionï¼Œæˆ–è€… Type extends Tï¼‰ä»¥åŠè¿”å›å€¼ï¼ˆå³ : ä¸¤ç«¯çš„å€¼ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯ç­›é€‰ç±»å‹éœ€è¦ä¾èµ–çš„èƒ½åŠ›ä¹‹ä¸€ã€‚   

#### æ³›å‹çº¦æŸä¸é»˜è®¤å€¼

æ³›å‹åŒæ ·æœ‰ç€é»˜è®¤å€¼çš„è®¾å®šã€‚  

```ts
type Factory<T = boolean> = T | number | string;
```

åœ¨ä½ è°ƒç”¨æ—¶å¯ä»¥ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œé»˜è®¤ä¼šä½¿ç”¨å£°æ˜çš„é»˜è®¤å€¼æ¥å¡«å……ã€‚   

```ts
const foo: Factory = false;
```

æ³›å‹è¿˜èƒ½åšåˆ°å‡½æ•°å‚æ•°åšä¸åˆ°çš„äº‹ï¼šæ³›å‹çº¦æŸï¼Œå¯ä»¥è¦æ±‚ä¼ å…¥è¿™ä¸ªå·¥å…·ç±»å‹çš„æ³›å‹å¿…é¡»ç¬¦åˆæŸäº›æ¡ä»¶ï¼Œå¦åˆ™å°±æ‹’ç»è¿›è¡Œåé¢çš„é€»è¾‘ã€‚     

ä½¿ç”¨ extends å…³é”®å­—æ¥çº¦æŸä¼ å…¥çš„æ³›å‹å‚æ•°å¿…é¡»ç¬¦åˆè¦æ±‚ã€‚å…³äº extendsï¼ŒA extends B æ„å‘³ç€ A æ˜¯ B çš„å­ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ A æ¯” B çš„ç±»å‹æ›´ç²¾ç¡®ï¼Œæˆ–è€…è¯´æ›´å¤æ‚ã€‚   

* æ›´ç²¾ç¡®ï¼šå¦‚å­—é¢é‡ç±»å‹æ˜¯å¯¹åº”åŸå§‹ç±»å‹çš„å­ç±»å‹ï¼Œå³ 'wangxiaobai' extends stringï¼Œ18 extends number æˆç«‹ã€‚ç±»ä¼¼çš„ï¼Œè”åˆç±»å‹å­é›†å‡ä¸ºè”åˆç±»å‹çš„å­ç±»å‹ï¼Œå³ 1ã€ 1 | 2 æ˜¯ 1 | 2 | 3 | 4 çš„å­ç±»å‹ã€‚   
* æ›´å¤æ‚ï¼Œå¦‚ { name: string } æ˜¯ {} çš„å­ç±»å‹ï¼Œå› ä¸ºåœ¨ {} çš„åŸºç¡€ä¸Šå¢åŠ äº†é¢å¤–çš„ç±»å‹ï¼ŒåŸºç±»ä¸æ´¾ç”Ÿç±»ï¼ˆçˆ¶ç±»ä¸å­ç±»ï¼‰åŒç†ã€‚  

```ts
type ResStatus<ResCode extends number> = ResCode extends 10000 | 10001 | 10002
  ? 'success'
  : 'failure';
```

è¿™ä¸ªä¾‹å­ä¼šæ ¹æ®ä¼ å…¥çš„è¯·æ±‚ç åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œè¿™æ„å‘³ç€å®ƒåªèƒ½å¤„ç†æ•°å­—å­—é¢é‡ç±»å‹çš„å‚æ•°ï¼Œå› æ­¤è¿™é‡Œé€šè¿‡ extends number æ¥æ ‡æ˜å…¶ç±»å‹çº¦æŸï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªä¸åˆæ³•çš„å€¼ï¼Œå°±ä¼šå‡ºç°ç±»å‹é”™è¯¯ï¼š  

```ts
type ResStatus<ResCode extends number> = ResCode extends 10000 | 10001 | 10002
  ? 'success'
  : 'failure';


type Res1 = ResStatus<10000>; // "success"
type Res2 = ResStatus<20000>; // "failure"

type Res3 = ResStatus<'10000'>; // ç±»å‹â€œstringâ€ä¸æ»¡è¶³çº¦æŸâ€œnumberâ€ã€‚
```

å¦‚æœæƒ³è®©è¿™ä¸ªç±»å‹åˆ«åå¯ä»¥æ— éœ€æ˜¾å¼ä¼ å…¥æ³›å‹å‚æ•°ä¹Ÿèƒ½è°ƒç”¨ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹æ˜¯æˆåŠŸåœ°ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ºè¿™ä¸ªæ³›å‹å‚æ•°å£°æ˜ä¸€ä¸ªé»˜è®¤å€¼ï¼š  

```ts
type ResStatus<ResCode extends number = 10000> = ResCode extends 10000 | 10001 | 10002
  ? 'success'
  : 'failure';

type Res4 = ResStatus; // "success"
```

#### å¤šæ³›å‹å…³è”

ä¸ä»…å¯ä»¥åŒæ—¶ä¼ å…¥å¤šä¸ªæ³›å‹å‚æ•°ï¼Œè¿˜å¯ä»¥è®©è¿™å‡ ä¸ªæ³›å‹å‚æ•°ä¹‹é—´ä¹Ÿå­˜åœ¨è”ç³»ã€‚   

```ts
type Conditional<Type, Condition, TruthyResult, FalsyResult> =
  Type extends Condition ? TruthyResult : FalsyResult;

//  "passed!"
type Result1 = Conditional<'wangxiaobai', string, 'passed!', 'rejected!'>;

// "rejected!"
type Result2 = Conditional<'wangxiaobai', boolean, 'passed!', 'rejected!'>;
```

å¤šæ³›å‹å‚æ•°å…¶å®å°±åƒæ¥å—æ›´å¤šå‚æ•°çš„å‡½æ•°ï¼Œå…¶å†…éƒ¨çš„è¿è¡Œé€»è¾‘ï¼ˆç±»å‹æ“ä½œï¼‰ä¼šæ›´åŠ æŠ½è±¡ï¼Œè¡¨ç°åœ¨å‚æ•°ï¼ˆæ³›å‹å‚æ•°ï¼‰éœ€è¦è¿›è¡Œçš„é€»è¾‘è¿ç®—ï¼ˆç±»å‹æ“ä½œï¼‰ä¼šæ›´åŠ å¤æ‚ã€‚   

å¤šä¸ªæ³›å‹å‚æ•°ä¹‹é—´çš„ä¾èµ–ï¼Œå…¶å®æŒ‡çš„å³æ˜¯åœ¨åç»­æ³›å‹å‚æ•°ä¸­ï¼Œä½¿ç”¨å‰é¢çš„æ³›å‹å‚æ•°ä½œä¸ºçº¦æŸæˆ–é»˜è®¤å€¼ï¼š   

```ts
type ProcessInput<
  Input,
  SecondInput extends Input = Input,
  ThirdInput extends Input = SecondInput
> = number;
```

* è¿™ä¸ªå·¥å…·ç±»å‹æ¥å— 1-3 ä¸ªæ³›å‹å‚æ•°ã€‚   
* ç¬¬äºŒã€ä¸‰ä¸ªæ³›å‹å‚æ•°çš„ç±»å‹éœ€è¦æ˜¯é¦–ä¸ªæ³›å‹å‚æ•°çš„å­ç±»å‹ã€‚   
* å½“åªä¼ å…¥ä¸€ä¸ªæ³›å‹å‚æ•°æ—¶ï¼Œå…¶ç¬¬äºŒä¸ªæ³›å‹å‚æ•°ä¼šè¢«èµ‹å€¼ä¸ºæ­¤å‚æ•°ï¼Œè€Œç¬¬ä¸‰ä¸ªåˆ™ä¼šèµ‹å€¼ä¸ºç¬¬äºŒä¸ªæ³›å‹å‚æ•°ï¼Œç›¸å½“äºå‡ä½¿ç”¨äº†è¿™å”¯ä¸€ä¼ å…¥çš„æ³›å‹å‚æ•°ã€‚   
* å½“ä¼ å…¥ä¸¤ä¸ªæ³›å‹å‚æ•°æ—¶ï¼Œç¬¬ä¸‰ä¸ªæ³›å‹å‚æ•°ä¼šé»˜è®¤èµ‹å€¼ä¸ºç¬¬äºŒä¸ªæ³›å‹å‚æ•°çš„å€¼ã€‚   

### å¯¹è±¡ç±»å‹ä¸­çš„æ³›å‹

```ts
interface IRes<TData = unknown> {
  code: number;
  error?: string;
  data: TData;
}
```

è¿™ä¸ªæ¥å£æè¿°äº†ä¸€ä¸ªé€šç”¨çš„å“åº”ç±»å‹ç»“æ„ï¼Œé¢„ç•™å‡ºäº†å®é™…å“åº”æ•°æ®çš„æ³›å‹å‘ä½ï¼Œç„¶ååœ¨ä½ çš„è¯·æ±‚å‡½æ•°ä¸­å°±å¯ä»¥ä¼ å…¥ç‰¹å®šçš„å“åº”ç±»å‹äº†ï¼š  

```ts
interface IUserProfileRes {
  name: string;
  homepage: string;
  avatar: string;
}

function fetchUserProfile(): Promise<IRes<IUserProfileRes>> {}

type StatusSucceed = boolean;
function handleOperation(): Promise<IRes<StatusSucceed>> {}
```

æ³›å‹åµŒå¥—çš„åœºæ™¯ä¹Ÿéå¸¸å¸¸ç”¨ï¼Œæ¯”å¦‚å¯¹å­˜åœ¨åˆ†é¡µç»“æ„çš„æ•°æ®ï¼Œå¯ä»¥å°†å…¶åˆ†é¡µçš„å“åº”ç»“æ„æŠ½ç¦»å‡ºæ¥ï¼š   

```ts
interface IPaginationRes<TItem = unknown> {
  data: TItem[];
  page: number;
  totalCount: number;
  hasNextPage: boolean;
}

function fetchUserProfileList(): Promise<IRes<IPaginationRes<IUserProfileRes>>> {}
```

### å‡½æ•°ä¸­çš„æ³›å‹

å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥å—å¤šä¸ªç±»å‹çš„å‚æ•°å¹¶è¿›è¡Œå¯¹åº”å¤„ç†ï¼Œæ¯”å¦‚ï¼š   

* å¯¹äºå­—ç¬¦ä¸²ï¼Œè¿”å›éƒ¨åˆ†æˆªå–ã€‚     
* å¯¹äºæ•°å­—ï¼Œè¿”å›å®ƒçš„ n å€ã€‚    
* å¯¹äºå¯¹è±¡ï¼Œä¿®æ”¹å®ƒçš„å±æ€§å¹¶è¿”å›ã€‚    

è¿™ä¸ªæ—¶å€™è¦æ€ä¹ˆå¯¹å‡½æ•°è¿›è¡Œç±»å‹å£°æ˜ï¼Ÿæ˜¯ any å¤§æ³•å¥½ï¼Ÿ   

```ts
function handle(input: any): any {}
```

è¿˜æ˜¯ç”¨è”åˆç±»å‹æ¥åŒ…æ‹¬æ‰€æœ‰å¯èƒ½ç±»å‹ï¼Ÿ   

```ts
function handle(input: string | number | {}): string | number | {} {}
```

ç¬¬ä¸€ç§è‚¯å®šè¦ç›´æ¥ passï¼Œç¬¬äºŒç§è™½ç„¶éº»çƒ¦äº†ä¸€ç‚¹ï¼Œä½†ä¼¼ä¹å¯ä»¥æ»¡è¶³éœ€è¦ï¼Ÿ   

ä½†å¦‚æœçœŸçš„è°ƒç”¨ä¸€ä¸‹å°±çŸ¥é“ä¸åˆé€‚äº†ã€‚   

```ts
const shouldBeString = handle('wangxiaobai');
const shouldBeNumber = handle(18);
const shouldBeObject = handle({ name: 'wangxiaobai' });
```

è™½ç„¶çº¦æŸäº†å…¥å‚çš„ç±»å‹ï¼Œä½†è¿”å›å€¼çš„ç±»å‹å¹¶æ²¡æœ‰åƒé¢„æœŸçš„é‚£æ ·å’Œå…¥å‚å…³è”èµ·æ¥ï¼Œä¸Šé¢ä¸‰ä¸ªè°ƒç”¨ç»“æœçš„ç±»å‹ä»ç„¶æ˜¯ä¸€ä¸ªå®½æ³›çš„è”åˆç±»å‹ string | number | {}ã€‚    

éš¾é“è¦ç”¨é‡è½½ä¸€ä¸ªä¸ªå£°æ˜å¯èƒ½çš„å…³è”å…³ç³»ï¼Ÿ   

```ts
function handle(input: string): string
function handle(input: number): number
function handle(input: {}): {}
function handle(input: string | number | {}): string | number | {} { }
```

å¦‚æœå†å¤šä¸€äº›å¤æ‚çš„æƒ…å†µï¼Œåˆ«è¯´ä½ æ„¿ä¸æ„¿æ„è¡¥å……æ¯ä¸€ç§å…³è”äº†ï¼ŒåŒäº‹çœ‹åˆ°è¿™æ ·çš„ä»£ç éƒ½ä¼šè´¨ç–‘ä½ çš„æ°´å¹³ã€‚   

è¿™ä¸ªæ—¶å€™å°±è¯¥è¯·å‡ºæ³›å‹äº†ï¼š   

```ts
function handle<T>(input: T): T {}
```

ä¸ºå‡½æ•°å£°æ˜ä¸€ä¸ªæ³›å‹å‚æ•° Tï¼Œå¹¶å°†å‚æ•°çš„ç±»å‹ä¸è¿”å›å€¼ç±»å‹æŒ‡å‘è¿™ä¸ªæ³›å‹å‚æ•°ã€‚è¿™æ ·ï¼Œåœ¨è¿™ä¸ªå‡½æ•°æ¥æ”¶åˆ°å‚æ•°æ—¶ï¼ŒT ä¼šè‡ªåŠ¨åœ°è¢«å¡«å……ä¸ºè¿™ä¸ªå‚æ•°çš„ç±»å‹ã€‚   

è¿™ä¹Ÿå°±æ„å‘³ç€ä½ ä¸å†éœ€è¦é¢„å…ˆç¡®å®šå‚æ•°çš„å¯èƒ½ç±»å‹äº†ï¼Œè€Œåœ¨è¿”å›å€¼ä¸å‚æ•°ç±»å‹å…³è”çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³›å‹å‚æ•°æ¥è¿›è¡Œè¿ç®—ã€‚   

åœ¨åŸºäºå‚æ•°ç±»å‹è¿›è¡Œå¡«å……æ³›å‹æ—¶ï¼Œå…¶ç±»å‹ä¿¡æ¯ä¼šè¢«æ¨æ–­åˆ°å°½å¯èƒ½ç²¾ç¡®çš„ç¨‹åº¦ï¼Œå¦‚è¿™é‡Œä¼šæ¨å¯¼åˆ°å­—é¢é‡ç±»å‹è€Œä¸æ˜¯åŸºç¡€ç±»å‹ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç›´æ¥ä¼ å…¥ä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸ä¼šå†è¢«ä¿®æ”¹çš„ï¼Œå› æ­¤å¯ä»¥æ¨å¯¼åˆ°æœ€ç²¾ç¡®çš„ç¨‹åº¦ã€‚è€Œå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå˜é‡ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆåªä¼šä½¿ç”¨è¿™ä¸ªå˜é‡æ ‡æ³¨çš„ç±»å‹ï¼ˆåœ¨æ²¡æœ‰æ ‡æ³¨æ—¶ï¼Œä¼šä½¿ç”¨æ¨å¯¼å‡ºçš„ç±»å‹ï¼‰ã€‚    

```ts
function handle<T>(input: T): T {}

const author = 'wangxiaobai'; // ä½¿ç”¨ const å£°æ˜ï¼Œè¢«æ¨å¯¼ä¸º 'wangxiaobai'

let authorAge = 18; // ä½¿ç”¨ let å£°æ˜ï¼Œè¢«æ¨å¯¼ä¸º number

handle(author); // å¡«å……ä¸ºå­—é¢é‡ç±»å‹ 'wangxiaobai'
handle(authorAge); // å¡«å……ä¸ºåŸºç¡€ç±»å‹ number
```

ä½ ä¹Ÿå¯ä»¥å°†é¼ æ ‡æ‚¬æµ®åœ¨è¡¨è¾¾å¼ä¸Šï¼Œæ¥æŸ¥çœ‹å¡«å……çš„æ³›å‹ä¿¡æ¯ã€‚    

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```ts
function swap<T, U>([start, end]: [T, U]): [U, T] {
	return [end, start];
}

const swapped1 = swap(['wangxiaobai', 18]);
const swapped2 = swap([null, 18]);
const swapped3 = swap([{ name: 'wangxiaobai' }, {}]);
```

åœ¨è¿™é‡Œè¿”å›å€¼ç±»å‹å¯¹æ³›å‹å‚æ•°è¿›è¡Œäº†ä¸€äº›æ“ä½œï¼Œè€ŒåŒæ ·å¯ä»¥çœ‹åˆ°å…¶è°ƒç”¨ä¿¡æ¯ç¬¦åˆé¢„æœŸã€‚    

å‡½æ•°ä¸­çš„æ³›å‹åŒæ ·å­˜åœ¨çº¦æŸä¸é»˜è®¤å€¼ï¼Œæ¯”å¦‚ä¸Šé¢çš„ handle å‡½æ•°ï¼Œç°åœ¨å¸Œæœ›åšä¸€äº›ä»£ç æ‹†åˆ†ï¼Œä¸å†å¤„ç†å¯¹è±¡ç±»å‹çš„æƒ…å†µäº†ï¼š    

```ts
function handle<T extends string | number>(input: T): T {}
```

è€Œ swap å‡½æ•°ï¼Œç°åœ¨åªæƒ³å¤„ç†æ•°å­—å…ƒç»„çš„æƒ…å†µï¼š   

```ts
function swap<T extends number, U extends number>([start, end]: [T, U]): [U, T] {
	return [end, start];
}
```

è€Œå¤šæ³›å‹å…³è”ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ¯”å¦‚ lodash çš„ pick å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°é¦–å…ˆæ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæ¥å—ä¸€ä¸ªå¯¹è±¡å±æ€§åç»„æˆçš„æ•°ç»„ï¼Œå¹¶ä»è¿™ä¸ªå¯¹è±¡ä¸­æˆªå–é€‰æ‹©çš„å±æ€§éƒ¨åˆ†ï¼š   

```ts
const object = { 'a': 1, 'b': '2', 'c': 3 };

_.pick(object, ['a', 'c']);
// => { 'a': 1, 'c': 3 }
```

è¿™ä¸ªå‡½æ•°å¾ˆæ˜æ˜¾éœ€è¦åœ¨æ³›å‹å±‚é¢å£°æ˜å…³è”ï¼Œå³æ•°ç»„ä¸­çš„å…ƒç´ åªèƒ½æ¥è‡ªäºå¯¹è±¡çš„å±æ€§åï¼ˆç»„æˆçš„å­—é¢é‡è”åˆç±»å‹ï¼ï¼‰ï¼Œå› æ­¤å¯ä»¥è¿™ä¹ˆå†™ï¼ˆéƒ¨åˆ†ç®€åŒ–ï¼‰ï¼š   

```ts
pick<T extends object, U extends keyof T>(object: T, ...props: Array<U>): Pick<T, U>;
```

è¿™é‡Œ T å£°æ˜çº¦æŸä¸ºå¯¹è±¡ç±»å‹ï¼Œè€Œ U å£°æ˜çº¦æŸä¸º keyof Tã€‚åŒæ—¶å¯¹åº”çš„å…¶è¿”å›å€¼ç±»å‹ä¸­ä½¿ç”¨äº† Pick<T, U> è¿™ä¸€å·¥å…·ç±»å‹ï¼Œå®ƒä¸ pick å‡½æ•°çš„ä½œç”¨ä¸€è‡´ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„è¿›è¡Œè£å‰ªã€‚   

å‡½æ•°çš„æ³›å‹å‚æ•°ä¹Ÿä¼šè¢«å†…éƒ¨çš„é€»è¾‘æ¶ˆè´¹ï¼Œå¦‚ï¼š   

```ts
function handle<T>(payload: T): Promise<[T]> {
	return new Promise<[T]>((res, rej) => {
		res([payload]);
	});
}
```

ç®­å¤´å‡½æ•°çš„æ³›å‹ï¼Œå…¶ä¹¦å†™æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š    

```ts
const handle = <T>(input: T): T => {}
```

éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ tsx æ–‡ä»¶ä¸­æ³›å‹çš„å°–æ‹¬å·å¯èƒ½ä¼šé€ æˆæŠ¥é”™ï¼Œç¼–è¯‘å™¨æ— æ³•è¯†åˆ«è¿™æ˜¯ä¸€ä¸ªç»„ä»¶è¿˜æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œæ­¤æ—¶ä½ å¯ä»¥è®©å®ƒé•¿å¾—æ›´åƒæ³›å‹ä¸€äº›ï¼š    

```ts
const handle = <T extends any>(input: T): T => {}
```

å‡½æ•°çš„æ³›å‹æ˜¯æ—¥å¸¸ä½¿ç”¨è¾ƒå¤šçš„ä¸€éƒ¨åˆ†ï¼Œæ›´æ˜æ˜¾åœ°ä½“ç°äº†æ³›å‹åœ¨è°ƒç”¨æ—¶è¢«å¡«å……è¿™ä¸€ç‰¹æ€§ï¼Œè€Œç±»å‹åˆ«åä¸­æ›´å¤šæ˜¯æ‰‹åŠ¨ä¼ å…¥æ³›å‹ã€‚è¿™ä¸€å·®å¼‚çš„ç¼˜ç”±å…¶å®å°±æ˜¯å®ƒä»¬çš„åœºæ™¯ä¸åŒï¼Œé€šå¸¸ä½¿ç”¨ç±»å‹åˆ«åæ¥å¯¹å·²ç»ç¡®å®šçš„ç±»å‹ç»“æ„è¿›è¡Œç±»å‹æ“ä½œï¼Œæ¯”å¦‚å°†ä¸€ç»„ç¡®å®šçš„ç±»å‹æ”¾ç½®åœ¨ä¸€èµ·ã€‚è€Œåœ¨å‡½æ•°è¿™ç§åœºæ™¯ä¸­å¹¶ä¸èƒ½ç¡®å®šæ³›å‹åœ¨å®é™…è¿è¡Œæ—¶ä¼šè¢«ä»€ä¹ˆæ ·çš„ç±»å‹å¡«å……ã€‚    

### Class ä¸­çš„æ³›å‹

Class ä¸­çš„æ³›å‹æ¶ˆè´¹æ–¹æ˜¯å±æ€§ã€æ–¹æ³•ä¹ƒè‡³è£…é¥°å™¨ç­‰ã€‚åŒæ—¶ Class å†…çš„æ–¹æ³•è¿˜å¯ä»¥å†å£°æ˜è‡ªå·±ç‹¬æœ‰çš„æ³›å‹å‚æ•°ã€‚     

```ts
class Queue<TElementType> {
  private _list: TElementType[];

  constructor(initial: TElementType[]) {
    this._list = initial;
  }

  // å…¥é˜Ÿä¸€ä¸ªé˜Ÿåˆ—æ³›å‹å­ç±»å‹çš„å…ƒç´ 
  enqueue<TType extends TElementType>(ele: TType): TElementType[] {
    this._list.push(ele);
    return this._list;
  }

  // å…¥é˜Ÿä¸€ä¸ªä»»æ„ç±»å‹å…ƒç´ ï¼ˆæ— éœ€ä¸ºé˜Ÿåˆ—æ³›å‹å­ç±»å‹ï¼‰
  enqueueWithUnknownType<TType>(element: TType): (TElementType | TType)[] {
    return [...this._list, element];
  }

  // å‡ºé˜Ÿ
  dequeue(): TElementType[] {
    this._list.shift();
    return this._list;
  }
}
```

### å†…ç½®æ–¹æ³•ä¸­çš„æ³›å‹  

TypeScript ä¸­ä¸ºéå¸¸å¤šçš„å†…ç½®å¯¹è±¡éƒ½é¢„ç•™äº†æ³›å‹å‘ä½ï¼Œå¦‚ Promise ä¸­ã€‚   

```ts
function p() {
  return new Promise<boolean>((resolve, reject) => {
    resolve(true);
  });
}
```

æ•°ç»„ Array<T> ä¸­ï¼Œå…¶æ³›å‹å‚æ•°ä»£è¡¨æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼Œå‡ ä¹è´¯ç©¿æ‰€æœ‰çš„æ•°ç»„æ–¹æ³•ã€‚   

```ts
const arr: Array<number> = [1, 2, 3];

// ç±»å‹â€œstringâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œnumberâ€çš„å‚æ•°ã€‚
arr.push('wangxiaobai');
// ç±»å‹â€œstringâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œnumberâ€çš„å‚æ•°ã€‚
arr.includes('wangxiaobai');

// number | undefined
arr.find(() => false);

// ç¬¬ä¸€ç§ reduce
arr.reduce((prev, curr, idx, arr) => {
  return prev;
}, 1);

// ç¬¬äºŒç§ reduce
// æŠ¥é”™ï¼šä¸èƒ½å°† number ç±»å‹çš„å€¼èµ‹å€¼ç»™ never ç±»å‹
arr.reduce((prev, curr, idx, arr) => {
  return [...prev, curr]
}, []);
```

reduce æ–¹æ³•æ˜¯ç›¸å¯¹ç‰¹æ®Šçš„ä¸€ä¸ªï¼Œå®ƒçš„ç±»å‹å£°æ˜å­˜åœ¨å‡ ç§ä¸åŒçš„é‡è½½ï¼š   

* å½“ä½ ä¸ä¼ å…¥åˆå§‹å€¼æ—¶ï¼Œæ³›å‹å‚æ•°ä¼šä»æ•°ç»„çš„å…ƒç´ ç±»å‹ä¸­è¿›è¡Œå¡«å……ã€‚   
* å½“ä½ ä¼ å…¥åˆå§‹å€¼æ—¶ï¼Œå¦‚æœåˆå§‹å€¼çš„ç±»å‹ä¸æ•°ç»„å…ƒç´ ç±»å‹ä¸€è‡´ï¼Œåˆ™ä½¿ç”¨æ•°ç»„çš„å…ƒç´ ç±»å‹è¿›è¡Œå¡«å……ã€‚å³è¿™é‡Œç¬¬ä¸€ä¸ª reduce è°ƒç”¨ã€‚   
* å½“ä½ ä¼ å…¥ä¸€ä¸ªæ•°ç»„ç±»å‹çš„åˆå§‹å€¼ï¼Œæ¯”å¦‚è¿™é‡Œçš„ç¬¬äºŒä¸ª reduce è°ƒç”¨ï¼Œreduce çš„æ³›å‹å‚æ•°ä¼šé»˜è®¤ä»è¿™ä¸ªåˆå§‹å€¼æ¨å¯¼å‡ºçš„ç±»å‹è¿›è¡Œå¡«å……ï¼Œå¦‚è¿™é‡Œæ˜¯ never[]ã€‚   

ç¬¬ä¸‰ç§æƒ…å†µä¹Ÿå°±æ„å‘³ç€ä¿¡æ¯ä¸è¶³ï¼Œæ— æ³•æ¨å¯¼å‡ºæ­£ç¡®çš„ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨ä¼ å…¥æ³›å‹å‚æ•°æ¥è§£å†³ï¼š   

```ts
arr.reduce<number[]>((prev, curr, idx, arr) => {
  return prev;
}, []);
```

React ä¸­åŒæ ·å¯ä»¥æ‰¾åˆ°æ— å¤„ä¸åœ¨çš„æ³›å‹å‘ä½ï¼š   

```ts
const [state, setState] = useState<number[]>([]);
// ä¸ä¼ å…¥é»˜è®¤å€¼ï¼Œåˆ™ç±»å‹ä¸º number[] | undefined
const [state, setState] = useState<number[]>();

// ä½“ç°åœ¨ ref.current ä¸Š
const ref = useRef<number>();

const context =  createContext<ContextType>({});
```

## ç±»å‹ç³»ç»Ÿ

åœ¨ TypeScript ä¸­ï¼Œä½ å¯èƒ½é‡è§è¿‡ä»¥ä¸‹è¿™æ · â€œçœ‹èµ·æ¥ä¸å¤ªå¯¹ï¼Œä½†ç«Ÿç„¶èƒ½æ­£å¸¸è¿è¡Œâ€ çš„ä»£ç ï¼š   

```ts
class Cat {
  eat() { }
}

class Dog {
  eat() { }
}

function feedCat(cat: Cat) { }

feedCat(new Dog())
```

è¿™å°±æ˜¯ TypeScript çš„ç±»å‹ç³»ç»Ÿç‰¹æ€§ï¼šç»“æ„åŒ–ç±»å‹ç³»ç»Ÿï¼Œè¿˜å­˜åœ¨å¦ä¸€ç§ç±»å‹ç³»ç»Ÿï¼šæ ‡ç§°ç±»å‹ç³»ç»Ÿã€‚     

### ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿ

å¦‚æœä¸º Cat ç±»æ–°å¢ä¸€ä¸ªç‹¬ç‰¹çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™çš„è¡¨ç°æ‰æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œå³åªèƒ½ç”¨çœŸå®çš„ Cat ç±»æ¥è¿›è¡Œè°ƒç”¨ï¼š   

```ts
class Cat {
  meow() { }
  eat() { }
}

class Dog {
  eat() { }
}

function feedCat(cat: Cat) { }

// æŠ¥é”™ï¼
feedCat(new Dog())
```

TypeScript æ¯”è¾ƒä¸¤ä¸ªç±»å‹å¹¶éé€šè¿‡ç±»å‹çš„åç§°ï¼ˆå³ feedCat å‡½æ•°åªèƒ½é€šè¿‡ Cat ç±»å‹è°ƒç”¨ï¼‰ï¼Œè€Œæ˜¯æ¯”è¾ƒè¿™ä¸¤ä¸ªç±»å‹ä¸Šå®é™…æ‹¥æœ‰çš„å±æ€§ä¸æ–¹æ³•ã€‚   

æœ€åˆçš„ä¾‹å­é‡Œï¼ŒCat ä¸ Dog ç±»å‹ä¸Šçš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å®ƒä»¬è™½ç„¶æ˜¯ä¸¤ä¸ªåå­—ä¸åŒçš„ç±»å‹ï¼Œä½†ä»ç„¶è¢«è§†ä¸ºç»“æ„ä¸€è‡´ï¼Œè¿™å°±æ˜¯ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„ç‰¹æ€§ã€‚   

ç»“æ„ç±»å‹çš„åˆ«ç§°ä¸ºé¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰ï¼Œè¿™ä¸ªåå­—æ¥æºäºé¸­å­æµ‹è¯•ï¼ˆDuck Testï¼‰ã€‚å…¶æ ¸å¿ƒç†å¿µæ˜¯ï¼Œå¦‚æœä½ çœ‹åˆ°ä¸€åªé¸Ÿèµ°èµ·æ¥åƒé¸­å­ï¼Œæ¸¸æ³³åƒé¸­å­ï¼Œå«å¾—ä¹Ÿåƒé¸­å­ï¼Œé‚£ä¹ˆè¿™åªé¸Ÿå°±æ˜¯é¸­å­ã€‚      

ä½†å¦‚æœä¸º Dog ç±»å‹æ·»åŠ ä¸€ä¸ªç‹¬ç‰¹æ–¹æ³•å‘¢ï¼Ÿ   

```ts
class Cat {
  eat() { }
}

class Dog {
  bark() { }
  eat() { }
}

function feedCat(cat: Cat) { }

feedCat(new Dog())
```

è¿™ä¸ªæ—¶å€™ä¸ºä»€ä¹ˆæ²¡æœ‰ç±»å‹æŠ¥é”™äº†ï¼Ÿ   

ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿè®¤ä¸º Dog ç±»å‹å®Œå…¨å®ç°äº† Cat ç±»å‹ã€‚è‡³äºé¢å¤–çš„æ–¹æ³• barkï¼Œå¯è®¤ä¸ºæ˜¯ Dog ç±»å‹ç»§æ‰¿ Cat ç±»å‹åæ·»åŠ çš„æ–°æ–¹æ³•ï¼Œå³æ­¤æ—¶ Dog ç±»å¯ä»¥è¢«è®¤ä¸ºæ˜¯ Cat ç±»çš„å­ç±»ã€‚    

æ›´è¿›ä¸€æ­¥ï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡ç±»å‹çš„å±æ€§æ—¶ï¼ŒåŒæ ·ä¼šé‡‡ç”¨ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿè¿›è¡Œåˆ¤æ–­ã€‚è€Œå¯¹ç»“æ„ä¸­çš„å‡½æ•°ç±»å‹ï¼ˆå³æ–¹æ³•ï¼‰è¿›è¡Œæ¯”è¾ƒæ—¶ï¼ŒåŒæ ·å­˜åœ¨ç±»å‹çš„å…¼å®¹æ€§æ¯”è¾ƒï¼š   

```ts
class Cat {
  eat(): boolean {
    return true
  }
}

class Dog {
  eat(): number {
    return 18;
  }
}

function feedCat(cat: Cat) { }

// æŠ¥é”™ï¼
feedCat(new Dog())
```

è¿™æ˜¯ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„æ ¸å¿ƒç†å¿µï¼Œå³åŸºäºç±»å‹ç»“æ„è¿›è¡Œåˆ¤æ–­ç±»å‹å…¼å®¹æ€§ã€‚   

ä¸¥æ ¼æ¥è¯´ï¼Œé¸­å­ç±»å‹ç³»ç»Ÿå’Œç»“æ„åŒ–ç±»å‹ç³»ç»Ÿå¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œç»“æ„åŒ–ç±»å‹ç³»ç»Ÿæ„å‘³ç€åŸºäºå®Œå…¨çš„ç±»å‹ç»“æ„æ¥åˆ¤æ–­ç±»å‹å…¼å®¹æ€§ï¼Œè€Œé¸­å­ç±»å‹åˆ™åªåŸºäºè¿è¡Œæ—¶è®¿é—®çš„éƒ¨åˆ†æ¥å†³å®šã€‚    

å¦‚æœè°ƒç”¨äº†èµ°ã€æ¸¸æ³³ã€å«è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆä¼ å…¥çš„ç±»å‹åªéœ€è¦å­˜åœ¨è¿™å‡ ä¸ªæ–¹æ³•å³å¯ï¼ˆè€Œä¸éœ€è¦ç±»å‹ç»“æ„å®Œå…¨ä¸€è‡´ï¼‰ã€‚   

ç”±äº TypeScript æœ¬èº«å¹¶ä¸æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ŒåŒæ—¶å®˜æ–¹æ–‡æ¡£ä¸­åŒæ ·è®¤ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯ä¸€è‡´çš„ï¼ˆOne of TypeScriptâ€™s core principles is that type checking focuses on the shape that values have. This is sometimes called â€œduck typingâ€ or â€œstructural typingâ€.ï¼‰ã€‚å› æ­¤å¯ä»¥ç›´æ¥è®¤ä¸ºé¸­å­ç±»å‹ä¸ç»“æ„åŒ–ç±»å‹æ˜¯åŒä¸€æ¦‚å¿µã€‚      

### æ ‡ç§°ç±»å‹ç³»ç»Ÿ

æ ‡ç§°ç±»å‹ç³»ç»Ÿï¼ˆNominal Typing Systemï¼‰è¦æ±‚ä¸¤ä¸ªå¯å…¼å®¹çš„ç±»å‹ï¼Œå…¶åç§°å¿…é¡»æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚   

```ts
type USD = number;
type CNY = number;

const CNYCount: CNY = 200;
const USDCount: USD = 200;

function addCNY(source: CNY, input: CNY) {
  return source + input;
}

addCNY(CNYCount, USDCount)
```

åœ¨ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿä¸­ï¼ŒUSD ä¸ CNY è¢«è®¤ä¸ºæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸€è‡´çš„ç±»å‹ï¼Œå› æ­¤åœ¨ addCNY å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥ USD ç±»å‹çš„å˜é‡ã€‚äººæ°‘å¸ä¸ç¾å…ƒè¿™ä¸¤ä¸ªå•ä½å®é™…çš„æ„ä¹‰å¹¶ä¸ä¸€è‡´ï¼Œæ€ä¹ˆèƒ½è¿›è¡Œç›¸åŠ ï¼Ÿ   

åœ¨æ ‡ç§°ç±»å‹ç³»ç»Ÿä¸­ï¼ŒCNY ä¸ USD è¢«è®¤ä¸ºæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»å‹ï¼Œå› æ­¤èƒ½å¤Ÿé¿å…è¿™ä¸€æƒ…å†µå‘ç”Ÿã€‚   

ç±»å‹çš„é‡è¦æ„ä¹‰ä¹‹ä¸€æ˜¯é™åˆ¶äº†æ•°æ®çš„å¯ç”¨æ“ä½œä¸å®é™…æ„ä¹‰ï¼Œè¿™ä¸€ç‚¹åœ¨æ ‡ç§°ç±»å‹ç³»ç»Ÿä¸­çš„ä½“ç°è¦æ›´åŠ æ˜æ˜¾ã€‚   

ä¸Šé¢å¯ä»¥é€šè¿‡ç±»å‹çš„ç»“æ„ï¼Œæ¥è®©ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿè®¤ä¸ºä¸¤ä¸ªç±»å‹å…·æœ‰çˆ¶å­ç±»å‹å…³ç³»ï¼Œè€Œå¯¹äºæ ‡ç§°ç±»å‹ç³»ç»Ÿï¼Œçˆ¶å­ç±»å‹å…³ç³»åªèƒ½é€šè¿‡æ˜¾å¼çš„ç»§æ‰¿æ¥å®ç°ï¼Œç§°ä¸ºæ ‡ç§°å­ç±»å‹ï¼ˆNominal Subtypingï¼‰ã€‚    

```ts
class Cat { }
// å®ç°ä¸€åªçŸ­æ¯›çŒ«ï¼
class ShorthairCat extends Cat { }
```

### æ¨¡æ‹Ÿæ ‡ç§°ç±»å‹ç³»ç»Ÿ

ç±»å‹çš„é‡è¦æ„ä¹‰ä¹‹ä¸€æ˜¯é™åˆ¶äº†æ•°æ®çš„å¯ç”¨æ“ä½œä¸å®é™…æ„ä¹‰ï¼Œå®ƒæ˜¯é€šè¿‡ç±»å‹é™„å¸¦çš„é¢å¤–ä¿¡æ¯æ¥å®ç°çš„ï¼ˆç±»ä¼¼äºå…ƒæ•°æ®ï¼‰ã€‚    

è¦åœ¨ TypeScript ä¸­å®ç°ï¼Œå…¶å®ä¹Ÿåªéœ€è¦ä¸ºç±»å‹é¢å¤–é™„åŠ å…ƒæ•°æ®å³å¯ï¼Œæ¯”å¦‚ CNY ä¸ USDï¼Œåˆ†åˆ«é™„åŠ ä¸Šå®ƒä»¬çš„å•ä½ä¿¡æ¯å³å¯ï¼Œä½†åŒæ—¶åˆéœ€è¦ä¿ç•™åŸæœ¬çš„ä¿¡æ¯ï¼ˆå³åŸæœ¬çš„ number ç±»å‹ï¼‰ã€‚   

```ts
declare class TagProtector<T extends string> {
  protected __tag__: T;
}

type Nominal<T, U extends string> = T & TagProtector<U>;

type CNY = Nominal<number, 'CNY'>;

type USD = Nominal<number, 'USD'>;

const CNYCount = 100 as CNY;

const USDCount = 100 as USD;

function addCNY(source: CNY, input: CNY) {
  return (source + input) as CNY;
}

addCNY(CNYCount, CNYCount);

// æŠ¥é”™äº†ï¼
addCNY(CNYCount, USDCount);
```

ä½¿ç”¨ TagProtector å£°æ˜äº†ä¸€ä¸ªå…·æœ‰ protected å±æ€§çš„ç±»ï¼Œä½¿ç”¨å®ƒæ¥æºå¸¦é¢å¤–çš„ä¿¡æ¯ï¼Œå¹¶å’ŒåŸæœ¬çš„ç±»å‹åˆå¹¶åˆ°ä¸€èµ·ï¼Œå°±å¾—åˆ°äº† Nominal å·¥å…·ç±»å‹ã€‚   

è¿™ä¸€å®ç°æ–¹å¼æœ¬è´¨ä¸Šåªåœ¨ç±»å‹å±‚é¢åšäº†æ•°æ®çš„å¤„ç†ï¼Œåœ¨è¿è¡Œæ—¶æ— æ³•è¿›è¡Œè¿›ä¸€æ­¥çš„é™åˆ¶ã€‚å¯ä»¥ä»é€»è¾‘å±‚é¢å…¥æ‰‹è¿›ä¸€æ­¥ç¡®ä¿å®‰å…¨æ€§ï¼š   

```ts
class CNY {
  private __tag!: void;
  constructor(public value: number) {}
}
class USD {
  private __tag!: void;
  constructor(public value: number) {}
}
```

ä½¿ç”¨æ–¹å¼ä¹Ÿè¦è¿›è¡Œå˜åŒ–ï¼š   

```ts
const CNYCount = new CNY(100);
const USDCount = new USD(100);

function addCNY(source: CNY, input: CNY) {
  return (source.value + input.value);
}

addCNY(CNYCount, CNYCount);
// æŠ¥é”™äº†ï¼
addCNY(CNYCount, USDCount);
```

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåœ¨è¿è¡Œæ—¶æ·»åŠ æ›´å¤šçš„æ£€æŸ¥é€»è¾‘ï¼ŒåŒæ—¶åœ¨ç±»å‹å±‚é¢ä¹Ÿå¾—åˆ°äº†ä¿éšœã€‚    

è¿™ä¸¤ç§æ–¹å¼çš„æœ¬è´¨éƒ½æ˜¯é€šè¿‡é¢å¤–å±æ€§å®ç°äº†ç±»å‹ä¿¡æ¯çš„é™„åŠ ï¼Œä»è€Œä½¿å¾—ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿå°†ç»“æ„ä¸€è‡´çš„ä¸¤ä¸ªç±»å‹ä¹Ÿåˆ¤æ–­ä¸ºä¸å¯å…¼å®¹ã€‚    

å°†å…¶æ ‡è®°ä¸º private / protected å…¶å®ä¸æ˜¯å¿…é¡»çš„ï¼Œåªæ˜¯ä¸ºäº†é¿å…ç±»å‹ä¿¡æ¯è¢«é”™è¯¯æ¶ˆè´¹ã€‚    

## ç±»å‹ç³»ç»Ÿå±‚çº§

### åˆ¤æ–­ç±»å‹å…¼å®¹æ€§çš„æ–¹å¼ 

ä½¿ç”¨æ¡ä»¶ç±»å‹æ¥åˆ¤æ–­ç±»å‹å…¼å®¹æ€§ã€‚   

```ts
type Result = 'wangxiaobai' extends string ? 1 : 2;
```

å¦‚æœè¿”å› 1ï¼Œåˆ™è¯´æ˜ 'wangxiaobai' ä¸º string çš„å­ç±»å‹ã€‚å¦åˆ™ï¼Œè¯´æ˜ä¸æˆç«‹ã€‚ä½†æ³¨æ„ï¼Œä¸æˆç«‹å¹¶ä¸æ„å‘³ç€ string å°±æ˜¯ 'wangxiaobai' çš„å­ç±»å‹äº†ã€‚   

è¿˜æœ‰ä¸€ç§é€šè¿‡èµ‹å€¼æ¥è¿›è¡Œå…¼å®¹æ€§æ£€æŸ¥çš„æ–¹å¼ã€‚   

```ts
declare let source: string;

declare let anyType: any;
declare let neverType: never;

anyType = source;

// ä¸èƒ½å°†ç±»å‹â€œstringâ€åˆ†é…ç»™ç±»å‹â€œneverâ€ã€‚
neverType = source;
```

å¯¹äºå˜é‡ a = å˜é‡ bï¼Œå¦‚æœæˆç«‹ï¼Œæ„å‘³ç€ <å˜é‡ b çš„ç±»å‹> extends <å˜é‡ a çš„ç±»å‹> æˆç«‹ï¼Œå³ b ç±»å‹æ˜¯ a ç±»å‹çš„å­ç±»å‹ï¼Œåœ¨è¿™é‡Œå³æ˜¯ string extends never ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸æˆç«‹çš„ã€‚    

### ä»åŸå§‹ç±»å‹å¼€å§‹

é¦–å…ˆä»åŸå§‹ç±»å‹ã€å¯¹è±¡ç±»å‹å’Œå®ƒä»¬å¯¹åº”çš„å­—é¢é‡ç±»å‹å¼€å§‹ã€‚   

```ts
type Result1 = 'wangxiaobai' extends string ? 1 : 2; // 1
type Result2 = 1 extends number ? 1 : 2; // 1
type Result3 = true extends boolean ? 1 : 2; // 1
type Result4 = { name: string } extends object ? 1 : 2; // 1
type Result5 = { name: 'wangxiaobai' } extends object ? 1 : 2; // 1
type Result6 = [] extends object ? 1 : 2; // 1
```

ä¸€ä¸ªåŸºç¡€ç±»å‹å’Œå®ƒä»¬å¯¹åº”çš„å­—é¢é‡ç±»å‹å¿…å®šå­˜åœ¨çˆ¶å­ç±»å‹å…³ç³»ã€‚    

object ä»£è¡¨ç€æ‰€æœ‰éåŸå§‹ç±»å‹çš„ç±»å‹ï¼Œå³æ•°ç»„ã€å¯¹è±¡ä¸å‡½æ•°ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œ Result6 æˆç«‹çš„åŸå› å³æ˜¯ [] è¿™ä¸ªå­—é¢é‡ç±»å‹ä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯ object çš„å­—é¢é‡ç±»å‹ã€‚    

ç»“è®ºç®€è®°ä¸ºï¼Œå­—é¢é‡ç±»å‹ < å¯¹åº”çš„åŸå§‹ç±»å‹ã€‚    

### è”åˆç±»å‹  

åœ¨è”åˆç±»å‹ä¸­ï¼Œåªéœ€è¦ç¬¦åˆå…¶ä¸­ä¸€ä¸ªç±»å‹ï¼Œå°±å¯ä»¥è®¤ä¸ºå®ç°äº†è¿™ä¸ªè”åˆç±»å‹ï¼Œç”¨æ¡ä»¶ç±»å‹è¡¨è¾¾æ˜¯è¿™æ ·çš„ï¼š   

```ts
type Result7 = 1 extends 1 | 2 | 3 ? 1 : 2; // 1
type Result8 = 'wang' extends 'wang' | 'xiao' | 'bai' ? 1 : 2; // 1
type Result9 = true extends true | false ? 1 : 2; // 1
```

å¹¶ä¸éœ€è¦è”åˆç±»å‹çš„æ‰€æœ‰æˆå‘˜å‡ä¸ºå­—é¢é‡ç±»å‹ï¼Œæˆ–è€…å­—é¢é‡ç±»å‹æ¥è‡ªäºåŒä¸€åŸºç¡€ç±»å‹è¿™æ ·çš„å‰æï¼Œåªéœ€è¦è¿™ä¸ªç±»å‹å­˜åœ¨äºè”åˆç±»å‹ä¸­ã€‚   

å¯¹äºåŸå§‹ç±»å‹ï¼Œè”åˆç±»å‹çš„æ¯”è¾ƒå…¶å®ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼š   

```ts
type Result10 = string extends string | false | number ? 1 : 2; // 1
```

ç»“è®ºï¼šå­—é¢é‡ç±»å‹ < åŒ…å«æ­¤å­—é¢é‡ç±»å‹çš„è”åˆç±»å‹ / åŸå§‹ç±»å‹ < åŒ…å«æ­¤åŸå§‹ç±»å‹çš„è”åˆç±»å‹ã€‚    

```ts
type Result11 = 'wang' | 'xiao' | 'bai' extends string ? 1 : 2; // 1
type Result12 = {} | (() => void) | [] extends object ? 1 : 2; // 1
```

ç»“è®ºï¼šåŒä¸€åŸºç¡€ç±»å‹çš„å­—é¢é‡è”åˆç±»å‹ < æ­¤åŸºç¡€ç±»å‹ã€‚   

åˆå¹¶ä¸€ä¸‹ç»“è®ºï¼Œå»æ‰æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼šå­—é¢é‡ç±»å‹ < åŒ…å«æ­¤å­—é¢é‡ç±»å‹çš„è”åˆç±»å‹ï¼ˆåŒä¸€åŸºç¡€ç±»å‹ï¼‰ < å¯¹åº”çš„åŸå§‹ç±»å‹ï¼Œå³ï¼š   

```ts
type Result13 = 'wangxiaobai' extends 'wangxiaobai' | '18'
  ? 'wangxiaobai' | '18' extends string
    ? 2
    : 1
  : 0;
```

### è£…ç®±ç±»å‹

string ç±»å‹ä¼šæ˜¯ String ç±»å‹çš„å­ç±»å‹ï¼ŒString ç±»å‹ä¼šæ˜¯ Object ç±»å‹çš„å­ç±»å‹ï¼Œä¸­é—´è¿˜æœ‰ä¸€ä¸ªå¥‡æ€ªçš„ {}ã€‚   

```ts
type Result14 = string extends String ? 1 : 2; // 1
type Result15 = String extends {} ? 1 : 2; // 1
type Result16 = {} extends object ? 1 : 2; // 1
type Result18 = object extends Object ? 1 : 2; // 1
```

{} ä¸æ˜¯ object çš„å­—é¢é‡ç±»å‹å—ï¼Ÿä¸ºä»€ä¹ˆèƒ½åœ¨è¿™é‡Œæ¯”è¾ƒï¼Œå¹¶ä¸” String è¿˜æ˜¯å®ƒçš„å­ç±»å‹ï¼Ÿ    

æŠŠ String çœ‹ä½œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œä¸Šé¢å­˜åœ¨ä¸€äº›æ–¹æ³•ï¼Œå¦‚ï¼š   

```ts
interface String {
  replace: // ...
  replaceAll: // ...
  startsWith: // ...
  endsWith: // ...
  includes: // ...
}
```

è¿™æ—¶æ˜¯ä¸æ˜¯èƒ½çœ‹åš String ç»§æ‰¿äº† {} è¿™ä¸ªç©ºå¯¹è±¡ï¼Œç„¶åè‡ªå·±å®ç°äº†è¿™äº›æ–¹æ³•ï¼Ÿå½“ç„¶å¯ä»¥ï¼    

åœ¨ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„æ¯”è¾ƒä¸‹ï¼ŒString ä¼šè¢«è®¤ä¸ºæ˜¯ {} çš„å­ç±»å‹ã€‚è¿™é‡Œä» string < {} < object çœ‹èµ·æ¥æ„å»ºäº†ä¸€ä¸ªç±»å‹é“¾ï¼Œä½†å®é™…ä¸Š string extends object å¹¶ä¸æˆç«‹ï¼š   

```ts
type Tmp = string extends object ? 1 : 2; // 2
```

ç”±äºç»“æ„åŒ–ç±»å‹ç³»ç»Ÿè¿™ä¸€ç‰¹æ€§çš„å­˜åœ¨ï¼Œä¼šå¾—åˆ°ä¸€äº›çœ‹èµ·æ¥çŸ›ç›¾çš„ç»“è®ºï¼š   

```ts
type Result16 = {} extends object ? 1 : 2; // 1
type Result18 = object extends {} ? 1 : 2; // 1

type Result17 = object extends Object ? 1 : 2; // 1
type Result20 = Object extends object ? 1 : 2; // 1

type Result19 = Object extends {} ? 1 : 2; // 1
type Result21 = {} extends Object ? 1 : 2; // 1
```

16-18 å’Œ 19-21 è¿™ä¸¤å¯¹ï¼Œä¸ºä»€ä¹ˆæ— è®ºå¦‚ä½•åˆ¤æ–­éƒ½æˆç«‹ï¼Ÿéš¾é“è¯´æ˜ {} å’Œ object ç±»å‹ç›¸ç­‰ï¼Œä¹Ÿå’Œ Object ç±»å‹ä¸€è‡´ï¼Ÿ    

å½“ç„¶ä¸ï¼Œè¿™é‡Œçš„ {} extends å’Œ extends {} å®é™…ä¸Šæ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„æ¯”è¾ƒæ–¹å¼ã€‚   

{} extends object å’Œ {} extends Object æ„å‘³ç€ï¼Œ {} æ˜¯ object å’Œ Object çš„å­—é¢é‡ç±»å‹ï¼Œæ˜¯ä»ç±»å‹ä¿¡æ¯çš„å±‚é¢å‡ºå‘çš„ï¼Œå³å­—é¢é‡ç±»å‹åœ¨åŸºç¡€ç±»å‹ä¹‹ä¸Šæä¾›äº†æ›´è¯¦ç»†çš„ç±»å‹ä¿¡æ¯ã€‚    

object extends {} å’Œ Object extends {} åˆ™æ˜¯ä»ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„æ¯”è¾ƒå‡ºå‘çš„ï¼Œå³ {} ä½œä¸ºä¸€ä¸ªä¸€æ— æ‰€æœ‰çš„ç©ºå¯¹è±¡ï¼Œå‡ ä¹å¯ä»¥è¢«è§†ä½œæ˜¯æ‰€æœ‰ç±»å‹çš„åŸºç±»ï¼Œä¸‡ç‰©çš„èµ·æºã€‚    

å¦‚æœæ··æ·†äº†è¿™ä¸¤ç§ç±»å‹æ¯”è¾ƒçš„æ–¹å¼ï¼Œå°±å¯èƒ½ä¼šå¾—åˆ° string extends object è¿™æ ·çš„é”™è¯¯ç»“è®ºã€‚

è€Œ object extends Object å’Œ Object extends object è¿™ä¸¤è€…çš„æƒ…å†µå°±è¦ç‰¹æ®Šä¸€äº›ï¼Œå®ƒä»¬æ˜¯å› ä¸ºâ€œç³»ç»Ÿè®¾å®šâ€çš„é—®é¢˜ï¼ŒObject åŒ…å«äº†æ‰€æœ‰é™¤ Top Type ä»¥å¤–çš„ç±»å‹ï¼ˆåŸºç¡€ç±»å‹ã€å‡½æ•°ç±»å‹ç­‰ï¼‰ï¼Œobject åŒ…å«äº†æ‰€æœ‰éåŸå§‹ç±»å‹çš„ç±»å‹ï¼Œå³æ•°ç»„ã€å¯¹è±¡ä¸å‡½æ•°ç±»å‹ï¼Œè¿™å°±å¯¼è‡´äº†ä½ ä¸­æœ‰æˆ‘ã€æˆ‘ä¸­æœ‰ä½ çš„ç¥å¥‡ç°è±¡ã€‚     

ç”±æ­¤å¾—å‡ºç»“è®ºï¼šåŸå§‹ç±»å‹ < åŸå§‹ç±»å‹å¯¹åº”çš„è£…ç®±ç±»å‹ < Object ç±»å‹ã€‚    

### Top Type

ç±»å‹å±‚çº§çš„é¡¶ç«¯åªæœ‰ any å’Œ unknown è¿™ä¸¤å…„å¼Ÿã€‚   

Object ç±»å‹è‡ªç„¶ä¼šæ˜¯ any ä¸ unknown ç±»å‹çš„å­ç±»å‹ã€‚   

```ts
type Result22 = Object extends any ? 1 : 2; // 1
type Result23 = Object extends unknown ? 1 : 2; // 1
```

ä½†å¦‚æœæŠŠæ¡ä»¶ç±»å‹çš„ä¸¤ç«¯å¯¹è°ƒä¸€ä¸‹å‘¢ï¼Ÿ   

```ts
type Result24 = any extends Object ? 1 : 2; // 1 | 2
type Result25 = unknown extends Object ? 1 : 2; // 2
```

ä½ ä¼šå‘ç°ï¼Œany ç«Ÿç„¶è°ƒè¿‡æ¥ï¼Œå€¼ç«Ÿç„¶å˜æˆäº† 1 | 2ï¼Ÿ  

```ts
type Result26 = any extends 'wangxiaobai' ? 1 : 2; // 1 | 2
type Result27 = any extends string ? 1 : 2; // 1 | 2
type Result28 = any extends {} ? 1 : 2; // 1 | 2
type Result29 = any extends never ? 1 : 2; // 1 | 2
```

å®é™…ä¸Šï¼Œè¿˜æ˜¯å› ä¸ºâ€œç³»ç»Ÿè®¾å®šâ€çš„åŸå› ã€‚any ä»£è¡¨äº†ä»»ä½•å¯èƒ½çš„ç±»å‹ï¼Œå½“ä½¿ç”¨ any extends æ—¶ï¼Œå®ƒåŒ…å«äº†â€œè®©æ¡ä»¶æˆç«‹çš„ä¸€éƒ¨åˆ†â€ï¼Œä»¥åŠâ€œè®©æ¡ä»¶ä¸æˆç«‹çš„ä¸€éƒ¨åˆ†â€ã€‚  

è€Œä»å®ç°ä¸Šè¯´ï¼Œåœ¨ TypeScript å†…éƒ¨ä»£ç çš„æ¡ä»¶ç±»å‹å¤„ç†ä¸­ï¼Œå¦‚æœæ¥å—åˆ¤æ–­çš„æ˜¯ anyï¼Œé‚£ä¹ˆä¼šç›´æ¥è¿”å›æ¡ä»¶ç±»å‹ç»“æœç»„æˆçš„è”åˆç±»å‹ã€‚   

å› æ­¤ any extends string å¹¶ä¸èƒ½ç®€å•åœ°è®¤ä¸ºç­‰ä»·äºä»¥ä¸‹æ¡ä»¶ç±»å‹ï¼š

```ts
type Result30 = ("I'm string!" | {}) extends string ? 1 : 2; // 2
```

è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºè”åˆç±»å‹çš„æˆå‘˜å¹¶éå‡æ˜¯å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ï¼Œæ¡ä»¶æ˜¾ç„¶ä¸æˆç«‹ã€‚   

åœ¨èµ‹å€¼ç»™å…¶ä»–ç±»å‹æ—¶ï¼Œany æ¥è€…ä¸æ‹’ï¼Œè€Œ unknown åˆ™åªå…è®¸èµ‹å€¼ç»™ unknown ç±»å‹å’Œ any ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯ç”±äºâ€œç³»ç»Ÿè®¾å®šâ€çš„åŸå› ï¼Œå³ any å¯ä»¥è¡¨è¾¾ä¸ºä»»ä½•ç±»å‹ã€‚   

ä½ éœ€è¦æˆ‘èµ‹å€¼ç»™è¿™ä¸ªå˜é‡ï¼Ÿé‚£æˆ‘ç°åœ¨å°±æ˜¯è¿™ä¸ªå˜é‡çš„å­ç±»å‹äº†ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¾ˆä¹–å·§ï¼Ÿ   

å¦å¤–ï¼Œany ç±»å‹å’Œ unknown ç±»å‹çš„æ¯”è¾ƒä¹Ÿæ˜¯äº’ç›¸æˆç«‹çš„ï¼š   

```ts
type Result31 = any extends unknown ? 1 : 2;  // 1
type Result32 = unknown extends any ? 1 : 2;  // 1
```

è™½ç„¶è¿˜æ˜¯å­˜åœ¨ç³»ç»Ÿè®¾å®šçš„éƒ¨åˆ†ï¼Œä½†ä»ç„¶åªå…³æ³¨ç±»å‹ä¿¡æ¯å±‚é¢çš„å±‚çº§ï¼Œå³ç»“è®ºä¸ºï¼šObject < any / unknownã€‚   

### never ç±»å‹

never ç±»å‹ï¼Œå®ƒä»£è¡¨äº†â€œè™šæ— â€çš„ç±»å‹ï¼Œä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„ç±»å‹ã€‚å¯¹äºè¿™æ ·çš„ç±»å‹ï¼Œå®ƒä¼šæ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬å­—é¢é‡ç±»å‹ï¼š    

```ts
type Result33 = never extends 'wangxiaobai' ? 1 : 2; // 1
```

ä½†ä½ å¯èƒ½åˆæƒ³åˆ°äº†ä¸€äº›ç‰¹åˆ«çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ nullã€undefinedã€voidã€‚

```ts
type Result34 = undefined extends 'wangxiaobai' ? 1 : 2; // 2
type Result35 = null extends 'wangxiaobai' ? 1 : 2; // 2
type Result36 = void extends 'wangxiaobai' ? 1 : 2; // 2
```

ä¸Šé¢ä¸‰ç§æƒ…å†µå½“ç„¶ä¸åº”è¯¥æˆç«‹ã€‚åœ¨ TypeScript ä¸­ï¼Œvoidã€undefinedã€null éƒ½æ˜¯åˆ‡å®å­˜åœ¨ã€æœ‰å®é™…æ„ä¹‰çš„ç±»å‹ï¼Œå®ƒä»¬å’Œ stringã€numberã€object å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚

è¿™é‡Œå¾—åˆ°çš„ç»“è®ºæ˜¯ï¼Œnever < å­—é¢é‡ç±»å‹ã€‚     

ç°åœ¨å¯ä»¥å¼€å§‹ç»„åˆæ•´ä¸ªç±»å‹å±‚çº§äº†ã€‚      

### ç±»å‹å±‚çº§é“¾   

```ts
type TypeChain = never extends 'wangxiaobai'
  ? 'wangxiaobai' extends 'wangxiaobai' | '18'
    ? 'wangxiaobai' | '18' extends string
      ? string extends String
        ? String extends Object
          ? Object extends any
            ? any extends unknown
              ? unknown extends any
                ? 8
                : 7
              :6
            :5
          :4
        :3
      :2
    :1
  :0
```

å…¶è¿”å›çš„ç»“æœä¸º 8 ï¼Œä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰æ¡ä»¶å‡æˆç«‹ã€‚   

è¿˜å¯ä»¥æ„é€ å‡ºä¸€æ¡æ›´é•¿çš„ç±»å‹å±‚çº§é“¾ï¼š   

```ts
type VerboseTypeChain = never extends 'wangxiaobai'
  ? 'wangxiaobai' extends 'wangxiaobai' | '18'
    ? 'wangxiaobai' | '18' extends string
      ? string extends {}
        ? string extends String
          ? String extends {}
            ? {} extends object
              ? object extends {}
                ? {} extends Object
                  ? Object extends {}
                    ? object extends Object
                      ? Object extends object
                        ? Object extends any
                          ? Object extends unknown
                            ? any extends unknown
                              ? unknown extends any
                                ? 8
                                : 7
                              : 6
                            : 5
                          : 4
                        : 3
                      : 2
                    : 1
                  : 0
                : -1
              : -2
            : -3
          : -4
        : -5
      : -6
    : -7
  : -8
```

ç»“æœä»ç„¶ä¸º 8 ã€‚   

### å…¶ä»–æ¯”è¾ƒåœºæ™¯ 

* å¯¹äºåŸºç±»å’Œæ´¾ç”Ÿç±»ï¼Œé€šå¸¸æƒ…å†µä¸‹æ´¾ç”Ÿç±»ä¼šå®Œå…¨ä¿ç•™åŸºç±»çš„ç»“æ„ï¼Œè€Œåªæ˜¯è‡ªå·±æ–°å¢æ–°çš„å±æ€§ä¸æ–¹æ³•ã€‚åœ¨ç»“æ„åŒ–ç±»å‹çš„æ¯”è¾ƒä¸‹ï¼Œå…¶ç±»å‹è‡ªç„¶ä¼šå­˜åœ¨å­ç±»å‹å…³ç³»ã€‚æ›´ä¸ç”¨è¯´æ´¾ç”Ÿç±»æœ¬èº«å°±æ˜¯ extends åŸºç±»å¾—åˆ°çš„ã€‚   

* è”åˆç±»å‹çš„åˆ¤æ–­ï¼Œå‰é¢åªæ˜¯åˆ¤æ–­è”åˆç±»å‹çš„å•ä¸ªæˆå‘˜ï¼Œé‚£å¦‚æœæ˜¯å¤šä¸ªæˆå‘˜å‘¢ï¼Ÿ

```ts
type Result36 = 1 | 2 | 3 extends 1 | 2 | 3 | 4 ? 1 : 2; // 1
type Result37 = 2 | 4 extends 1 | 2 | 3 | 4 ? 1 : 2; // 1
type Result38 = 1 | 2 | 5 extends 1 | 2 | 3 | 4 ? 1 : 2; // 2
type Result39 = 1 | 5 extends 1 | 2 | 3 | 4 ? 1 : 2; // 2
```

å®é™…ä¸Šï¼Œå¯¹äºè”åˆç±»å‹åœ°ç±»å‹å±‚çº§æ¯”è¾ƒï¼Œåªéœ€è¦æ¯”è¾ƒä¸€ä¸ªè”åˆç±»å‹æ˜¯å¦å¯è¢«è§†ä¸ºå¦ä¸€ä¸ªè”åˆç±»å‹çš„å­é›†ï¼Œå³è¿™ä¸ªè”åˆç±»å‹ä¸­æ‰€æœ‰æˆå‘˜åœ¨å¦ä¸€ä¸ªè”åˆç±»å‹ä¸­éƒ½èƒ½æ‰¾åˆ°ã€‚    

* æ•°ç»„å’Œå…ƒç»„

æ•°ç»„å’Œå…ƒç»„æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„éƒ¨åˆ†:  

```ts
type Result40 = [number, number] extends number[] ? 1 : 2; // 1
type Result41 = [number, string] extends number[] ? 1 : 2; // 2
type Result42 = [number, string] extends (number | string)[] ? 1 : 2; // 1
type Result43 = [] extends number[] ? 1 : 2; // 1
type Result44 = [] extends unknown[] ? 1 : 2; // 1
type Result45 = number[] extends (number | string)[] ? 1 : 2; // 1
type Result46 = any[] extends number[] ? 1 : 2; // 1
type Result47 = unknown[] extends number[] ? 1 : 2; // 2
type Result48 = never[] extends number[] ? 1 : 2; // 1
```

1. 40ï¼Œè¿™ä¸ªå…ƒç»„ç±»å‹å®é™…ä¸Šèƒ½ç¡®å®šå…¶å†…éƒ¨æˆå‘˜å…¨éƒ¨ä¸º number ç±»å‹ï¼Œå› æ­¤æ˜¯ number[] çš„å­ç±»å‹ã€‚è€Œ 41 ä¸­æ··å…¥äº†åˆ«çš„ç±»å‹å…ƒç´ ï¼Œå› æ­¤è®¤ä¸ºä¸æˆç«‹ã€‚     
2. 42 æ··å…¥äº†åˆ«çš„ç±»å‹ï¼Œä½†å…¶åˆ¤æ–­æ¡ä»¶ä¸º (number | string)[] ï¼Œå³å…¶æˆå‘˜éœ€è¦ä¸º number æˆ– string ç±»å‹ã€‚     
3. 43 çš„æˆå‘˜æ˜¯æœªç¡®å®šçš„ï¼Œç­‰ä»·äº never[] extends number[]ï¼Œ44 åŒç†ã€‚    
4. 45ç±»ä¼¼äº41ï¼Œå³å¯èƒ½å­˜åœ¨çš„å…ƒç´ ç±»å‹æ˜¯ç¬¦åˆè¦æ±‚çš„ã€‚    
5. 46ã€47ï¼Œè¿˜è®°å¾—èº«åŒ–ä¸‡åƒçš„ any ç±»å‹å’Œå°å¿ƒè°¨æ…çš„ unknown ç±»å‹å˜›ï¼Ÿ    
6. 48ï¼Œç±»ä¼¼äº 43ã€44ï¼Œç”±äº never ç±»å‹æœ¬å°±ä½äºæœ€ä¸‹æ–¹ï¼Œè¿™é‡Œæ˜¾ç„¶æˆç«‹ã€‚åªä¸è¿‡ never[] ç±»å‹çš„æ•°ç»„ä¹Ÿå°±æ— æ³•å†å¡«å……å€¼äº†ã€‚    

### æ€»ç»“

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_04.png" alt="" width="600" />  

## ç±»å‹é€»è¾‘è¿ç®—

### æ¡ä»¶ç±»å‹åŸºç¡€

æ¡ä»¶ç±»å‹çš„è¯­æ³•ç±»ä¼¼äºå¹³æ—¶å¸¸ç”¨çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼š   

```
ValueA === ValueB ? Result1 : Result2;
TypeA extends TypeB ? Result1 : Result2;
```

æ¡ä»¶ç±»å‹ä¸­ä½¿ç”¨ extends åˆ¤æ–­ç±»å‹çš„å…¼å®¹æ€§ï¼Œè€Œéåˆ¤æ–­ç±»å‹çš„å…¨ç­‰æ€§ã€‚åœ¨ç±»å‹å±‚é¢ä¸­ï¼Œå¯¹äºèƒ½å¤Ÿè¿›è¡Œèµ‹å€¼æ“ä½œçš„ä¸¤ä¸ªå˜é‡ï¼Œå¹¶ä¸éœ€è¦å®ƒä»¬çš„ç±»å‹å®Œå…¨ç›¸ç­‰ï¼Œåªéœ€è¦å…·æœ‰å…¼å®¹æ€§ï¼Œè€Œä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„ç±»å‹ï¼Œå…¶ extends è‡ªç„¶ä¹Ÿæ˜¯æˆç«‹çš„ã€‚    

æ¡ä»¶ç±»å‹ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ä¼šå’Œæ³›å‹ä¸€èµ·ä½¿ç”¨ï¼Œæ³›å‹å‚æ•°çš„å®é™…ç±»å‹ä¼šåœ¨å®é™…è°ƒç”¨æ—¶æ‰è¢«å¡«å……ï¼Œè€Œæ¡ä»¶ç±»å‹åœ¨è¿™ä¸€åŸºç¡€ä¸Šï¼Œå¯ä»¥åŸºäºå¡«å……åçš„æ³›å‹å‚æ•°åšè¿›ä¸€æ­¥çš„ç±»å‹æ“ä½œã€‚    

```ts
type LiteralType<T> = T extends string ? 'string' : 'other';

type Res1 = LiteralType<'wangxiaobai'>; // "string"
type Res2 = LiteralType<18>; // "other"
```

æ¡ä»¶ç±»å‹ä¸­ä¹Ÿå¸¸è§å¤šå±‚åµŒå¥—ï¼Œå¦‚ï¼š  

```ts
export type LiteralType<T> = T extends string
	? 'string'
	: T extends number
	? 'number'
	: T extends boolean
	? 'boolean'
	: T extends null
	? 'null'
	: T extends undefined
	? 'undefined'
	: never;

type Res1 = LiteralType<'wangxiaobai'>; // "string"
type Res2 = LiteralType<18>; // "number"
type Res3 = LiteralType<true>; // "boolean"
```

åœ¨å‡½æ•°ä¸­ï¼Œæ¡ä»¶ç±»å‹ä¸æ³›å‹çš„æ­é…åŒæ ·å¾ˆå¸¸è§ã€‚   

```ts
function universalAdd<T extends number | bigint | string>(x: T, y: T) {
    return x + (y as any);
}
```

å½“è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œç”±äºä¸¤ä¸ªå‚æ•°éƒ½å¼•ç”¨äº†æ³›å‹å‚æ•° T ï¼Œå› æ­¤æ³›å‹ä¼šè¢«å¡«å……ä¸ºä¸€ä¸ªè”åˆç±»å‹ï¼š   

```ts
universalAdd(18, 1); // T å¡«å……ä¸º 18 | 1
universalAdd('wangxiaobai', '18'); // T å¡«å……ä¸º 'wangxiaobai' | '18'
```

æ­¤æ—¶çš„è¿”å›å€¼ç±»å‹å°±éœ€è¦ä»è¿™ä¸ªå­—é¢é‡è”åˆç±»å‹ä¸­æ¨å¯¼å›å…¶åŸæœ¬çš„åŸºç¡€ç±»å‹ã€‚      

åŒä¸€åŸºç¡€ç±»å‹çš„å­—é¢é‡è”åˆç±»å‹å¯ä»¥è¢«è®¤ä¸ºæ˜¯æ­¤åŸºç¡€ç±»å‹çš„å­ç±»å‹ï¼Œå³ 18 | 1 æ˜¯ number çš„å­ç±»å‹ã€‚   

å› æ­¤å¯ä»¥ä½¿ç”¨åµŒå¥—çš„æ¡ä»¶ç±»å‹æ¥è¿›è¡Œå­—é¢é‡ç±»å‹åˆ°åŸºç¡€ç±»å‹åœ°æå–ï¼š    

```ts
function universalAdd<T extends number | bigint | string>(
	x: T,
	y: T
): LiteralToPrimitive<T> {
	return x + (y as any);
}

export type LiteralToPrimitive<T> = T extends number
	? number
	: T extends bigint
	? bigint
	: T extends string
	? string
	: never;

universalAdd('wangxiaobai', '18'); // string
universalAdd(18, 1); // number
universalAdd(10n, 10n); // bigint
```

æ¡ä»¶ç±»å‹è¿˜å¯ä»¥ç”¨æ¥å¯¹æ›´å¤æ‚çš„ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”å¦‚å‡½æ•°ç±»å‹ï¼š    

```ts
type Func = (...args: any[]) => any;

type FunctionConditionType<T extends Func> = T extends (
  ...args: any[]
) => string
  ? 'A string return func!'
  : 'A non-string return func!';

//  "A string return func!"
type StringResult = FunctionConditionType<() => string>;
// 'A non-string return func!';
type NonStringResult1 = FunctionConditionType<() => boolean>;
// 'A non-string return func!';
type NonStringResult2 = FunctionConditionType<() => number>;
```

æ¡ä»¶ç±»å‹ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå‡½æ•°ç±»å‹æ˜¯å¦å…·æœ‰å…¼å®¹æ€§ï¼Œè€Œæ¡ä»¶ä¸­å¹¶ä¸é™åˆ¶å‚æ•°ç±»å‹ï¼Œä»…æ¯”è¾ƒäºŒè€…çš„è¿”å›å€¼ç±»å‹ã€‚   

### infer å…³é”®å­—

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‡å¦‚ä¸å†æ¯”è¾ƒå¡«å……çš„å‡½æ•°ç±»å‹æ˜¯å¦æ˜¯ (...args: any[]) => string çš„å­ç±»å‹ï¼Œè€Œæ˜¯è¦æ‹¿åˆ°å…¶è¿”å›å€¼ç±»å‹å‘¢ï¼Ÿ  

TypeScript ä¸­æ”¯æŒé€šè¿‡ infer å…³é”®å­—æ¥åœ¨æ¡ä»¶ç±»å‹ä¸­æå–ç±»å‹çš„æŸä¸€éƒ¨åˆ†ä¿¡æ¯ã€‚    

```ts
type FunctionReturnType<T extends Func> = T extends (
  ...args: any[]
) => infer R
  ? R
  : never;
```

ä¸Šé¢çš„ä»£ç è¡¨è¾¾äº†å½“ä¼ å…¥çš„ç±»å‹å‚æ•°æ»¡è¶³ T extends (...args: any[] ) => infer R è¿™æ ·ä¸€ä¸ªç»“æ„ï¼Œè¿”å› infer R ä½ç½®çš„å€¼ï¼Œå³ Rã€‚å¦åˆ™ï¼Œè¿”å› neverã€‚    

infer æ˜¯ inference çš„ç¼©å†™ï¼Œæ„ä¸ºæ¨æ–­ï¼Œå¦‚ infer R ä¸­ R å°±è¡¨ç¤º å¾…æ¨æ–­çš„ç±»å‹ã€‚    

infer åªèƒ½åœ¨æ¡ä»¶ç±»å‹ä¸­ä½¿ç”¨ã€‚    

è¿™é‡Œçš„ç±»å‹ç»“æ„å¹¶ä¸å±€é™äºå‡½æ•°ç±»å‹ç»“æ„ï¼Œè¿˜å¯ä»¥æ˜¯æ•°ç»„ï¼š    

```ts
type Swap<T extends any[]> = T extends [infer A, infer B] ? [B, A] : T;

type SwapResult1 = Swap<[1, 2]>; // ç¬¦åˆå…ƒç»„ç»“æ„ï¼Œé¦–å°¾å…ƒç´ æ›¿æ¢[2, 1]
type SwapResult2 = Swap<[1, 2, 3]>; // ä¸ç¬¦åˆç»“æ„ï¼Œæ²¡æœ‰å‘ç”Ÿæ›¿æ¢ï¼Œä»æ˜¯ [1, 2, 3]
```

ç”±äºå£°æ˜çš„ç»“æ„æ˜¯ä¸€ä¸ªä»…æœ‰ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼Œå› æ­¤ä¸‰ä¸ªå…ƒç´ çš„å…ƒç»„å°±è¢«è®¤ä¸ºæ˜¯ä¸ç¬¦åˆç±»å‹ç»“æ„äº†ã€‚ä½†å¯ä»¥ä½¿ç”¨ rest æ“ä½œç¬¦æ¥å¤„ç†ä»»æ„é•¿åº¦çš„æƒ…å†µï¼š    

```ts
// æå–é¦–å°¾ä¸¤ä¸ª
type ExtractStartAndEnd<T extends any[]> = T extends [
  infer Start,
  ...any[],
  infer End
]
  ? [Start, End]
  : T;

// è°ƒæ¢é¦–å°¾ä¸¤ä¸ª
type SwapStartAndEnd<T extends any[]> = T extends [
  infer Start,
  ...infer Left,
  infer End
]
  ? [End, ...Left, Start]
  : T;

// è°ƒæ¢å¼€å¤´ä¸¤ä¸ª
type SwapFirstTwo<T extends any[]> = T extends [
  infer Start1,
  infer Start2,
  ...infer Left
]
  ? [Start2, Start1, ...Left]
  : T;
```

infer ç”šè‡³å¯ä»¥å’Œ rest æ“ä½œç¬¦ä¸€æ ·åŒæ—¶æå–ä¸€ç»„ä¸å®šé•¿çš„ç±»å‹ï¼Œè€Œ ...any[] çš„ç”¨æ³•æ˜¯å¦ä¹Ÿè®©ä½ ç›´å‘¼ç¥å¥‡ï¼Ÿ   

ä¸Šé¢çš„è¾“å…¥è¾“å‡ºä»ç„¶éƒ½æ˜¯æ•°ç»„ï¼Œè€Œå®é™…ä¸Šå®Œå…¨å¯ä»¥è¿›è¡Œç»“æ„å±‚é¢çš„è½¬æ¢ã€‚æ¯”å¦‚ä»æ•°ç»„åˆ°è”åˆç±»å‹ï¼š    

```ts
type ArrayItemType<T> = T extends Array<infer ElementType> ? ElementType : never;

type ArrayItemTypeResult1 = ArrayItemType<[]>; // never
type ArrayItemTypeResult2 = ArrayItemType<string[]>; // string
type ArrayItemTypeResult3 = ArrayItemType<[string, number]>; // string | number
```

åŸç†å³æ˜¯è¿™é‡Œçš„ [string, number] å®é™…ä¸Šç­‰ä»·äº (string | number)[]ã€‚   

é™¤äº†æ•°ç»„ï¼Œinfer ç»“æ„ä¹Ÿå¯ä»¥æ˜¯æ¥å£ï¼š   

```ts
// æå–å¯¹è±¡çš„å±æ€§ç±»å‹
type PropType<T, K extends keyof T> = T extends { [Key in K]: infer R }
  ? R
  : never;

type PropTypeResult1 = PropType<{ name: string }, 'name'>; // string
type PropTypeResult2 = PropType<{ name: string; age: number }, 'name' | 'age'>; // string | number

// åè½¬é”®åä¸é”®å€¼
type ReverseKeyValue<T extends Record<string, unknown>> = T extends Record<infer K, infer V> ? Record<V & string, K> : never

type ReverseKeyValueResult1 = ReverseKeyValue<{ 'key': 'value' }>; // { "value": "key" }
```

ä¸ºäº†ä½“ç° infer ä½œä¸ºç±»å‹å·¥å…·çš„å±æ€§ï¼Œç»“åˆäº†ç´¢å¼•ç±»å‹ä¸æ˜ å°„ç±»å‹ï¼Œä»¥åŠä½¿ç”¨ & string æ¥ç¡®ä¿å±æ€§åä¸º string ç±»å‹çš„å°æŠ€å·§ã€‚   

ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå°æŠ€å·§ï¼Œå¦‚æœä¸ä½¿ç”¨åˆä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ    

```ts
// ç±»å‹â€œVâ€ä¸æ»¡è¶³çº¦æŸâ€œstring | number | symbolâ€ã€‚
type ReverseKeyValue<T extends Record<string, string>> = T extends Record<
  infer K,
  infer V
>
  ? Record<V, K>
  : never;
```

æ˜æ˜çº¦æŸå·²ç»å£°æ˜äº† V çš„ç±»å‹æ˜¯ stringï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯æŠ¥é”™äº†ï¼Ÿ    

è¿™æ˜¯å› ä¸ºæ³›å‹å‚æ•° V çš„æ¥æºæ˜¯ä»é”®å€¼ç±»å‹æ¨å¯¼å‡ºæ¥çš„ï¼ŒTypeScript ä¸­è¿™æ ·å¯¹é”®å€¼ç±»å‹è¿›è¡Œ infer æ¨å¯¼ï¼Œå°†å¯¼è‡´ç±»å‹ä¿¡æ¯ä¸¢å¤±ï¼Œè€Œä¸æ»¡è¶³ç´¢å¼•ç­¾åç±»å‹åªå…è®¸ string | number | symbol çš„è¦æ±‚ã€‚   

è¿™é‡Œéœ€è¦åŒæ—¶æ»¡è¶³å…¶ä¸¤ç«¯çš„ç±»å‹ï¼Œä½¿ç”¨ V & string è¿™ä¸€å½¢å¼ï¼Œå°±ç¡®ä¿äº†æœ€ç»ˆç¬¦åˆæ¡ä»¶çš„ç±»å‹å‚æ•° V ä¸€å®šä¼šæ»¡è¶³ string | never è¿™ä¸ªç±»å‹ï¼Œå› æ­¤å¯ä»¥è¢«è§†ä¸ºåˆæ³•çš„ç´¢å¼•ç­¾åç±»å‹ã€‚   

infer ç»“æ„è¿˜å¯ä»¥æ˜¯ Promise ç»“æ„ã€‚    

```ts
type PromiseValue<T> = T extends Promise<infer V> ? V : T;

type PromiseValueResult1 = PromiseValue<Promise<number>>; // number
type PromiseValueResult2 = PromiseValue<number>; // numberï¼Œä½†å¹¶æ²¡æœ‰å‘ç”Ÿæå–
```

åƒæ¡ä»¶ç±»å‹å¯ä»¥åµŒå¥—ä¸€æ ·ï¼Œinfer å…³é”®å­—ä¹Ÿç»å¸¸è¢«ä½¿ç”¨åœ¨åµŒå¥—çš„åœºæ™¯ä¸­ï¼ŒåŒ…æ‹¬å¯¹ç±»å‹ç»“æ„æ·±å±‚ä¿¡æ¯åœ°æå–ï¼Œä»¥åŠå¯¹æå–åˆ°ç±»å‹ä¿¡æ¯çš„ç­›é€‰ç­‰ã€‚   

æ¯”å¦‚ä¸Šé¢çš„ PromiseValueï¼Œå¦‚æœä¼ å…¥äº†ä¸€ä¸ªåµŒå¥—çš„ Promise ç±»å‹å°±å¤±æ•ˆäº†ï¼š   

```ts
type PromiseValueResult3 = PromiseValue<Promise<Promise<boolean>>>; // Promise<boolean>ï¼Œåªæå–äº†ä¸€å±‚
```

è¿™æ—¶å°±éœ€è¦è¿›è¡ŒåµŒå¥—åœ°æå–äº†ï¼š    

```ts
type PromiseValue<T> = T extends Promise<infer V>
  ? V extends Promise<infer N>
    ? N
    : V
  : T;
```

ä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’æ¥å¤„ç†ä»»æ„åµŒå¥—æ·±åº¦ï¼š     

```ts
type PromiseValue<T> = T extends Promise<infer V> ? PromiseValue<V> : T;
```

### åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹

åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹ä¹Ÿç§°æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼ç‰¹æ€§ï¼Œåªä¸è¿‡æ˜¯æ¡ä»¶ç±»å‹åœ¨æ»¡è¶³ä¸€å®šæƒ…å†µä¸‹ä¼šæ‰§è¡Œçš„é€»è¾‘è€Œå·²ã€‚   

```ts
type Condition<T> = T extends 1 | 2 | 3 ? T : never;

// 1 | 2 | 3
type Res1 = Condition<1 | 2 | 3 | 4 | 5>;

// never
type Res2 = 1 | 2 | 3 | 4 | 5 extends 1 | 2 | 3 ? 1 | 2 | 3 | 4 | 5 : never;
```

ä»”ç»†è§‚å¯Ÿè¿™ä¸¤ä¸ªç±»å‹åˆ«åçš„å·®å¼‚ä¼šå‘ç°ï¼Œå”¯ä¸€çš„å·®å¼‚å°±æ˜¯åœ¨ Res1 ä¸­ï¼Œè¿›è¡Œåˆ¤æ–­çš„è”åˆç±»å‹è¢«ä½œä¸ºæ³›å‹å‚æ•°ä¼ å…¥ç»™å¦ä¸€ä¸ªç‹¬ç«‹çš„ç±»å‹åˆ«åï¼Œè€Œ Res2 ä¸­ç›´æ¥å¯¹è¿™ä¸¤è€…è¿›è¡Œåˆ¤æ–­ã€‚   

è®°ä½ç¬¬ä¸€ä¸ªå·®å¼‚ï¼šæ˜¯å¦é€šè¿‡æ³›å‹å‚æ•°ä¼ å…¥ã€‚   

```ts
type Naked<T> = T extends boolean ? 'Y' : 'N';
type Wrapped<T> = [T] extends [boolean] ? 'Y' : 'N';

// "N" | "Y"
type Res3 = Naked<number | boolean>;

// "N"
type Res4 = Wrapped<number | boolean>;
```

ç°åœ¨éƒ½æ˜¯é€šè¿‡æ³›å‹å‚æ•°ä¼ å…¥äº†ï¼Œä½†è¯¡å¼‚çš„äº‹æƒ…åˆå‘ç”Ÿäº†ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªè¿˜æ˜¯ä¸ªè”åˆç±»å‹ï¼Ÿ   

ç¬¬äºŒä¸ªå€’æ˜¯å¥½ç†è§£ä¸€äº›ï¼Œå…ƒç»„çš„æˆå‘˜æœ‰å¯èƒ½æ˜¯æ•°å­—ç±»å‹ï¼Œæ˜¾ç„¶ä¸å…¼å®¹äº [boolean]ã€‚   

å†ä»”ç»†è§‚å¯Ÿè¿™ä¸¤ä¸ªä¾‹å­ä¼šå‘ç°ï¼Œå®ƒä»¬å”¯ä¸€çš„å·®å¼‚æ˜¯æ¡ä»¶ç±»å‹ä¸­çš„æ³›å‹å‚æ•°æ˜¯å¦è¢«æ•°ç»„åŒ…è£¹äº†ã€‚    

åŒæ—¶ä½ ä¼šå‘ç°åœ¨ Res3 çš„åˆ¤æ–­ä¸­ï¼Œå…¶è”åˆç±»å‹çš„ä¸¤ä¸ªåˆ†æ”¯ï¼Œæ°å¥½å¯¹åº”äºåˆ†åˆ«ä½¿ç”¨ number å’Œ boolean å»ä½œä¸ºæ¡ä»¶ç±»å‹åˆ¤æ–­æ—¶çš„ç»“æœã€‚    

æŠŠä¸Šé¢çš„çº¿ç´¢ç†ä¸€ä¸‹å¤§è‡´å¾—åˆ°äº†æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼èµ·ä½œç”¨çš„æ¡ä»¶:   

* ç±»å‹å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªè”åˆç±»å‹ã€‚   
* ç±»å‹å‚æ•°éœ€è¦é€šè¿‡æ³›å‹å‚æ•°çš„æ–¹å¼ä¼ å…¥ã€‚   
* æ¡ä»¶ç±»å‹ä¸­çš„æ³›å‹å‚æ•°ä¸èƒ½è¢«åŒ…è£¹ã€‚   

æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼ç‰¹æ€§ä¼šäº§ç”Ÿçš„æ•ˆæœä¹Ÿå¾ˆæ˜æ˜¾äº†ï¼Œå³å°†è¿™ä¸ªè”åˆç±»å‹æ‹†å¼€æ¥ï¼Œæ¯ä¸ªåˆ†æ”¯åˆ†åˆ«è¿›è¡Œä¸€æ¬¡æ¡ä»¶ç±»å‹åˆ¤æ–­ï¼Œå†å°†æœ€åçš„ç»“æœåˆå¹¶èµ·æ¥ï¼ˆå¦‚ Naked ä¸­ï¼‰ã€‚   

å®˜æ–¹çš„è§£é‡Šï¼šå¯¹äºå±äºè£¸ç±»å‹å‚æ•°çš„æ£€æŸ¥ç±»å‹ï¼Œæ¡ä»¶ç±»å‹ä¼šåœ¨å®ä¾‹åŒ–æ—¶æœŸè‡ªåŠ¨åˆ†å‘åˆ°è”åˆç±»å‹ä¸Šã€‚    

è¿™é‡Œçš„è‡ªåŠ¨åˆ†å‘å¯ä»¥è¿™ä¹ˆç†è§£ï¼š   

```ts
type Naked<T> = T extends boolean ? 'Y' : 'N';

// (number extends boolean ? "Y" : "N") | (boolean extends boolean ? "Y" : "N")
// "N" | "Y"
type Res3 = Naked<number | boolean>;
```

è¿™é‡Œçš„è£¸ç±»å‹å‚æ•°ï¼Œå…¶å®æŒ‡çš„å°±æ˜¯æ³›å‹å‚æ•°æ˜¯å¦å®Œå…¨è£¸éœ²ï¼Œä¸Šé¢ä½¿ç”¨æ•°ç»„åŒ…è£¹æ³›å‹å‚æ•°åªæ˜¯å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œæ¯”å¦‚è¿˜å¯ä»¥è¿™ä¹ˆåšï¼š   

```ts
export type NoDistribute<T> = T & {};

type Wrapped<T> = NoDistribute<T> extends boolean ? "Y" : "N";

type Res1 = Wrapped<number | boolean>; // "N"
type Res2 = Wrapped<true | false>; // "Y"
type Res3 = Wrapped<true | false | 18>; // "N"
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯åªä¼šé€šè¿‡è£¸éœ²æ³›å‹å‚æ•°ï¼Œæ¥ç¡®ä¿åˆ†å¸ƒå¼ç‰¹æ€§èƒ½å¤Ÿå‘ç”Ÿã€‚   

åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿä¼šéœ€è¦åŒ…è£¹æ³›å‹å‚æ•°æ¥ç¦ç”¨æ‰åˆ†å¸ƒå¼ç‰¹æ€§ã€‚æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè®¸è¿˜æ˜¯è”åˆç±»å‹çš„åˆ¤æ–­ï¼Œå³ä¸å¸Œæœ›è¿›è¡Œè”åˆç±»å‹æˆå‘˜çš„åˆ†å¸ƒåˆ¤æ–­ï¼Œè€Œæ˜¯å¸Œæœ›ç›´æ¥åˆ¤æ–­è¿™ä¸¤ä¸ªè”åˆç±»å‹çš„å…¼å®¹æ€§åˆ¤æ–­ã€‚    

å°±åƒåœ¨æœ€åˆçš„ Res2 ä¸­é‚£æ ·ï¼š   

```ts
type CompareUnion<T, U> = [T] extends [U] ? true : false;

type CompareRes1 = CompareUnion<1 | 2, 1 | 2 | 3>; // true
type CompareRes2 = CompareUnion<1 | 2, 1>; // false
```

é€šè¿‡å°†å‚æ•°ä¸æ¡ä»¶éƒ½åŒ…è£¹èµ·æ¥çš„æ–¹å¼å¯¹è”åˆç±»å‹çš„æ¯”è¾ƒå°±å˜æˆäº†æ•°ç»„æˆå‘˜ç±»å‹çš„æ¯”è¾ƒï¼Œåœ¨æ­¤æ—¶å°±ä¼šä¸¥æ ¼éµå®ˆç±»å‹å±‚çº§ä¸€æ–‡ä¸­è”åˆç±»å‹çš„ç±»å‹åˆ¤æ–­ã€‚   

å¦å¤–ä¸€ç§æƒ…å†µåˆ™æ˜¯ï¼Œå½“æƒ³åˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸º never æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ‰‹æ®µï¼š   

```ts
type IsNever<T> = [T] extends [never] ? true : false;

type IsNeverRes1 = IsNever<never>; // true
type IsNeverRes2 = IsNever<'wangxiaobai'>; // false
```

è¿™é‡Œçš„åŸå› å…¶å®å¹¶ä¸æ˜¯å› ä¸ºåˆ†å¸ƒå¼æ¡ä»¶ç±»å‹ã€‚å½“æ¡ä»¶ç±»å‹çš„åˆ¤æ–­å‚æ•°ä¸º anyï¼Œä¼šç›´æ¥è¿”å›æ¡ä»¶ç±»å‹ä¸¤ä¸ªç»“æœçš„è”åˆç±»å‹ã€‚   

è€Œåœ¨è¿™é‡Œå…¶å®ç±»ä¼¼ï¼Œå½“é€šè¿‡æ³›å‹ä¼ å…¥çš„å‚æ•°ä¸º neverï¼Œåˆ™ä¼šç›´æ¥è¿”å› neverã€‚   

éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„ never ä¸ any çš„æƒ…å†µå¹¶ä¸å®Œå…¨ç›¸åŒï¼Œany åœ¨ç›´æ¥ä½œä¸ºåˆ¤æ–­å‚æ•°æ—¶ã€ä½œä¸ºæ³›å‹å‚æ•°æ—¶éƒ½ä¼šäº§ç”Ÿè¿™ä¸€æ•ˆæœï¼š   

```ts
// ç›´æ¥ä½¿ç”¨ï¼Œè¿”å›è”åˆç±»å‹
type Tmp1 = any extends string ? 1 : 2;  // 1 | 2

type Tmp2<T> = T extends string ? 1 : 2;
// é€šè¿‡æ³›å‹å‚æ•°ä¼ å…¥ï¼ŒåŒæ ·è¿”å›è”åˆç±»å‹
type Tmp2Res = Tmp2<any>; // 1 | 2

// å¦‚æœåˆ¤æ–­æ¡ä»¶æ˜¯ anyï¼Œé‚£ä¹ˆä»ç„¶ä¼šè¿›è¡Œåˆ¤æ–­
type Special1 = any extends any ? 1 : 2; // 1
type Special2<T> = T extends any ? 1 : 2;
type Special2Res = Special2<any>; // 1
```

è€Œ never ä»…åœ¨ä½œä¸ºæ³›å‹å‚æ•°æ—¶æ‰ä¼šäº§ç”Ÿï¼š   

```ts
// ç›´æ¥ä½¿ç”¨ï¼Œä»ç„¶ä¼šè¿›è¡Œåˆ¤æ–­
type Tmp3 = never extends string ? 1 : 2; // 1

type Tmp4<T> = T extends string ? 1 : 2;
// é€šè¿‡æ³›å‹å‚æ•°ä¼ å…¥ï¼Œä¼šè·³è¿‡åˆ¤æ–­
type Tmp4Res = Tmp4<never>; // never

// å¦‚æœåˆ¤æ–­æ¡ä»¶æ˜¯ neverï¼Œè¿˜æ˜¯ä»…åœ¨ä½œä¸ºæ³›å‹å‚æ•°æ—¶æ‰è·³è¿‡åˆ¤æ–­
type Special3 = never extends never ? 1 : 2; // 1
type Special4<T> = T extends never ? 1 : 2;
type Special4Res = Special4<never>; // never
```

è¿™é‡Œçš„ anyã€never ä¸¤ç§æƒ…å†µéƒ½ä¸ä¼šå®é™…åœ°æ‰§è¡Œæ¡ä»¶ç±»å‹ï¼Œè€Œåœ¨è¿™é‡Œé€šè¿‡åŒ…è£¹çš„æ–¹å¼è®©å®ƒä¸å†æ˜¯ neverï¼Œä¹Ÿå°±èƒ½å¤Ÿå»æ‰§è¡Œåˆ¤æ–­äº†ã€‚   

## å†…ç½®å·¥å…·ç±»å‹

### åˆ†ç±»

å†…ç½®çš„å·¥å…·ç±»å‹å¤§è‡´åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š   

* å±æ€§ä¿®é¥°å·¥å…·ç±»å‹ï¼šå¯¹å±æ€§çš„ä¿®é¥°ï¼ŒåŒ…æ‹¬å¯¹è±¡å±æ€§å’Œæ•°ç»„å…ƒç´ çš„å¯é€‰/å¿…é€‰ã€åªè¯»/å¯å†™ã€‚  
* ç»“æ„å·¥å…·ç±»å‹ï¼šå¯¹æ—¢æœ‰ç±»å‹çš„è£å‰ªã€æ‹¼æ¥ã€è½¬æ¢ç­‰ï¼Œæ¯”å¦‚ä½¿ç”¨å¯¹ä¸€ä¸ªå¯¹è±¡ç±»å‹è£å‰ªå¾—åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡ç±»å‹ï¼Œå°†è”åˆç±»å‹ç»“æ„è½¬æ¢åˆ°äº¤å‰ç±»å‹ç»“æ„ã€‚  
* é›†åˆå·¥å…·ç±»å‹ï¼šå¯¹é›†åˆï¼ˆå³è”åˆç±»å‹ï¼‰çš„å¤„ç†ï¼Œå³äº¤é›†ã€å¹¶é›†ã€å·®é›†ã€è¡¥é›†ã€‚  
* æ¨¡å¼åŒ¹é…å·¥å…·ç±»å‹ï¼šåŸºäº infer çš„æ¨¡å¼åŒ¹é…ï¼Œå³å¯¹ä¸€ä¸ªæ—¢æœ‰ç±»å‹ç‰¹å®šä½ç½®ç±»å‹çš„æå–ï¼Œæ¯”å¦‚æå–å‡½æ•°ç±»å‹ç­¾åä¸­çš„è¿”å›å€¼ç±»å‹ã€‚    

#### å±æ€§ä¿®é¥°å·¥å…·ç±»å‹

è®¿é—®æ€§ä¿®é¥°å·¥å…·ç±»å‹åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä½ï¼š   

```ts
type Partial<T> = {
    [P in keyof T]?: T[P];
};

type Required<T> = {
    [P in keyof T]-?: T[P];
};

type Readonly<T> = {
    readonly [P in keyof T]: T[P];
};
```

Partial ä¸ Required å¯ä»¥è®¤ä¸ºæ˜¯ä¸€å¯¹å·¥å…·ç±»å‹ï¼Œå®ƒä»¬çš„åŠŸèƒ½æ˜¯ç›¸åçš„ï¼Œè€Œåœ¨å®ç°ä¸Šï¼Œå®ƒä»¬çš„å”¯ä¸€å·®å¼‚æ˜¯åœ¨ç´¢å¼•ç±»å‹ç­¾åå¤„çš„å¯é€‰ä¿®é¥°ç¬¦ï¼ŒPartial æ˜¯ ?ï¼Œå³æ ‡è®°å±æ€§ä¸ºå¯é€‰ï¼Œè€Œ Required åˆ™æ˜¯ -?ï¼Œç›¸å½“äºåœ¨åŸæœ¬å±æ€§ä¸Šå¦‚æœæœ‰ ? è¿™ä¸ªæ ‡è®°ï¼Œåˆ™ç§»é™¤å®ƒã€‚    

Partial ä¹Ÿå¯ä»¥ä½¿ç”¨ +? æ¥æ˜¾å¼çš„è¡¨ç¤ºæ·»åŠ å¯é€‰æ ‡è®°ï¼š   

```ts
type Partial<T> = {
	[P in keyof T]+?: T[P];
};
```

å¯é€‰æ ‡è®°ä¸ç­‰äºä¿®æ”¹æ­¤å±æ€§ç±»å‹ä¸º åŸç±»å‹ | undefined ï¼Œå¦‚ä»¥ä¸‹çš„æ¥å£ç»“æ„ï¼š     

```ts
interface Foo {
	optional: string | undefined;
	required: string;
}
```

å¦‚æœå£°æ˜ä¸€ä¸ªå¯¹è±¡å»å®ç°è¿™ä¸ªæ¥å£ï¼Œå®ƒä»ç„¶ä¼šè¦æ±‚ä½ æä¾› optional å±æ€§ï¼š   

```ts
interface Foo {
	optional: string | undefined;
	required: string;
}
// ç±»å‹ "{ required: string; }" ä¸­ç¼ºå°‘å±æ€§ "optional"ï¼Œä½†ç±»å‹ "Foo" ä¸­éœ€è¦è¯¥å±æ€§ã€‚
const foo1: Foo = {
  required: '1',
};

const foo2: Foo = {
  required: '1',
  optional: undefined
};
```

è¿™æ˜¯å› ä¸ºå¯¹äºç»“æ„å£°æ˜æ¥è¯´ï¼Œä¸€ä¸ªå±æ€§æ˜¯å¦å¿…é¡»æä¾›ä»…å–å†³äºå…¶æ˜¯å¦æºå¸¦å¯é€‰æ ‡è®°ã€‚   

å³ä½¿ä½¿ç”¨ never ä¹Ÿæ— æ³•æ ‡è®°è¿™ä¸ªå±æ€§ä¸ºå¯é€‰ï¼š   

```ts
interface Foo {
	optional: never;
	required: string;
}

const foo: Foo = {
	required: '1',
	// ä¸èƒ½å°†ç±»å‹â€œstringâ€åˆ†é…ç»™ç±»å‹â€œneverâ€ã€‚
	optional: '',
};
```

ç±»ä¼¼ +?ï¼ŒReadonly ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ +readonlyï¼š    

```ts
type Readonly<T> = {
	+readonly [P in keyof T]: T[P];
};
```

è™½ç„¶ TypeScript ä¸­å¹¶æ²¡æœ‰æä¾›å®ƒçš„å¦ä¸€åŠï¼Œå‚è€ƒ Required å¾ˆå®¹æ˜“æƒ³åˆ°è¿™ä¹ˆå®ç°ä¸€ä¸ªå·¥å…·ç±»å‹ Mutableï¼Œæ¥å°†å±æ€§ä¸­çš„ readonly ä¿®é¥°ç§»é™¤ï¼š    

```ts
type Mutable<T> = {
	-readonly [P in keyof T]: T[P];
};
```

#### ç»“æ„å·¥å…·ç±»å‹

ç»“æ„å·¥å…·ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œç»“æ„å£°æ˜å’Œç»“æ„å¤„ç†ã€‚    

ç»“æ„å£°æ˜å·¥å…·ç±»å‹å³å¿«é€Ÿå£°æ˜ä¸€ä¸ªç»“æ„ï¼Œæ¯”å¦‚å†…ç½®ç±»å‹ä¸­çš„ Recordï¼š   

```ts
type Record<K extends keyof any, T> = {
	[P in K]: T;
};
```

K extends keyof any å³ä¸ºé”®çš„ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨ extends keyof any æ ‡æ˜ï¼Œä¼ å…¥çš„ K å¯ä»¥æ˜¯å•ä¸ªç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è”åˆç±»å‹ï¼Œè€Œ T å³ä¸ºå±æ€§çš„ç±»å‹ã€‚    

```ts
// é”®åå‡ä¸ºå­—ç¬¦ä¸²ï¼Œé”®å€¼ç±»å‹æœªçŸ¥
type Record1 = Record<string, unknown>;
// é”®åå‡ä¸ºå­—ç¬¦ä¸²ï¼Œé”®å€¼ç±»å‹ä»»æ„
type Record2 = Record<string, any>;
// é”®åä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œé”®å€¼ç±»å‹ä»»æ„
type Record3 = Record<string | number, any>;
```

Record<string, unknown> å’Œ Record<string, any> æ˜¯æ—¥å¸¸ä½¿ç”¨è¾ƒå¤šçš„å½¢å¼ï¼Œé€šå¸¸ä½¿ç”¨è¿™ä¸¤è€…æ¥ä»£æ›¿ object ã€‚    

åœ¨ä¸€äº›å·¥å…·ç±»åº“æºç ä¸­è¿˜å­˜åœ¨ç±»ä¼¼çš„ç»“æ„å£°æ˜å·¥å…·ç±»å‹ï¼Œå¦‚ï¼š    

```ts
type Dictionary<T> = {
	[index: string]: T;
};

type NumericDictionary<T> = {
	[index: number]: T;
};
```

Dictionary ï¼ˆå­—å…¸ï¼‰ç»“æ„åªéœ€è¦ä¸€ä¸ªä½œä¸ºå±æ€§ç±»å‹çš„æ³›å‹å‚æ•°å³å¯ã€‚    

å¯¹äºç»“æ„å¤„ç†å·¥å…·ç±»å‹ï¼Œåœ¨ TypeScript ä¸­ä¸»è¦æ˜¯ Pickã€Omitï¼š   

```ts
type Pick<T, K extends keyof T> = {
	[P in K]: T[P];
};

type Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;
```

Pick æ¥å—ä¸¤ä¸ªæ³›å‹å‚æ•°ï¼ŒT å³æ˜¯è¿›è¡Œç»“æ„å¤„ç†çš„åŸç±»å‹ï¼ˆä¸€èˆ¬æ˜¯å¯¹è±¡ç±»å‹ï¼‰ï¼Œè€Œ K åˆ™è¢«çº¦æŸä¸º T ç±»å‹çš„é”®åè”åˆç±»å‹ã€‚    

ç”±äºæ³›å‹çº¦æŸæ˜¯ç«‹å³å¡«å……æ¨å¯¼çš„ï¼Œå³ä¸ºç¬¬ä¸€ä¸ªæ³›å‹å‚æ•°ä¼ å…¥ Foo ç±»å‹ä»¥åï¼ŒK çš„çº¦æŸæ¡ä»¶ä¼šç«‹åˆ»è¢«å¡«å……ï¼Œåœ¨è¾“å…¥ K æ—¶ä¼šè·å¾—ä»£ç æç¤ºã€‚    

```ts
interface Foo {
	name: string;
	age: number;
	job: JobUnionType;
}

type PickedFoo = Pick<Foo, "name" | "age">
```

Pick ä¼šå°†ä¼ å…¥çš„è”åˆç±»å‹ä½œä¸ºéœ€è¦ä¿ç•™çš„å±æ€§ï¼Œä½¿ç”¨è¿™ä¸€è”åˆç±»å‹é…åˆæ˜ å°„ç±»å‹ï¼Œä¸Šé¢çš„ä¾‹å­ç­‰ä»·äºï¼š      

```ts
type Pick<T> = {
	[P in "name" | "age"]: T[P];
};
```

è”åˆç±»å‹çš„æˆå‘˜ä¼šè¢«ä¾æ¬¡æ˜ å°„ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç±»å‹è®¿é—®æ¥è·å–åˆ°å®ƒä»¬åŸæœ¬çš„ç±»å‹ã€‚    

Omit ç±»å‹ï¼Œå®ƒæ˜¯ Pick çš„åå‘å®ç°ï¼šPick æ˜¯ä¿ç•™è¿™äº›ä¼ å…¥çš„é”®ï¼Œæ¯”å¦‚ä»ä¸€ä¸ªåºå¤§çš„ç»“æ„ä¸­é€‰æ‹©å°‘æ•°å­—æ®µä¿ç•™ï¼Œéœ€è¦çš„æ˜¯è¿™äº›å°‘æ•°å­—æ®µï¼Œè€Œ Omit åˆ™æ˜¯ç§»é™¤è¿™äº›ä¼ å…¥çš„é”®ï¼Œä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªåºå¤§çš„ç»“æ„ä¸­å‰”é™¤å°‘æ•°å­—æ®µï¼Œéœ€è¦çš„æ˜¯å‰©ä½™çš„å¤šæ•°éƒ¨åˆ†ã€‚    

```ts
type Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;
```

Omit æ˜¯åŸºäº Pick å®ç°çš„ï¼Œè¿™ä¹Ÿæ˜¯ TypeScript ä¸­æˆå¯¹å·¥å…·ç±»å‹çš„å¦ä¸€ç§å®ç°æ–¹å¼ã€‚ä¸Šé¢çš„ Partial ä¸ Required ä½¿ç”¨ç±»ä¼¼çš„ç»“æ„ï¼Œåœ¨å…³é”®ä½ç½®ä½¿ç”¨ä¸€ä¸ªç›¸åæ“ä½œæ¥å®ç°åå‘ï¼Œè€Œè¿™é‡Œçš„ Omit ç±»å‹åˆ™æ˜¯åŸºäº Pick ç±»å‹å®ç°ï¼Œä¹Ÿå°±æ˜¯åå‘å·¥å…·ç±»å‹åŸºäºæ­£å‘å·¥å…·ç±»å‹å®ç°ã€‚     

é¦–å…ˆæ¥å—çš„æ³›å‹å‚æ•°ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ä¸è”åˆç±»å‹ï¼ˆè¦å‰”é™¤çš„å±æ€§ï¼‰ï¼Œåœ¨å°†è¿™ä¸ªè”åˆç±»å‹ä¼ å…¥ç»™ Pick æ—¶å¤šäº†ä¸€ä¸ª Excludeï¼ŒExclude<A, B> çš„ç»“æœå°±æ˜¯è”åˆç±»å‹ A ä¸­ä¸å­˜åœ¨äº B ä¸­çš„éƒ¨åˆ†ï¼š    

```ts
type Tmp1 = Exclude<1, 2>; // 1
type Tmp2 = Exclude<1 | 2, 2>; // 1
type Tmp3 = Exclude<1 | 2 | 3, 2 | 3>; // 1
type Tmp4 = Exclude<1 | 2 | 3, 2 | 4>; // 1 | 3
```

Exclude<keyof T, K> å°±æ˜¯ T çš„é”®åè”åˆç±»å‹ä¸­å‰”é™¤äº† K çš„éƒ¨åˆ†ï¼Œå°†å…¶ä½œä¸º Pick çš„é”®åï¼Œå°±å®ç°äº†å‰”é™¤ä¸€éƒ¨åˆ†ç±»å‹çš„æ•ˆæœã€‚     

#### é›†åˆå·¥å…·ç±»å‹

å¯¹äºä¸¤ä¸ªé›†åˆæ¥è¯´ï¼Œé€šå¸¸å­˜åœ¨äº¤é›†ã€å¹¶é›†ã€å·®é›†ã€è¡¥é›†å‡ ç§æƒ…å†µã€‚    

* å¹¶é›†ï¼šä¸¤ä¸ªé›†åˆçš„åˆå¹¶ï¼Œåˆå¹¶æ—¶é‡å¤çš„å…ƒç´ åªä¼šä¿ç•™ä¸€ä»½ã€‚      
* äº¤é›†ï¼šä¸¤ä¸ªé›†åˆçš„ç›¸äº¤éƒ¨åˆ†ï¼Œå³åŒæ—¶å­˜åœ¨äºè¿™ä¸¤ä¸ªé›†åˆå†…çš„å…ƒç´ ç»„æˆçš„é›†åˆã€‚     
* å·®é›†ï¼šå¯¹äº Aã€B ä¸¤ä¸ªé›†åˆæ¥è¯´ï¼ŒA ç›¸å¯¹äº B çš„å·®é›†å³ä¸º A ä¸­ç‹¬æœ‰è€Œ B ä¸­ä¸å­˜åœ¨çš„å…ƒç´  çš„ç»„æˆçš„é›†åˆï¼Œæˆ–è€…è¯´ A ä¸­å‰”é™¤äº† B ä¸­ä¹Ÿå­˜åœ¨çš„å…ƒç´ ä»¥åï¼Œè¿˜å‰©ä¸‹çš„éƒ¨åˆ†ã€‚    
* è¡¥é›†ï¼šè¡¥é›†æ˜¯å·®é›†çš„ç‰¹æ®Šæƒ…å†µï¼Œæ­¤æ—¶é›†åˆ B ä¸ºé›†åˆ A çš„å­é›†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ A ç›¸å¯¹äº B çš„å·®é›† + B = å®Œæ•´çš„é›†åˆ Aã€‚   

å†…ç½®å·¥å…·ç±»å‹ä¸­æä¾›äº†äº¤é›†ä¸å·®é›†çš„å®ç°ï¼š    

```ts
type Extract<T, U> = T extends U ? T : never;

type Exclude<T, U> = T extends U ? never : T;
```

å½“ Tã€U éƒ½æ˜¯è”åˆç±»å‹ï¼ˆè§†ä¸ºä¸€ä¸ªé›†åˆï¼‰æ—¶ï¼ŒT çš„æˆå‘˜ä¼šä¾æ¬¡è¢«æ‹¿å‡ºæ¥è¿›è¡Œ extends U ? T1 : T2 çš„è®¡ç®—ï¼Œç„¶åå°†æœ€ç»ˆçš„ç»“æœå†åˆå¹¶æˆè”åˆç±»å‹ã€‚   

äº¤é›† Extract ï¼Œå…¶è¿è¡Œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š    

```ts
type AExtractB = Extract<1 | 2 | 3, 1 | 2 | 4>; // 1 | 2

type _AExtractB =
| (1 extends 1 | 2 | 4 ? 1 : never) // 1
| (2 extends 1 | 2 | 4 ? 2 : never) // 2
| (3 extends 1 | 2 | 4 ? 3 : never); // never
```

å·®é›† Exclude ç±»ä¼¼ï¼Œå·®é›†å­˜åœ¨ç›¸å¯¹çš„æ¦‚å¿µï¼Œå³ A ç›¸å¯¹äº B çš„å·®é›†ä¸ B ç›¸å¯¹äº A çš„å·®é›†å¹¶ä¸ä¸€å®šç›¸åŒï¼Œè€Œäº¤é›†åˆ™ä¸€å®šç›¸åŒã€‚     

```ts
type SetA = 1 | 2 | 3 | 5;

type SetB = 0 | 1 | 2 | 4;

type AExcludeB = Exclude<SetA, SetB>; // 3 | 5
type BExcludeA = Exclude<SetB, SetA>; // 0 | 4

type _AExcludeB =
| (1 extends 0 | 1 | 2 | 4 ? never : 1) // never
| (2 extends 0 | 1 | 2 | 4 ? never : 2) // never
| (3 extends 0 | 1 | 2 | 4 ? never : 3) // 3
| (5 extends 0 | 1 | 2 | 4 ? never : 5); // 5

type _BExcludeA =
| (0 extends 1 | 2 | 3 | 5 ? never : 0) // 0
| (1 extends 1 | 2 | 3 | 5 ? never : 1) // never
| (2 extends 1 | 2 | 3 | 5 ? never : 2) // never
| (4 extends 1 | 2 | 3 | 5 ? never : 4); // 4
```

å®ç°å¹¶é›†ä¸è¡¥é›†ï¼š   

```ts
// å¹¶é›†
export type Concurrence<A, B> = A | B;

// äº¤é›†
export type Intersection<A, B> = A extends B ? A : never;

// å·®é›†
export type Difference<A, B> = A extends B ? never : A;

// è¡¥é›†
export type Complement<A, B extends A> = Difference<A, B>;
```

è¡¥é›†åŸºäºå·®é›†å®ç°ï¼Œåªéœ€è¦çº¦æŸé›†åˆ B ä¸ºé›†åˆ A çš„å­é›†å³å¯ã€‚    

åœ¨åŸºäºåˆ†å¸ƒå¼æ¡ä»¶ç±»å‹çš„å·¥å…·ç±»å‹ä¸­ï¼Œä¹Ÿå­˜åœ¨ç€æ­£åå·¥å…·ç±»å‹ï¼Œä½†å¹¶ä¸éƒ½æ˜¯ç®€å•åœ°æ›¿æ¢æ¡ä»¶ç±»å‹ç»“æœçš„ä¸¤ç«¯ï¼Œå¦‚äº¤é›†ä¸è¡¥é›†å°±åªæ˜¯ç®€å•è°ƒæ¢äº†ç»“æœï¼Œä½†äºŒè€…ä½œç”¨å´å®Œå…¨ä¸åŒã€‚      

#### æ¨¡å¼åŒ¹é…å·¥å…·ç±»å‹

ä¸»è¦ä½¿ç”¨æ¡ä»¶ç±»å‹ä¸ infer å…³é”®å­—ï¼Œinfer å…¶å®ä»£è¡¨äº†ä¸€ç§æ¨¡å¼åŒ¹é…çš„æ€è·¯ã€‚     

å¯¹å‡½æ•°ç±»å‹ç­¾åçš„æ¨¡å¼åŒ¹é…ï¼š    

```ts
type FunctionType = (...args: any) => any;

type Parameters<T extends FunctionType> = T extends (...args: infer P) => any ? P : never;
type ReturnType<T extends FunctionType> = T extends (...args: any) => infer R ? R : any;
```

æ ¹æ® infer çš„ä½ç½®ä¸åŒï¼Œå°±èƒ½å¤Ÿè·å–åˆ°ä¸åŒä½ç½®çš„ç±»å‹ï¼Œåœ¨å‡½æ•°è¿™é‡Œåˆ™æ˜¯å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç±»å‹ã€‚     

åªåŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ï¼š   

```ts
type FirstParameter<T extends FunctionType> = T extends (arg: infer P, ...args: any) => any ? P : never;

type FuncFoo = (arg: number) => void;
type FuncBar = (...args: string[]) => void;

type FooFirstParameter = FirstParameter<FuncFoo>; // number
type BarFirstParameter = FirstParameter<FuncBar>; // string
```

å†…ç½®å·¥å…·ç±»å‹ä¸­è¿˜æœ‰ä¸€ç»„å¯¹ Class è¿›è¡Œæ¨¡å¼åŒ¹é…çš„å·¥å…·ç±»å‹ï¼š    

```ts
type ClassType = abstract new (...args: any) => any;

type ConstructorParameters<T extends ClassType> = T extends abstract new (...args: infer P) => any ? P : never;
type InstanceType<T extends ClassType> = T extends abstract new (...args: any) => infer R ? R : any;
```

Class çš„æ¨¡å¼åŒ¹é…æ€è·¯ç±»ä¼¼äºå‡½æ•°ï¼Œæˆ–è€…è¯´è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„æ€è·¯ï¼Œå³åŸºäºæ”¾ç½®ä½ç½®çš„åŒ¹é…ã€‚æ”¾åœ¨å‚æ•°éƒ¨åˆ†ï¼Œå°±æ˜¯æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œæ”¾åœ¨è¿”å›å€¼éƒ¨åˆ†ï¼Œå°±æ˜¯ Class çš„å®ä¾‹ç±»å‹äº†ã€‚   

## ä¸Šä¸‹æ–‡ç±»å‹

ä¸¾ä¸€ä¸ªæœ€å¸¸è§çš„ä¾‹å­ï¼š  

```ts
window.onerror = (event, source, line, col, err) => {};
```

åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œè™½ç„¶å¹¶æ²¡æœ‰ä¸º onerror çš„å„ä¸ªå‚æ•°å£°æ˜ç±»å‹ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿå·²ç»è·å¾—äº†æ­£ç¡®çš„ç±»å‹ã€‚   

è¿™æ˜¯å› ä¸º onerror çš„ç±»å‹å£°æ˜å·²ç»å†…ç½®äº†ï¼š  

```ts
interface Handler {
  // ç®€åŒ–
  onerror: OnErrorEventHandlerNonNull;
}

interface OnErrorEventHandlerNonNull {
    (event: Event | string, source?: string, lineno?: number, colno?: number, error?: Error): any;
}
```

å®ç°ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š  

```ts
type CustomHandler = (name: string, age: number) => boolean;

// ä¹Ÿæ¨å¯¼å‡ºäº†å‚æ•°ç±»å‹
const handler: CustomHandler = (arg1, arg2) => true;
```

é™¤äº†å‚æ•°ç±»å‹ï¼Œè¿”å›å€¼ç±»å‹åŒæ ·ä¼šçº³å…¥ç®¡æ§ï¼š   

```ts
declare const struct: {
  handler: CustomHandler;
};
// ä¸èƒ½å°†ç±»å‹â€œvoidâ€åˆ†é…ç»™ç±»å‹â€œbooleanâ€ã€‚
struct.handler = (name, age) => {};
```

åœ¨è¿™é‡Œï¼Œå‚æ•°çš„ç±»å‹åŸºäºå…¶ä¸Šä¸‹æ–‡ç±»å‹ä¸­çš„å‚æ•°ç±»å‹ä½ç½®æ¥è¿›è¡ŒåŒ¹é…ï¼Œarg1 å¯¹åº”åˆ° name ï¼Œæ‰€ä»¥æ˜¯ string ç±»å‹ï¼Œarg2 å¯¹åº”åˆ° ageï¼Œæ‰€ä»¥æ˜¯ number ç±»å‹ã€‚    

è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç±»å‹çš„æ ¸å¿ƒç†å¿µï¼šåŸºäºä½ç½®çš„ç±»å‹æ¨å¯¼ã€‚    

åœ¨ä¸Šä¸‹æ–‡ç±»å‹ä¸­ï¼Œå®ç°çš„è¡¨è¾¾å¼å¯ä»¥åªä½¿ç”¨æ›´å°‘çš„å‚æ•°ï¼Œè€Œä¸èƒ½ä½¿ç”¨æ›´å¤šï¼Œè¿™æ˜¯å› ä¸ºä¸Šä¸‹æ–‡ç±»å‹åŸºäºä½ç½®çš„åŒ¹é…ï¼Œä¸€æ—¦å‚æ•°ä¸ªæ•°è¶…è¿‡å®šä¹‰çš„æ•°é‡ï¼Œé‚£å°±æ²¡æ³•è¿›è¡ŒåŒ¹é…äº†ã€‚    

```ts
// æ­£å¸¸
window.onerror = (event) => {};
// æŠ¥é”™
window.onerror = (event, source, line, col, err, extra) => {};
```

ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿå¯ä»¥è¿›è¡Œâ€åµŒå¥—â€œæƒ…å†µä¸‹çš„ç±»å‹æ¨å¯¼:   

```ts
declare let func: (raw: number) => (input: string) => any;

// raw â†’ number
func = (raw) => {
  // input â†’ string
  return (input) => {};
};
```

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸Šä¸‹æ–‡ç±»å‹çš„æ¨å¯¼èƒ½åŠ›ä¹Ÿä¼šå¤±æ•ˆ:   

```ts
class Foo {
  foo!: number;
}

class Bar extends Foo {
  bar!: number;
}

let f1: { (input: Foo): void } | { (input: Bar): void };
// å‚æ•°â€œinputâ€éšå¼å…·æœ‰â€œanyâ€ç±»å‹ã€‚
f1 = (input) => {};
```

é¢„æœŸçš„ç»“æœæ˜¯ input è¢«æ¨å¯¼ä¸º Foo | Bar ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ç¬¦åˆç»“æ„çš„å‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œä½†å´å¤±è´¥äº†ã€‚è¿™æ˜¯å› ä¸º TypeScript ä¸­çš„ä¸Šä¸‹æ–‡ç±»å‹ç›®å‰æš‚æ—¶ä¸æ”¯æŒè¿™ä¸€åˆ¤æ–­æ–¹å¼ã€‚   

ç›´æ¥ä½¿ç”¨ä¸€ä¸ªè”åˆç±»å‹å‚æ•°çš„å‡½æ•°ç­¾åï¼š   

```ts
let f2: { (input: Foo | Bar): void };
// Foo | Bar
f2 = (input) => {};
```

å¦‚æœè”åˆç±»å‹ä¸­å°†è¿™ä¸¤ä¸ªç±»å‹å†åµŒå¥—ä¸€å±‚ï¼Œæ­¤æ—¶ä¸Šä¸‹æ–‡ç±»å‹åè€Œæ­£å¸¸äº†ï¼š   

```ts
let f3:
  | { (raw: number): (input: Foo) => void }
  | { (raw: number): (input: Bar) => void };

// raw â†’ number
f3 = (raw) => {
  // input â†’ Bar
  return (input) => {};
};
```

ä»»ä½•æ¥æ”¶ Foo ç±»å‹å‚æ•°çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥æ¥æ”¶ä¸€ä¸ª Bar ç±»å‹å‚æ•°ï¼Œå› æ­¤æ¨å¯¼åˆ° Bar ç±»å‹è¦æ›´åŠ å®‰å…¨ã€‚    

### void è¿”å›å€¼ç±»å‹ä¸‹çš„ç‰¹æ®Šæƒ…å†µ

ä¸Šä¸‹æ–‡ç±»å‹åŒæ ·ä¼šæ¨å¯¼å¹¶çº¦æŸå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œä½†å­˜åœ¨ç‰¹æ®Šæƒ…å†µï¼Œå½“å†…ç½®å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹ä¸º void æ—¶ï¼š   

```ts
type CustomHandler = (name: string, age: number) => void;

const handler1: CustomHandler = (name, age) => true;
const handler2: CustomHandler = (name, age) => 'wangxiaobai';
const handler3: CustomHandler = (name, age) => null;
const handler4: CustomHandler = (name, age) => undefined;
```

è¿™æ—¶å‡½æ•°å®ç°è¿”å›å€¼ç±»å‹å˜æˆäº†äº”èŠ±å…«é—¨çš„æ ·å­ï¼Œè€Œä¸”è¿˜éƒ½ä¸ä¼šæŠ¥é”™ã€‚    

åŒæ ·çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸€æ¡ä¸–ç•Œåº•å±‚çš„è§„åˆ™ï¼Œä¸Šä¸‹æ–‡ç±»å‹å¯¹äº void è¿”å›å€¼ç±»å‹çš„å‡½æ•°ï¼Œå¹¶ä¸ä¼šçœŸçš„è¦æ±‚å®ƒä»€ä¹ˆéƒ½ä¸èƒ½è¿”å›ã€‚   

è™½ç„¶è¿™äº›å‡½æ•°å®ç°å¯ä»¥è¿”å›ä»»æ„ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºè°ƒç”¨ç»“æœçš„ç±»å‹ï¼Œä»ç„¶æ˜¯ voidï¼š    

```ts
const result1 = handler1('wangxiaobai', 18); // void
const result2 = handler2('wangxiaobai', 18); // void
const result3 = handler3('wangxiaobai', 18); // void
const result4 = handler4('wangxiaobai', 18); // void
```

## å‡½æ•°ç±»å‹å±‚çº§ï¼ˆTODOï¼‰

ç»™å‡ºä¸‰ä¸ªå…·æœ‰å±‚çº§å…³ç³»çš„ç±»ï¼Œåˆ†åˆ«ä»£è¡¨åŠ¨ç‰©ã€ç‹—ã€æŸ¯åŸºã€‚   

```ts
class Animal {
  asPet() {}
}

class Dog extends Animal {
  bark() {}
}

class Corgi extends Dog {
  cute() {}
}
```

å¯¹äºä¸€ä¸ªæ¥å— Dog ç±»å‹å¹¶è¿”å› Dog ç±»å‹çš„å‡½æ•°ï¼Œå¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š  

```ts
type DogFactory = (args: Dog) => Dog;
```

ç®€åŒ–ä¸ºï¼šDog -> Dog çš„è¡¨è¾¾å½¢å¼ã€‚   

å¯¹äºå‡½æ•°ç±»å‹æ¯”è¾ƒï¼Œå®é™…ä¸Šè¦æ¯”è¾ƒçš„å³æ˜¯å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç±»å‹ï¼ˆä¹Ÿåªèƒ½æ˜¯è¿™ä¿©ä½ç½®çš„ç±»å‹ï¼‰ã€‚   

å¯¹äº Animalã€Dogã€Corgi è¿™ä¸‰ä¸ªç±»ï¼Œå¦‚æœå°†å®ƒä»¬åˆ†åˆ«å¯é‡å¤åœ°æ”¾ç½®åœ¨å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç±»å‹å¤„ï¼Œå°±å¯ä»¥å¾—åˆ°ä»¥ä¸‹è¿™äº›å‡½æ•°ç­¾åç±»å‹ï¼š   

* Animal -> Animal   
* Animal -> Dog   
* Animal -> Corgi   
* Dog -> Dog   
* Dog -> Animal   
* Dog -> Corgi   
* Corgi -> Animal   
* Corgi -> Dog   
* Corgi -> Corgi    

å¼•å…¥ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šå®ƒæ¥æ”¶ä¸€ä¸ª Dog -> Dog ç±»å‹çš„å‚æ•°ï¼š   

```ts
function transformDogAndBark(dogFactory: DogFactory) {
  const dog = dogFactory(new Dog());
  dog.bark();
}
```

å¦‚æœä¸€ä¸ªå€¼èƒ½å¤Ÿè¢«èµ‹å€¼ç»™æŸä¸ªç±»å‹çš„å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºè¿™ä¸ªå€¼çš„ç±»å‹ä¸ºæ­¤å˜é‡ç±»å‹çš„å­ç±»å‹ã€‚    

å¦‚ä¸€ä¸ªç®€å•æ¥å— Dog ç±»å‹å‚æ•°çš„å‡½æ•°ï¼š   

```ts
function makeDogBark(dog: Dog) {
  dog.bark();
}
```

å®ƒåœ¨è°ƒç”¨æ—¶åªå¯èƒ½æ¥å— Dog ç±»å‹æˆ– Dog ç±»å‹çš„å­ç±»å‹ï¼Œè€Œä¸èƒ½æ¥å— Dog ç±»å‹çš„çˆ¶ç±»å‹ï¼š    

```ts
makeDogBark(new Corgi()); // æ²¡é—®é¢˜
makeDogBark(new Animal()); // ä¸è¡Œ
```

è¿™æ˜¯å› ä¸ºæ´¾ç”Ÿç±»ï¼ˆå³å­ç±»ï¼‰ä¼šä¿ç•™åŸºç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œå› æ­¤è¯´å…¶ä¸åŸºç±»å…¼å®¹ï¼Œä½†åŸºç±»å¹¶ä¸èƒ½æœªåœå…ˆçŸ¥çš„æ‹¥æœ‰å­ç±»çš„æ–¹æ³•ã€‚   

transformDogAndBark å‡½æ•°ä¼šå®ä¾‹åŒ–ä¸€åªç‹—ç‹—ï¼Œå¹¶ä¼ å…¥ Factoryï¼ˆå°±åƒå® ç‰©ç¾å®¹ï¼‰ï¼Œç„¶åè®©å®ƒå«å”¤ä¸¤å£°ã€‚è¿™ä¸ªå‡½æ•°åŒæ—¶çº¦æŸäº†æ­¤ç±»å‹çš„å‚æ•°ä¸è¿”å›å€¼ã€‚   

"é¦–å…ˆï¼Œæˆ‘åªä¼šä¼ å…¥ä¸€åªæ­£å¸¸çš„ç‹—ç‹—ï¼Œä½†å®ƒä¸ä¸€å®šæ˜¯ä»€ä¹ˆå“ç§ã€‚å…¶æ¬¡ï¼Œä½ è¿”å›çš„å¿…é¡»ä¹Ÿæ˜¯ä¸€åªç‹—ç‹—ï¼Œæˆ‘å¹¶ä¸åœ¨æ„å®ƒæ˜¯ä»€ä¹ˆå“ç§"ã€‚   

å¯¹äºè¿™ä¸¤æ¡çº¦æŸä¾æ¬¡è¿›è¡Œæ£€æŸ¥ï¼š

* å¯¹äº Animal/Dog/Corgi -> Animal ç±»å‹ï¼šæ— è®ºå®ƒçš„å‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå®ƒçš„è¿”å›å€¼ç±»å‹éƒ½æ˜¯ä¸æ»¡è¶³æ¡ä»¶çš„ã€‚å› ä¸ºå®ƒè¿”å›çš„ä¸ä¸€å®šæ˜¯åˆæ³•çš„ç‹—ç‹—ï¼Œå³æˆ‘å®ƒä¸æ˜¯ Dog -> Dog çš„å­ç±»å‹ã€‚    

* å¯¹äº Corgi -> Corgi ä¸ Corgi -> Dogï¼šå…¶è¿”å›å€¼æ»¡è¶³äº†æ¡ä»¶ï¼Œä½†æ˜¯å‚æ•°ç±»å‹åˆä¸æ»¡è¶³äº†ã€‚è¿™ä¸¤ä¸ªç±»å‹éœ€è¦æ¥å— Corgi ç±»å‹ï¼Œå¯èƒ½å†…éƒ¨éœ€è¦å®ƒè…¿çŸ­çš„è¿™ä¸ªç‰¹æ€§ã€‚ä½†å¯æ²¡è¯´ä¸€å®šä¼šä¼ å…¥æŸ¯åŸºï¼Œå¦‚æœä¼ ä¸ªå¾·ç‰§ï¼Œç¨‹åºå¯èƒ½å°±å´©æºƒäº†ã€‚   

* å¯¹äº Dog -> Corgiã€Animal -> Corgiã€Animal -> Dogï¼šé¦–å…ˆå®ƒä»¬çš„å‚æ•°ç±»å‹æ­£ç¡®çš„æ»¡è¶³äº†çº¦æŸï¼Œèƒ½æ¥å—ä¸€åªç‹—ç‹—ã€‚å…¶æ¬¡ï¼Œå®ƒä»¬çš„è¿”å›å€¼ç±»å‹ä¹Ÿä¸€å®šä¼šèƒ½æ±ªæ±ªæ±ªã€‚    

å¦‚æœå»æ‰äº†åŒ…å« Dog ç±»å‹çš„ä¾‹å­ï¼Œä¼šå‘ç°åªå‰©ä¸‹ Animal -> Corgi äº†ï¼Œä¹Ÿå³æ˜¯è¯´ï¼Œ(Animal â†’ Corgi) â‰¼ (Dog â†’ Dog) æˆç«‹ï¼ˆA â‰¼ B æ„ä¸º A ä¸º B çš„å­ç±»å‹ï¼‰ã€‚   

ç»“è®ºï¼š    

* å‚æ•°ç±»å‹å…è®¸ä¸º Dog çš„çˆ¶ç±»å‹ï¼Œä¸å…è®¸ä¸º Dog çš„å­ç±»å‹ã€‚    
* è¿”å›å€¼ç±»å‹å…è®¸ä¸º Dog çš„å­ç±»å‹ï¼Œä¸å…è®¸ä¸º Dog çš„çˆ¶ç±»å‹ã€‚    

## ç±»å‹ç¼–ç¨‹è¿›é˜¶  

### å±æ€§ä¿®é¥°è¿›é˜¶

#### æ·±å±‚å±æ€§ä¿®é¥°

```ts
type PromiseValue<T> = T extends Promise<infer V> ? PromiseValue<V> : T;
```

åœ¨æ¡ä»¶ç±»å‹æˆç«‹æ—¶ï¼Œå†æ¬¡è°ƒç”¨è¿™ä¸ªå·¥å…·ç±»å‹å½¢æˆé€’é¾Ÿã€‚åœ¨æŸä¸€æ¬¡é€’é¾Ÿåˆ°æ¡ä»¶ç±»å‹ä¸æˆç«‹æ—¶ï¼Œå°±ä¼šç›´æ¥è¿”å›è¿™ä¸ªç±»å‹å€¼ã€‚   

å¯¹äº Partialã€Requiredï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè¿™æ ·åœ°å¤„ç†ï¼š   

```ts
export type DeepPartial<T extends object> = {
  [K in keyof T]?: T[K] extends object ? DeepPartial<T[K]> : T[K];
};
```

ç®€å•èµ·è§ä½¿ç”¨ object ä½œä¸ºæ³›å‹çº¦æŸä¸æ¡ä»¶ï¼Œè¿™æ„å‘³ç€ä¹Ÿæœ‰å¯èƒ½ä¼ å…¥å‡½æ•°ã€æ•°ç»„ç­‰ç±»å‹ã€‚   

å®ç°å…¶ä»–è¿›è¡Œé€’å½’å±æ€§ä¿®é¥°çš„å·¥å…·ç±»å‹ï¼Œå±•ç¤ºå¦‚ä¸‹ï¼š   

```ts
export type DeepPartial<T extends object> = {
  [K in keyof T]?: T[K] extends object ? DeepPartial<T[K]> : T[K];
};

export type DeepRequired<T extends object> = {
  [K in keyof T]-?: T[K] extends object ? DeepRequired<T[K]> : T[K];
};

// ä¹Ÿå¯ä»¥è®°ä½œ DeepImmutable
export type DeepReadonly<T extends object> = {
  readonly [K in keyof T]: T[K] extends object ? DeepReadonly<T[K]> : T[K];
};

export type DeepMutable<T extends object> = {
  -readonly [K in keyof T]: T[K] extends object ? DeepMutable<T[K]> : T[K];
};
```

ä»è”åˆç±»å‹ä¸­å‰”é™¤ null | undefined çš„å·¥å…·ç±»å‹ NonNullableï¼š   

```ts
type NonNullable<T> = T extends null | undefined ? never : T;
```

å®ç°ä¸€ä¸ª DeepNonNullable æ¥é€’å½’å‰”é™¤æ‰€æœ‰å±æ€§çš„ null ä¸ undefinedï¼š   

```ts
type NonNullable<T> = T extends null | undefined ? never : T;

export type DeepNonNullable<T extends object> = {
  [K in keyof T]: T[K] extends object
    ? DeepNonNullable<T[K]>
    : NonNullable<T[K]>;
};
```

DeepNonNullable ä¹Ÿæœ‰è‡ªå·±çš„å¦ä¸€åŠï¼šDeepNullableï¼š   

```ts
export type Nullable<T> = T | null;

export type DeepNullable<T extends object> = {
  [K in keyof T]: T[K] extends object ? DeepNullable<T[K]> : Nullable<T[K]>;
};
```

#### å·²çŸ¥å±æ€§éƒ¨åˆ†ä¿®é¥°

è¦è®©ä¸€ä¸ªå¯¹è±¡çš„ä¸‰ä¸ªå·²çŸ¥å±æ€§ä¸ºå¯é€‰çš„ï¼Œé‚£åªè¦æŠŠè¿™ä¸ªå¯¹è±¡æ‹†æˆ Aã€B ä¸¤ä¸ªå¯¹è±¡ç»“æ„ï¼Œåˆ†åˆ«ç”±ä¸‰ä¸ªå±æ€§å’Œå…¶ä»–å±æ€§ç»„æˆã€‚ç„¶åè®©å¯¹è±¡ A çš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰çš„ï¼Œå’Œå¦å¤–ä¸€ä¸ªå¯¹è±¡ B ç»„åˆèµ·æ¥ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿ    

* æ‹†åˆ†å¯¹è±¡ç»“æ„ï¼Œé‚£ä¸å°±æ˜¯ç»“æ„å·¥å…·ç±»å‹ï¼Œå³ Pick ä¸ Omitï¼Ÿ   
* ä¸‰ä¸ªå±æ€§çš„å¯¹è±¡å…¨éƒ¨å˜ä¸ºå¯é€‰ï¼Œé‚£ä¸å°±æ˜¯å±æ€§ä¿®é¥°ï¼Ÿ   
* ç»„åˆä¸¤ä¸ªå¯¹è±¡ç±»å‹ï¼Œä¹Ÿå°±æ„å‘³ç€å¾—åˆ°ä¸€ä¸ªåŒæ—¶ç¬¦åˆè¿™ä¸¤ä¸ªå¯¹è±¡ç±»å‹çš„æ–°ç»“æ„ï¼Œé‚£ä¸å°±æ˜¯äº¤å‰ç±»å‹ï¼Ÿ   

MarkPropsAsOptional ä¼šå°†ä¸€ä¸ªå¯¹è±¡çš„éƒ¨åˆ†å±æ€§æ ‡è®°ä¸ºå¯é€‰ï¼š  

```ts
type MakePropsAsOptional<T extends object, K extends keyof T = keyof T> = Flatten<Partial<Pick<T, K>> & Omit<T, K>>;
```

T ä¸ºéœ€è¦å¤„ç†çš„å¯¹è±¡ç±»å‹ï¼Œè€Œ K ä¸ºéœ€è¦æ ‡è®°ä¸ºå¯é€‰çš„å±æ€§ã€‚K å¿…é¡»ä¸º T å†…éƒ¨çš„å±æ€§ï¼Œå°†å…¶çº¦æŸä¸º keyof Tï¼Œå³å¯¹è±¡å±æ€§ç»„æˆçš„å­—é¢é‡è”åˆç±»å‹ã€‚   

ä¸ºäº†è®©å®ƒèƒ½å¤Ÿç›´æ¥ä»£æ›¿æ‰ Partialï¼Œä¸ºå…¶æŒ‡å®šé»˜è®¤å€¼ä¹Ÿä¸º keyof Tï¼Œè¿™æ ·åœ¨ä¸ä¼ å…¥ç¬¬äºŒä¸ªæ³›å‹å‚æ•°æ—¶ï¼Œå®ƒçš„è¡¨ç°å°±å’Œ Partial ä¸€è‡´ï¼Œå³å…¨é‡çš„å±æ€§å¯é€‰ã€‚    

Partial<Pick<T, K>> ä¸ºéœ€è¦æ ‡è®°ä¸ºå¯é€‰çš„å±æ€§ç»„æˆçš„å¯¹è±¡å­ç»“æ„ï¼ŒOmit<T, K> åˆ™ä¸ºä¸éœ€è¦å¤„ç†çš„éƒ¨åˆ†ï¼Œä½¿ç”¨äº¤å‰ç±»å‹å°†å…¶ç»„åˆå³å¯ã€‚    

éªŒè¯ä¸‹æ•ˆæœï¼š   

```ts
type MarkPropsAsOptionalStruct = MarkPropsAsOptional<
  {
    foo: string;
    bar: number;
    baz: boolean;
  },
  'bar'
>;
```

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_05.png" alt="" width="700" />  

å¼•å…¥ä¸€ä¸ªè¾…åŠ©çš„å·¥å…·ç±»å‹ï¼Œç§°å…¶ä¸º Flattenï¼Œå¯¹äºè¿™ç§äº¤å‰ç±»å‹çš„ç»“æ„ï¼ŒFlatten èƒ½å¤Ÿå°†å®ƒå±•å¹³ä¸ºå•å±‚çš„å¯¹è±¡ç»“æ„ã€‚è€Œå®ƒçš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å¤åˆ¶ä¸€ä¸‹ç»“æ„ï¼š   

```ts
export type Flatten<T> = { [K in keyof T]: T[K] };

export type MarkPropsAsOptional<
  T extends object,
  K extends keyof T = keyof T
> = Flatten<Partial<Pick<T, K>> & Omit<T, K>>;
```

<img src="https://oweqian.oss-cn-hangzhou.aliyuncs.com/ts/img_06.png" alt="" width="700" />  

å®ç°å…¶å®ƒç±»å‹çš„éƒ¨åˆ†ä¿®é¥°ï¼š   

```ts
type MakePropsAsRequired<T extends object, K extends keyof T = keyof T> = Flatten<Required<Pick<T, K>> & Omit<T, K>>;

type MakePropsAsReadonly<T extends object, K extends keyof T = keyof T> = Flatten<Readonly<Pick<T, K>> & Omit<T, K>>;

type MakePropsAsNullable<T extends object, K extends keyof T = keyof T> = Flatten<Nullable<Pick<T, K>> & Omit<T, K>>;

type MakePropsAsNonNullable<T extends object, K extends keyof T = keyof T> = Flatten<NonNullable<Pick<T, K>> & Omit<T, K>>;
```